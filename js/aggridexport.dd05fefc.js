(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["aggridexport"],{6597:function(t,e,r){"use strict";r("cb16")},"73c4":function(t,e,r){"use strict";r.r(e);var n=r("7265"),o=function(){var t=this,e=t._self._c;return e("div",[e(n["a"],{staticClass:"ma-2",on:{click:function(e){return t.exportToExcel()}}},[t._v(" Export to Excel ")]),e(n["a"],{staticClass:"ma-2",on:{click:function(e){return t.exportToCsv()}}},[t._v(" Export to Csv ")]),e("ag-grid-vue",{staticClass:"ag-theme-alpine",staticStyle:{height:"65vh"},attrs:{"column-defs":t.columnDefs,"row-data":t.rowData,"grid-options":t.gridOptions,"excel-styles":t.excelStyles},on:{"first-data-rendered":t.onFirstDataRendered}}),e("p",[t._v("对于长数字 csv数字转为字符串就没问题")]),e("p",[t._v("整数位数字多于21位已经超出了 JavaScript 精确整数范围 ?9007199254740992 至 9007199254740992 （即正负2的53次方）")]),t._m(0)],1)},i=[function(){var t=this,e=t._self._c;return e("p",[t._v(" 导出的excel为科学记数法，要修改为cellClass的dataType: 'String',然后再导出 参考文档 "),e("a",{attrs:{href:"https://www.ag-grid.com/angular-data-grid/excel-export-data-types/"}},[t._v("https://www.ag-grid.com/angular-data-grid/excel-export-data-types/")])])}],a=r("2c53"),s=function(){function t(){this.ieCompatibility=!1}return t.prototype.init=function(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")},t.prototype.md5cycle=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3];r=this.ff(r,n,o,i,e[0],7,-680876936),i=this.ff(i,r,n,o,e[1],12,-389564586),o=this.ff(o,i,r,n,e[2],17,606105819),n=this.ff(n,o,i,r,e[3],22,-1044525330),r=this.ff(r,n,o,i,e[4],7,-176418897),i=this.ff(i,r,n,o,e[5],12,1200080426),o=this.ff(o,i,r,n,e[6],17,-1473231341),n=this.ff(n,o,i,r,e[7],22,-45705983),r=this.ff(r,n,o,i,e[8],7,1770035416),i=this.ff(i,r,n,o,e[9],12,-1958414417),o=this.ff(o,i,r,n,e[10],17,-42063),n=this.ff(n,o,i,r,e[11],22,-1990404162),r=this.ff(r,n,o,i,e[12],7,1804603682),i=this.ff(i,r,n,o,e[13],12,-40341101),o=this.ff(o,i,r,n,e[14],17,-1502002290),n=this.ff(n,o,i,r,e[15],22,1236535329),r=this.gg(r,n,o,i,e[1],5,-165796510),i=this.gg(i,r,n,o,e[6],9,-1069501632),o=this.gg(o,i,r,n,e[11],14,643717713),n=this.gg(n,o,i,r,e[0],20,-373897302),r=this.gg(r,n,o,i,e[5],5,-701558691),i=this.gg(i,r,n,o,e[10],9,38016083),o=this.gg(o,i,r,n,e[15],14,-660478335),n=this.gg(n,o,i,r,e[4],20,-405537848),r=this.gg(r,n,o,i,e[9],5,568446438),i=this.gg(i,r,n,o,e[14],9,-1019803690),o=this.gg(o,i,r,n,e[3],14,-187363961),n=this.gg(n,o,i,r,e[8],20,1163531501),r=this.gg(r,n,o,i,e[13],5,-1444681467),i=this.gg(i,r,n,o,e[2],9,-51403784),o=this.gg(o,i,r,n,e[7],14,1735328473),n=this.gg(n,o,i,r,e[12],20,-1926607734),r=this.hh(r,n,o,i,e[5],4,-378558),i=this.hh(i,r,n,o,e[8],11,-2022574463),o=this.hh(o,i,r,n,e[11],16,1839030562),n=this.hh(n,o,i,r,e[14],23,-35309556),r=this.hh(r,n,o,i,e[1],4,-1530992060),i=this.hh(i,r,n,o,e[4],11,1272893353),o=this.hh(o,i,r,n,e[7],16,-155497632),n=this.hh(n,o,i,r,e[10],23,-1094730640),r=this.hh(r,n,o,i,e[13],4,681279174),i=this.hh(i,r,n,o,e[0],11,-358537222),o=this.hh(o,i,r,n,e[3],16,-722521979),n=this.hh(n,o,i,r,e[6],23,76029189),r=this.hh(r,n,o,i,e[9],4,-640364487),i=this.hh(i,r,n,o,e[12],11,-421815835),o=this.hh(o,i,r,n,e[15],16,530742520),n=this.hh(n,o,i,r,e[2],23,-995338651),r=this.ii(r,n,o,i,e[0],6,-198630844),i=this.ii(i,r,n,o,e[7],10,1126891415),o=this.ii(o,i,r,n,e[14],15,-1416354905),n=this.ii(n,o,i,r,e[5],21,-57434055),r=this.ii(r,n,o,i,e[12],6,1700485571),i=this.ii(i,r,n,o,e[3],10,-1894986606),o=this.ii(o,i,r,n,e[10],15,-1051523),n=this.ii(n,o,i,r,e[1],21,-2054922799),r=this.ii(r,n,o,i,e[8],6,1873313359),i=this.ii(i,r,n,o,e[15],10,-30611744),o=this.ii(o,i,r,n,e[6],15,-1560198380),n=this.ii(n,o,i,r,e[13],21,1309151649),r=this.ii(r,n,o,i,e[4],6,-145523070),i=this.ii(i,r,n,o,e[11],10,-1120210379),o=this.ii(o,i,r,n,e[2],15,718787259),n=this.ii(n,o,i,r,e[9],21,-343485551),t[0]=this.add32(r,t[0]),t[1]=this.add32(n,t[1]),t[2]=this.add32(o,t[2]),t[3]=this.add32(i,t[3])},t.prototype.cmn=function(t,e,r,n,o,i){return e=this.add32(this.add32(e,t),this.add32(n,i)),this.add32(e<<o|e>>>32-o,r)},t.prototype.ff=function(t,e,r,n,o,i,a){return this.cmn(e&r|~e&n,t,e,o,i,a)},t.prototype.gg=function(t,e,r,n,o,i,a){return this.cmn(e&n|r&~n,t,e,o,i,a)},t.prototype.hh=function(t,e,r,n,o,i,a){return this.cmn(e^r^n,t,e,o,i,a)},t.prototype.ii=function(t,e,r,n,o,i,a){return this.cmn(r^(e|~n),t,e,o,i,a)},t.prototype.md51=function(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)this.md5cycle(n,this.md5blk(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(this.md5cycle(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*r,this.md5cycle(n,o),n},t.prototype.md5blk=function(t){for(var e=[],r=0;r<64;r+=4)e[r>>2]=t.charCodeAt(r)+(t.charCodeAt(r+1)<<8)+(t.charCodeAt(r+2)<<16)+(t.charCodeAt(r+3)<<24);return e},t.prototype.rhex=function(t){for(var e="0123456789abcdef".split(""),r="",n=0;n<4;n++)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r},t.prototype.hex=function(t){for(var e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")},t.prototype.md5=function(t){return this.hex(this.md51(t))},t.prototype.add32=function(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)},t.prototype.add32Std=function(t,e){return t+e&4294967295},t.prototype.add32Compat=function(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r},t}(),l=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a};function u(t){return null==t||0===t.length}function c(t,e){return void 0===e&&(e=!1),null!=t&&(""!==t||e)}var p=function(){function t(t){this.watermarkMessage=void 0,this.document=t,this.md5=new s,this.md5.init()}return t.prototype.validateLicense=function(){if(u(t.licenseKey))this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey();else if(t.licenseKey.length>32)if(-1!==t.licenseKey.indexOf("For_Trialing_ag-Grid_Only"))this.outputInvalidLicenseKey();else{var e=t.extractLicenseComponents(t.licenseKey),r=e.md5,n=e.license,o=e.version,i=e.isTrial;r===this.md5.md5(n)?c(o)&&o?this.validateLicenseKeyForVersion(o,!!i,n):this.validateLegacyKey(n):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey()},t.extractExpiry=function(e){var r=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(t.decode(r),10))},t.extractLicenseComponents=function(e){var r=e.replace(/[\u200B-\u200D\uFEFF]/g,"");r=r.replace(/\r?\n|\r/g,"");var n=r.length-32,o=r.substring(n),i=r.substring(0,n),a=l(t.extractBracketedInformation(r),2),s=a[0],u=a[1];return{md5:o,license:i,version:s,isTrial:u}},t.prototype.getLicenseDetails=function(e){var r=t.extractLicenseComponents(e),n=r.md5,o=r.license,i=r.version,a=r.isTrial,s=n===this.md5.md5(o)&&-1===e.indexOf("For_Trialing_ag-Grid_Only"),l=null,u=null;if(s&&(u=t.extractExpiry(o),s=!isNaN(u.getTime()),a)){var c=new Date;l=u<c}return{licenseKey:e,valid:s,expiry:s?t.formatDate(u):null,version:i||"legacy",isTrial:a,trialExpired:l}},t.prototype.isDisplayWatermark=function(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!u(this.watermarkMessage)},t.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},t.prototype.getHostname=function(){var t=this.document.defaultView||window,e=t.location,r=e.hostname,n=void 0===r?"":r;return n},t.prototype.isForceWatermark=function(){var t=this.document.defaultView||window,e=t.location,r=e.pathname;return!!r&&-1!==r.indexOf("forceWatermark")},t.prototype.isWebsiteUrl=function(){var t=this.getHostname();return null!==t.match(/^((?:\w+\.)?ag-grid\.com)$/)},t.prototype.isLocalhost=function(){var t=this.getHostname();return null!==t.match(/^(?:127\.0\.0\.1|localhost)$/)},t.formatDate=function(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],r=t.getDate(),n=t.getMonth(),o=t.getFullYear();return r+" "+e[n]+" "+o},t.getGridReleaseDate=function(){return new Date(parseInt(t.decode(t.RELEASE_INFORMATION),10))},t.decode=function(e){var r,n,o,i,a,s,l,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",p=0,d=e.replace(/[^A-Za-z0-9+/=]/g,"");while(p<d.length)i=u.indexOf(d.charAt(p++)),a=u.indexOf(d.charAt(p++)),s=u.indexOf(d.charAt(p++)),l=u.indexOf(d.charAt(p++)),r=i<<2|a>>4,n=(15&a)<<4|s>>2,o=(3&s)<<6|l,c+=String.fromCharCode(r),64!=s&&(c+=String.fromCharCode(n)),64!=l&&(c+=String.fromCharCode(o));return c=t.utf8_decode(c),c},t.utf8_decode=function(t){t=t.replace(/rn/g,"n");for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},t.setLicenseKey=function(t){this.licenseKey=t},t.extractBracketedInformation=function(t){var e=t.split("[").filter((function(t){return t.indexOf("]")>-1})).map((function(t){return t.split("]")[0]}));if(!e||0===e.length)return[null,null];var r=1===e.filter((function(t){return"TRIAL"===t})).length,n=e.filter((function(t){return 0===t.indexOf("v")})).map((function(t){return t.replace(/^v/,"")}))[0];return[n,r]},t.prototype.validateLicenseKeyForVersion=function(t,e,r){"2"===t&&(e?this.validateForTrial(r):this.validateLegacyKey(r))},t.prototype.validateLegacyKey=function(e){var r=t.getGridReleaseDate(),n=t.extractExpiry(e),o=!1,i=!1;if(isNaN(n.getTime())||(o=!0,i=r<n),o){if(!i){var a=t.formatDate(n),s=t.formatDate(r);this.outputIncompatibleVersion(a,s)}}else this.outputInvalidLicenseKey()},t.prototype.validateForTrial=function(e){var r=t.extractExpiry(e),n=new Date,o=!1,i=!1;if(isNaN(r.getTime())||(o=!0,i=r>n),o){if(!i){var a=t.formatDate(r);this.outputExpiredTrialKey(a)}}else this.outputInvalidLicenseKey()},t.prototype.outputInvalidLicenseKey=function(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},t.prototype.outputExpiredTrialKey=function(t){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on "+t+".                                                *"),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},t.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},t.prototype.outputIncompatibleVersion=function(t,e){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on "+t+", however the version of AG Grid you    *"),console.error("* are trying to use was released on "+e+".                                                               *"),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"},t.RELEASE_INFORMATION="MTY5ODkxNzc1MzgxNA==",t}(),d=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),h=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.validateLicense=function(){this.licenseManager=new p(this.gridOptionsService.getDocument()),this.licenseManager.validateLicense()},e.getLicenseDetails=function(t){return new p(null).getLicenseDetails(t)},e.prototype.isDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},e.prototype.getWatermarkMessage=function(){return this.licenseManager.getWatermarkMessage()},e.setLicenseKey=function(t){p.setLicenseKey(t)},h([a["gb"]],e.prototype,"validateLicense",null),e=h([Object(a["y"])("licenseManager")],e),e}(a["z"]),v=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),y=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},g=function(t){function e(){return t.call(this,'<div class="ag-watermark">\n                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n            </div>')||this}return v(e,t),e.prototype.postConstruct=function(){var t=this,e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout((function(){return t.addCssClass("ag-opacity-zero")}),0),window.setTimeout((function(){return t.setDisplayed(!1)}),5e3))},e.prototype.shouldDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},y([Object(a["u"])("licenseManager")],e.prototype,"licenseManager",void 0),y([Object(a["kb"])("eLicenseTextRef")],e.prototype,"eLicenseTextRef",void 0),y([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),m="30.2.1",b={version:m,moduleName:a["Z"].EnterpriseCoreModule,beans:[f],agStackComponents:[{componentName:"AgWatermark",componentClass:g}]},C=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),S=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},w=function(t){function e(e){var r=t.call(this,'\n            <div class="ag-advanced-filter-header" role="row">\n            </div>')||this;return r.enabled=e,r}return C(e,t),e.prototype.postConstruct=function(){var t=this;this.setupAdvancedFilter(this.enabled),this.addDestroyFunc((function(){return t.destroyBean(t.eAdvancedFilter)})),this.addManagedListener(this.eventService,a["R"].EVENT_GRID_COLUMNS_CHANGED,(function(){return t.onGridColumnsChanged()})),this.addGuiEventListener("keydown",(function(e){return t.onKeyDown(e)})),this.addGuiEventListener("focusout",(function(e){t.getFocusableElement().contains(e.relatedTarget)||t.focusService.clearAdvancedFilterColumn()}))},e.prototype.getFocusableElement=function(){var t,e;return null!==(e=null===(t=this.eAdvancedFilter)||void 0===t?void 0:t.getGui())&&void 0!==e?e:this.getGui()},e.prototype.setEnabled=function(t){t!==this.enabled&&this.setupAdvancedFilter(t)},e.prototype.refresh=function(){var t;null===(t=this.eAdvancedFilter)||void 0===t||t.refresh()},e.prototype.getHeight=function(){return this.height},e.prototype.setInputDisabled=function(t){var e;null===(e=this.eAdvancedFilter)||void 0===e||e.setInputDisabled(t)},e.prototype.setupAdvancedFilter=function(t){var e=this.getGui();if(t){this.eAdvancedFilter=this.createBean(new ct);var r=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCssClass("ag-advanced-filter-header-cell"),this.height=this.columnModel.getFloatingFiltersHeight();var n=this.height+"px";e.style.height=n,e.style.minHeight=n,this.setAriaRowIndex(),a["Bb"].setAriaRole(r,"gridcell"),a["Bb"].setAriaColIndex(r,1),this.setAriaColumnCount(r),e.appendChild(r)}else a["Bb"].clearElement(e),this.destroyBean(this.eAdvancedFilter),this.height=0;a["Bb"].setDisplayed(e,t),this.enabled=t},e.prototype.setAriaColumnCount=function(t){var e,r;a["Bb"].setAriaColSpan(t,null!==(r=null===(e=this.columnModel.getAllGridColumns())||void 0===e?void 0:e.length)&&void 0!==r?r:0)},e.prototype.setAriaRowIndex=function(){a["Bb"].setAriaRowIndex(this.getGui(),this.headerNavigationService.getHeaderRowCount())},e.prototype.onGridColumnsChanged=function(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())},e.prototype.onKeyDown=function(t){switch(t.key){case a["X"].ENTER:this.hasFocus()&&this.focusService.focusInto(this.getFocusableElement())&&t.preventDefault();break;case a["X"].ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case a["X"].UP:this.navigateUpDown(!0,t);break;case a["X"].DOWN:this.navigateUpDown(!1,t);break;case a["X"].TAB:if(this.hasFocus())this.navigateLeftRight(t);else{var e=this.focusService.findNextFocusableElement(this.getFocusableElement(),null,t.shiftKey);e?(t.preventDefault(),e.focus()):this.navigateLeftRight(t)}break}},e.prototype.navigateUpDown=function(t,e){this.hasFocus()&&this.focusService.focusNextFromAdvancedFilter(t)&&e.preventDefault()},e.prototype.navigateLeftRight=function(t){(t.shiftKey?this.focusService.focusLastHeader():this.focusService.focusNextFromAdvancedFilter(!1,!0))&&t.preventDefault()},e.prototype.hasFocus=function(){var t=this.gridOptionsService.getDocument();return t.activeElement===this.getFocusableElement()},S([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),S([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),S([Object(a["u"])("headerNavigationService")],e.prototype,"headerNavigationService",void 0),S([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),x=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),O=function(){return O=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},O.apply(this,arguments)},E=function(t){function e(e){var r=t.call(this,O(O({},e),{template:'\n                <div class="ag-picker-field" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return r.params=e,r}return x(e,t),e.prototype.showPicker=function(){var e=this;setTimeout((function(){return t.prototype.showPicker.call(e)}))},e.prototype.hidePicker=function(){var e=this;setTimeout((function(){return t.prototype.hidePicker.call(e)}))},e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.params,r=e.wrapperClassName,n=e.ariaLabel;a["Bb"].setDisplayed(this.eDisplayField,!1),r&&this.eWrapper.classList.add(r),a["Bb"].setAriaLabelledBy(this.eWrapper,""),a["Bb"].setAriaLabel(this.eWrapper,n)},e.prototype.onEnterKeyDown=function(e){a["Bb"].stopPropagationForAgGrid(e),this.isPickerDisplayed?t.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},e}(a["o"]),T=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),P=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},D=function(t){function e(e,r){var n=t.call(this)||this;return n.comp=e,n.virtualList=r,n}return T(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new a["yb"](this.comp,this.virtualList,{dragSourceType:a["P"].AdvancedFilterBuilder,listItemDragStartEvent:e.EVENT_DRAG_STARTED,listItemDragEndEvent:e.EVENT_DRAG_ENDED,eventSource:this,getCurrentDragValue:function(e){return t.getCurrentDragValue(e)},isMoveBlocked:function(){return!1},getNumRows:function(t){return t.getNumItems()},moveItem:function(e,r){return t.moveItem(e,r)}}))},e.prototype.getCurrentDragValue=function(t){return t.item},e.prototype.moveItem=function(t,e){this.comp.moveItem(t,e)},e.EVENT_DRAG_STARTED="advancedFilterBuilderDragStarted",e.EVENT_DRAG_ENDED="advancedFilterBuilderDragEnded",P([a["fb"]],e.prototype,"postConstruct",null),e}(a["z"]),A=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),M=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},R=function(t){function e(e,r,n){var o=t.call(this)||this;return o.eGui=e,o.focusWrapper=r,o.eFocusableComp=n,o}return A(e,t),e.prototype.postConstruct=function(){var t=this;this.addManagedListener(this.eGui,"keydown",(function(e){switch(e.key){case a["X"].TAB:e.defaultPrevented||a["Bb"].stopPropagationForAgGrid(e);break;case a["X"].UP:case a["X"].DOWN:a["Bb"].stopPropagationForAgGrid(e);break;case a["X"].ESCAPE:if(a["Bb"].isStopPropagationForAgGrid(e))return;var r=t.gridOptionsService.getDocument();t.eGui.contains(r.activeElement)&&(e.preventDefault(),a["Bb"].stopPropagationForAgGrid(e),t.focusWrapper.focus());break}})),this.addManagedListener(this.focusWrapper,"keydown",(function(e){switch(e.key){case a["X"].ENTER:if(a["Bb"].isStopPropagationForAgGrid(e))return;var r=t.gridOptionsService.getDocument();r.activeElement===t.focusWrapper&&(e.preventDefault(),a["Bb"].stopPropagationForAgGrid(e),t.eFocusableComp.getFocusableElement().focus());break}})),this.addManagedListener(this.focusWrapper,"focusin",(function(){t.focusWrapper.classList.add("ag-advanced-filter-builder-virtual-list-item-highlight")})),this.addManagedListener(this.focusWrapper,"focusout",(function(e){t.focusWrapper.contains(e.relatedTarget)||t.focusWrapper.classList.remove("ag-advanced-filter-builder-virtual-list-item-highlight")}))},M([a["fb"]],e.prototype,"postConstruct",null),e}(a["z"]);function _(t,e){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:t("advancedFilterBuilderAddCondition")},{key:"join",displayValue:t("advancedFilterBuilderAddJoin")}],valueFormatter:function(t){var e;return null==t?null:null!==(e=t.displayValue)&&void 0!==e?e:t.key},pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:(null!==e&&void 0!==e?e:120)+"px",wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:t("advancedFilterBuilderAddButtonTooltip")}}var k=function(){function t(){}return t.EVENT_ADDED="advancedFilterBuilderAdded",t.EVENT_MOVED="advancedFilterBuilderMoved",t.EVENT_REMOVED="advancedFilterBuilderRemoved",t.EVENT_VALUE_CHANGED="advancedFilterBuilderValueChanged",t.EVENT_VALID_CHANGED="advancedFilterBuilderValidChanged",t}(),F=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),I=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},L=function(t){function e(){var e=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this;return e.validationMessage=null,e}return F(e,t),e.prototype.init=function(t){var e=this,r=t.item,n=t.createPill;this.item=r,this.createPill=n,this.filterModel=r.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc((function(){return e.destroyBeans([e.eColumnPill,e.eOperatorPill,e.eOperandPill])}))},e.prototype.getDragName=function(){return this.filterModel.colId?this.advancedFilterExpressionService.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()},e.prototype.getAriaLabel=function(){return this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderFilterItem")+" "+this.getDragName()},e.prototype.getValidationMessage=function(){return this.validationMessage},e.prototype.getFocusableElement=function(){return this.eColumnPill.getFocusableElement()},e.prototype.setupColumnCondition=function(t){var e,r,n=this,o=this.advancedFilterExpressionService.getColumnDetails(t.colId);this.baseCellDataType=null!==(e=null===o||void 0===o?void 0:o.baseCellDataType)&&void 0!==e?e:"text",this.column=null===o||void 0===o?void 0:o.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:null!==(r=this.getColumnDisplayValue())&&void 0!==r?r:this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:function(){return{values:n.advancedFilterExpressionService.getColumnAutocompleteEntries()}},update:function(t){return n.setColumnKey(t)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),a["Bb"].exists(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())},e.prototype.createOperatorPill=function(){var t,e=this;this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:null!==(t=this.getOperatorDisplayValue())&&void 0!==t?t:this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:function(){return{values:e.getOperatorAutocompleteEntries()}},update:function(t){return e.setOperatorKey(t)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())},e.prototype.createOperandPill=function(){var t,e=this,r=null!==(t=this.getOperandDisplayValue())&&void 0!==t?t:"";this.eOperandPill=this.createPill({key:r,displayValue:r,baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:function(t){return e.setOperand(t)},ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())},e.prototype.getColumnKey=function(){return this.filterModel.colId},e.prototype.getColumnDisplayValue=function(){return this.advancedFilterExpressionService.getColumnDisplayValue(this.filterModel)},e.prototype.getOperatorKey=function(){return this.filterModel.type},e.prototype.getOperatorDisplayValue=function(){return this.advancedFilterExpressionService.getOperatorDisplayValue(this.filterModel)},e.prototype.getOperandDisplayValue=function(){return this.advancedFilterExpressionService.getOperandDisplayValue(this.filterModel,!0)},e.prototype.hasOperand=function(){return this.numOperands>0},e.prototype.getOperatorAutocompleteEntries=function(){return this.column?this.advancedFilterExpressionService.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]},e.prototype.setColumnKey=function(t){var e;this.eOperatorPill||this.createOperatorPill();var r=this.advancedFilterExpressionService.getColumnDetails(t);this.column=null===r||void 0===r?void 0:r.column;var n=null!==(e=null===r||void 0===r?void 0:r.baseCellDataType)&&void 0!==e?e:"text";this.baseCellDataType!==n&&(this.baseCellDataType=n,this.setOperatorKey(void 0),this.eOperatorPill&&(a["Bb"].removeFromParent(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=t,this.filterModel.filterType=this.baseCellDataType},e.prototype.setOperatorKey=function(t){var e=this.getNumOperands(t);e!==this.numOperands&&(this.numOperands=e,0===e?this.destroyOperandPill():(this.createOperandPill(),"number"!==this.baseCellDataType&&this.setOperand(""))),this.filterModel.type=t,this.validate()},e.prototype.setOperand=function(t){var e,r=t;this.column&&(r=null!==(e=this.advancedFilterExpressionService.getOperandModelValue(t,this.baseCellDataType,this.column))&&void 0!==e?e:""),this.filterModel.filter=r,this.validate()},e.prototype.getNumOperands=function(t){var e,r;return null!==(r=null===(e=this.advancedFilterExpressionService.getExpressionOperator(this.baseCellDataType,t))||void 0===e?void 0:e.numOperands)&&void 0!==r?r:0},e.prototype.destroyOperandPill=function(){delete this.filterModel.filter,this.getGui().removeChild(this.eOperandPill.getGui()),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0},e.prototype.validate=function(){var t=null;a["Bb"].exists(this.getColumnKey())?a["Bb"].exists(this.getOperatorKey())?this.numOperands>0&&!a["Bb"].exists(this.getOperandDisplayValue())&&(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationEnterValue")):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectOption"):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!t,t!==this.validationMessage&&(this.validationMessage=t,this.dispatchEvent({type:k.EVENT_VALID_CHANGED}))},e.prototype.getDefaultColumnDisplayValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectColumn")},e.prototype.getDefaultOptionSelectValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectOption")},I([Object(a["u"])("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),I([Object(a["u"])("valueParserService")],e.prototype,"valueParserService",void 0),e}(a["H"]),N=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),G=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},j=function(t){function e(e){var r=t.call(this,'\n            <div class="ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                <div ref="ePill" class="ag-advanced-filter-builder-pill" role="button">\n                    <span ref="eLabel" class="ag-advanced-filter-builder-pill-display"></span>\n                </div>\n            </div>\n        ')||this;return r.params=e,r.value=e.value,r}return N(e,t),e.prototype.postConstruct=function(){var t=this,e=this.params,r=e.cssClass,n=e.ariaLabel;this.ePill.classList.add(r),this.activateTabIndex([this.ePill]),this.eLabel.id=""+this.getCompId(),a["Bb"].setAriaDescribedBy(this.ePill,this.eLabel.id),a["Bb"].setAriaLabel(this.ePill,n),this.renderValue(),this.addManagedListener(this.ePill,"click",(function(e){e.preventDefault(),t.showEditor()})),this.addManagedListener(this.ePill,"keydown",(function(e){switch(e.key){case a["X"].ENTER:e.preventDefault(),a["Bb"].stopPropagationForAgGrid(e),t.showEditor();break}})),this.addDestroyFunc((function(){return t.destroyBean(t.eEditor)}))},e.prototype.getFocusableElement=function(){return this.ePill},e.prototype.showEditor=function(){var t=this;if(!this.eEditor){a["Bb"].setDisplayed(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);var e=this.eEditor.getGui();this.eEditor.addManagedListener(e,"keydown",(function(e){switch(e.key){case a["X"].ENTER:e.preventDefault(),a["Bb"].stopPropagationForAgGrid(e),t.updateValue(!0);break;case a["X"].ESCAPE:e.preventDefault(),a["Bb"].stopPropagationForAgGrid(e),t.hideEditor(!0);break}})),this.eEditor.addManagedListener(e,"focusout",(function(){t.updateValue(!1)})),this.getGui().appendChild(e),this.eEditor.getFocusableElement().focus()}},e.prototype.createEditorComp=function(t){var e;switch(t){case"text":e=new a["h"];break;case"number":e=new a["g"];break;case"date":e=new a["f"];break}return this.createBean(e)},e.prototype.hideEditor=function(t){var e=this.eEditor;e&&(this.eEditor=void 0,this.getGui().removeChild(e.getGui()),this.destroyBean(e),a["Bb"].setDisplayed(this.ePill,!0),t&&this.ePill.focus())},e.prototype.renderValue=function(){var t;this.eLabel.classList.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),a["Bb"].exists(this.value)?"number"===this.params.type?(t=this.value,this.eLabel.classList.add("ag-advanced-filter-builder-value-number")):(t='"'+this.value+'"',this.eLabel.classList.add("ag-advanced-filter-builder-value-text")):(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderEnterValue"),this.eLabel.classList.add("ag-advanced-filter-builder-value-empty")),this.eLabel.innerText=t},e.prototype.updateValue=function(t){var e;if(this.eEditor){var r=null!==(e=this.eEditor.getValue())&&void 0!==e?e:"";this.dispatchEvent({type:a["R"].EVENT_FIELD_VALUE_CHANGED,value:r}),this.value=r,this.renderValue(),this.hideEditor(t)}},G([Object(a["kb"])("ePill")],e.prototype,"ePill",void 0),G([Object(a["kb"])("eLabel")],e.prototype,"eLabel",void 0),G([Object(a["u"])("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),G([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),B=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),V=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},H=function(t){function e(){return t.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this}return B(e,t),e.prototype.init=function(t){var e=this,r=t.item,n=t.createPill,o=r.filterModel;this.filterModel=o,this.ePill=n({key:o.type,displayValue:this.advancedFilterExpressionService.parseJoinOperator(o),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:function(){return{values:e.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries()}},update:function(t){return o.type=t},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc((function(){return e.destroyBean(e.ePill)}))},e.prototype.getDragName=function(){return this.advancedFilterExpressionService.parseJoinOperator(this.filterModel)},e.prototype.getAriaLabel=function(){return this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderGroupItem")+" "+this.getDragName()},e.prototype.getValidationMessage=function(){return null},e.prototype.getFocusableElement=function(){return this.ePill.getFocusableElement()},V([Object(a["u"])("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),e}(a["H"]),z=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),U=function(){return U=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},U.apply(this,arguments)},W=function(t){function e(e){var r=t.call(this,U(U({},e),{template:'\n                <div class="ag-picker-field ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display ag-advanced-filter-builder-pill-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return r.params=e,r}return z(e,t),e.prototype.getFocusableElement=function(){return this.eWrapper},e.prototype.showPicker=function(){var e=this;setTimeout((function(){return t.prototype.showPicker.call(e)}))},e.prototype.hidePicker=function(){var e=this;setTimeout((function(){return t.prototype.hidePicker.call(e)}))},e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.params,r=e.wrapperClassName,n=e.ariaLabel;this.eWrapper.classList.add(r),a["Bb"].setAriaLabelledBy(this.eWrapper,""),a["Bb"].setAriaLabel(this.eWrapper,n)},e.prototype.createPickerComponent=function(){var e;if(!this.values){var r=this.params.getEditorParams().values;this.values=r;var n=this.value.key,o=null!==(e=r.find((function(t){return t.key===n})))&&void 0!==e?e:{key:n,displayValue:this.value.displayValue};this.value=o}return t.prototype.createPickerComponent.call(this)},e.prototype.onEnterKeyDown=function(e){a["Bb"].stopPropagationForAgGrid(e),this.isPickerDisplayed?t.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},e}(a["o"]),K=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),X=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Y=function(t){function e(e,r,n){var o=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div ref="eTreeLines" class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true"></div>\n                    <span ref="eDragHandle" class="ag-drag-handle" aria-hidden="true"></span>\n                    <span ref="eValidation" class="ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid" aria-hidden="true"></span>\n                </div>\n                <div ref="eButtons" class="ag-advanced-filter-builder-item-buttons">\n                    <span ref="eMoveUpButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <span ref="eMoveDownButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <div ref="eAddButton" role="presentation"></div>\n                    <span ref="eRemoveButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                </div>\n            </div>\n        ')||this;return o.item=e,o.dragFeature=r,o.focusWrapper=n,o.moveUpDisabled=!1,o.moveDownDisabled=!1,o}return K(e,t),e.prototype.postConstruct=function(){var t=this,e=this.item,r=e.filterModel,n=e.level,o=e.showMove,i="join"===r.filterType;if(this.ePillWrapper=this.createManagedBean(i?new H:new L),this.ePillWrapper.init({item:this.item,createPill:function(e){return t.createPill(e)}}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),0===n){var s=document.createElement("div");s.classList.add("ag-advanced-filter-builder-item-tree-line-vertical-bottom"),s.classList.add("ag-advanced-filter-builder-item-tree-line-root"),this.eTreeLines.appendChild(s),a["Bb"].setDisplayed(this.eDragHandle,!1),a["Bb"].setDisplayed(this.eButtons,!1),a["Bb"].setAriaExpanded(this.focusWrapper,!0)}else this.setupTreeLines(n),this.eDragHandle.appendChild(a["Bb"].createIconNoSpan("advancedFilterBuilderDrag",this.gridOptionsService)),this.setupValidation(),this.setupMoveButtons(o),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();a["Bb"].setAriaLevel(this.focusWrapper,n+1),this.initialiseTabGuard({}),this.createManagedBean(new R(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListener(this.ePillWrapper,k.EVENT_VALUE_CHANGED,(function(){return t.dispatchEvent({type:k.EVENT_VALUE_CHANGED})})),this.addManagedListener(this.ePillWrapper,k.EVENT_VALID_CHANGED,(function(){return t.updateValidity()}))},e.prototype.setState=function(t){var e=this.item.level;if(0!==e){var r=this.item.showMove,n=t.disableMoveUp,o=t.disableMoveDown,i=t.treeLines,s=t.showStartTreeLine;this.updateTreeLines(i,s),this.updateAriaExpanded(),r&&(this.moveUpDisabled=!!n,this.moveDownDisabled=!!o,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",n),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",o),a["Bb"].setAriaDisabled(this.eMoveUpButton,!!n),a["Bb"].setAriaDisabled(this.eMoveDownButton,!!o),this.moveUpTooltipFeature.refreshToolTip(),this.moveDownTooltipFeature.refreshToolTip())}},e.prototype.focusMoveButton=function(t){(t?this.eMoveUpButton:this.eMoveDownButton).focus()},e.prototype.afterAdd=function(){this.ePillWrapper.getFocusableElement().focus()},e.prototype.setupTreeLines=function(t){for(var e=0;e<t;e++){var r=document.createElement("div");this.eTreeLines.appendChild(r)}},e.prototype.updateTreeLines=function(t,e){for(var r=t.length-1,n=this.eTreeLines.children,o=0;o<r;o++){var i=n.item(o);i&&i.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!t[o])}var a=n.item(r);if(a){a.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");var s=t[r];a.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",s),a.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!s)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",e)},e.prototype.setupValidation=function(){var t=this;this.eValidation.appendChild(a["Bb"].createIconNoSpan("advancedFilterBuilderInvalid",this.gridOptionsService)),this.validationTooltipFeature=this.createManagedBean(new a["ub"]({getGui:function(){return t.eValidation},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.ePillWrapper.getValidationMessage()},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eValidation),this.updateValidity()},e.prototype.setupAddButton=function(){var t,e=this,r=_((function(t){return e.advancedFilterExpressionService.translate(t)}),null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.addSelectWidth),n=this.createManagedBean(new E(r));this.addManagedListener(n,a["R"].EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var r=t.value;return e.dispatchEvent({type:k.EVENT_ADDED,item:e.item,isJoin:"join"===r.key})})),this.eAddButton.appendChild(n.getGui());var o=this.createManagedBean(new a["ub"]({getGui:function(){return e.eAddButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans));o.setComp(this.eAddButton)},e.prototype.setupRemoveButton=function(){var t=this;this.eRemoveButton.appendChild(a["Bb"].createIconNoSpan("advancedFilterBuilderRemove",this.gridOptionsService)),this.addManagedListener(this.eRemoveButton,"click",(function(){return t.removeItem()})),this.addManagedListener(this.eRemoveButton,"keydown",(function(e){switch(e.key){case a["X"].ENTER:e.preventDefault(),a["Bb"].stopPropagationForAgGrid(e),t.removeItem();break}}));var e=this.createManagedBean(new a["ub"]({getGui:function(){return t.eRemoveButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")}},this.beans));e.setComp(this.eRemoveButton),a["Bb"].setAriaLabel(this.eRemoveButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])},e.prototype.setupMoveButtons=function(t){var e=this;t?(this.eMoveUpButton.appendChild(a["Bb"].createIconNoSpan("advancedFilterBuilderMoveUp",this.gridOptionsService)),this.addManagedListener(this.eMoveUpButton,"click",(function(){return e.moveItem(!0)})),this.addManagedListener(this.eMoveUpButton,"keydown",(function(t){switch(t.key){case a["X"].ENTER:t.preventDefault(),a["Bb"].stopPropagationForAgGrid(t),e.moveItem(!0);break}})),this.moveUpTooltipFeature=this.createManagedBean(new a["ub"]({getGui:function(){return e.eMoveUpButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.moveUpDisabled?null:e.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")}},this.beans)),this.moveUpTooltipFeature.setComp(this.eMoveUpButton),a["Bb"].setAriaLabel(this.eMoveUpButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild(a["Bb"].createIconNoSpan("advancedFilterBuilderMoveDown",this.gridOptionsService)),this.addManagedListener(this.eMoveDownButton,"click",(function(){return e.moveItem(!1)})),this.addManagedListener(this.eMoveDownButton,"keydown",(function(t){switch(t.key){case a["X"].ENTER:t.preventDefault(),a["Bb"].stopPropagationForAgGrid(t),e.moveItem(!1);break}})),this.moveDownTooltipFeature=this.createManagedBean(new a["ub"]({getGui:function(){return e.eMoveDownButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.moveDownDisabled?null:e.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")}},this.beans)),this.moveDownTooltipFeature.setComp(this.eMoveDownButton),a["Bb"].setAriaLabel(this.eMoveDownButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):(a["Bb"].setDisplayed(this.eMoveUpButton,!1),a["Bb"].setDisplayed(this.eMoveDownButton,!1))},e.prototype.updateValidity=function(){a["Bb"].setVisible(this.eValidation,!this.item.valid),this.validationTooltipFeature.refreshToolTip(),this.updateAriaLabel()},e.prototype.createPill=function(t){var e,r,n=this,o=t.key,i=t.displayValue,s=t.cssClass,l=t.update,u=t.ariaLabel,c=function(t){null!=t&&(l(t),n.dispatchEvent({type:k.EVENT_VALUE_CHANGED}))};if(t.isSelect){var p=t.getEditorParams,d=t.pickerAriaLabelKey,h=t.pickerAriaLabelValue,f=this.gridOptionsService.get("advancedFilterBuilderParams"),v=(null!==(e=null===f||void 0===f?void 0:f.pillSelectMinWidth)&&void 0!==e?e:140)+"px",y=(null!==(r=null===f||void 0===f?void 0:f.pillSelectMaxWidth)&&void 0!==r?r:200)+"px",g=this.createBean(new W({pickerAriaLabelKey:d,pickerAriaLabelValue:h,pickerType:"ag-list",value:{key:o,displayValue:i},valueFormatter:function(t){var e;return null==t?null:null!==(e=t.displayValue)&&void 0!==e?e:t.key},variableWidth:!0,minPickerWidth:v,maxPickerWidth:y,getEditorParams:p,wrapperClassName:s,ariaLabel:u}));return this.addManagedListener(g,a["R"].EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var e=t.value;return c(null===e||void 0===e?void 0:e.key)})),g}g=this.createBean(new j({value:i,cssClass:s,type:this.getInputType(t.baseCellDataType),ariaLabel:u}));return this.addManagedListener(g,a["R"].EVENT_FIELD_VALUE_CHANGED,(function(t){var e=t.value;return c(e)})),g},e.prototype.getInputType=function(t){switch(t){case"text":case"object":case"boolean":return"text";case"number":return"number";case"date":case"dateString":return"date"}},e.prototype.setupDragging=function(){var t=this,e={type:a["P"].AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:function(){return t.ePillWrapper.getDragName()},getDefaultIconName:function(){return a["O"].ICON_NOT_ALLOWED},getDragItem:function(){return{}},onDragStarted:function(){return t.dragFeature.dispatchEvent({type:D.EVENT_DRAG_STARTED,item:t.item})},onDragStopped:function(){return t.dragFeature.dispatchEvent({type:D.EVENT_DRAG_ENDED})}};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(e)}))},e.prototype.updateAriaLabel=function(){var t,e=this.ePillWrapper.getAriaLabel(),r=""+(this.item.level+1),n=this.ePillWrapper.getValidationMessage();t=n?this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItemValidation",[e,r,n]):this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[e,r]),a["Bb"].setAriaLabel(this.focusWrapper,t)},e.prototype.updateAriaExpanded=function(){a["Bb"].removeAriaExpanded(this.focusWrapper);var t=this.item.filterModel;"join"===(null===t||void 0===t?void 0:t.filterType)&&t.conditions.length&&a["Bb"].setAriaExpanded(this.focusWrapper,!0)},e.prototype.removeItem=function(){this.dispatchEvent({type:k.EVENT_REMOVED,item:this.item})},e.prototype.moveItem=function(t){this.dispatchEvent({type:k.EVENT_MOVED,item:this.item,backwards:t})},X([Object(a["kb"])("eTreeLines")],e.prototype,"eTreeLines",void 0),X([Object(a["kb"])("eDragHandle")],e.prototype,"eDragHandle",void 0),X([Object(a["kb"])("eItem")],e.prototype,"eItem",void 0),X([Object(a["kb"])("eButtons")],e.prototype,"eButtons",void 0),X([Object(a["kb"])("eValidation")],e.prototype,"eValidation",void 0),X([Object(a["kb"])("eMoveUpButton")],e.prototype,"eMoveUpButton",void 0),X([Object(a["kb"])("eMoveDownButton")],e.prototype,"eMoveDownButton",void 0),X([Object(a["kb"])("eAddButton")],e.prototype,"eAddButton",void 0),X([Object(a["kb"])("eRemoveButton")],e.prototype,"eRemoveButton",void 0),X([Object(a["u"])("beans")],e.prototype,"beans",void 0),X([Object(a["u"])("dragAndDropService")],e.prototype,"dragAndDropService",void 0),X([Object(a["u"])("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),X([a["fb"]],e.prototype,"postConstruct",null),e}(a["rb"]),q=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},J=function(t){function e(e,r){var n=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true">\n                        <div class="ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"></div>\n                    </div>\n                </div>\n            </div>\n        ')||this;return n.item=e,n.focusWrapper=r,n}return q(e,t),e.prototype.postConstruct=function(){var t,e=this;a["Bb"].setAriaLevel(this.focusWrapper,2);var r=_((function(t){return e.advancedFilterExpressionService.translate(t)}),null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.addSelectWidth),n=this.createManagedBean(new E(r));this.addManagedListener(n,a["R"].EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var r=t.value;e.dispatchEvent({type:k.EVENT_ADDED,item:e.item,isJoin:"join"===r.key})})),this.eItem.appendChild(n.getGui());var o=this.createManagedBean(new a["ub"]({getGui:function(){return n.getGui()},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans));o.setComp(n.getGui()),this.createManagedBean(new R(this.getGui(),this.focusWrapper,n)),a["Bb"].setAriaLabel(this.focusWrapper,this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip"),""+(this.item.level+1)]))},e.prototype.afterAdd=function(){},Z([Object(a["u"])("beans")],e.prototype,"beans",void 0),Z([Object(a["u"])("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),Z([Object(a["kb"])("eItem")],e.prototype,"eItem",void 0),Z([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),Q=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},tt=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},et=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},rt=function(t){function e(){var e=t.call(this,'\n            <div role="presentation" class="ag-advanced-filter-builder" tabindex="-1">\n                <div role="presentation" class="ag-advanced-filter-builder-list" ref="eList"></div>\n                <div role="presentation" class="ag-advanced-filter-builder-button-panel">\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-apply-button" ref="eApplyFilterButton"></button>\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-cancel-button" ref="eCancelFilterButton"></button>\n                </div>\n            </div>')||this;return e.validationMessage=null,e}return Q(e,t),e.prototype.postConstruct=function(){var t,e=this,r=(null!==(t=this.gridOptionsService.get("advancedFilterBuilderParams"))&&void 0!==t?t:{}).showMoveButtons;this.showMove=!!r,this.addManagedPropertyListener("advancedFilterBuilderParams",(function(t){var r=t.currentValue;e.showMove=!!(null===r||void 0===r?void 0:r.showMoveButtons),e.refreshList(!1)})),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new D(this,this.virtualList)),this.setupButtons()},e.prototype.refresh=function(){var t=this.virtualList.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),null!=t&&(this.virtualList.getComponentAt(t)||(t=0),this.virtualList.focusRow(t))},e.prototype.getNumItems=function(){return this.items.length},e.prototype.moveItem=function(t,e){e&&t&&this.moveItemToIndex(t,e.rowIndex,e.position)},e.prototype.afterGuiAttached=function(){this.virtualList.focusRow(0)},e.prototype.setupVirtualList=function(){var t=this;this.virtualList=this.createManagedBean(new a["xb"]({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderList")})),this.virtualList.setComponentCreator(this.createItemComponent.bind(this)),this.virtualList.setComponentUpdater(this.updateItemComponent.bind(this)),this.virtualList.setRowHeight(40),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return t.items.length},getRow:function(e){return t.items[e]},areRowsEqual:function(t,e){return t===e}}),this.buildList(),this.virtualList.refresh()},e.prototype.setupButtons=function(){var t=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",(function(){t.advancedFilterService.setModel(t.filterModel),t.filterManager.onFilterChanged({source:"advancedFilter"}),t.close()})),this.validationTooltipFeature=this.createManagedBean(new a["ub"]({getGui:function(){return t.eApplyFilterButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.validationMessage},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eApplyFilterButton),this.validate(),this.addManagedListener(this.eApplyFilterButton,"mouseenter",(function(){return t.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!0)})),this.addManagedListener(this.eApplyFilterButton,"mouseleave",(function(){return t.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!1)})),this.eCancelFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderCancel"),this.activateTabIndex([this.eCancelFilterButton]),this.addManagedListener(this.eCancelFilterButton,"click",(function(){return t.close()}))},e.prototype.removeItemFromParent=function(t){var e=t.parent.conditions.indexOf(t.filterModel);return t.parent.conditions.splice(e,1),e},e.prototype.moveItemToIndex=function(t,e,r){var n,o,i=this.items[e],a="join"===(null===(n=i.filterModel)||void 0===n?void 0:n.filterType)&&"bottom"===r,s=a?i.filterModel:i.parent;s&&(this.isChildOrSelf(s,t.filterModel)||i===t||(this.removeItemFromParent(t),a?o=0:(o=s.conditions.indexOf(i.filterModel),-1===o?o=s.conditions.length:"bottom"===r&&(o+=1)),s.conditions.splice(o,0,t.filterModel),this.refreshList(!1)))},e.prototype.isChildOrSelf=function(t,e){var r=this;return t===e||"join"===e.filterType&&e.conditions.some((function(e){return r.isChildOrSelf(t,e)}))},e.prototype.setupFilterModel=function(){var t=this.formatFilterModel(this.advancedFilterService.getModel());return this.stringifiedModel=JSON.stringify(t),t},e.prototype.formatFilterModel=function(t){return t=null!==t&&void 0!==t?t:{filterType:"join",type:"AND",conditions:[]},"join"!==t.filterType&&(t={filterType:"join",type:"AND",conditions:[t]}),t},e.prototype.buildList=function(){var t=this,e=function(r,n,o,i){n.push({filterModel:r,level:o,parent:i,valid:!0,showMove:t.showMove}),"join"===r.filterType&&(r.conditions.forEach((function(t){return e(t,n,o+1,r)})),0===o&&n.push({filterModel:null,level:o+1,parent:r,valid:!0}))};this.items=[],e(this.filterModel,this.items,0)},e.prototype.refreshList=function(t){if(!t){var e=[];this.items.forEach((function(t){t.valid||e.push(t.filterModel)})),this.buildList(),e.length&&this.items.forEach((function(t){t.filterModel&&e.includes(t.filterModel)&&(t.valid=!1)}))}this.virtualList.refresh(t),this.validate()},e.prototype.updateItemComponent=function(t,e){var r=this,n=this.items.indexOf(t),o=function(t,e){var n=r.items.find((function(e){return e.filterModel===t})),i=null===n||void 0===n?void 0:n.parent;if(i){var a=i.conditions;o(i,e),e.push(a[a.length-1]===t)}},i=[],a=t.filterModel;a&&(o(a,i),i[0]=!1);var s="join"===(null===a||void 0===a?void 0:a.filterType)&&!!a.conditions.length;e.setState({disableMoveUp:1===n,disableMoveDown:!this.canMoveDown(t,n),treeLines:i,showStartTreeLine:s})},e.prototype.createItemComponent=function(t,e){var r=this,n=this.createBean(t.filterModel?new Y(t,this.dragFeature,e):new J(t,e));return n.addManagedListener(n,k.EVENT_REMOVED,(function(t){var e=t.item;return r.removeItem(e)})),n.addManagedListener(n,k.EVENT_VALUE_CHANGED,(function(){return r.validate()})),n.addManagedListener(n,k.EVENT_ADDED,(function(t){var e=t.item,n=t.isJoin;return r.addItem(e,n)})),n.addManagedListener(n,k.EVENT_MOVED,(function(t){var e=t.item,n=t.backwards;return r.moveItemUpDown(e,n)})),n instanceof Y&&this.updateItemComponent(t,n),n},e.prototype.addItem=function(t,e){var r,n,o=t.parent,i=t.level,a=t.filterModel,s="join"===(null===a||void 0===a?void 0:a.filterType),l=e?{filterType:"join",type:"AND",conditions:[]}:{},u=s?a:o,c=s?0:u.conditions.indexOf(a);c>=0?(s||(c+=1),u.conditions.splice(c,0,l)):u.conditions.push(l);var p=this.items.indexOf(t),d=p>=0;if(d){t.filterModel&&p++;var h=[{filterModel:l,level:s?i+1:i,parent:u,valid:e,showMove:this.showMove}];(r=this.items).splice.apply(r,et([p,0],tt(h)))}this.refreshList(d),d&&(null===(n=this.virtualList.getComponentAt(p))||void 0===n||n.afterAdd())},e.prototype.removeItem=function(t){var e,r=t.parent,n=t.filterModel,o=r.conditions.indexOf(n);r.conditions.splice(o,1);var i="join"===(null===(e=t.filterModel)||void 0===e?void 0:e.filterType),a=this.items.indexOf(t),s=!i&&a>=0;s&&this.items.splice(a,1),this.refreshList(s),a>=0&&this.virtualList.focusRow(a)},e.prototype.moveItemUpDown=function(t,e){var r=this.items.indexOf(t),n=e?r-1:r+1;if(0!==n&&(e||this.canMoveDown(t,r))){var o=this.items[n],i=this.removeItemFromParent(t),a=t.level,s=t.filterModel,l=t.parent,u=o.level,c=o.filterModel,p=o.parent;if(e)if(u===a&&"join"===c.filterType)c.conditions.push(s);else if(u<=a){var d=p.conditions.indexOf(c);p.conditions.splice(d,0,s)}else{var h=l.conditions[i-1];h.conditions.push(s)}else if(u===a)if("join"===c.filterType)c.conditions.splice(0,0,s);else{var f=p.conditions.indexOf(c);p.conditions.splice(f+1,0,s)}else if(i<l.conditions.length)l.conditions.splice(i+1,0,s);else{var v=this.items.find((function(t){return t.filterModel===l})),y=v.parent.conditions.indexOf(v.filterModel)+1;v.parent.conditions.splice(y,0,s)}this.refreshList(!1);var g=this.items.findIndex((function(t){var e=t.filterModel;return e===s}));if(g>=0){var m=this.virtualList.getComponentAt(g);m instanceof Y&&m.focusMoveButton(e)}}},e.prototype.canMoveDown=function(t,e){return!(1===t.level&&e===this.items.length-2||1===t.level&&t.parent.conditions[t.parent.conditions.length-1]===t.filterModel)},e.prototype.close=function(){this.advancedFilterService.getCtrl().toggleFilterBuilder("ui")},e.prototype.validate=function(){var t=!this.items.every((function(t){var e=t.valid;return e}));t?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationIncomplete"):(t=JSON.stringify(this.filterModel)===this.stringifiedModel,this.validationMessage=t?this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationAlreadyApplied"):null),a["Bb"].setDisabled(this.eApplyFilterButton,t),this.validationTooltipFeature.refreshToolTip()},e.prototype.validateItems=function(){var t=this,e=function(t){t.type=void 0},r=function(t){delete t.filter};this.items.forEach((function(n){if(n.valid&&n.filterModel&&"join"!==n.filterModel.filterType){var o=n.filterModel,i=o.colId,s=t.advancedFilterExpressionService.getColumnAutocompleteEntries().find((function(t){var e=t.key;return e===i})),l=t.advancedFilterExpressionService.getColumnDetails(o.colId);if(!s||!l)return n.valid=!1,o.colId=void 0,e(o),void r(o);var u=t.advancedFilterExpressionService.getDataTypeExpressionOperator(l.baseCellDataType),c=u.operators[o.type];if(!c)return n.valid=!1,e(o),void r(o);c.numOperands>0&&!a["Bb"].exists(o.filter)&&(n.valid=!1)}}))},$([Object(a["kb"])("eList")],e.prototype,"eList",void 0),$([Object(a["kb"])("eApplyFilterButton")],e.prototype,"eApplyFilterButton",void 0),$([Object(a["kb"])("eCancelFilterButton")],e.prototype,"eCancelFilterButton",void 0),$([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),$([Object(a["u"])("advancedFilterService")],e.prototype,"advancedFilterService",void 0),$([Object(a["u"])("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),$([Object(a["u"])("beans")],e.prototype,"beans",void 0),$([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),nt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ot=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},it=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},at=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},st=function(t){function e(e){var r=t.call(this)||this;return r.enabled=e,r}return nt(e,t),e.prototype.postConstruct=function(){var t=this;this.hasAdvancedFilterParent=!!this.gridOptionsService.get("advancedFilterParent"),this.ctrlsService.whenReady((function(){return t.setAdvancedFilterComp()})),this.addManagedListener(this.eventService,a["R"].EVENT_ADVANCED_FILTER_ENABLED_CHANGED,(function(e){var r=e.enabled;return t.onEnabledChanged(r)})),this.addManagedPropertyListener("advancedFilterParent",(function(){return t.updateComps()})),this.addDestroyFunc((function(){t.destroyAdvancedFilterComp(),t.destroyBean(t.eBuilderComp),t.eBuilderDialog&&t.eBuilderDialog.isAlive()&&t.destroyBean(t.eBuilderDialog)}))},e.prototype.setupHeaderComp=function(t){this.eHeaderComp=this.createManagedBean(new w(this.enabled&&!this.hasAdvancedFilterParent)),t.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())},e.prototype.focusHeaderComp=function(){return!!this.eHeaderComp&&(this.eHeaderComp.getFocusableElement().focus(),!0)},e.prototype.refreshComp=function(){var t,e;null===(t=this.eFilterComp)||void 0===t||t.refresh(),null===(e=this.eHeaderComp)||void 0===e||e.refresh()},e.prototype.refreshBuilderComp=function(){var t;null===(t=this.eBuilderComp)||void 0===t||t.refresh()},e.prototype.getHeaderHeight=function(){var t,e;return null!==(e=null===(t=this.eHeaderComp)||void 0===t?void 0:t.getHeight())&&void 0!==e?e:0},e.prototype.setInputDisabled=function(t){var e,r;null===(e=this.eFilterComp)||void 0===e||e.setInputDisabled(t),null===(r=this.eHeaderComp)||void 0===r||r.setInputDisabled(t)},e.prototype.toggleFilterBuilder=function(t,r){var n=this;if(!(r&&this.eBuilderDialog||!1===r&&!this.eBuilderDialog)){if(this.eBuilderDialog)return this.builderDestroySource=t,void this.destroyBean(this.eBuilderDialog);this.setInputDisabled(!0);var o=this.getBuilderDialogSize(),i=o.width,s=o.height,l=o.minWidth;this.eBuilderComp=this.createBean(new rt),this.eBuilderDialog=this.createBean(new a["d"]({title:this.advancedFilterExpressionService.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:i,height:s,resizable:!0,movable:!0,maximizable:!0,centered:!0,closable:!0,minWidth:l,afterGuiAttached:function(){var t;return null===(t=n.eBuilderComp)||void 0===t?void 0:t.afterGuiAttached()}})),this.dispatchFilterBuilderVisibleChangedEvent(t,!0),this.eBuilderDialog.addEventListener(a["d"].EVENT_DESTROYED,(function(){var t;n.destroyBean(n.eBuilderComp),n.eBuilderComp=void 0,n.eBuilderDialog=void 0,n.setInputDisabled(!1),n.dispatchEvent({type:e.EVENT_BUILDER_CLOSED}),n.dispatchFilterBuilderVisibleChangedEvent(null!==(t=n.builderDestroySource)&&void 0!==t?t:"ui",!1),n.builderDestroySource=void 0}))}},e.prototype.dispatchFilterBuilderVisibleChangedEvent=function(t,e){var r={type:a["R"].EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED,source:t,visible:e};this.eventService.dispatchEvent(r)},e.prototype.getBuilderDialogSize=function(){var t,e,r=null!==(e=null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.minWidth)&&void 0!==e?e:500,n=this.popupService.getPopupParent(),o=Math.round(a["Bb"].getAbsoluteWidth(n))-2,i=Math.round(.75*a["Bb"].getAbsoluteHeight(n))-2,s=Math.min(Math.max(600,r),o),l=Math.min(600,i);return{width:s,height:l,minWidth:r}},e.prototype.onEnabledChanged=function(t){this.enabled=t,this.updateComps()},e.prototype.updateComps=function(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventService.dispatchEvent({type:a["R"].EVENT_HEADER_HEIGHT_CHANGED})},e.prototype.setAdvancedFilterComp=function(){var t;if(this.destroyAdvancedFilterComp(),this.enabled){var e=this.gridOptionsService.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!e,e){var r=this.createBean(new ct),n=r.getGui(),o=this.environment.getTheme().allThemes;o.length&&(t=n.classList).add.apply(t,at([],it(o))),n.classList.add(this.gridOptionsService.is("enableRtl")?"ag-rtl":"ag-ltr"),this.focusService.isKeyboardMode()&&n.classList.add(a["T"].AG_KEYBOARD_FOCUS);var i=this.ctrlsService.getGridCtrl();r.addManagedListener(i,a["R"].EVENT_KEYBOARD_FOCUS,(function(){return n.classList.add(a["T"].AG_KEYBOARD_FOCUS)})),r.addManagedListener(i,a["R"].EVENT_MOUSE_FOCUS,(function(){return n.classList.remove(a["T"].AG_KEYBOARD_FOCUS)})),e.appendChild(n),this.eFilterComp=r}}},e.prototype.setHeaderCompEnabled=function(){var t;null===(t=this.eHeaderComp)||void 0===t||t.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)},e.prototype.destroyAdvancedFilterComp=function(){this.eFilterComp&&(a["Bb"].removeFromParent(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))},e.EVENT_BUILDER_CLOSED="advancedFilterBuilderClosed",ot([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),ot([Object(a["u"])("ctrlsService")],e.prototype,"ctrlsService",void 0),ot([Object(a["u"])("popupService")],e.prototype,"popupService",void 0),ot([Object(a["u"])("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),ot([a["fb"]],e.prototype,"postConstruct",null),e}(a["z"]),lt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ut=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ct=function(t){function e(){var e=t.call(this,'\n            <div class="ag-advanced-filter" role="presentation" tabindex="-1">\n                <ag-autocomplete ref="eAutocomplete"></ag-autocomplete>\n                <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" ref="eApplyFilterButton"></button>\n                <button class="ag-advanced-filter-builder-button" ref="eBuilderFilterButton">\n                    <span ref="eBuilderFilterButtonIcon" aria-hidden="true"></span>\n                    <span class="ag-advanced-filter-builder-button-label" ref="eBuilderFilterButtonLabel"></span>\n                </button>\n            </div>')||this;return e.expressionParser=null,e.isApplyDisabled=!0,e.builderOpen=!1,e}return lt(e,t),e.prototype.postConstruct=function(){var t=this;this.eAutocomplete.setListGenerator((function(e,r){return t.generateAutocompleteListParams(r)})).setValidator((function(){return t.validateValue()})).setForceLastSelection((function(e,r){return t.forceLastSelection(e,r)})).setInputAriaLabel(this.advancedFilterExpressionService.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advancedFilterExpressionService.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListener(this.eAutocomplete,a["b"].EVENT_VALUE_CHANGED,(function(e){var r=e.value;return t.onValueChanged(r)})),this.addManagedListener(this.eAutocomplete,a["b"].EVENT_VALUE_CONFIRMED,(function(e){var r=e.isValid;return t.onValueConfirmed(r)})),this.addManagedListener(this.eAutocomplete,a["b"].EVENT_OPTION_SELECTED,(function(e){var r=e.position,n=e.updateEntry,o=e.autocompleteType;return t.onOptionSelected(r,n,o)})),this.addManagedListener(this.eAutocomplete,a["b"].EVENT_VALID_CHANGED,(function(e){var r=e.isValid,n=e.validationMessage;return t.onValidChanged(r,n)})),this.setupApplyButton(),this.setupBuilderButton()},e.prototype.refresh=function(){var t=this.advancedFilterService.getExpressionDisplayValue();this.eAutocomplete.setValue({value:null!==t&&void 0!==t?t:"",position:null===t||void 0===t?void 0:t.length,updateListOnlyIfOpen:!0})},e.prototype.setInputDisabled=function(t){this.eAutocomplete.setInputDisabled(t),a["Bb"].setDisabled(this.eApplyFilterButton,t||this.isApplyDisabled)},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="advancedFilter",e},e.prototype.setupApplyButton=function(){var t=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",(function(){return t.onValueConfirmed(t.eAutocomplete.isValid())})),a["Bb"].setDisabled(this.eApplyFilterButton,this.isApplyDisabled)},e.prototype.setupBuilderButton=function(){var t=this;this.eBuilderFilterButtonIcon.appendChild(a["Bb"].createIconNoSpan("advancedFilterBuilder",this.gridOptionsService)),this.eBuilderFilterButtonLabel.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedListener(this.eBuilderFilterButton,"click",(function(){return t.openBuilder()})),this.addManagedListener(this.advancedFilterService.getCtrl(),st.EVENT_BUILDER_CLOSED,(function(){return t.closeBuilder()}))},e.prototype.onValueChanged=function(t){var e;t=a["Bb"].makeNull(t),this.advancedFilterService.setExpressionDisplayValue(t),this.expressionParser=this.advancedFilterService.createExpressionParser(t);var r=null===(e=this.expressionParser)||void 0===e?void 0:e.parseExpression();r&&r!==t&&this.eAutocomplete.setValue({value:r,silent:!0,restoreFocus:!0})},e.prototype.onValueConfirmed=function(t){t&&!this.isApplyDisabled&&(a["Bb"].setDisabled(this.eApplyFilterButton,!0),this.advancedFilterService.applyExpression(),this.filterManager.onFilterChanged({source:"advancedFilter"}))},e.prototype.onOptionSelected=function(t,e,r){var n=this.updateExpression(t,e,r),o=n.updatedValue,i=n.updatedPosition,a=n.hideAutocomplete;this.eAutocomplete.setValue({value:o,position:i,updateListOnlyIfOpen:a,restoreFocus:!0})},e.prototype.validateValue=function(){var t,e,r;return(null===(t=this.expressionParser)||void 0===t?void 0:t.isValid())?null:null!==(r=null===(e=this.expressionParser)||void 0===e?void 0:e.getValidationMessage())&&void 0!==r?r:null},e.prototype.onValidChanged=function(t,e){this.isApplyDisabled=!t||this.advancedFilterService.isCurrentExpressionApplied(),a["Bb"].setDisabled(this.eApplyFilterButton,this.isApplyDisabled),this.setTooltip(e,1e3)},e.prototype.generateAutocompleteListParams=function(t){return this.expressionParser?this.expressionParser.getAutocompleteListParams(t):this.advancedFilterExpressionService.getDefaultAutocompleteListParams("")},e.prototype.updateExpression=function(t,e,r){var n,o;return this.advancedFilterExpressionService.updateAutocompleteCache(e,r),null!==(o=null===(n=this.expressionParser)||void 0===n?void 0:n.updateExpression(t,e,r))&&void 0!==o?o:this.advancedFilterService.getDefaultExpression(e)},e.prototype.forceLastSelection=function(t,e){var r=t.key,n=t.displayValue;return!!e.toLocaleLowerCase().match("^"+(null!==n&&void 0!==n?n:r).toLocaleLowerCase()+"\\s*$")},e.prototype.openBuilder=function(){this.builderOpen||(this.builderOpen=!0,a["Bb"].setDisabled(this.eBuilderFilterButton,!0),this.advancedFilterService.getCtrl().toggleFilterBuilder("ui"))},e.prototype.closeBuilder=function(){this.builderOpen&&(this.builderOpen=!1,a["Bb"].setDisabled(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())},ut([Object(a["kb"])("eAutocomplete")],e.prototype,"eAutocomplete",void 0),ut([Object(a["kb"])("eApplyFilterButton")],e.prototype,"eApplyFilterButton",void 0),ut([Object(a["kb"])("eBuilderFilterButton")],e.prototype,"eBuilderFilterButton",void 0),ut([Object(a["kb"])("eBuilderFilterButtonIcon")],e.prototype,"eBuilderFilterButtonIcon",void 0),ut([Object(a["kb"])("eBuilderFilterButtonLabel")],e.prototype,"eBuilderFilterButtonLabel",void 0),ut([Object(a["u"])("advancedFilterService")],e.prototype,"advancedFilterService",void 0),ut([Object(a["u"])("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),ut([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),ut([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),pt={ariaAdvancedFilterBuilderItem:function(t){return t[0]+". Level "+t[1]+". Press ENTER to edit."},ariaAdvancedFilterBuilderItemValidation:function(t){return t[0]+". Level "+t[1]+". "+t[2]+" Press ENTER to edit."},ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"starts with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:function(t){return"Expression has an error. "+t[0]+" - "+t[1]+"."},advancedFilterValidationMessageAtEnd:function(t){return"Expression has an error. "+t[0]+" at end of expression."},advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function dt(t,e,r){if(!t)return"";var n=r-e;return n?t.slice(0,t.length-n):t}function ht(t,e,r,n,o,i){var a=r+(t.length?1:0),s=0;o&&(" "===t[a]?s=1:(n+=" ",i&&(n+='"')));var l=t.slice(0,e)+n+t.slice(a);return{updatedValue:l,updatedPosition:e+n.length+s}}function ft(t,e,r){var n=e;while(n<r){var o=t[n];if(" "!==o)break;n++}return n}function vt(t,e){var r=e;while(r<t.length){var n=t[r];if(" "===n){r-=1;break}r++}return r}function yt(t,e,r,n){r!==e&&(t.expression=ht(t.expression,n-e.length+1,n,r).updatedValue)}function gt(t){return t.replace(/(['"])/,"\\$1")}var mt=function(){return mt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},mt.apply(this,arguments)},bt=function(){function t(t,e){this.params=t,this.startPosition=e,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}return t.prototype.parse=function(t,e){if(t!==wt.COL_START_CHAR||this.colName)if(t===wt.COL_END_CHAR&&this.hasStartChar){var r=this.parseColumn(!1,e);if(r)return this.hasEndChar=!0,!1;this.colName+=t}else this.colName+=t;else this.hasStartChar=!0},t.prototype.getDisplayValue=function(){return(this.hasStartChar?wt.COL_START_CHAR:"")+this.colName+(this.hasEndChar?wt.COL_END_CHAR:"")},t.prototype.getColId=function(){return this.colId},t.prototype.complete=function(t){this.parseColumn(!0,t)},t.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},t.prototype.parseColumn=function(t,e){var r;this.endPosition=e;var n=this.params.advancedFilterExpressionService.getColId(this.colName);return n&&this.hasStartChar&&(this.colId=n.colId,yt(this.params,this.colName,n.columnName,e-1),this.colName=n.columnName,this.column=this.params.columnModel.getPrimaryColumn(this.colId),this.column)?(this.baseCellDataType=null!==(r=this.params.dataTypeService.getBaseDataType(this.column))&&void 0!==r?r:"text",!0):(t&&(this.valid=!1),this.baseCellDataType="text",!1)},t}(),Ct=function(){function t(t,e,r){this.params=t,this.startPosition=e,this.baseCellDataType=r,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}return t.prototype.parse=function(t,e){if(" "===t||")"===t){var r=this.parseOperator(!1,e-1);if(r)return!0;this.operator+=t}else this.operator+=t},t.prototype.complete=function(t){this.parseOperator(!0,t)},t.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},t.prototype.getDisplayValue=function(){return this.operator},t.prototype.getOperatorKey=function(){return this.parsedOperator},t.prototype.parseOperator=function(t,e){var r=this.params.advancedFilterExpressionService.getDataTypeExpressionOperator(this.baseCellDataType),n=r.findOperator(this.operator);if(this.endPosition=e,n){this.parsedOperator=n;var o=r.operators[n];this.expectedNumOperands=o.numOperands;var i=o.displayValue;return yt(this.params,this.operator,i,e),this.operator=i,!0}var a=null===n;return!t&&a||(this.valid=!1),!1},t}(),St=function(){function t(t,e,r,n){this.params=t,this.startPosition=e,this.baseCellDataType=r,this.column=n,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}return t.prototype.parse=function(t,e){if(" "===t){if(!this.quotes)return this.parseOperand(!1,e),!0;this.operand+=t}else if(")"===t){if("number"===this.baseCellDataType||!this.quotes)return this.parseOperand(!1,e-1),!0;this.operand+=t}else if(this.operand||this.quotes||"'"!==t&&'"'!==t){if(this.quotes&&t===this.quotes)return this.parseOperand(!1,e),!1;this.operand+=t}else this.quotes=t},t.prototype.complete=function(t){this.parseOperand(!0,t)},t.prototype.getValidationError=function(){var t;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}:null},t.prototype.getRawValue=function(){return this.operand},t.prototype.getModelValue=function(){return this.modelValue},t.prototype.parseOperand=function(t,e){var r=this.params.advancedFilterExpressionService;if(this.endPosition=e,this.modelValue=this.operand,t&&this.quotes)this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationMissingQuote");else if(""===this.modelValue)this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationMissingValue");else{var n=r.getOperandModelValue(this.operand,this.baseCellDataType,this.column);switch(null!=n&&(this.modelValue=n),this.baseCellDataType){case"number":(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationNotANumber"));break;case"date":case"dateString":null==n&&(this.valid=!1,this.validationMessage=r.translate("advancedFilterValidationInvalidDate"));break}}},t}(),wt=function(){function t(t,e){this.params=t,this.startPosition=e,this.isAwaiting=!0}return t.prototype.parseExpression=function(){var t,e,r=this.startPosition,n=this.params.expression;while(r<n.length){var o=n[r];if(" "===o&&this.isAwaiting);else{if(this.isAwaiting=!1,!this.parser){var i=void 0;this.columnParser?this.operatorParser?(this.operandParser=new St(this.params,r,this.columnParser.baseCellDataType,this.columnParser.column),i=this.operandParser):(this.operatorParser=new Ct(this.params,r,this.columnParser.baseCellDataType),i=this.operatorParser):(this.columnParser=new bt(this.params,r),i=this.columnParser),this.parser=i}var a=this.parser.parse(o,r);if(null!=a){if(this.isComplete())return this.returnEndPosition(a?r-1:r,!0);this.parser=void 0,this.isAwaiting=!0}}r++}return null===(e=null===(t=this.parser)||void 0===t?void 0:t.complete)||void 0===e||e.call(t,r-1),this.returnEndPosition(r)},t.prototype.isValid=function(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)},t.prototype.getValidationError=function(){var t,e,r,n,o,i=null!==(n=null!==(e=null===(t=this.columnParser)||void 0===t?void 0:t.getValidationError())&&void 0!==e?e:null===(r=this.operatorParser)||void 0===r?void 0:r.getValidationError())&&void 0!==n?n:null===(o=this.operandParser)||void 0===o?void 0:o.getValidationError();if(i)return i;var a,s=this.params.expression.length;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(a="advancedFilterValidationMissingValue"):a="advancedFilterValidationMissingOption":a="advancedFilterValidationMissingColumn",a?{message:this.params.advancedFilterExpressionService.translate(a),startPosition:s,endPosition:s}:null},t.prototype.getFunction=function(t){var e,r,n,o=this.columnParser.getColId(),i=gt(o),a=null===(e=this.operatorParser)||void 0===e?void 0:e.getOperatorKey(),s=t.operators,l=t.evaluatorParams,u=t.operands,c=this.params.advancedFilterExpressionService.getExpressionOperator(this.columnParser.baseCellDataType,a),p=this.addToListAndGetIndex(s,c),d=this.params.advancedFilterExpressionService.getExpressionEvaluatorParams(o),h=this.addToListAndGetIndex(l,d);if(0===(null===(r=this.operatorParser)||void 0===r?void 0:r.expectedNumOperands))n="";else{var f=this.addToListAndGetIndex(u,this.getOperandValue());n=", params.operands["+f+"]"}return"params.operators["+p+"].evaluator(expressionProxy.getValue('"+i+"', node), node, params.evaluatorParams["+h+"]"+n+")"},t.prototype.getAutocompleteListParams=function(t){return this.isColumnPosition(t)?this.getColumnAutocompleteListParams(t):this.isOperatorPosition(t)?this.getOperatorAutocompleteListParams(t):this.isBeyondEndPosition(t)?void 0:{enabled:!1}},t.prototype.updateExpression=function(t,e,r){var n,o,i,a,s,l=this.params.expression;if(this.isColumnPosition(t))return ht(this.params.expression,this.startPosition,(null===(n=this.columnParser)||void 0===n?void 0:n.getColId())?this.columnParser.endPosition:vt(l,t),this.params.advancedFilterExpressionService.getColumnValue(e),!0);if(this.isOperatorPosition(t)){var u=this.getBaseCellDataTypeFromOperatorAutocompleteType(r),c=this.hasOperand(u,e.key),p=c&&this.doesOperandNeedQuotes(u),d=void 0;if(null!=(null===(o=this.operatorParser)||void 0===o?void 0:o.startPosition)&&t<this.operatorParser.startPosition)d=ht(l,t,t,null!==(i=e.displayValue)&&void 0!==i?i:e.key,c,p);else{var h=(null===(a=this.operatorParser)||void 0===a?void 0:a.getOperatorKey())?this.operatorParser.endPosition:vt(l,t);d=ht(l,ft(l,this.columnParser.endPosition+1,h),h,null!==(s=e.displayValue)&&void 0!==s?s:e.key,c,p)}return mt(mt({},d),{hideAutocomplete:!c})}return null},t.prototype.getModel=function(){var t=this.columnParser.getColId(),e={filterType:this.columnParser.baseCellDataType,colId:t,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(e.filter=this.operandParser.getModelValue()),e},t.prototype.getOperandValue=function(){var t=this.operandParser.getRawValue(),e=this.columnParser,r=e.baseCellDataType,n=e.column;switch(r){case"number":t=Number(t);break;case"date":case"dateString":t=this.params.valueParserService.parseValue(n,null,t,void 0);break}return"dateString"===r?this.params.dataTypeService.getDateParserFunction()(t):t},t.prototype.isComplete=function(){return!(!this.operatorParser||!(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))},t.prototype.isColumnPosition=function(t){return!this.columnParser||null==this.columnParser.endPosition||t<=this.columnParser.endPosition+1},t.prototype.isOperatorPosition=function(t){return!this.operatorParser||null==this.operatorParser.endPosition||t<=this.operatorParser.endPosition+1},t.prototype.isBeyondEndPosition=function(t){return this.isComplete()&&null!=this.endPosition&&t>this.endPosition+1&&this.endPosition+1<this.params.expression.length},t.prototype.returnEndPosition=function(t,e){return this.endPosition=e?t:t-1,t},t.prototype.getColumnAutocompleteListParams=function(t){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(t))},t.prototype.getColumnSearchString=function(t){var e,r,n,o,i,a=null!==(r=null===(e=this.columnParser)||void 0===e?void 0:e.getDisplayValue())&&void 0!==r?r:"",s=dt(a,t,null==(null===(n=this.columnParser)||void 0===n?void 0:n.endPosition)?this.params.expression.length:this.columnParser.endPosition+1),l=(null===(o=this.columnParser)||void 0===o?void 0:o.hasStartChar)&&s.length>0,u=(null===(i=this.columnParser)||void 0===i?void 0:i.hasEndChar)&&s.length===a.length+2;return l?s.slice(1,u?-1:void 0):s},t.prototype.getOperatorAutocompleteListParams=function(t){var e,r,n,o,i,a=null===(e=this.columnParser)||void 0===e?void 0:e.column;if(!a)return{enabled:!1};var s=this.columnParser.baseCellDataType,l=null!=(null===(r=this.operatorParser)||void 0===r?void 0:r.startPosition)&&t<this.operatorParser.startPosition?"":dt(null!==(o=null===(n=this.operatorParser)||void 0===n?void 0:n.getDisplayValue())&&void 0!==o?o:"",t,null==(null===(i=this.operatorParser)||void 0===i?void 0:i.endPosition)?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getOperatorAutocompleteEntries(a,s),"operator-"+s,l)},t.prototype.getBaseCellDataTypeFromOperatorAutocompleteType=function(t){return null===t||void 0===t?void 0:t.replace("operator-","")},t.prototype.hasOperand=function(t,e){var r,n;return!t||!e||(null!==(n=null===(r=this.params.advancedFilterExpressionService.getExpressionOperator(t,e))||void 0===r?void 0:r.numOperands)&&void 0!==n?n:0)>0},t.prototype.doesOperandNeedQuotes=function(t){return"number"!==t},t.prototype.addToListAndGetIndex=function(t,e){var r=t.length;return t.push(e),r},t.COL_START_CHAR="[",t.COL_END_CHAR="]",t}(),xt=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a};function Ot(t,e,r){var n=!1,o=t.toLocaleLowerCase(),i=o+" ",a=Object.entries(e).find((function(t){var e=xt(t,2);e[0];var a=e[1],s=r(a).toLocaleLowerCase();return s.startsWith(i)&&(n=!0),s===o}));return a?a[0]:n?null:void 0}function Et(t,e){var r=null!==e&&void 0!==e?e:Object.keys(t);return r.map((function(e){return{key:e,displayValue:t[e].displayValue}}))}var Tt,Pt=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return Et(this.operators,t)},t.prototype.findOperator=function(t){return Ot(t,this.operators,(function(t){var e=t.displayValue;return e}))},t.prototype.initOperators=function(){var t=this,e=this.params.translate;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!1,(function(t,e){return t.includes(e)}))},numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!0,(function(t,e){return!t.includes(e)}))},numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!1,(function(t,e){return t===e}))},numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!0,(function(t,e){return t!=e}))},numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!1,(function(t,e){return t.startsWith(e)}))},numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:function(e,r,n,o){return t.evaluateExpression(e,r,n,o,!1,(function(t,e){return t.endsWith(e)}))},numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:function(t){return null==t||"string"===typeof t&&0===t.trim().length},numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:function(t){return null!=t&&("string"!==typeof t||t.trim().length>0)},numOperands:0}}},t.prototype.evaluateExpression=function(t,e,r,n,o,i){return null==t?o:r.caseSensitive?i(r.valueConverter(t,e),n):i(r.valueConverter(t,e).toLocaleLowerCase(),n.toLocaleLowerCase())},t}(),Dt=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return Et(this.operators,t)},t.prototype.findOperator=function(t){return Ot(t,this.operators,(function(t){var e=t.displayValue;return e}))},t.prototype.initOperators=function(){var t=this,e=this.params,r=e.translate,n=e.equals;this.operators={equals:{displayValue:r("advancedFilterEquals"),evaluator:function(e,r,o,i){return t.evaluateSingleOperandExpression(e,r,o,i,!!o.includeBlanksInEquals,n)},numOperands:1},notEqual:{displayValue:r("advancedFilterNotEqual"),evaluator:function(e,r,o,i){return t.evaluateSingleOperandExpression(e,r,o,i,!!o.includeBlanksInEquals,(function(t,e){return!n(t,e)}))},numOperands:1},greaterThan:{displayValue:r("advancedFilterGreaterThan"),evaluator:function(e,r,n,o){return t.evaluateSingleOperandExpression(e,r,n,o,!!n.includeBlanksInGreaterThan,(function(t,e){return t>e}))},numOperands:1},greaterThanOrEqual:{displayValue:r("advancedFilterGreaterThanOrEqual"),evaluator:function(e,r,n,o){return t.evaluateSingleOperandExpression(e,r,n,o,!!n.includeBlanksInGreaterThan,(function(t,e){return t>=e}))},numOperands:1},lessThan:{displayValue:r("advancedFilterLessThan"),evaluator:function(e,r,n,o){return t.evaluateSingleOperandExpression(e,r,n,o,!!n.includeBlanksInLessThan,(function(t,e){return t<e}))},numOperands:1},lessThanOrEqual:{displayValue:r("advancedFilterLessThanOrEqual"),evaluator:function(e,r,n,o){return t.evaluateSingleOperandExpression(e,r,n,o,!!n.includeBlanksInLessThan,(function(t,e){return t<=e}))},numOperands:1},blank:{displayValue:r("advancedFilterBlank"),evaluator:function(t){return null==t},numOperands:0},notBlank:{displayValue:r("advancedFilterNotBlank"),evaluator:function(t){return null!=t},numOperands:0}}},t.prototype.evaluateSingleOperandExpression=function(t,e,r,n,o,i){return null==t?o:i(r.valueConverter(t,e),n)},t}(),At=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return Et(this.operators,t)},t.prototype.findOperator=function(t){return Ot(t,this.operators,(function(t){var e=t.displayValue;return e}))},t.prototype.initOperators=function(){var t=this.params.translate;this.operators={true:{displayValue:t("advancedFilterTrue"),evaluator:function(t){return!!t},numOperands:0},false:{displayValue:t("advancedFilterFalse"),evaluator:function(t){return!1===t},numOperands:0},blank:{displayValue:t("advancedFilterBlank"),evaluator:function(t){return null==t},numOperands:0},notBlank:{displayValue:t("advancedFilterNotBlank"),evaluator:function(t){return null!=t},numOperands:0}}},t}(),Mt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rt=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},_t=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},kt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columnNameToIdMap={},e.columnAutocompleteEntries=null,e.expressionEvaluatorParams={},e}return Mt(e,t),e.prototype.postConstruct=function(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()},e.prototype.parseJoinOperator=function(t){var e,r=t.type;return null!==(e=this.expressionJoinOperators[r])&&void 0!==e?e:r},e.prototype.getColumnDisplayValue=function(t){var e,r=t.colId,n=this.getColumnAutocompleteEntries(),o=n.find((function(t){var e=t.key;return e===r}));return o?(e=o.displayValue,this.columnNameToIdMap[e.toLocaleUpperCase()]={colId:r,columnName:e}):e=r,e},e.prototype.getOperatorDisplayValue=function(t){var e,r;return null!==(r=null===(e=this.getExpressionOperator(t.filterType,t.type))||void 0===e?void 0:e.displayValue)&&void 0!==r?r:t.type},e.prototype.getOperandModelValue=function(t,e,r){var n;switch(e){case"number":return a["Bb"].exists(t)?Number(t):null;case"date":return a["Bb"].serialiseDate(this.valueParserService.parseValue(r,null,t,void 0),!1);case"dateString":var o=this.valueParserService.parseValue(r,null,t,void 0);return a["Bb"].serialiseDate(null!==(n=this.dataTypeService.getDateParserFunction()(o))&&void 0!==n?n:null,!1)}return t},e.prototype.getOperandDisplayValue=function(t,e){var r,n,o=t,i=o.colId,s=o.filter,l=this.columnModel.getPrimaryColumn(i),u="";if(null!=s){var c=void 0;switch(t.filterType){case"number":c=null!==(r=a["Bb"].toStringOrNull(s))&&void 0!==r?r:"";break;case"date":var p=a["Bb"].parseDateTimeFromString(s);c=l?this.valueFormatterService.formatValue(l,null,p):null;break;case"dateString":var d=a["Bb"].parseDateTimeFromString(s),h=l?this.dataTypeService.getDateFormatterFunction()(null!==d&&void 0!==d?d:void 0):null;c=l?this.valueFormatterService.formatValue(l,null,h):null;break}"number"!==t.filterType&&(c=null!==(n=null!==c&&void 0!==c?c:a["Bb"].toStringOrNull(s))&&void 0!==n?n:"",e||(c='"'+c+'"')),u=e?c:" "+c}return u},e.prototype.parseColumnFilterModel=function(t){var e,r,n=null!==(e=this.getColumnDisplayValue(t))&&void 0!==e?e:"",o=null!==(r=this.getOperatorDisplayValue(t))&&void 0!==r?r:"",i=this.getOperandDisplayValue(t);return"["+n+"] "+o+i},e.prototype.updateAutocompleteCache=function(t,e){if("column"===e){var r=t.key,n=t.displayValue;this.columnNameToIdMap[t.displayValue.toLocaleUpperCase()]={colId:r,columnName:n}}},e.prototype.translate=function(t,e){var r=pt[t];return"function"===typeof r&&(r=r(e)),this.localeService.getLocaleTextFunc()(t,r,e)},e.prototype.generateAutocompleteListParams=function(t,e,r){return{enabled:!0,type:e,searchString:r,entries:t}},e.prototype.getColumnAutocompleteEntries=function(){var t,e=this;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;var r=null!==(t=this.columnModel.getAllPrimaryColumns())&&void 0!==t?t:[],n=[],o=this.gridOptionsService.is("includeHiddenColumnsInAdvancedFilter");return r.forEach((function(t){t.getColDef().filter&&(o||t.isVisible()||t.isRowGroupActive())&&n.push({key:t.getColId(),displayValue:e.columnModel.getDisplayNameForColumn(t,"advancedFilter")})})),n.sort((function(t,e){var r,n,o=null!==(r=t.displayValue)&&void 0!==r?r:"",i=null!==(n=e.displayValue)&&void 0!==n?n:"";return o<i?-1:i>o?1:0})),n},e.prototype.getOperatorAutocompleteEntries=function(t,e){var r=this.getActiveOperators(t);return this.getDataTypeExpressionOperator(e).getEntries(r)},e.prototype.getJoinOperatorAutocompleteEntries=function(){return Object.entries(this.expressionJoinOperators).map((function(t){var e=_t(t,2),r=e[0],n=e[1];return{key:r,displayValue:n}}))},e.prototype.getDefaultAutocompleteListParams=function(t){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",t)},e.prototype.getDataTypeExpressionOperator=function(t){return this.expressionOperators[t]},e.prototype.getExpressionOperator=function(t,e){var r,n;return null===(n=null===(r=this.getDataTypeExpressionOperator(t))||void 0===r?void 0:r.operators)||void 0===n?void 0:n[e]},e.prototype.getExpressionJoinOperators=function(){return this.expressionJoinOperators},e.prototype.getColId=function(t){var e=t.toLocaleUpperCase(),r=this.columnNameToIdMap[e];if(r)return r;var n=this.getColumnAutocompleteEntries(),o=n.find((function(t){var r=t.displayValue;return r.toLocaleUpperCase()===e}));if(o){var i=o.key,a=o.displayValue,s={colId:i,columnName:a};return this.columnNameToIdMap[e]=s,s}return null},e.prototype.getExpressionEvaluatorParams=function(t){var e=this,r=this.expressionEvaluatorParams[t];if(r)return r;var n=this.columnModel.getPrimaryColumn(t);if(!n)return{valueConverter:function(t){return t}};var o=this.dataTypeService.getBaseDataType(n);switch(o){case"dateString":r={valueConverter:this.dataTypeService.getDateParserFunction()};break;case"object":r=n.getColDef().filterValueGetter?{valueConverter:function(t){return t}}:{valueConverter:function(t,r){var o;return null!==(o=e.valueFormatterService.formatValue(n,r,t))&&void 0!==o?o:"function"===typeof t.toString?t.toString():""}};break;case"text":case void 0:r={valueConverter:function(t){return a["Bb"].toStringOrNull(t)}};break;default:r={valueConverter:function(t){return t}};break}var i=n.getColDef().filterParams;return i&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach((function(t){var e=i[t];e&&(r[t]=e)})),this.expressionEvaluatorParams[t]=r,r},e.prototype.getColumnDetails=function(t){var e=this.columnModel.getPrimaryColumn(t);if(!e)return null;var r=this.dataTypeService.getBaseDataType(e);return r?{column:e,baseCellDataType:r}:null},e.prototype.generateExpressionOperators=function(){var t=this,e=function(e,r){return t.translate(e,r)};return{text:new Pt({translate:e}),boolean:new At({translate:e}),object:new Pt({translate:e}),number:new Dt({translate:e,equals:function(t,e){return t===e}}),date:new Dt({translate:e,equals:function(t,e){return t.getTime()===e.getTime()}}),dateString:new Dt({translate:e,equals:function(t,e){return t.getTime()===e.getTime()}})}},e.prototype.getColumnValue=function(t){var e=t.displayValue;return""+wt.COL_START_CHAR+e+wt.COL_END_CHAR},e.prototype.generateExpressionJoinOperators=function(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}},e.prototype.getActiveOperators=function(t){var e,r=null===(e=t.getColDef().filterParams)||void 0===e?void 0:e.filterOptions;if(r){var n=r.every((function(t){return"string"===typeof t}));return n?r:void 0}},e.prototype.resetColumnCaches=function(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={}},Rt([Object(a["u"])("valueFormatterService")],e.prototype,"valueFormatterService",void 0),Rt([Object(a["u"])("valueParserService")],e.prototype,"valueParserService",void 0),Rt([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Rt([Object(a["u"])("dataTypeService")],e.prototype,"dataTypeService",void 0),Rt([a["fb"]],e.prototype,"postConstruct",null),e=Rt([Object(a["y"])("advancedFilterExpressionService")],e),e}(a["z"]),Ft=function(){function t(t){this.params=t,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}return t.prototype.parseExpression=function(t){this.operators.push(""),this.operatorStartPositions.push(t),this.operatorEndPositions.push(void 0);var e=this.params.expression;while(t<e.length){var r=e[t];if(" "===r){var n=this.parseOperator(t-1);if(n)return this.activeOperator++,t-1;this.operators[this.activeOperator]+=r}else this.operators[this.activeOperator]+=r;t++}return this.parseOperator(t-1),t},t.prototype.isValid=function(){return!this.validationError&&(!this.operators.length||!!this.parsedOperator)},t.prototype.getValidationError=function(){return this.validationError},t.prototype.getFunction=function(){return"OR"===this.parsedOperator?"||":"&&"},t.prototype.getModel=function(){return"OR"===this.parsedOperator?"OR":"AND"},t.prototype.getAutocompleteListParams=function(t,e){var r,n=this;if(null==e)r="";else{var o=this.operators[e],i=this.operatorEndPositions[e];r=dt(o,t,null==i?this.params.expression.length:i+1)}var a=this.params.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries();return(e||null==e&&this.activeOperator)&&(a=a.filter((function(t){var e=t.key;return e===n.parsedOperator}))),this.params.advancedFilterExpressionService.generateAutocompleteListParams(a,"join",r)},t.prototype.updateExpression=function(t,e,r){var n,o,i=this.params.expression,a=null!==(n=e.displayValue)&&void 0!==n?n:e.key;if(0===r)for(var s=this.operatorEndPositions.length-1;s>0;s--){var l=this.operatorEndPositions[s];null!=l&&(i=ht(i,this.operatorStartPositions[s],l,a).updatedValue)}var u=this.operatorStartPositions.length>r?this.operatorStartPositions[r]:i.length,c=null!==(o=this.operatorEndPositions.length>r?this.operatorEndPositions[r]:void 0)&&void 0!==o?o:vt(i,t);return ht(i,u,c,a,!0)},t.prototype.getNumOperators=function(){return this.operators.length},t.prototype.getLastOperatorEndPosition=function(){return this.operatorEndPositions[this.operatorEndPositions.length-1]},t.prototype.parseOperator=function(t){var e=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",r=this.params.advancedFilterExpressionService.getExpressionJoinOperators(),n=Ot(e,r,(function(t){return t}));if(n){this.operatorEndPositions[this.activeOperator]=t;var o=r[n];if(this.activeOperator){if(n!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:t-e.length+1,endPosition:t}),!1}else this.parsedOperator=n;return e!==o&&(yt(this.params,e,o,t),this.operators[this.activeOperator]=o),!0}return null!==n&&(this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:t-e.length+1,endPosition:t}),!0)},t}(),It=function(){function t(t,e){this.params=t,this.startPosition=e,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new Ft(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}return t.prototype.parseExpression=function(){var e=this.startPosition,r=this.params.expression;while(e<r.length){var n=r[e];if("("!==n||this.expectingOperator){if(")"===n)return this.endPosition=e-1,0===this.startPosition&&(this.extraEndBracket=!0),e;if(" "===n);else if(this.expectingExpression){o=new wt(this.params,e);e=o.parseExpression(),this.expressionParsers.push(o),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(e=this.operatorParser.parseExpression(e),this.expectingOperator=!1,this.expectingExpression=!0)}else{var o=new t(this.params,e+1);e=o.parseExpression(),this.expressionParsers.push(o),this.expectingExpression=!1,this.expectingOperator=!0}e++}return this.startPosition>0&&(this.missingEndBracket=!0),e},t.prototype.isValid=function(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every((function(t){return t.isValid()}))},t.prototype.getValidationError=function(){for(var t,e=this.operatorParser.getValidationError(),r=0;r<this.expressionParsers.length;r++){var n=this.expressionParsers[r].getValidationError();if(n)return e&&e.startPosition<n.startPosition?e:n}return e||(this.extraEndBracket?{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1}:(this.expressionParsers.length===this.operatorParser.getNumOperators()?t="advancedFilterValidationMissingCondition":this.missingEndBracket&&(t="advancedFilterValidationMissingEndBracket"),t?{message:this.params.advancedFilterExpressionService.translate(t),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null))},t.prototype.getFunction=function(t){var e=this.expressionParsers.length>1,r=this.expressionParsers.map((function(e){return e.getFunction(t)})).join(" "+this.operatorParser.getFunction()+" ");return e?"("+r+")":r},t.prototype.getAutocompleteListParams=function(t){if(!(null!=this.endPosition&&t>this.endPosition+1)){if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();var e=this.getExpressionParserIndex(t);if(null==e)return"("===this.params.expression[t]?{enabled:!1}:this.getColumnAutocompleteListParams();var r=this.expressionParsers[e],n=r.getAutocompleteListParams(t);if(!n){if(e<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(t,e);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){var o=this.operatorParser.getLastOperatorEndPosition();return null==o||t<=o+1?this.operatorParser.getAutocompleteListParams(t,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return")"===this.params.expression[t-1]?{enabled:!1}:this.operatorParser.getAutocompleteListParams(t)}return n}},t.prototype.updateExpression=function(t,e,r){var n,o=this.params.expression,i=this.getExpressionParserIndex(t);if(null==i){var a="column"===r?this.params.advancedFilterExpressionService.getColumnValue(e):null!==(n=e.displayValue)&&void 0!==n?n:e.key;return ht(o,this.startPosition,this.startPosition,a,!0)}var s=this.expressionParsers[i],l=s.updateExpression(t,e,r);return null==l?"column"===r?ht(o,t,o.length-1,this.params.advancedFilterExpressionService.getColumnValue(e),!0):this.operatorParser.updateExpression(t,e,i):l},t.prototype.getModel=function(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map((function(t){return t.getModel()}))}:this.expressionParsers[0].getModel()},t.prototype.getColumnAutocompleteListParams=function(){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column","")},t.prototype.getExpressionParserIndex=function(t){for(var e,r=0;r<this.expressionParsers.length;r++){var n=this.expressionParsers[r];if(n.startPosition>t)break;e=r}return e},t}(),Lt=function(){function t(t){this.params=t,this.valid=!1}return t.prototype.parseExpression=function(){this.joinExpressionParser=new It(this.params,0);var t=this.joinExpressionParser.parseExpression();return this.valid=t>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression},t.prototype.isValid=function(){return this.valid},t.prototype.getValidationMessage=function(){var t=this.joinExpressionParser.getValidationError();if(!t)return null;var e=t.message,r=t.startPosition,n=t.endPosition;return r<this.params.expression.length?this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessage",[e,this.params.expression.slice(r,n+1).trim()]):this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessageAtEnd",[e])},t.prototype.getFunction=function(){var t={operands:[],operators:[],evaluatorParams:[]},e="return "+this.joinExpressionParser.getFunction(t)+";";return{functionBody:e,params:t}},t.prototype.getAutocompleteListParams=function(t){var e;return null!==(e=this.joinExpressionParser.getAutocompleteListParams(t))&&void 0!==e?e:{enabled:!1}},t.prototype.updateExpression=function(t,e,r){return this.joinExpressionParser.updateExpression(t,e,r)},t.prototype.getModel=function(){return this.isValid()?this.joinExpressionParser.getModel():null},t}(),Nt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gt=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},jt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.appliedExpression=null,e.expression=null,e.isValid=!0,e}return Nt(e,t),e.prototype.postConstruct=function(){var t=this;this.setEnabled(this.gridOptionsService.is("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new st(this.enabled)),this.expressionProxy={getValue:function(e,r){var n=t.columnModel.getPrimaryColumn(e);return n?t.valueService.getValue(n,r,!0):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",(function(e){return t.setEnabled(!!e.currentValue)})),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,(function(e){return t.onNewColumnsLoaded(e)})),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",(function(){return t.updateValidity()}))},e.prototype.isEnabled=function(){return this.enabled},e.prototype.isFilterPresent=function(){return!!this.expressionFunction},e.prototype.doesFilterPass=function(t){return this.expressionFunction(this.expressionProxy,t,this.expressionParams)},e.prototype.getModel=function(){var t,e=this.createExpressionParser(this.appliedExpression);return null===e||void 0===e||e.parseExpression(),null!==(t=null===e||void 0===e?void 0:e.getModel())&&void 0!==t?t:null},e.prototype.setModel=function(t){var e=this,r=function(t,n){if("join"===t.filterType){var o=e.advancedFilterExpressionService.parseJoinOperator(t),i=t.conditions.map((function(t){return r(t)})).filter((function(t){return a["Bb"].exists(t)})).join(" "+o+" ");return n||t.conditions.length<=1?i:"("+i+")"}return e.advancedFilterExpressionService.parseColumnFilterModel(t)},n=t?r(t,!0):null;this.setExpressionDisplayValue(n),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()},e.prototype.getExpressionDisplayValue=function(){return this.expression},e.prototype.setExpressionDisplayValue=function(t){this.expression=t},e.prototype.isCurrentExpressionApplied=function(){return this.appliedExpression===this.expression},e.prototype.createExpressionParser=function(t){return t?new Lt({expression:t,columnModel:this.columnModel,dataTypeService:this.dataTypeService,valueParserService:this.valueParserService,advancedFilterExpressionService:this.advancedFilterExpressionService}):null},e.prototype.getDefaultExpression=function(t){var e=this.advancedFilterExpressionService.getColumnValue(t)+" ";return{updatedValue:e,updatedPosition:e.length}},e.prototype.isHeaderActive=function(){return!this.gridOptionsService.get("advancedFilterParent")},e.prototype.getCtrl=function(){return this.ctrl},e.prototype.setEnabled=function(t,e){var r=this.enabled,n="clientSide"===this.rowModel.getType();if(t&&!n&&a["Bb"].doOnce((function(){console.warn("AG Grid: Advanced Filter is only supported with the Client-Side Row Model.")}),"advancedFilterCSRM"),this.enabled=t&&n,!e&&this.enabled!==r){var o={type:a["R"].EVENT_ADVANCED_FILTER_ENABLED_CHANGED,enabled:this.enabled};this.eventService.dispatchEvent(o)}},e.prototype.applyExpression=function(){var t=this.createExpressionParser(this.expression);null===t||void 0===t||t.parseExpression(),this.applyExpressionFromParser(t)},e.prototype.applyExpressionFromParser=function(t){if(this.isValid=!t||t.isValid(),!t||!this.isValid)return this.expressionFunction=null,this.expressionParams=null,void(this.appliedExpression=null);var e=t.getFunction(),r=e.functionBody,n=e.params;this.expressionFunction=new Function("expressionProxy","node","params",r),this.expressionParams=n,this.appliedExpression=this.expression},e.prototype.updateValidity=function(){this.advancedFilterExpressionService.resetColumnCaches();var t=this.createExpressionParser(this.expression);null===t||void 0===t||t.parseExpression();var e=!t||t.isValid(),r=e!==this.isValid;return r&&(this.applyExpressionFromParser(t),this.ctrl.refreshComp()),this.ctrl.refreshBuilderComp(),r},e.prototype.onNewColumnsLoaded=function(t){var e=this;if("gridInitializing"===t.source){var r=function(){var t;return e.setModel(null!==(t=e.gridOptionsService.get("advancedFilterModel"))&&void 0!==t?t:null)};if(this.dataTypeService.isPendingInference()){this.ctrl.setInputDisabled(!0);var n=this.addManagedListener(this.eventService,a["R"].EVENT_DATA_TYPES_INFERRED,(function(){null===n||void 0===n||n(),r(),e.ctrl.setInputDisabled(!1)}))}else r()}},Gt([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),Gt([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Gt([Object(a["u"])("dataTypeService")],e.prototype,"dataTypeService",void 0),Gt([Object(a["u"])("valueParserService")],e.prototype,"valueParserService",void 0),Gt([Object(a["u"])("rowModel")],e.prototype,"rowModel",void 0),Gt([Object(a["u"])("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),Gt([a["fb"]],e.prototype,"postConstruct",null),e=Gt([Object(a["y"])("advancedFilterService")],e),e}(a["z"]),Bt="30.2.1",Vt={version:Bt,moduleName:a["Z"].AdvancedFilterModule,beans:[jt,kt],agStackComponents:[{componentName:"agAdvancedFilter",componentClass:ct}],dependantModules:[b]},Ht=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zt=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ut=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Wt=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Kt=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xt="paste",Yt="dragCopy",qt="clipboard";(function(t){t[t["CellRange"]=0]="CellRange",t[t["SelectedRows"]=1]="SelectedRows",t[t["FocusedCell"]=2]="FocusedCell"})(Tt||(Tt={}));var Zt,Jt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastPasteOperationTime=0,e.navigatorApiFailed=!1,e}var r;return Ht(e,t),r=e,e.prototype.init=function(){var t=this;this.logger=this.loggerFactory.create("ClipboardService"),"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady((function(e){t.gridCtrl=e.gridCtrl}))},e.prototype.pasteFromClipboard=function(){var t=this;this.logger.log("pasteFromClipboard");var e=!this.gridOptionsService.is("suppressClipboardApi");e&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch((function(e){a["Bb"].doOnce((function(){console.warn(e),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.readText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API")}),"clipboardApiError"),t.navigatorApiFailed=!0,t.pasteFromClipboardLegacy()})):this.pasteFromClipboardLegacy()},e.prototype.pasteFromClipboardLegacy=function(){var t=this,e=!1,r=function(r){var n=(new Date).getTime();n-t.lastPasteOperationTime<50&&(e=!0,r.preventDefault()),t.lastPasteOperationTime=n};this.executeOnTempElement((function(t){t.addEventListener("paste",r),t.focus({preventScroll:!0})}),(function(n){var o=n.value;e?t.refocusLastFocusedCell():t.processClipboardData(o),n.removeEventListener("paste",r)}))},e.prototype.refocusLastFocusedCell=function(){var t=this.focusService.getFocusedCell();t&&this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})},e.prototype.getClipboardDelimiter=function(){var t=this.gridOptionsService.get("clipboardDelimiter");return a["Bb"].exists(t)?t:"\t"},e.prototype.processClipboardData=function(t){var e=this;if(null!=t){var n=r.stringToArray(t,this.getClipboardDelimiter()),o=this.gridOptionsService.getCallback("processDataFromClipboard");if(o&&(n=o({data:n})),null!=n){this.gridOptionsService.is("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(n);var i=function(t,r,o,i){var a=e.rangeService&&e.rangeService.isMoreThanOneCell(),s=a&&!e.hasOnlyOneValueToPaste(n);s?e.pasteIntoActiveRange(n,t,r,i):e.pasteStartingFromFocusedCell(n,t,r,o,i)};this.doPasteOperation(i)}}},e.stringToArray=function(t,e){void 0===e&&(e=",");var r=[],n=function(t){return"\r"===t||"\n"===t},o=!1;if(""===t)return[[""]];for(var i,a,s,l=function(l,u,c){var p=t[c-1],d=t[c],h=t[c+1],f=function(){r[l]||(r[l]=[]),r[l][u]||(r[l][u]="")};if(f(),'"'===d&&(o?'"'===h?(r[l][u]+='"',c++):o=!1:(void 0===p||p===e||n(p))&&(o=!0)),!o&&'"'!==d){if(d===e)return u++,f(),i=l,a=u,s=c,"continue";if(n(d))return u=0,l++,f(),"\r"===d&&"\n"===h&&c++,i=l,a=u,s=c,"continue"}r[l][u]+=d,i=l,a=u,s=c},u=0,c=0,p=0;p<t.length;p++)l(u,c,p),u=i,c=a,p=s;return r},e.prototype.doPasteOperation=function(t){var e,r=this.gridOptionsService.api,n=this.gridOptionsService.columnApi,o="clipboard";if(this.eventService.dispatchEvent({type:a["R"].EVENT_PASTE_START,api:r,columnApi:n,source:o}),this.clientSideRowModel){var i=this.gridOptionsService.is("aggregateOnlyChangedColumns");e=new a["F"](i,this.clientSideRowModel.getRootNode())}var s={},l=[],u=this.focusService.getFocusedCell();t(s,l,u,e);var c=Wt([],Ut(l));e&&(this.clientSideRowModel.doAggregate(e),e.forEachChangedNodeDepthFirst((function(t){c.push(t)}))),this.rowRenderer.refreshCells({rowNodes:c}),this.dispatchFlashCells(s),this.fireRowChanged(l),this.refocusLastFocusedCell();var p={type:a["R"].EVENT_PASTE_END,source:o};this.eventService.dispatchEvent(p)},e.prototype.pasteIntoActiveRange=function(t,e,r,n){var o=this,i=this.getRangeSize()%t.length!=0,a=0,s=0,l=function(l,u,c,p){var d=p-a>=t.length;if(d){if(i)return;a+=s,s=0}var h=t[p-a];r.push(u);var f=o.gridOptionsService.getCallback("processCellFromClipboard");c.forEach((function(t,r){if(t.isCellEditable(u)&&!t.isSuppressPaste(u)){r>=h.length&&(r%=h.length);var i=o.processCell(u,t,h[r],Yt,f,!0);u.setDataValue(t,i,Xt),n&&n.addParentNode(u.parent,[t]);var a=l.rowIndex,s=l.rowPinned,c=o.cellPositionUtils.createIdFromValues({rowIndex:a,column:t,rowPinned:s});e[c]=!0}})),s++};this.iterateActiveRanges(!1,l)},e.prototype.pasteStartingFromFocusedCell=function(t,e,r,n,o){if(n){var i={rowIndex:n.rowIndex,rowPinned:n.rowPinned},a=this.columnModel.getDisplayedColumnsStartingAt(n.column);this.isPasteSingleValueIntoRange(t)?this.pasteSingleValueIntoRange(t,r,e,o):this.pasteMultipleValues(t,i,r,a,e,qt,o)}},e.prototype.isPasteSingleValueIntoRange=function(t){return this.hasOnlyOneValueToPaste(t)&&null!=this.rangeService&&!this.rangeService.isEmpty()},e.prototype.pasteSingleValueIntoRange=function(t,e,r,n){var o=this,i=t[0][0],a=function(t,a,s){e.push(a),s.forEach((function(t){return o.updateCellValue(a,t,i,r,qt,n)}))};this.iterateActiveRanges(!1,a)},e.prototype.hasOnlyOneValueToPaste=function(t){return 1===t.length&&1===t[0].length},e.prototype.copyRangeDown=function(){var t=this;if(this.rangeService&&!this.rangeService.isEmpty()){var e=[],r=function(r,n,o,i){var a=t.gridOptionsService.getCallback("processCellForClipboard"),s=t.gridOptionsService.getCallback("processCellFromClipboard"),l=function(o,l,u){e.length?(n.push(l),u.forEach((function(n,a){if(n.isCellEditable(l)&&!n.isSuppressPaste(l)){var u=t.processCell(l,n,e[a],Yt,s,!0);l.setDataValue(n,u,Xt),i&&i.addParentNode(l.parent,[n]);var c=o.rowIndex,p=o.rowPinned,d=t.cellPositionUtils.createIdFromValues({rowIndex:c,column:n,rowPinned:p});r[d]=!0}}))):u.forEach((function(r){var n=t.processCell(l,r,t.valueService.getValue(r,l),Yt,a,!1,!0);e.push(n)}))};t.iterateActiveRanges(!0,l)};this.doPasteOperation(r)}},e.prototype.removeLastLineIfBlank=function(t){var e=a["Bb"].last(t),r=e&&1===e.length&&""===e[0];if(r){if(1===t.length)return;a["Bb"].removeFromArray(t,e)}},e.prototype.fireRowChanged=function(t){var e=this;"fullRow"===this.gridOptionsService.get("editType")&&t.forEach((function(t){var r={type:a["R"].EVENT_ROW_VALUE_CHANGED,node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned};e.eventService.dispatchEvent(r)}))},e.prototype.pasteMultipleValues=function(t,e,r,n,o,i,a){var s=this,l=e,u=null!=this.clientSideRowModel&&!this.gridOptionsService.is("enableGroupEdit")&&!this.gridOptionsService.is("treeData"),c=function(){while(1){if(!l)return null;var t=s.rowPositionUtils.getRowNode(l);if(l=s.cellNavigationService.getRowBelow({rowPinned:l.rowPinned,rowIndex:l.rowIndex}),null==t)return null;var e=t.detail||t.footer||u&&t.group;if(!e)return t}};t.forEach((function(t){var e=c();e&&(t.forEach((function(t,r){return s.updateCellValue(e,n[r],t,o,i,a)})),r.push(e))}))},e.prototype.updateCellValue=function(t,e,r,n,o,i){if(t&&e&&e.isCellEditable(t)&&!e.isSuppressPaste(t)&&(!t.group||!e.isValueActive())){var a=this.processCell(t,e,r,o,this.gridOptionsService.getCallback("processCellFromClipboard"),!0);t.setDataValue(e,a,Xt);var s=t.rowIndex,l=t.rowPinned,u=this.cellPositionUtils.createIdFromValues({rowIndex:s,column:e,rowPinned:l});n[u]=!0,i&&i.addParentNode(t.parent,[e])}},e.prototype.copyToClipboard=function(t){void 0===t&&(t={}),this.copyOrCutToClipboard(t)},e.prototype.cutToClipboard=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e="api"),!this.gridOptionsService.is("suppressCutToClipboard")){var r={type:a["R"].EVENT_CUT_START,source:e};this.eventService.dispatchEvent(r),this.copyOrCutToClipboard(t,!0);var n={type:a["R"].EVENT_CUT_END,source:e};this.eventService.dispatchEvent(n)}},e.prototype.copyOrCutToClipboard=function(t,e){var r=t.includeHeaders,n=t.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = "+r),null==r&&(r=this.gridOptionsService.is("copyHeadersToClipboard")),null==n&&(n=this.gridOptionsService.is("copyGroupHeadersToClipboard"));var o={includeHeaders:r,includeGroupHeaders:n},i=!this.gridOptionsService.is("suppressCopyRowsToClipboard"),a=null;!this.rangeService||this.rangeService.isEmpty()||this.shouldSkipSingleCellRange()?i&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(o),a=Tt.SelectedRows):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(o),a=Tt.FocusedCell):(this.copySelectedRangeToClipboard(o),a=Tt.CellRange),e&&null!==a&&this.clearCellsAfterCopy(a)},e.prototype.clearCellsAfterCopy=function(t){if(this.eventService.dispatchEvent({type:a["R"].EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),t===Tt.CellRange)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(t===Tt.SelectedRows)this.clearSelectedRows();else{var e=this.focusService.getFocusedCell();if(null==e)return;var r=this.rowPositionUtils.getRowNode(e);r&&this.clearCellValue(r,e.column)}this.eventService.dispatchEvent({type:a["R"].EVENT_KEY_SHORTCUT_CHANGED_CELL_END})},e.prototype.clearSelectedRows=function(){var t,e,r,n,o=this.selectionService.getSelectedNodes(),i=this.columnModel.getAllDisplayedColumns();try{for(var a=Kt(o),s=a.next();!s.done;s=a.next()){var l=s.value;try{for(var u=(r=void 0,Kt(i)),c=u.next();!c.done;c=u.next()){var p=c.value;this.clearCellValue(l,p)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}},e.prototype.clearCellValue=function(t,e){e.isCellEditable(t)&&t.setDataValue(e,null,"clipboardService")},e.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsService.is("suppressCopySingleCellRanges")&&!this.rangeService.isMoreThanOneCell()},e.prototype.iterateActiveRanges=function(t,e,r){var n=this;if(this.rangeService&&!this.rangeService.isEmpty()){var o=this.rangeService.getCellRanges();t?this.iterateActiveRange(o[0],e,r,!0):o.forEach((function(t,i){return n.iterateActiveRange(t,e,r,i===o.length-1)}))}},e.prototype.iterateActiveRange=function(t,e,r,n){if(this.rangeService){var o=this.rangeService.getRangeStartRow(t),i=this.rangeService.getRangeEndRow(t);r&&t.columns&&r(t.columns);var a=0,s=!1;while(!s&&null!=o){var l=this.rowPositionUtils.getRowNode(o);s=this.rowPositionUtils.sameRow(o,i),e(o,l,t.columns,a++,s&&n),o=this.cellNavigationService.getRowBelow(o)}}},e.prototype.copySelectedRangeToClipboard=function(t){if(void 0===t&&(t={}),this.rangeService&&!this.rangeService.isEmpty()){var e=this.rangeService.areAllRangesAbleToMerge(),r=e?this.buildDataFromMergedRanges(t):this.buildDataFromRanges(t),n=r.data,o=r.cellsToFlash;this.copyDataToClipboard(n),this.dispatchFlashCells(o)}},e.prototype.buildDataFromMergedRanges=function(t){var e=this,r=new Set,n=this.rangeService.getCellRanges(),o=new Map,i=[],a={};n.forEach((function(t){t.columns.forEach((function(t){return r.add(t)}));var n=e.getRangeRowPositionsAndCellsToFlash(t),s=n.rowPositions,l=n.cellsToFlash;s.forEach((function(t){var e=t.rowIndex+"-"+(t.rowPinned||"null");o.get(e)||(o.set(e,!0),i.push(t))})),Object.assign(a,l)}));var s=this.columnModel.getAllDisplayedColumns(),l=Array.from(r);l.sort((function(t,e){var r=s.indexOf(t),n=s.indexOf(e);return r-n}));var u=this.buildExportParams({columns:l,rowPositions:i,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders});return{data:u,cellsToFlash:a}},e.prototype.buildDataFromRanges=function(t){var e=this,r=this.rangeService.getCellRanges(),n=[],o={};return r.forEach((function(r){var i=e.getRangeRowPositionsAndCellsToFlash(r),a=i.rowPositions,s=i.cellsToFlash;Object.assign(o,s),n.push(e.buildExportParams({columns:r.columns,rowPositions:a,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}))})),{data:n.join("\n"),cellsToFlash:o}},e.prototype.getRangeRowPositionsAndCellsToFlash=function(t){var e=this,r=[],n={},o=this.rangeService.getRangeStartRow(t),i=this.rangeService.getRangeEndRow(t),a=o;while(a){if(r.push(a),t.columns.forEach((function(t){var r=a,o=r.rowIndex,i=r.rowPinned,s=e.cellPositionUtils.createIdFromValues({rowIndex:o,column:t,rowPinned:i});n[s]=!0})),this.rowPositionUtils.sameRow(a,i))break;a=this.cellNavigationService.getRowBelow(a)}return{rowPositions:r,cellsToFlash:n}},e.prototype.copyFocusedCellToClipboard=function(t){var e;void 0===t&&(t={});var r=this.focusService.getFocusedCell();if(null!=r){var n=this.cellPositionUtils.createId(r),o={rowPinned:r.rowPinned,rowIndex:r.rowIndex},i=r.column,a=this.buildExportParams({columns:[i],rowPositions:[o],includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders});this.copyDataToClipboard(a),this.dispatchFlashCells((e={},e[n]=!0,e))}},e.prototype.copySelectedRowsToClipboard=function(t){void 0===t&&(t={});var e=t.columnKeys,r=t.includeHeaders,n=t.includeGroupHeaders,o=this.buildExportParams({columns:e,includeHeaders:r,includeGroupHeaders:n});this.copyDataToClipboard(o)},e.prototype.buildExportParams=function(t){var e=this,r=t.columns,n=t.rowPositions,o=t.includeHeaders,i=void 0!==o&&o,a=t.includeGroupHeaders,s=void 0!==a&&a,l={columnKeys:r,rowPositions:n,skipColumnHeaders:!i,skipColumnGroupHeaders:!s,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!n,processCellCallback:this.gridOptionsService.getCallback("processCellForClipboard"),processRowGroupCallback:function(t){return e.processRowGroupCallback(t)},processHeaderCallback:this.gridOptionsService.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gridOptionsService.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(l,!0)},e.prototype.processRowGroupCallback=function(t){var e=this,r=t.node,n=r.key,o=null!=n?n:"";if(t.node.footer){var i="";n&&n.length&&(i=" "+n),o="Total"+i}var a=this.gridOptionsService.getCallback("processCellForClipboard");if(a){var s=r.rowGroupColumn;return!s&&r.footer&&-1===r.level&&(s=this.columnModel.getRowGroupColumns()[0]),a({value:o,node:r,column:s,type:"clipboard",formatValue:function(t){var n;return null!==(n=e.valueFormatterService.formatValue(s,r,t))&&void 0!==n?n:t},parseValue:function(t){return e.valueParserService.parseValue(s,r,t,e.valueService.getValue(s,r))}})}return o},e.prototype.dispatchFlashCells=function(t){var e=this;window.setTimeout((function(){var r={type:a["R"].EVENT_FLASH_CELLS,cells:t};e.eventService.dispatchEvent(r)}),0)},e.prototype.processCell=function(t,e,r,n,o,i,a){var s,l=this;if(o){var u={column:e,node:t,value:r,type:n,formatValue:function(r){var n;return null!==(n=l.valueFormatterService.formatValue(e,null!==t&&void 0!==t?t:null,r))&&void 0!==n?n:r},parseValue:function(r){return l.valueParserService.parseValue(e,null!==t&&void 0!==t?t:null,r,l.valueService.getValue(e,t))}};return o(u)}return i&&e.getColDef().useValueParserForImport?this.valueParserService.parseValue(e,null!==t&&void 0!==t?t:null,r,this.valueService.getValue(e,t)):a&&e.getColDef().useValueFormatterForExport&&null!==(s=this.valueFormatterService.formatValue(e,null!==t&&void 0!==t?t:null,r))&&void 0!==s?s:r},e.prototype.copyDataToClipboard=function(t){var e=this,r=this.gridOptionsService.getCallback("sendToClipboard");if(r)r({data:t});else{var n=!this.gridOptionsService.is("suppressClipboardApi");n&&navigator.clipboard?navigator.clipboard.writeText(t).catch((function(r){a["Bb"].doOnce((function(){console.warn(r),console.warn("AG Grid: Unable to use the Clipboard API (navigator.clipboard.writeText()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.")}),"clipboardApiError"),e.copyDataToClipboardLegacy(t)})):this.copyDataToClipboardLegacy(t)}},e.prototype.copyDataToClipboardLegacy=function(t){var e=this;this.executeOnTempElement((function(r){var n=e.gridOptionsService.getDocument(),o=n.activeElement;r.value=t||" ",r.select(),r.focus({preventScroll:!0});var i=n.execCommand("copy");i||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),null!=o&&null!=o.focus&&o.focus({preventScroll:!0})}))},e.prototype.executeOnTempElement=function(t,e){var r=this.gridOptionsService.getDocument(),n=r.createElement("textarea");n.style.width="1px",n.style.height="1px",n.style.top=r.documentElement.scrollTop+"px",n.style.left=r.documentElement.scrollLeft+"px",n.style.position="absolute",n.style.opacity="0";var o=this.gridCtrl.getGui();o.appendChild(n);try{t(n)}catch(i){console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}e?window.setTimeout((function(){e(n),o.removeChild(n)}),100):o.removeChild(n)},e.prototype.getRangeSize=function(){var t=this.rangeService.getCellRanges(),e=0,r=0;return t.length>0&&(e=this.rangeService.getRangeStartRow(t[0]).rowIndex,r=this.rangeService.getRangeEndRow(t[0]).rowIndex),e-r+1},zt([Object(a["u"])("csvCreator")],e.prototype,"csvCreator",void 0),zt([Object(a["u"])("loggerFactory")],e.prototype,"loggerFactory",void 0),zt([Object(a["u"])("selectionService")],e.prototype,"selectionService",void 0),zt([Object(a["cb"])("rangeService")],e.prototype,"rangeService",void 0),zt([Object(a["u"])("rowModel")],e.prototype,"rowModel",void 0),zt([Object(a["u"])("ctrlsService")],e.prototype,"ctrlsService",void 0),zt([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),zt([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),zt([Object(a["u"])("rowRenderer")],e.prototype,"rowRenderer",void 0),zt([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),zt([Object(a["u"])("cellNavigationService")],e.prototype,"cellNavigationService",void 0),zt([Object(a["u"])("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),zt([Object(a["u"])("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),zt([Object(a["u"])("valueFormatterService")],e.prototype,"valueFormatterService",void 0),zt([Object(a["u"])("valueParserService")],e.prototype,"valueParserService",void 0),zt([a["fb"]],e.prototype,"init",null),e=r=zt([Object(a["y"])("clipboardService")],e),e}(a["z"]),Qt="30.2.1",$t={version:Qt,moduleName:a["Z"].ClipboardModule,beans:[Jt],dependantModules:[b,a["L"]]},te=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ee=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};(function(t){t[t["EXPANDED"]=0]="EXPANDED",t[t["COLLAPSED"]=1]="COLLAPSED",t[t["INDETERMINATE"]=2]="INDETERMINATE"})(Zt||(Zt={}));var re=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return te(e,t),e.prototype.postConstruct=function(){var t=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",(function(e){e.key===a["X"].SPACE&&(e.preventDefault(),t.onExpandClicked())})),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange((function(){return t.onFilterTextChanged()})),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var e=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])},e.prototype.init=function(t){this.params=t,this.columnModel.isReady()&&this.showOrHideOptions()},e.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=a["Bb"].createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=a["Bb"].createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=a["Bb"].createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService)),this.setExpandState(Zt.EXPANDED)},e.prototype.showOrHideOptions=function(){var t=!this.params.suppressColumnFilter,e=!this.params.suppressColumnSelectAll,r=!this.params.suppressColumnExpandAll,n=this.columnModel.isPrimaryColumnGroupsPresent(),o=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(o("searchOoo","Search...")),a["Bb"].setDisplayed(this.eFilterTextField.getGui(),t),a["Bb"].setDisplayed(this.eSelect.getGui(),e),a["Bb"].setDisplayed(this.eExpand,r&&n)},e.prototype.onFilterTextChanged=function(){var t=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=a["Bb"].debounce((function(){var e=t.eFilterTextField.getValue();t.dispatchEvent({type:"filterChanged",filterText:e})}),e.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},e.prototype.onMiniFilterKeyDown=function(t){var r=this;t.key===a["X"].ENTER&&setTimeout((function(){return r.onSelectClicked()}),e.DEBOUNCE_DELAY)},e.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},e.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===Zt.EXPANDED?"collapseAll":"expandAll"})},e.prototype.setExpandState=function(t){this.expandState=t,a["Bb"].setDisplayed(this.eExpandChecked,this.expandState===Zt.EXPANDED),a["Bb"].setDisplayed(this.eExpandUnchecked,this.expandState===Zt.COLLAPSED),a["Bb"].setDisplayed(this.eExpandIndeterminate,this.expandState===Zt.INDETERMINATE)},e.prototype.setSelectionState=function(t){this.selectState=t,this.eSelect.setValue(this.selectState)},e.DEBOUNCE_DELAY=300,e.TEMPLATE='<div class="ag-column-select-header" role="presentation">\n            <div ref="eExpand" class="ag-column-select-header-icon"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',ee([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),ee([Object(a["kb"])("eExpand")],e.prototype,"eExpand",void 0),ee([Object(a["kb"])("eSelect")],e.prototype,"eSelect",void 0),ee([Object(a["kb"])("eFilterTextField")],e.prototype,"eFilterTextField",void 0),ee([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),ne=function(){function t(t,e,r,n,o){void 0===n&&(n=!1),this.eventService=new a["Q"],this.displayName=t,this.dept=r,this.group=n,n?(this.columnGroup=e,this.expanded=o,this.children=[]):this.column=e}return t.prototype.isGroup=function(){return this.group},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.getColumnGroup=function(){return this.columnGroup},t.prototype.getColumn=function(){return this.column},t.prototype.getDept=function(){return this.dept},t.prototype.isExpanded=function(){return!!this.expanded},t.prototype.getChildren=function(){return this.children},t.prototype.isPassesFilter=function(){return this.passesFilter},t.prototype.setExpanded=function(e){e!==this.expanded&&(this.expanded=e,this.eventService.dispatchEvent({type:t.EVENT_EXPANDED_CHANGED}))},t.prototype.setPassesFilter=function(t){this.passesFilter=t},t.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},t.EVENT_EXPANDED_CHANGED="expandedChanged",t}(),oe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ae=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},se=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},le=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ue=function(t){function e(e,r,n){var o=t.call(this,'<div class="ag-menu"></div>')||this;return o.column=e,o.mouseEvent=r,o.parentEl=n,o.displayName=null,o}return oe(e,t),e.prototype.postConstruct=function(){this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof a["G"]?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()&&(this.mouseEvent.preventDefault(),this.displayContextMenu())},e.prototype.initializeProperties=function(t){t instanceof a["ib"]?this.columns=t.getLeafColumns():this.columns=[t],this.allowGrouping=this.columns.some((function(t){return t.isPrimary()&&t.isAllowRowGroup()})),this.allowValues=this.columns.some((function(t){return t.isPrimary()&&t.isAllowValue()})),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some((function(t){return t.isPrimary()&&t.isAllowPivot()}))},e.prototype.buildMenuItemMap=function(){var t=this,e=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(t){return t.isPrimary()&&t.isAllowRowGroup()},activeFunction:function(t){return t.isRowGroupActive()},activateLabel:function(){return e("groupBy","Group by")+" "+t.displayName},deactivateLabel:function(){return e("ungroupBy","Un-Group by")+" "+t.displayName},activateFunction:function(){var e=t.columnModel.getRowGroupColumns();t.columnModel.setRowGroupColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getRowGroupColumns();t.columnModel.setRowGroupColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(t){return t.isPrimary()&&t.isAllowValue()},activeFunction:function(t){return t.isValueActive()},activateLabel:function(){return e("addToValues","Add "+t.displayName+" to values",[t.displayName])},deactivateLabel:function(){return e("removeFromValues","Remove "+t.displayName+" from values",[t.displayName])},activateFunction:function(){var e=t.columnModel.getValueColumns();t.columnModel.setValueColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getValueColumns();t.columnModel.setValueColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(e){return t.columnModel.isPivotMode()&&e.isPrimary()&&e.isAllowPivot()},activeFunction:function(t){return t.isPivotActive()},activateLabel:function(){return e("addToLabels","Add "+t.displayName+" to labels",[t.displayName])},deactivateLabel:function(){return e("removeFromLabels","Remove "+t.displayName+" from labels",[t.displayName])},activateFunction:function(){var e=t.columnModel.getPivotColumns();t.columnModel.setPivotColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getPivotColumns();t.columnModel.setPivotColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},e.prototype.addColumnsToList=function(t){return se([],ae(t)).concat(this.columns.filter((function(e){return-1===t.indexOf(e)})))},e.prototype.removeColumnsFromList=function(t){var e=this;return t.filter((function(t){return-1===e.columns.indexOf(t)}))},e.prototype.displayContextMenu=function(){var t=this,e=this.getGui(),r=this.createBean(new a["j"]),n=this.getMappedMenuItems(),o=this.localeService.getLocaleTextFunc(),i=function(){};e.appendChild(r.getGui()),r.addMenuItems(n),r.addManagedListener(r,a["i"].EVENT_MENU_ITEM_SELECTED,(function(){t.parentEl.focus(),i()}));var s=this.popupService.addPopup({modal:!0,eChild:e,closeOnEsc:!0,afterGuiAttached:function(){return t.focusService.focusInto(r.getGui())},ariaLabel:o("ariaLabelContextMenu","Context Menu"),closedCallback:function(e){e instanceof KeyboardEvent&&t.parentEl.focus(),t.destroyBean(r)}});s&&(i=s.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:e})},e.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},e.prototype.getMappedMenuItems=function(){var t,e,r=[],n=function(t){var e=o.columns.some((function(e){return t.allowedFunction(e)&&!t.activeFunction(e)})),n=o.columns.some((function(e){return t.allowedFunction(e)&&t.activeFunction(e)}));e&&r.push({name:t.activateLabel(o.displayName),icon:a["Bb"].createIconNoSpan(t.addIcon,o.gridOptionsService,null),action:function(){return t.activateFunction()}}),n&&r.push({name:t.deactivateLabel(o.displayName),icon:a["Bb"].createIconNoSpan(t.removeIcon,o.gridOptionsService,null),action:function(){return t.deActivateFunction()}})},o=this;try{for(var i=le(this.menuItemMap.values()),s=i.next();!s.done;s=i.next()){var l=s.value;n(l)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r},ie([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),ie([Object(a["u"])("popupService")],e.prototype,"popupService",void 0),ie([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),ie([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),ce=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pe=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},de=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.modelItem=e,i.allowDragging=r,i.eventType=n,i.focusWrapper=o,i.processingColumnStateChange=!1,i.modelItem=e,i.columnGroup=e.getColumnGroup(),i.columnDept=e.getDept(),i.displayName=e.getDisplayName(),i.allowDragging=r,i}return ce(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE),this.eDragHandle=a["Bb"].createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,a["R"].EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,ne.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip();var o=a["J"].getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsService,null,this.columnGroup);o.forEach((function(e){return t.addOrRemoveCssClass(e,!0)}))},e.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},e.prototype.setupTooltip=function(){var t=this,e=this.columnGroup.getColGroupDef();if(e){var r=function(){var r=e.headerTooltip;t.setTooltip(r)};r(),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,r)}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},e.prototype.handleKeyDown=function(t){switch(t.key){case a["X"].LEFT:t.preventDefault(),this.modelItem.setExpanded(!1);break;case a["X"].RIGHT:t.preventDefault(),this.modelItem.setExpanded(!0);break;case a["X"].SPACE:t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}},e.prototype.onContextMenu=function(t){var e=this,r=this,n=r.columnGroup,o=r.gridOptionsService;if(!o.is("functionsReadOnly")){var i=this.createBean(new ue(n,t,this.focusWrapper));this.addDestroyFunc((function(){i.isAlive()&&e.destroyBean(i)}))}},e.prototype.addVisibilityListenersToAllChildren=function(){var t=this;this.columnGroup.getLeafColumns().forEach((function(e){t.addManagedListener(e,a["G"].EVENT_VISIBLE_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,a["G"].EVENT_VALUE_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,a["G"].EVENT_PIVOT_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,a["G"].EVENT_ROW_GROUP_CHANGED,t.onColumnStateChanged.bind(t))}))},e.prototype.setupDragging=function(){var t=this;if(this.allowDragging){var e=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),r={type:a["P"].ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return e?a["O"].ICON_HIDE:a["O"].ICON_NOT_ALLOWED},getDragItem:function(){return t.createDragItem()},onDragStarted:function(){e=!t.gridOptionsService.is("suppressDragLeaveHidesColumns");var r={type:a["R"].EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:t.columnGroup};t.eventService.dispatchEvent(r)},onDragStopped:function(){var e={type:a["R"].EVENT_COLUMN_PANEL_ITEM_DRAG_END};t.eventService.dispatchEvent(e)},onGridEnter:function(r){e&&t.modelItemUtils.updateColumns({columns:t.columnGroup.getLeafColumns(),visibleState:null===r||void 0===r?void 0:r.visibleState,pivotState:null===r||void 0===r?void 0:r.pivotState,eventType:t.eventType})},onGridExit:function(){e&&t.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(r)}))}else a["Bb"].setDisplayed(this.eDragHandle,!1)},e.prototype.createDragItem=function(){var t=this,e=this.columnGroup.getLeafColumns(),r={},n={};return e.forEach((function(e){var o=e.getId();r[o]=e.isVisible(),n[o]=t.modelItemUtils.createPivotState(e)})),{columns:e,visibleState:r,pivotState:n}},e.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(a["Bb"].createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(a["Bb"].createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var t=new a["vb"](this.eColumnGroupIcons,!0);this.addManagedListener(t,a["vb"].EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(t.destroy.bind(t))},e.prototype.onLabelClicked=function(){var t=!this.cbSelect.getValue();this.onChangeCommon(t)},e.prototype.onCheckboxChanged=function(t){this.onChangeCommon(t.selected)},e.prototype.getVisibleLeafColumns=function(){var t=[],e=function(r){r.forEach((function(r){r.isPassesFilter()&&(r.isGroup()?e(r.getChildren()):t.push(r.getColumn()))}))};return e(this.modelItem.getChildren()),t},e.prototype.onChangeCommon=function(t){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),t,this.eventType)},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumnGroup","Column Group"),r=this.cbSelect.getValue(),n=void 0===r?t("ariaIndeterminate","indeterminate"):r?t("ariaVisible","visible"):t("ariaHidden","hidden"),o=t("ariaToggleVisibility","Press SPACE to toggle visibility");a["Bb"].setAriaLabel(this.focusWrapper,this.displayName+" "+e),this.cbSelect.setInputAriaLabel(o+" ("+n+")"),a["Bb"].setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},e.prototype.onColumnStateChanged=function(){var t=this.workOutSelectedValue(),e=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(t),this.cbSelect.setReadOnly(e),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",e),this.processingColumnStateChange=!1},e.prototype.workOutSelectedValue=function(){var t=this,e=this.columnModel.isPivotMode(),r=this.getVisibleLeafColumns(),n=0,o=0;if(r.forEach((function(r){!e&&r.getColDef().lockVisible||(t.isColumnChecked(r,e)?n++:o++)})),!(n>0&&o>0))return n>0},e.prototype.workOutReadOnlyValue=function(){var t=this.columnModel.isPivotMode(),e=0;return this.columnGroup.getLeafColumns().forEach((function(r){t?r.isAnyFunctionAllowed()&&e++:r.getColDef().lockVisible||e++})),0===e},e.prototype.isColumnChecked=function(t,e){if(e){var r=t.isPivotActive(),n=t.isRowGroupActive(),o=t.isValueActive();return r||n||o}return t.isVisible()},e.prototype.onExpandOrContractClicked=function(){var t=this.modelItem.isExpanded();this.modelItem.setExpanded(!t)},e.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},e.prototype.setOpenClosedIcons=function(){var t=this.modelItem.isExpanded();a["Bb"].setDisplayed(this.eGroupClosedIcon,!t),a["Bb"].setDisplayed(this.eGroupOpenedIcon,t)},e.prototype.refreshAriaExpanded=function(){a["Bb"].setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.onSelectAllChanged=function(t){var e=this.cbSelect.getValue(),r=this.cbSelect.isReadOnly();!r&&(t&&!e||!t&&e)&&this.cbSelect.toggle()},e.prototype.isSelected=function(){return this.cbSelect.getValue()},e.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},e.prototype.setSelected=function(t){this.cbSelect.setValue(t,!0)},e.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',pe([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),pe([Object(a["u"])("dragAndDropService")],e.prototype,"dragAndDropService",void 0),pe([Object(a["u"])("modelItemUtils")],e.prototype,"modelItemUtils",void 0),pe([Object(a["kb"])("cbSelect")],e.prototype,"cbSelect",void 0),pe([Object(a["kb"])("eLabel")],e.prototype,"eLabel",void 0),pe([Object(a["kb"])("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),pe([Object(a["kb"])("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),pe([Object(a["kb"])("eColumnGroupIcons")],e.prototype,"eColumnGroupIcons",void 0),pe([a["fb"]],e.prototype,"init",null),e}(a["H"]),he=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fe=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ve=function(t){function e(e,r){var n=t.call(this)||this;return n.comp=e,n.virtualList=r,n}return he(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new a["yb"](this.comp,this.virtualList,{dragSourceType:a["P"].ToolPanel,listItemDragStartEvent:a["R"].EVENT_COLUMN_PANEL_ITEM_DRAG_START,listItemDragEndEvent:a["R"].EVENT_COLUMN_PANEL_ITEM_DRAG_END,eventSource:this.eventService,getCurrentDragValue:function(e){return t.getCurrentDragValue(e)},isMoveBlocked:function(e){return t.isMoveBlocked(e)},getNumRows:function(t){return t.getDisplayedColsList().length},moveItem:function(e,r){return t.moveItem(e,r)}}))},e.prototype.getCurrentDragValue=function(t){return t.column},e.prototype.isMoveBlocked=function(t){var e=this.getCurrentColumns(t),r=e.find((function(t){var e=t.getColDef();return!!e.suppressMovable||!!e.lockPosition}));return!!r},e.prototype.moveItem=function(t,e){var r=this.getTargetIndex(t,e),n=this.getCurrentColumns(t);null!=r&&this.columnModel.moveColumns(n,r,"toolPanelUi")},e.prototype.getMoveDiff=function(t,e){var r=this.columnModel.getAllGridColumns(),n=this.getCurrentColumns(t),o=n[0],i=n.length,a=r.indexOf(o);return a<e?i:0},e.prototype.getCurrentColumns=function(t){return t instanceof a["ib"]?t.getLeafColumns():[t]},e.prototype.getTargetIndex=function(t,e){if(!e)return null;var r,n=e.component,o="top"===e.position;if(n instanceof de){var i=n.getColumns();r=i[0],o=!0}else r=n.getColumn();var a=this.getCurrentColumns(t);if(-1!==a.indexOf(r))return null;var s=this.columnModel.getAllGridColumns().indexOf(r),l=o?s:s+1,u=this.getMoveDiff(t,l);return l-u},fe([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),fe([a["fb"]],e.prototype,"postConstruct",null),e}(a["z"]),ye=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ge=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},me=function(t){function e(e,r,n,o){var i=t.call(this)||this;return i.allowDragging=r,i.groupsExist=n,i.focusWrapper=o,i.processingColumnStateChange=!1,i.column=e.getColumn(),i.columnDept=e.getDept(),i.displayName=e.getDisplayName(),i}return ye(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE),this.eDragHandle=a["Bb"].createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var r=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();r.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1");var o=a["Bb"].escapeString(this.displayName);this.eLabel.innerHTML=o;var i=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+i),this.setupDragging(),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,a["G"].EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,a["G"].EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,a["G"].EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,a["G"].EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,a["R"].EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip();var s=a["J"].getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsService,this.column,null);s.forEach((function(e){return t.addOrRemoveCssClass(e,!0)}))},e.prototype.getColumn=function(){return this.column},e.prototype.setupTooltip=function(){var t=this,e=function(){var e=t.column.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,e)},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},e.prototype.onContextMenu=function(t){var e=this,r=this,n=r.column,o=r.gridOptionsService;if(!o.is("functionsReadOnly")){var i=this.createBean(new ue(n,t,this.focusWrapper));this.addDestroyFunc((function(){i.isAlive()&&e.destroyBean(i)}))}},e.prototype.handleKeyDown=function(t){t.key===a["X"].SPACE&&(t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},e.prototype.onLabelClicked=function(){if(!this.gridOptionsService.is("functionsReadOnly")){var t=!this.cbSelect.getValue();this.onChangeCommon(t)}},e.prototype.onCheckboxChanged=function(t){this.onChangeCommon(t.selected)},e.prototype.onChangeCommon=function(t){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,t,"toolPanelUi"))},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumn","Column"),r=this.cbSelect.getValue()?t("ariaVisible","visible"):t("ariaHidden","hidden"),n=t("ariaToggleVisibility","Press SPACE to toggle visibility");a["Bb"].setAriaLabel(this.focusWrapper,this.displayName+" "+e),this.cbSelect.setInputAriaLabel(n+" ("+r+")"),a["Bb"].setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},e.prototype.setupDragging=function(){var t=this;if(this.allowDragging){var e=!this.gridOptionsService.is("suppressDragLeaveHidesColumns"),r={type:a["P"].ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return e?a["O"].ICON_HIDE:a["O"].ICON_NOT_ALLOWED},getDragItem:function(){return t.createDragItem()},onDragStarted:function(){e=!t.gridOptionsService.is("suppressDragLeaveHidesColumns");var r={type:a["R"].EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:t.column};t.eventService.dispatchEvent(r)},onDragStopped:function(){var e={type:a["R"].EVENT_COLUMN_PANEL_ITEM_DRAG_END};t.eventService.dispatchEvent(e)},onGridEnter:function(r){e&&t.modelItemUtils.updateColumns({columns:[t.column],visibleState:null===r||void 0===r?void 0:r.visibleState,pivotState:null===r||void 0===r?void 0:r.pivotState,eventType:"toolPanelUi"})},onGridExit:function(){e&&t.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(r)}))}else a["Bb"].setDisplayed(this.eDragHandle,!1)},e.prototype.createDragItem=function(){var t,e,r=this.column.getColId(),n=(t={},t[r]=this.column.isVisible(),t),o=(e={},e[r]=this.modelItemUtils.createPivotState(this.column),e);return{columns:[this.column],visibleState:n,pivotState:o}},e.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var t=this.columnModel.isPivotMode();if(t){var e=this.column.isAnyFunctionActive();this.cbSelect.setValue(e)}else this.cbSelect.setValue(this.column.isVisible());var r=!0,n=!0;if(t){var o=this.gridOptionsService.is("functionsReadOnly"),i=!this.column.isAnyFunctionAllowed();r=!o&&!i,n=r}else{var a=this.column.getColDef(),s=a.enableRowGroup,l=a.enableValue,u=a.lockPosition,c=a.suppressMovable,p=a.lockVisible,d=!!s||!!l,h=!!u||!!c;r=!p,n=d||!h}this.cbSelect.setReadOnly(!r),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!n),this.addOrRemoveCssClass("ag-column-select-column-readonly",!n&&!r);var f=t&&this.gridOptionsService.is("functionsPassive");this.cbSelect.setPassive(f),this.processingColumnStateChange=!1},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.onSelectAllChanged=function(t){t!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},e.prototype.isSelected=function(){return this.cbSelect.getValue()},e.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},e.prototype.isExpandable=function(){return!1},e.prototype.setExpanded=function(t){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},e.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',ge([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),ge([Object(a["u"])("dragAndDropService")],e.prototype,"dragAndDropService",void 0),ge([Object(a["u"])("modelItemUtils")],e.prototype,"modelItemUtils",void 0),ge([Object(a["kb"])("eLabel")],e.prototype,"eLabel",void 0),ge([Object(a["kb"])("cbSelect")],e.prototype,"cbSelect",void 0),ge([a["fb"]],e.prototype,"init",null),e}(a["H"]),be=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ce=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Se=function(){function t(t){this.items=t}return t.prototype.getRowCount=function(){return this.items.length},t.prototype.getRow=function(t){return this.items[t]},t}(),we="ag-column-select-list",xe=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.destroyColumnItemFuncs=[],r}return be(e,t),e.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((function(t){return t()})),this.destroyColumnItemFuncs=[]},e.prototype.init=function(t,e,r){var n=this;this.params=t,this.allowDragging=e,this.eventType=r,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this));var o=[a["R"].EVENT_COLUMN_PIVOT_CHANGED,a["R"].EVENT_COLUMN_PIVOT_MODE_CHANGED,a["R"].EVENT_COLUMN_ROW_GROUP_CHANGED,a["R"].EVENT_COLUMN_VALUE_CHANGED,a["R"].EVENT_COLUMN_VISIBLE,a["R"].EVENT_NEW_COLUMNS_LOADED];o.forEach((function(t){n.addManagedListener(n.eventService,t,n.fireSelectionChangedEvent.bind(n))})),this.expandGroupsByDefault=!this.params.contractColumnSelection;var i=this.localeService.getLocaleTextFunc(),s=i("ariaColumnList","Column List");this.virtualList=this.createManagedBean(new a["xb"]({cssIdentifier:"column-select",ariaRole:"tree",listName:s})),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((function(t,e){return a["Bb"].setAriaLevel(e,t.getDept()+1),n.createComponentFromItem(t,e)})),this.columnModel.isReady()&&this.onColumnsChanged(),t.suppressColumnMove||this.gridOptionsService.is("suppressMovableColumns")||this.createManagedBean(new ve(this,this.virtualList))},e.prototype.createComponentFromItem=function(t,e){if(t.isGroup()){var r=new de(t,this.allowDragging,this.eventType,e);return this.getContext().createBean(r),r}var n=new me(t,this.allowDragging,this.groupsExist,e);return this.getContext().createBean(n),n},e.prototype.onColumnsChanged=function(){var t=this.getExpandedStates(),e=this.columnModel.isPivotMode(),r=!this.params.suppressSyncLayoutWithGrid&&!e;r?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.getDisplayedColsList=function(){return this.displayedColsList},e.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var t={};return this.forEachItem((function(e){if(e.isGroup()){var r=e.getColumnGroup();r&&(t[r.getId()]=e.isExpanded())}})),t},e.prototype.setExpandedStates=function(t){this.allColsTree&&this.forEachItem((function(e){if(e.isGroup()){var r=e.getColumnGroup();if(r){var n=t[r.getId()],o=null!=n;o&&e.setExpanded(n)}}}))},e.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},e.prototype.setColumnLayout=function(t){var e=this.colDefService.createColumnTree(t);this.buildListModel(e),this.groupsExist=t.some((function(t){return t&&"undefined"!==typeof t.children})),this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},e.prototype.buildListModel=function(t){var e=this,r=this.onColumnExpanded.bind(this),n=function(t){t.addEventListener(ne.EVENT_EXPANDED_CHANGED,r);var n=t.removeEventListener.bind(t,ne.EVENT_EXPANDED_CHANGED,r);e.destroyColumnItemFuncs.push(n)},o=function(t,e,r){t.forEach((function(t){t instanceof a["ib"]?i(t,e,r):s(t,e,r)}))},i=function(t,r,i){var a=t.getColGroupDef(),s=a&&a.suppressColumnsToolPanel;if(!s)if(t.isPadding())o(t.getChildren(),r,i);else{var l=e.columnModel.getDisplayNameForProvidedColumnGroup(null,t,"columnToolPanel"),u=new ne(l,t,r,!0,e.expandGroupsByDefault);i.push(u),n(u),o(t.getChildren(),r+1,u.getChildren())}},s=function(t,r,n){var o=t.getColDef()&&t.getColDef().suppressColumnsToolPanel;if(!o){var i=e.columnModel.getDisplayNameForColumn(t,"columnToolPanel");n.push(new ne(i,t,r))}};this.destroyColumnTree(),o(t,0,this.allColsTree)},e.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},e.prototype.flattenAndFilterModel=function(){var t=this;this.displayedColsList=[];var e=function(r){r.isPassesFilter()&&(t.displayedColsList.push(r),r.isGroup()&&r.isExpanded()&&r.getChildren().forEach(e))};this.allColsTree.forEach(e),this.virtualList.setModel(new Se(this.displayedColsList));var r=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=r&&this.focusRowIfAlive(r),this.notifyListeners()},e.prototype.focusRowIfAlive=function(t){var e=this;window.setTimeout((function(){e.isAlive()&&e.virtualList.focusRow(t)}),0)},e.prototype.forEachItem=function(t){var e=function(r){r.forEach((function(r){t(r),r.isGroup()&&e(r.getChildren())}))};e(this.allColsTree)},e.prototype.doSetExpandedAll=function(t){this.forEachItem((function(e){e.isGroup()&&e.setExpanded(t)}))},e.prototype.setGroupsExpanded=function(t,e){if(e){var r=[];this.forEachItem((function(n){if(n.isGroup()){var o=n.getColumnGroup().getId();e.indexOf(o)>=0&&(n.setExpanded(t),r.push(o))}}));var n=e.filter((function(t){return!a["Bb"].includes(r,t)}));n.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",n)}else this.doSetExpandedAll(t)},e.prototype.getExpandState=function(){var t=0,e=0;return this.forEachItem((function(r){r.isGroup()&&(r.isExpanded()?t++:e++)})),t>0&&e>0?Zt.INDETERMINATE:e>0?Zt.COLLAPSED:Zt.EXPANDED},e.prototype.doSetSelectedAll=function(t){this.modelItemUtils.selectAllChildren(this.allColsTree,t,this.eventType)},e.prototype.getSelectionState=function(){var t=0,e=0,r=this.columnModel.isPivotMode();if(this.forEachItem((function(n){if(!n.isGroup()&&n.isPassesFilter()){var o,i=n.getColumn(),a=i.getColDef();if(r){var s=!i.isAllowPivot()&&!i.isAllowRowGroup()&&!i.isAllowValue();if(s)return;o=i.isValueActive()||i.isPivotActive()||i.isRowGroupActive()}else{if(a.lockVisible)return;o=i.isVisible()}o?t++:e++}})),!(t>0&&e>0))return!(0===t||e>0)},e.prototype.setFilterText=function(t){this.filterText=a["Bb"].exists(t)?t.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.markFilteredColumns=function(){var t=this,e=function(e){if(!a["Bb"].exists(t.filterText))return!0;var r=e.getDisplayName();return null==r||-1!==r.toLowerCase().indexOf(t.filterText)},r=function(t,n){var o=!1;if(t.isGroup()){var i=e(t);t.getChildren().forEach((function(t){var e=r(t,i||n);e&&(o=e)}))}var a=!(!n&&!o)||e(t);return t.setPassesFilter(a),a};this.allColsTree.forEach((function(t){return r(t,!1)}))},e.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},e.prototype.fireGroupExpandedEvent=function(){var t=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:t})},e.prototype.fireSelectionChangedEvent=function(){var t=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:t})},e.TEMPLATE='<div class="'+we+'" role="presentation"></div>',Ce([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Ce([Object(a["u"])("toolPanelColDefService")],e.prototype,"colDefService",void 0),Ce([Object(a["u"])("modelItemUtils")],e.prototype,"modelItemUtils",void 0),Ce([a["hb"]],e.prototype,"destroyColumnTree",null),e}(a["H"]),Oe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ee=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Te=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oe(e,t),e.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},e.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var t=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(t("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,a["R"].EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},e.prototype.onBtPivotMode=function(){var t=!!this.cbPivotMode.getValue();if(t!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(t,"toolPanelUi");var e=this.gridOptionsService.api;e&&e.refreshHeader()}},e.prototype.onPivotModeChanged=function(){var t=this.columnModel.isPivotMode();this.cbPivotMode.setValue(t)},Ee([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Ee([Object(a["kb"])("cbPivotMode")],e.prototype,"cbPivotMode",void 0),Ee([a["gb"]],e.prototype,"init",null),e}(a["H"]),Pe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),De=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pe(e,t),e.prototype.execute=function(t){var e=a["Bb"].missingOrEmpty(this.columnModel.getValueColumns()),r=!this.gridOptionsService.getCallback("getGroupRowAgg"),n=t.changedPath&&t.changedPath.isActive();if(!(e&&r&&n)){var o=this.createAggDetails(t);this.recursivelyCreateAggData(o)}},e.prototype.createAggDetails=function(t){var e=this.columnModel.isPivotActive(),r=this.columnModel.getValueColumns(),n=e?this.columnModel.getPivotColumns():[],o={alwaysAggregateAtRootLevel:this.gridOptionsService.is("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:this.gridOptionsService.is("groupIncludeTotalFooter"),changedPath:t.changedPath,valueColumns:r,pivotColumns:n,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gridOptionsService.getCallback("getGroupRowAgg")};return o},e.prototype.isSuppressAggFilteredOnly=function(){var t=void 0!==this.gridOptionsService.getGroupAggFiltering();return t||this.gridOptionsService.is("suppressAggFilteredOnly")},e.prototype.recursivelyCreateAggData=function(t){var e=this,r=function(r){var n=!r.hasChildren();if(n)r.aggData&&r.setAggData(null);else{var o=-1===r.level;if(o&&!t.groupIncludeTotalFooter){var i=!e.columnModel.isPivotMode();if(!t.alwaysAggregateAtRootLevel&&i)return}e.aggregateRowNode(r,t)}};t.changedPath.forEachChangedNodeDepthFirst(r,!0)},e.prototype.aggregateRowNode=function(t,e){var r,n=0===e.valueColumns.length,o=0===e.pivotColumns.length;r=e.userAggFunc?e.userAggFunc({nodes:t.childrenAfterFilter}):n?null:o?this.aggregateRowNodeUsingValuesOnly(t,e):this.aggregateRowNodeUsingValuesAndPivot(t),t.setAggData(r),t.sibling&&t.sibling.setAggData(r)},e.prototype.aggregateRowNodeUsingValuesAndPivot=function(t){var e,r=this,n={},o=null!==(e=this.columnModel.getSecondaryColumns())&&void 0!==e?e:[];return o.forEach((function(e){var o=e.getColDef(),i=o.pivotValueColumn,s=o.pivotTotalColumnIds,l=o.colId,u=o.pivotKeys;if(!a["Bb"].exists(s)){var c,p=null!==u&&void 0!==u?u:[];c=t.leafGroup?r.getValuesFromMappedSet(t.childrenMapped,p,i):r.getValuesPivotNonLeaf(t,l),n[l]=r.aggregateValues(c,i.getAggFunc(),i,t,e)}})),o.forEach((function(e){var o=e.getColDef(),i=o.pivotValueColumn,s=o.pivotTotalColumnIds,l=o.colId;if(a["Bb"].exists(s)){var u=[];s&&s.length&&(s.forEach((function(t){u.push(n[t])})),n[l]=r.aggregateValues(u,i.getAggFunc(),i,t,e))}})),n},e.prototype.aggregateRowNodeUsingValuesOnly=function(t,e){var r=this,n={},o=e.changedPath.isActive()?e.changedPath.getValueColumnsForNode(t,e.valueColumns):e.valueColumns,i=e.changedPath.isActive()?e.changedPath.getNotValueColumnsForNode(t,e.valueColumns):null,a=this.getValuesNormal(t,o,e.filteredOnly),s=t.aggData;return o.forEach((function(e,o){n[e.getId()]=r.aggregateValues(a[o],e.getAggFunc(),e,t)})),i&&s&&i.forEach((function(t){n[t.getId()]=s[t.getId()]})),n},e.prototype.getValuesPivotNonLeaf=function(t,e){var r=[];return t.childrenAfterFilter.forEach((function(t){var n=t.aggData[e];r.push(n)})),r},e.prototype.getValuesFromMappedSet=function(t,e,r){var n=this,o=t;if(e.forEach((function(t){return o=o?o[t]:null})),!o)return[];var i=[];return o.forEach((function(t){var e=n.valueService.getValue(r,t);i.push(e)})),i},e.prototype.getValuesNormal=function(t,e,r){var n=[];e.forEach((function(){return n.push([])}));for(var o=e.length,i=r?t.childrenAfterFilter:t.childrenAfterGroup,a=i.length,s=0;s<a;s++)for(var l=i[s],u=0;u<o;u++){var c=e[u],p=this.valueService.getValue(c,l);n[u].push(p)}return n},e.prototype.aggregateValues=function(t,e,r,n,o){var i="string"===typeof e?this.aggFuncService.getAggFunc(e):e;if("function"!==typeof i)return console.error("AG Grid: unrecognised aggregation function "+e),null;var a=i,s={values:t,column:r,colDef:r?r.getColDef():void 0,pivotResultColumn:o,rowNode:n,data:n?n.data:void 0,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};return a(s)},De([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),De([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),De([Object(a["u"])("aggFuncService")],e.prototype,"aggFuncService",void 0),e=De([Object(a["y"])("aggregationStage")],e),e}(a["z"]),Me=function(){function t(){this.allSets={},this.allParents=[]}return t.prototype.removeFromChildrenAfterGroup=function(t,e){var r=this.getSet(t);r.removeFromChildrenAfterGroup[e.id]=!0},t.prototype.isRemoveFromAllLeafChildren=function(t,e){var r=this.getSet(t);return!!r.removeFromAllLeafChildren[e.id]},t.prototype.preventRemoveFromAllLeafChildren=function(t,e){var r=this.getSet(t);delete r.removeFromAllLeafChildren[e.id]},t.prototype.removeFromAllLeafChildren=function(t,e){var r=this.getSet(t);r.removeFromAllLeafChildren[e.id]=!0},t.prototype.getSet=function(t){return this.allSets[t.id]||(this.allSets[t.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(t)),this.allSets[t.id]},t.prototype.getAllParents=function(){return this.allParents},t.prototype.flush=function(){var t=this;this.allParents.forEach((function(e){var r=t.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter((function(t){return!r.removeFromChildrenAfterGroup[t.id]})),e.allLeafChildren=e.allLeafChildren.filter((function(t){return!r.removeFromAllLeafChildren[t.id]})),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)})),this.allSets={},this.allParents.length=0},t}(),Re=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_e=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ke=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Fe=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Ie=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.groupIdSequence=new a["bb"],e}return Re(e,t),e.prototype.execute=function(t){var e=this.createGroupingDetails(t);if(e.transactions)this.handleTransaction(e);else{var r=!0===t.afterColumnsChanged;this.shotgunResetEverything(e,r)}e.usingTreeData||(this.positionLeafsAndGroups(t.changedPath),this.orderGroups(e)),this.selectableService.updateSelectableAfterGrouping(e.rootNode)},e.prototype.positionLeafsAndGroups=function(t){t.forEachChangedNodeDepthFirst((function(t){if(t.childrenAfterGroup){var e,r=[],n=[];t.childrenAfterGroup.forEach((function(t){var o;(null===(o=t.childrenAfterGroup)||void 0===o?void 0:o.length)?""!==t.key||e?n.push(t):e=t:r.push(t)})),e&&n.push(e),t.childrenAfterGroup=Fe(Fe([],ke(r)),ke(n))}}),!1)},e.prototype.createGroupingDetails=function(t){var e=t.rowNode,r=t.changedPath,n=t.rowNodeTransactions,o=t.rowNodeOrder,i=this.gridOptionsService.is("treeData"),a=i?null:this.columnModel.getRowGroupColumns(),s={includeParents:!this.gridOptionsService.is("suppressParentsInRowNodes"),expandByDefault:this.gridOptionsService.getNum("groupDefaultExpanded"),groupedCols:a,rootNode:e,pivotMode:this.columnModel.isPivotMode(),groupedColCount:i||!a?0:a.length,rowNodeOrder:o,transactions:n,changedPath:r,groupAllowUnbalanced:this.gridOptionsService.is("groupAllowUnbalanced"),isGroupOpenByDefault:this.gridOptionsService.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gridOptionsService.getCallback("initialGroupOrderComparator"),createGroupFooter:this.gridOptionsService.isGroupIncludeFooterTrueOrCallback(),usingTreeData:i,getDataPath:i?this.gridOptionsService.get("getDataPath"):void 0};return s},e.prototype.handleTransaction=function(t){var e=this;t.transactions.forEach((function(r){var n=t.usingTreeData?void 0:new Me;if(a["Bb"].existsAndNotEmpty(r.remove)&&e.removeNodes(r.remove,t,n),a["Bb"].existsAndNotEmpty(r.update)&&e.moveNodesInWrongPath(r.update,t,n),a["Bb"].existsAndNotEmpty(r.add)&&e.insertNodes(r.add,t,!1),n){var o=n.getAllParents().slice();n.flush(),e.removeEmptyGroups(o,t)}})),t.rowNodeOrder&&this.sortChildren(t)},e.prototype.sortChildren=function(t){t.changedPath.forEachChangedNodeDepthFirst((function(e){if(e.childrenAfterGroup){var r=a["Bb"].sortRowNodesByOrder(e.childrenAfterGroup,t.rowNodeOrder);r&&t.changedPath.addParentNode(e)}}),!1,!0)},e.prototype.orderGroups=function(t){var e=t.initialGroupOrderComparator;function r(t){var n=a["Bb"].exists(t.childrenAfterGroup)&&!t.leafGroup;n&&(t.childrenAfterGroup.sort((function(t,r){return e({nodeA:t,nodeB:r})})),t.childrenAfterGroup.forEach((function(t){return r(t)})))}a["Bb"].exists(e)&&r(t.rootNode)},e.prototype.getExistingPathForNode=function(t,e){var r=[],n=e.usingTreeData?t:t.parent;while(n&&n!==e.rootNode)r.push({key:n.key,rowGroupColumn:n.rowGroupColumn,field:n.field}),n=n.parent;return r.reverse(),r},e.prototype.moveNodesInWrongPath=function(t,e,r){var n=this;t.forEach((function(t){e.changedPath.isActive()&&e.changedPath.addParentNode(t.parent);var o=function(t){return t.key},i=n.getExistingPathForNode(t,e).map(o),s=n.getGroupInfo(t,e).map(o),l=a["Bb"].areEqual(i,s);l||n.moveNode(t,e,r)}))},e.prototype.moveNode=function(t,e,r){if(this.removeNodesInStages([t],e,r),this.insertOneNode(t,e,!0,r),t.setData(t.data),e.changedPath.isActive()){var n=t.parent;e.changedPath.addParentNode(n)}},e.prototype.removeNodes=function(t,e,r){this.removeNodesInStages(t,e,r),e.changedPath.isActive()&&t.forEach((function(t){return e.changedPath.addParentNode(t.parent)}))},e.prototype.removeNodesInStages=function(t,e,r){if(this.removeNodesFromParents(t,e,r),e.usingTreeData){this.postRemoveCreateFillerNodes(t,e);var n=t.map((function(t){return t.parent}));this.removeEmptyGroups(n,e)}},e.prototype.forEachParentGroup=function(t,e,r){var n=e;while(n&&n!==t.rootNode)r(n),n=n.parent},e.prototype.removeNodesFromParents=function(t,e,r){var n=this,o=null==r,i=r||new Me;t.forEach((function(t){n.removeFromParent(t,i),n.forEachParentGroup(e,t.parent,(function(e){i.removeFromAllLeafChildren(e,t)}))})),o&&i.flush()},e.prototype.postRemoveCreateFillerNodes=function(t,e){var r=this;t.forEach((function(t){var n=t.hasChildren();if(n){var o=r.getExistingPathForNode(t,e),i=r.findParentForNode(t,o,e);i.expanded=t.expanded,i.allLeafChildren=t.allLeafChildren,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenMapped=t.childrenMapped,i.updateHasChildren(),i.childrenAfterGroup.forEach((function(t){return t.parent=i}))}}))},e.prototype.removeEmptyGroups=function(t,e){var r=this,n=!0,o=function(t){var e=r.getChildrenMappedKey(t.key,t.rowGroupColumn),n=t.parent,o=!n||!n.childrenMapped||!n.childrenMapped[e];return!o&&!!t.isEmptyRowGroupNode()},i=function(){n=!1;var i=new Me;t.forEach((function(t){r.forEachParentGroup(e,t,(function(t){o(t)&&(n=!0,r.removeFromParent(t,i),t.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))}))})),i.flush()};while(n)i()},e.prototype.removeFromParent=function(t,e){t.parent&&(e?e.removeFromChildrenAfterGroup(t.parent,t):(a["Bb"].removeFromArray(t.parent.childrenAfterGroup,t),t.parent.updateHasChildren()));var r=this.getChildrenMappedKey(t.key,t.rowGroupColumn);t.parent&&t.parent.childrenMapped&&(t.parent.childrenMapped[r]=void 0),t.setRowTop(null),t.setRowIndex(null)},e.prototype.addToParent=function(t,e){var r=this.getChildrenMappedKey(t.key,t.rowGroupColumn);if(e){var n=null!=e.childrenMapped;n&&(e.childrenMapped[r]=t),e.childrenAfterGroup.push(t),e.updateHasChildren()}},e.prototype.areGroupColsEqual=function(t,e){return null!=t&&null!=e&&t.pivotMode===e.pivotMode&&a["Bb"].areEqual(t.groupedCols,e.groupedCols)},e.prototype.checkAllGroupDataAfterColsChanged=function(t){var e=this,r=function(n){n&&n.forEach((function(n){var o=!t.usingTreeData&&!n.group;if(!o){var i={field:n.field,key:n.key,rowGroupColumn:n.rowGroupColumn};e.setGroupData(n,i,t),r(n.childrenAfterGroup)}}))};r(t.rootNode.childrenAfterGroup)},e.prototype.shotgunResetEverything=function(t,e){if(!this.noChangeInGroupingColumns(t,e)){this.selectionService.filterFromSelection((function(t){return t&&!t.group}));var r=t.rootNode,n=t.groupedCols;r.leafGroup=!t.usingTreeData&&0===n.length,r.childrenAfterGroup=[],r.childrenMapped={},r.updateHasChildren();var o=r.sibling;o&&(o.childrenAfterGroup=r.childrenAfterGroup,o.childrenMapped=r.childrenMapped),this.insertNodes(r.allLeafChildren,t,!1)}},e.prototype.noChangeInGroupingColumns=function(t,e){var r=!1,n=this.columnModel.getGroupDisplayColumns(),o=n?n.map((function(t){return t.getId()})).join("-"):"";return e&&(r=t.usingTreeData||this.areGroupColsEqual(t,this.oldGroupingDetails),this.oldGroupDisplayColIds!==o&&this.checkAllGroupDataAfterColsChanged(t)),this.oldGroupingDetails=t,this.oldGroupDisplayColIds=o,r},e.prototype.insertNodes=function(t,e,r){var n=this;t.forEach((function(t){n.insertOneNode(t,e,r),e.changedPath.isActive()&&e.changedPath.addParentNode(t.parent)}))},e.prototype.insertOneNode=function(t,e,r,n){var o=this.getGroupInfo(t,e),i=this.findParentForNode(t,o,e,n);i.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[i.data,t.data]),e.usingTreeData?this.swapGroupWithUserNode(i,t,r):(t.parent=i,t.level=o.length,i.childrenAfterGroup.push(t),i.updateHasChildren())},e.prototype.findParentForNode=function(t,e,r,n){var o=this,i=r.rootNode;return e.forEach((function(e,a){i=o.getOrCreateNextNode(i,e,a,r),(null===n||void 0===n?void 0:n.isRemoveFromAllLeafChildren(i,t))?null===n||void 0===n||n.preventRemoveFromAllLeafChildren(i,t):i.allLeafChildren.push(t)})),i},e.prototype.swapGroupWithUserNode=function(t,e,r){e.parent=t.parent,e.key=t.key,e.field=t.field,e.groupData=t.groupData,e.level=t.level,r||(e.expanded=t.expanded),e.leafGroup=t.leafGroup,e.rowGroupIndex=t.rowGroupIndex,e.allLeafChildren=t.allLeafChildren,e.childrenAfterGroup=t.childrenAfterGroup,e.childrenMapped=t.childrenMapped,e.sibling=t.sibling,e.updateHasChildren(),this.removeFromParent(t),e.childrenAfterGroup.forEach((function(t){return t.parent=e})),this.addToParent(e,t.parent)},e.prototype.getOrCreateNextNode=function(t,e,r,n){var o=this.getChildrenMappedKey(e.key,e.rowGroupColumn),i=t.childrenMapped?t.childrenMapped[o]:void 0;return i||(i=this.createGroup(e,t,r,n),this.addToParent(i,t)),i},e.prototype.createGroup=function(t,e,r,n){var o=new a["lb"](this.beans);return o.group=!0,o.field=t.field,o.rowGroupColumn=t.rowGroupColumn,this.setGroupData(o,t,n),o.id=a["lb"].ID_PREFIX_ROW_GROUP+this.groupIdSequence.next(),o.key=t.key,o.level=r,o.leafGroup=!n.usingTreeData&&r===n.groupedColCount-1,o.allLeafChildren=[],o.setAllChildrenCount(0),o.rowGroupIndex=n.usingTreeData?null:r,o.childrenAfterGroup=[],o.childrenMapped={},o.updateHasChildren(),o.parent=n.includeParents?e:null,this.setExpandedInitialValue(n,o),o},e.prototype.setGroupData=function(t,e,r){t.groupData={};var n=this.columnModel.getGroupDisplayColumns();n.forEach((function(n){var o=r.usingTreeData||!!t.rowGroupColumn&&n.isRowGroupDisplayed(t.rowGroupColumn.getId());o&&(t.groupData[n.getColId()]=e.key)}))},e.prototype.getChildrenMappedKey=function(t,e){return e?e.getId()+"-"+t:t},e.prototype.setExpandedInitialValue=function(t,e){if(t.pivotMode&&e.leafGroup)e.expanded=!1;else{var r=t.isGroupOpenByDefault;if(r){var n={rowNode:e,field:e.field,key:e.key,level:e.level,rowGroupColumn:e.rowGroupColumn};e.expanded=1==r(n)}else{var o=t.expandByDefault;-1!==t.expandByDefault?e.expanded=e.level<o:e.expanded=!0}}},e.prototype.getGroupInfo=function(t,e){return e.usingTreeData?this.getGroupInfoFromCallback(t,e):this.getGroupInfoFromGroupColumns(t,e)},e.prototype.getGroupInfoFromCallback=function(t,e){var r=e.getDataPath?e.getDataPath(t.data):null;null!==r&&void 0!==r&&0!==r.length||a["Bb"].doOnce((function(){return console.warn("AG Grid: getDataPath() should not return an empty path for data",t.data)}),"groupStage.getGroupInfoFromCallback");var n=function(t){return{key:t,field:null,rowGroupColumn:null}};return r?r.map(n):[]},e.prototype.getGroupInfoFromGroupColumns=function(t,e){var r=this,n=[];return e.groupedCols.forEach((function(o){var i=r.valueService.getKeyForNode(o,t),a=null!==i&&void 0!==i&&""!==i,s=e.pivotMode||!e.groupAllowUnbalanced;if(s&&!a&&(i="",a=!0),a){var l={key:i,field:o.getColDef().field,rowGroupColumn:o};n.push(l)}})),n},_e([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),_e([Object(a["u"])("selectableService")],e.prototype,"selectableService",void 0),_e([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),_e([Object(a["u"])("beans")],e.prototype,"beans",void 0),_e([Object(a["u"])("selectionService")],e.prototype,"selectionService",void 0),e=_e([Object(a["y"])("groupStage")],e),e}(a["z"]),Le=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ne=function(){return Ne=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ne.apply(this,arguments)},Ge=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},je=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Be=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Ve=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var r;return Le(e,t),r=e,e.prototype.init=function(){var t=this,e=function(){var e;return null!==(e=t.gos.get("serverSidePivotResultFieldSeparator"))&&void 0!==e?e:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",(function(){t.fieldSeparator=e()}));var r=function(){var e;return null!==(e=t.gos.getNum("pivotDefaultExpanded"))&&void 0!==e?e:0};this.pivotDefaultExpanded=r(),this.addManagedPropertyListener("pivotDefaultExpanded",(function(){t.pivotDefaultExpanded=r()}))},e.prototype.createPivotColumnDefs=function(t){var e=this.createPivotColumnsFromUniqueValues(t);function r(t,e){return void 0===e&&(e=[]),t.forEach((function(t){void 0!==t.children?r(t.children,e):e.push(t)})),e}var n=r(e);this.addRowGroupTotals(e,n),this.addExpandablePivotGroups(e,n),this.addPivotTotalsToGroups(e,n);var o=n.map((function(t){return a["Bb"].cloneObject(t)}));return{pivotColumnGroupDefs:e,pivotColumnDefs:o}},e.prototype.createPivotColumnsFromUniqueValues=function(t){var e=this.columnModel.getPivotColumns(),r=e.length,n=this.recursivelyBuildGroup(0,t,[],r,e);return n},e.prototype.recursivelyBuildGroup=function(t,e,r,n,o){var i=this,s=this.columnModel.getValueColumns();if(t>=n)return this.buildMeasureCols(r);var l=o[t].getColDef(),u=this.headerNameComparator.bind(this,l.pivotComparator);if(1===s.length&&this.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn")&&t===n-1){var c=[];return a["Bb"].iterateObject(e,(function(t){var e=Be(Be([],je(r)),[t]),n=i.createColDef(s[0],t,e);n.columnGroupShow="open",c.push(n)})),c.sort(u),c}var p=[];return a["Bb"].iterateObject(e,(function(e,a){var s=-1===i.pivotDefaultExpanded||t<i.pivotDefaultExpanded,l=Be(Be([],je(r)),[e]);p.push({children:i.recursivelyBuildGroup(t+1,a,l,n,o),headerName:e,pivotKeys:l,columnGroupShow:"open",openByDefault:s,groupId:i.generateColumnGroupId(l)})})),p.sort(u),p},e.prototype.buildMeasureCols=function(t){var e=this,r=this.columnModel.getValueColumns();return 0===r.length?[this.createColDef(null,"-",t)]:r.map((function(r){var n=e.columnModel.getDisplayNameForColumn(r,"header");return Ne(Ne({},e.createColDef(r,n,t)),{columnGroupShow:"open"})}))},e.prototype.addExpandablePivotGroups=function(t,e){var r=this;if(!this.gridOptionsService.is("suppressExpandablePivotGroups")&&!this.gridOptionsService.get("pivotColumnGroupTotals")){var n=function(t,e,o){var i=t;if(i.children){var a=new Map;i.children.forEach((function(t){n(t,e,a)}));var s=!i.children.some((function(t){return t.children}));r.columnModel.getValueColumns().forEach((function(n){var o=r.columnModel.getDisplayNameForColumn(n,"header"),i=r.createColDef(n,o,t.pivotKeys);if(i.pivotTotalColumnIds=a.get(n.getColId()),i.columnGroupShow="closed",i.aggFunc=n.getAggFunc(),!s){var l=t.children;l.push(i),e.push(i)}})),r.merge(o,a)}else{var l=t;if(!l.pivotValueColumn)return;var u=l.pivotValueColumn.getColId(),c=o.has(u)?o.get(u):[];c.push(l.colId),o.set(u,c)}};t.forEach((function(t){n(t,e,new Map)}))}},e.prototype.addPivotTotalsToGroups=function(t,e){var r=this;if(this.gridOptionsService.get("pivotColumnGroupTotals")){var n="after"===this.gridOptionsService.get("pivotColumnGroupTotals"),o=this.columnModel.getValueColumns(),i=o.map((function(t){return t.getAggFunc()}));if(i&&!(i.length<1)&&this.sameAggFuncs(i)){var a=o[0];t.forEach((function(t){r.recursivelyAddPivotTotal(t,e,a,n)}))}}},e.prototype.recursivelyAddPivotTotal=function(t,e,r,n){var o=this,i=t;if(!i.children){var a=t;return a.colId?[a.colId]:null}var s=[];if(i.children.forEach((function(t){var i=o.recursivelyAddPivotTotal(t,e,r,n);i&&(s=s.concat(i))})),i.children.length>1){var l=this.localeService.getLocaleTextFunc(),u=l("pivotColumnGroupTotals","Total"),c=this.createColDef(r,u,t.pivotKeys,!0);c.pivotTotalColumnIds=s,c.aggFunc=r.getAggFunc();var p=t.children;n?p.push(c):p.unshift(c),e.push(c)}return s},e.prototype.addRowGroupTotals=function(t,e){var r=this;if(this.gridOptionsService.get("pivotRowTotals"))for(var n="after"===this.gridOptionsService.get("pivotRowTotals"),o=this.columnModel.getValueColumns(),i=n?o.slice():o.slice().reverse(),a=function(o){var a=i[o],l=[];t.forEach((function(t){l=l.concat(r.extractColIdsForValueColumn(t,a))}));var u=i.length>1||!s.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn");s.createRowGroupTotal(t,e,a,l,n,u)},s=this,l=0;l<i.length;l++)a(l)},e.prototype.extractColIdsForValueColumn=function(t,e){var r=this,n=t;if(!n.children){var o=n;return o.pivotValueColumn===e&&o.colId?[o.colId]:[]}var i=[];return n.children.forEach((function(t){r.extractColIdsForValueColumn(t,e);var n=r.extractColIdsForValueColumn(t,e);i=i.concat(n)})),i},e.prototype.createRowGroupTotal=function(t,e,n,o,i,a){var s,l=this.columnModel.getValueColumns();if(0===l.length)s=this.createColDef(null,"-",[]);else{var u=this.columnModel.getDisplayNameForColumn(n,"header");s=this.createColDef(n,u,[]),s.pivotTotalColumnIds=o}s.colId=r.PIVOT_ROW_TOTAL_PREFIX+s.colId,e.push(s);var c=a?{children:[s],pivotKeys:[],groupId:r.PIVOT_ROW_TOTAL_PREFIX+"_pivotGroup_"+n.getColId()}:s;i?t.push(c):t.unshift(c)},e.prototype.createColDef=function(t,e,r,n){void 0===n&&(n=!1);var o={};if(t){var i=t.getColDef();Object.assign(o,i),o.hide=!1}return o.headerName=e,o.colId=this.generateColumnId(r||[],t&&!n?t.getColId():""),o.field=o.colId,o.valueGetter=function(t){var e;return null===(e=t.data)||void 0===e?void 0:e[t.colDef.field]},o.pivotKeys=r,o.pivotValueColumn=t,!0===o.filter&&(o.filter="agNumberColumnFilter"),o},e.prototype.sameAggFuncs=function(t){if(1==t.length)return!0;for(var e=1;e<t.length;e++)if(t[e]!==t[0])return!1;return!0},e.prototype.headerNameComparator=function(t,e,r){return t?t(e.headerName,r.headerName):e.headerName&&!r.headerName?1:!e.headerName&&r.headerName?-1:e.headerName&&r.headerName?e.headerName<r.headerName?-1:e.headerName>r.headerName?1:0:0},e.prototype.merge=function(t,e){e.forEach((function(e,r,n){var o=t.has(r)?t.get(r):[],i=Be(Be([],je(o)),je(e));t.set(r,i)}))},e.prototype.generateColumnGroupId=function(t){var e=this.columnModel.getPivotColumns().map((function(t){return t.getColId()}));return"pivotGroup_"+e.join("-")+"_"+t.join("-")},e.prototype.generateColumnId=function(t,e){var r=this.columnModel.getPivotColumns().map((function(t){return t.getColId()}));return"pivot_"+r.join("-")+"_"+t.join("-")+"_"+e},e.prototype.createColDefsFromFields=function(t){for(var e=this,r={},n=0;n<t.length;n++)for(var o=t[n],i=o.split(this.fieldSeparator),a=r,s=0;s<i.length;s++){var l=i[s];null==a[l]&&(a[l]={}),a=a[l]}var u=function(t,r,n,o){var i,a=[];for(var s in n){var l=n[s],c=u(""+t+e.fieldSeparator+s,s,l,o+1);a.push(c)}if(0===a.length){var p={colId:t,headerName:r,valueGetter:function(e){var r;return null===(r=e.data)||void 0===r?void 0:r[t]}},d=e.columnModel.getPrimaryColumn(r);return d&&(p.headerName=null!==(i=e.columnModel.getDisplayNameForColumn(d,"header"))&&void 0!==i?i:r,p.aggFunc=d.getAggFunc(),p.pivotValueColumn=d),p}var h=e.gridOptionsService.is("removePivotHeaderRowWhenSingleValueColumn");if(h&&1===a.length&&"colId"in a[0])return a[0].headerName=r,a[0];var f={openByDefault:-1===e.pivotDefaultExpanded||o<e.pivotDefaultExpanded,groupId:t,headerName:r,children:a};return f},c=[];for(var p in r){var d=r[p],h=u(p,p,d,0);c.push(h)}return c},e.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",Ge([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Ge([Object(a["u"])("gridOptionsService")],e.prototype,"gos",void 0),Ge([a["fb"]],e.prototype,"init",null),e=r=Ge([Object(a["y"])("pivotColDefService")],e),e}(a["z"]),He=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ze=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ue=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uniqueValues={},e}return He(e,t),e.prototype.execute=function(t){var e=t.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(e):this.executePivotOff(e)},e.prototype.executePivotOff=function(t){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),t&&t.setInactive())},e.prototype.executePivotOn=function(t){var e=this.bucketUpRowNodes(t),r=this.setUniqueValues(e),n=this.columnModel.getValueColumns(),o=n.map((function(t){return t.getId()+"-"+t.getColDef().headerName})).join("#"),i=n.map((function(t){return t.getAggFunc().toString()})).join("#"),a=this.aggregationColumnsHashLastTime!==o,s=this.aggregationFuncsHashLastTime!==i;this.aggregationColumnsHashLastTime=o,this.aggregationFuncsHashLastTime=i;var l=this.columnModel.getRowGroupColumns().map((function(t){return t.getId()})).join("#"),u=l!==this.groupColumnsHashLastTime;if(this.groupColumnsHashLastTime=l,r||a||u||s){var c=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),p=c.pivotColumnGroupDefs,d=c.pivotColumnDefs;this.pivotColumnDefs=d,this.columnModel.setSecondaryColumns(p,"rowModelUpdated"),t&&t.setInactive()}},e.prototype.setUniqueValues=function(t){var e=JSON.stringify(t),r=JSON.stringify(this.uniqueValues),n=e!==r;return!!n&&(this.uniqueValues=t,!0)},e.prototype.bucketUpRowNodes=function(t){var e=this,r={};t.forEachChangedNodeDepthFirst((function(t){t.leafGroup&&(t.childrenMapped=null)}));var n=function(t){var o;t.leafGroup?e.bucketRowNode(t,r):null===(o=t.childrenAfterFilter)||void 0===o||o.forEach(n)};return t.executeFromRootNode(n),r},e.prototype.bucketRowNode=function(t,e){var r=this.columnModel.getPivotColumns();0===r.length?t.childrenMapped=null:t.childrenMapped=this.bucketChildren(t.childrenAfterFilter,r,0,e),t.sibling&&(t.sibling.childrenMapped=t.childrenMapped)},e.prototype.bucketChildren=function(t,e,r,n){var o=this,i={},s=e[r];if(t.forEach((function(t){var e=o.valueService.getKeyForNode(s,t);a["Bb"].missing(e)&&(e=""),n[e]||(n[e]={}),i[e]||(i[e]=[]),i[e].push(t)})),r===e.length-1)return i;var l={};return a["Bb"].iterateObject(i,(function(t,i){l[t]=o.bucketChildren(i,e,r+1,n[t])})),l},e.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},ze([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),ze([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),ze([Object(a["u"])("pivotColDefService")],e.prototype,"pivotColDefService",void 0),e=ze([Object(a["y"])("pivotStage")],e),e}(a["z"]),We=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ke=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Xe="undefined"===typeof BigInt?null:BigInt,Ye=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aggFuncsMap={},e.initialised=!1,e}var r;return We(e,t),r=e,e.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsService.get("aggFuncs")))},e.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[r.AGG_SUM]=qe,this.aggFuncsMap[r.AGG_FIRST]=Ze,this.aggFuncsMap[r.AGG_LAST]=Je,this.aggFuncsMap[r.AGG_MIN]=Qe,this.aggFuncsMap[r.AGG_MAX]=$e,this.aggFuncsMap[r.AGG_COUNT]=tr,this.aggFuncsMap[r.AGG_AVG]=er,this.initialised=!0},e.prototype.isAggFuncPossible=function(t,e){var r=this.getFuncNames(t),n=a["Bb"].includes(r,e),o=a["Bb"].exists(this.aggFuncsMap[e]);return n&&o},e.prototype.getDefaultAggFunc=function(t){var e=t.getColDef().defaultAggFunc;if(a["Bb"].exists(e)&&this.isAggFuncPossible(t,e))return e;if(this.isAggFuncPossible(t,r.AGG_SUM))return r.AGG_SUM;var n=this.getFuncNames(t);return a["Bb"].existsAndNotEmpty(n)?n[0]:null},e.prototype.addAggFuncs=function(t){a["Bb"].iterateObject(t,this.addAggFunc.bind(this))},e.prototype.addAggFunc=function(t,e){this.init(),this.aggFuncsMap[t]=e},e.prototype.getAggFunc=function(t){return this.init(),this.aggFuncsMap[t]},e.prototype.getFuncNames=function(t){var e=t.getColDef().allowedAggFuncs;return null==e?Object.keys(this.aggFuncsMap).sort():e},e.prototype.clear=function(){this.aggFuncsMap={}},e.AGG_SUM="sum",e.AGG_FIRST="first",e.AGG_LAST="last",e.AGG_MIN="min",e.AGG_MAX="max",e.AGG_COUNT="count",e.AGG_AVG="avg",Ke([a["fb"]],e.prototype,"init",null),e=r=Ke([Object(a["y"])("aggFuncService")],e),e}(a["z"]);function qe(t){for(var e=t.values,r=null,n=0;n<e.length;n++){var o=e[n];"number"===typeof o?null===r?r=o:r+=Xe?"number"===typeof r?o:Xe(o):o:"bigint"===typeof o&&(r=null===r?o:("bigint"===typeof r?r:Xe(r))+o)}return r}function Ze(t){return t.values.length>0?t.values[0]:null}function Je(t){return t.values.length>0?a["Bb"].last(t.values):null}function Qe(t){for(var e=t.values,r=null,n=0;n<e.length;n++){var o=e[n];"number"!==typeof o&&"bigint"!==typeof o||!(null===r||r>o)||(r=o)}return r}function $e(t){for(var e=t.values,r=null,n=0;n<e.length;n++){var o=e[n];"number"!==typeof o&&"bigint"!==typeof o||!(null===r||r<o)||(r=o)}return r}function tr(t){for(var e,r,n=t.values,o=0,i=0;i<n.length;i++){var a=n[i];o+=null!=a&&"number"===typeof a.value?a.value:1}var s=null===(r=null===(e=t.rowNode)||void 0===e?void 0:e.aggData)||void 0===r?void 0:r[t.column.getColId()];return s&&s.value===o?s:{value:o,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function er(t){for(var e,r,n,o=t.values,i=0,a=0,s=0;s<o.length;s++){var l=o[s],u=null;"number"===typeof l||"bigint"===typeof l?(u=l,a++):null==l||"number"!==typeof l.value&&"bigint"!==typeof l.value||"number"!==typeof l.count||(u=Xe?l.value*("number"===typeof l.value?l.count:Xe(l.count)):l.value*l.count,a+=l.count),"number"===typeof u?i+=Xe?"number"===typeof i?u:Xe(u):u:"bigint"===typeof u&&(i=("bigint"===typeof i?i:Xe(i))+u)}var c=null;a>0&&(c=Xe?i/("number"===typeof i?a:Xe(a)):i/a);var p=null===(r=null===(e=t.rowNode)||void 0===e?void 0:e.aggData)||void 0===r?void 0:r[null===(n=t.column)||void 0===n?void 0:n.getColId()];return p&&p.count===a&&p.value===c?p:{count:a,value:c,toString:function(){return"number"===typeof this.value||"bigint"===typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var rr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},or=function(t){function e(e,r,n,o,i){var a=t.call(this)||this;return a.column=e,a.dragSourceDropTarget=r,a.ghost=n,a.dropZonePurpose=o,a.horizontal=i,a.popupShowing=!1,a}return rr(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE);var r=this.getGui(),n=this.gridOptionsService.is("functionsReadOnly");this.addElementClasses(r),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(a["Bb"].createIconNoSpan("columnDrag",this.gridOptionsService)),this.eButton.appendChild(a["Bb"].createIconNoSpan("cancel",this.gridOptionsService)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),this.ghost||n||this.addDragSource(),this.setupAria(),this.addManagedListener(this.eventService,a["G"].EVENT_SORT_CHANGED,(function(){t.setupAria()})),this.setupTooltip(),this.activateTabIndex()},e.prototype.setupAria=function(){var t=this.localeService.getLocaleTextFunc(),e=this.getColumnAndAggFuncName(),r=e.name,n=e.aggFuncName,o=t("ariaDropZoneColumnComponentAggFuncSeparator"," of "),i={asc:t("ariaDropZoneColumnComponentSortAscending","ascending"),desc:t("ariaDropZoneColumnComponentSortDescending","descending")},s=this.column.getSort(),l=this.gridOptionsService.is("rowGroupPanelSuppressSort"),u=[[n&&""+n+o,r,this.isGroupingZone()&&!l&&s&&", "+i[s]].filter((function(t){return!!t})).join("")],c=this.gridOptionsService.is("functionsReadOnly");if(this.isAggregationZone()&&!c){var p=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");u.push(p)}if(this.isGroupingZone()&&this.column.getColDef().sortable&&!l){var d=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");u.push(d)}var h=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");u.push(h),a["Bb"].setAriaLabel(this.getGui(),u.join(". "))},e.prototype.setupTooltip=function(){var t=this,e=function(){var e=t.column.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,e)},e.prototype.setupSort=function(){var t=this,e=this.column.getColDef().sortable,r=this.isGroupingZone();if(e&&r&&!this.gridOptionsService.is("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);var n=function(e){e.preventDefault();var r="ctrl"===t.gridOptionsService.get("multiSortKey"),n=r?e.ctrlKey||e.metaKey:e.shiftKey;t.sortController.progressSort(t.column,n,"uiColumnSorted")};this.addGuiEventListener("click",n),this.addGuiEventListener("keydown",(function(e){var r=e.key===a["X"].ENTER;r&&t.isGroupingZone()&&n(e)}))}},e.prototype.addDragSource=function(){var t=this,e={type:a["P"].ToolPanel,eElement:this.eDragHandle,getDefaultIconName:function(){return a["O"].ICON_HIDE},getDragItem:function(){return t.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(e)}))},e.prototype.createDragItem=function(){var t={};return t[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:t}},e.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsService.is("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},e.prototype.setupRemove=function(){var t=this;a["Bb"].setDisplayed(this.eButton,!this.gridOptionsService.is("functionsReadOnly"));var r={type:e.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",(function(e){var n=e.key===a["X"].ENTER,o=e.key===a["X"].DELETE;o&&(e.preventDefault(),t.dispatchEvent(r)),n&&t.isAggregationZone()&&!t.gridOptionsService.is("functionsReadOnly")&&(e.preventDefault(),t.onShowAggFuncSelection())})),this.addManagedListener(this.eButton,"click",(function(e){t.dispatchEvent(r),e.stopPropagation()}));var n=new a["vb"](this.eButton);this.addManagedListener(n,a["vb"].EVENT_TAP,(function(){t.dispatchEvent(r)})),this.addDestroyFunc(n.destroy.bind(n))},e.prototype.getColumnAndAggFuncName=function(){var t=this.displayName,e="";if(this.isAggregationZone()){var r=this.column.getAggFunc(),n="string"===typeof r?r:"agg",o=this.localeService.getLocaleTextFunc();e=o(n,n)}return{name:t,aggFuncName:e}},e.prototype.setTextValue=function(){var t=this.getColumnAndAggFuncName(),e=t.name,r=t.aggFuncName,n=this.isAggregationZone()?r+"("+e+")":e,o=a["Bb"].escapeString(n);this.eText.innerHTML=o},e.prototype.onShowAggFuncSelection=function(){var t=this;if(!this.popupShowing){this.popupShowing=!0;var e=new a["xb"]({cssIdentifier:"select-agg-func"}),r=this.aggFuncService.getFuncNames(this.column),n=this.getGui(),o=e.getGui();e.setModel({getRow:function(t){return r[t]},getRowCount:function(){return r.length}}),this.getContext().createBean(e);var i=a["Bb"].loadTemplate('<div class="ag-select-agg-func-popup"></div>');i.style.top="0px",i.style.left="0px",i.appendChild(o),i.style.width=n.clientWidth+"px";var s=this.addManagedListener(i,"focusout",(function(t){!i.contains(t.relatedTarget)&&c&&c.hideFunc()})),l=function(r){t.destroyBean(e),t.popupShowing=!1,"Escape"===(null===r||void 0===r?void 0:r.key)&&n.focus(),s&&s()},u=this.localeService.getLocaleTextFunc(),c=this.popupService.addPopup({modal:!0,eChild:i,closeOnEsc:!0,closedCallback:l,ariaLabel:u("ariaLabelAggregationFunction","Aggregation Function")});c&&e.setComponentCreator(this.createAggSelect.bind(this,c.hideFunc)),e.addGuiEventListener("keydown",(function(t){if(t.key===a["X"].ENTER||t.key===a["X"].SPACE){var r=e.getLastFocusedRow();if(null==r)return;var n=e.getComponentAt(r);n&&n.selectItem()}})),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:n,ePopup:i,keepWithinBounds:!0,column:this.column,position:"under"}),e.refresh();var p=r.findIndex((function(e){return e===t.column.getAggFunc()}));-1===p&&(p=0),e.focusRow(p)}},e.prototype.createAggSelect=function(t,e){var r=this,n=function(){if(t(),r.gridOptionsService.is("functionsPassive")){var n={type:a["R"].EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[r.column],aggFunc:e};r.eventService.dispatchEvent(n)}else r.columnModel.setColumnAggFunc(r.column,e,"toolPanelDragAndDrop")},o=this.localeService.getLocaleTextFunc(),i=e.toString(),s=o(i,i),l=new ir(n,s);return l},e.prototype.addElementClasses=function(t,e){e=e?"-"+e:"";var r=this.horizontal?"horizontal":"vertical";t.classList.add("ag-column-drop-cell"+e,"ag-column-drop-"+r+"-cell"+e)},e.prototype.isAggregationZone=function(){return"aggregation"===this.dropZonePurpose},e.prototype.isGroupingZone=function(){return"rowGroup"===this.dropZonePurpose},e.EVENT_COLUMN_REMOVE="columnRemove",e.TEMPLATE='<span role="option">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',nr([Object(a["u"])("dragAndDropService")],e.prototype,"dragAndDropService",void 0),nr([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),nr([Object(a["u"])("popupService")],e.prototype,"popupService",void 0),nr([Object(a["cb"])("aggFuncService")],e.prototype,"aggFuncService",void 0),nr([Object(a["u"])("sortController")],e.prototype,"sortController",void 0),nr([Object(a["kb"])("eText")],e.prototype,"eText",void 0),nr([Object(a["kb"])("eDragHandle")],e.prototype,"eDragHandle",void 0),nr([Object(a["kb"])("eButton")],e.prototype,"eButton",void 0),nr([Object(a["kb"])("eSortIndicator")],e.prototype,"eSortIndicator",void 0),nr([a["fb"]],e.prototype,"init",null),e}(a["H"]),ir=function(t){function e(e,r){var n=t.call(this,'<div class="ag-select-agg-func-item"/>')||this;return n.selectItem=e,n.getGui().innerText=r,n.addGuiEventListener("click",n.selectItem),n}return rr(e,t),e}(a["H"]),ar=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},lr=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},ur=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},cr=function(t){function e(r,n){var o=t.call(this,'<div class="ag-unselectable" role="presentation"></div>')||this;return o.horizontal=r,o.dropZonePurpose=n,o.state=e.STATE_NOT_DRAGGING,o.guiDestroyFunctions=[],o.childColumnComponents=[],o.resizeEnabled=!1,o.addElementClasses(o.getGui()),o.eColumnDropList=document.createElement("div"),o.addElementClasses(o.eColumnDropList,"list"),a["Bb"].setAriaRole(o.eColumnDropList,"listbox"),o}return ar(e,t),e.prototype.isHorizontal=function(){return this.horizontal},e.prototype.toggleResizable=function(t){this.positionableFeature.setResizable(!!t&&{bottom:!0}),this.resizeEnabled=t},e.prototype.setBeans=function(t){this.beans=t},e.prototype.destroy=function(){this.destroyGui(),t.prototype.destroy.call(this)},e.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach((function(t){return t()})),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,a["Bb"].clearElement(this.getGui()),a["Bb"].clearElement(this.eColumnDropList)},e.prototype.init=function(t){this.params=t,this.createManagedBean(new a["Y"](this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new a["eb"](this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),a["Bb"].setAriaLabel(this.eColumnDropList,this.getAriaLabel())},e.prototype.handleKeyDown=function(t){var e=!this.horizontal,r=t.key===a["X"].DOWN,n=t.key===a["X"].UP;if(!e){var o=this.gridOptionsService.is("enableRtl");r=!o&&t.key===a["X"].RIGHT||o&&t.key===a["X"].LEFT,n=!o&&t.key===a["X"].LEFT||o&&t.key===a["X"].RIGHT}if(r||n){var i=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,n);i&&(t.preventDefault(),i.focus())}},e.prototype.addElementClasses=function(t,e){e=e?"-"+e:"";var r=this.horizontal?"horizontal":"vertical";t.classList.add("ag-column-drop"+e,"ag-column-drop-"+r+e)},e.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},e.prototype.isInterestedIn=function(t){return t===a["P"].HeaderCell||t===a["P"].ToolPanel},e.prototype.checkInsertIndex=function(t){var e=this.getNewInsertIndex(t);if(e<0)return!1;var r=e!==this.insertIndex;return r&&(this.insertIndex=e),r},e.prototype.getNewInsertIndex=function(t){var e=this,r=t.event,n=this.horizontal?r.clientX:r.clientY,o=this.childColumnComponents.map((function(t){return t.getGui().getBoundingClientRect()})),i=o.findIndex((function(t){return e.horizontal?t.right>n&&t.left<n:t.top<n&&t.bottom>n}));if(-1===i){var a=this.beans.gridOptionsService.is("enableRtl"),s=o.every((function(t){return n>(e.horizontal?t.right:t.bottom)}));if(s)return a&&this.horizontal?0:this.childColumnComponents.length;var l=o.every((function(t){return n<(e.horizontal?t.left:t.top)}));return l?a&&this.horizontal?this.childColumnComponents.length:0:this.insertIndex}return this.insertIndex<=i?i+1:i},e.prototype.checkDragStartedBySelf=function(t){this.state===e.STATE_NOT_DRAGGING&&(this.state=e.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=t.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(t),this.refreshGui())},e.prototype.onDragging=function(t){this.checkDragStartedBySelf(t),this.checkInsertIndex(t)&&this.refreshGui()},e.prototype.onDragEnter=function(t){var r=t.dragSource.getDragItem().columns||[];this.state=e.STATE_NEW_COLUMNS_IN;var n=r.filter(this.isColumnDroppable.bind(this));if(n.length>0){var o=this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressRowGroupHidesColumns")&&!t.fromNudge;if(o){var i=t.dragSource.getDragItem(),a=i.columns;this.setColumnsVisible(a,!1,"uiColumnDragged")}this.potentialDndColumns=n,this.checkInsertIndex(t),this.refreshGui()}},e.prototype.setColumnsVisible=function(t,e,r){if(void 0===r&&(r="api"),t){var n=t.filter((function(t){return!t.getColDef().lockVisible}));this.colModel.setColumnsVisible(n,e,r)}},e.prototype.isPotentialDndColumns=function(){return a["Bb"].existsAndNotEmpty(this.potentialDndColumns)},e.prototype.isRowGroupPanel=function(){return"rowGroup"===this.dropZonePurpose},e.prototype.onDragLeave=function(t){if(this.state===e.STATE_REARRANGE_COLUMNS){var r=t.dragSource.getDragItem().columns||[];this.removeColumns(r)}if(this.isPotentialDndColumns()){var n=this.isRowGroupPanel()&&!this.gridOptionsService.is("suppressMakeColumnVisibleAfterUnGroup")&&!t.fromNudge;if(n){var o=t.dragSource.getDragItem();this.setColumnsVisible(o.columns,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=e.STATE_NOT_DRAGGING},e.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var t=!1;this.state===e.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),t=!0):t=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],this.beans.gridOptionsService.is("functionsPassive")&&t||this.refreshGui()}this.state=e.STATE_NOT_DRAGGING},e.prototype.removeColumns=function(t){var e=this.getExistingColumns().filter((function(e){return!a["Bb"].includes(t,e)}));this.updateColumns(e)},e.prototype.addColumns=function(t){if(t){var e=this.getExistingColumns().slice(),r=t.filter((function(t){return e.indexOf(t)<0}));a["Bb"].insertArrayIntoArray(e,r,this.insertIndex),this.updateColumns(e)}},e.prototype.rearrangeColumns=function(t){var e=this.getNonGhostColumns().slice();return a["Bb"].insertArrayIntoArray(e,t,this.insertIndex),!a["Bb"].areEqual(e,this.getExistingColumns())&&(this.updateColumns(e),!0)},e.prototype.refreshGui=function(){var t=this.eColumnDropList.scrollTop,e=this.resizeEnabled,r=this.getFocusedItem(),n=this.focusService.findNextFocusableElement();n||(n=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=t),e&&this.toggleResizable(e),this.focusService.isKeyboardMode()&&this.restoreFocus(r,n)},e.prototype.getFocusedItem=function(){var t=this.getGui(),e=this.gridOptionsService.getDocument().activeElement;if(!t.contains(e))return-1;var r=Array.from(t.querySelectorAll(".ag-column-drop-cell"));return r.indexOf(e)},e.prototype.restoreFocus=function(t,e){var r=this.getGui(),n=Array.from(r.querySelectorAll(".ag-column-drop-cell"));if(-1!==t){0===n.length&&e.focus();var o=Math.min(n.length-1,t),i=n[o];i&&i.focus()}},e.prototype.getNonGhostColumns=function(){var t=this,e=this.getExistingColumns();return this.isPotentialDndColumns()?e.filter((function(e){return!a["Bb"].includes(t.potentialDndColumns,e)})):e},e.prototype.addColumnsToGui=function(){var t=this,e=this.getNonGhostColumns(),r=e.map((function(e){return t.createColumnComponent(e,!1)}));if(this.isPotentialDndColumns()){var n=this.potentialDndColumns.map((function(e){return t.createColumnComponent(e,!0)}));this.insertIndex>=r.length?r.push.apply(r,ur([],lr(n))):r.splice.apply(r,ur([this.insertIndex,0],lr(n)))}this.appendChild(this.eColumnDropList),r.forEach((function(e,r){r>0&&t.addArrow(t.eColumnDropList),t.eColumnDropList.appendChild(e.getGui())})),this.addAriaLabelsToComponents()},e.prototype.addAriaLabelsToComponents=function(){var t=this;this.childColumnComponents.forEach((function(e,r){var n=e.getGui();a["Bb"].setAriaPosInSet(n,r+1),a["Bb"].setAriaSetSize(n,t.childColumnComponents.length)}))},e.prototype.createColumnComponent=function(t,e){var r=this,n=new or(t,this.dropTarget,e,this.dropZonePurpose,this.horizontal);return n.addEventListener(or.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[t])),this.beans.context.createBean(n),this.guiDestroyFunctions.push((function(){return r.destroyBean(n)})),e||this.childColumnComponents.push(n),n},e.prototype.addIconAndTitleToGui=function(){var t=this.params.icon,e=document.createElement("div");if(a["Bb"].setAriaHidden(e,!0),this.addElementClasses(e,"title-bar"),this.addElementClasses(t,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),e.appendChild(t),!this.horizontal){var r=document.createElement("span");this.addElementClasses(r,"title"),r.innerHTML=this.params.title,e.appendChild(r)}this.appendChild(e)},e.prototype.isExistingColumnsEmpty=function(){return 0===this.getExistingColumns().length},e.prototype.addEmptyMessageToGui=function(){if(this.isExistingColumnsEmpty()&&!this.isPotentialDndColumns()){var t=document.createElement("span");t.innerHTML=this.params.emptyMessage,this.addElementClasses(t,"empty-message"),this.eColumnDropList.appendChild(t)}},e.prototype.addArrow=function(t){if(this.horizontal){var e=this.beans.gridOptionsService.is("enableRtl"),r=a["Bb"].createIconNoSpan(e?"smallLeft":"smallRight",this.beans.gridOptionsService);this.addElementClasses(r,"cell-separator"),t.appendChild(r)}},e.STATE_NOT_DRAGGING="notDragging",e.STATE_NEW_COLUMNS_IN="newColumnsIn",e.STATE_REARRANGE_COLUMNS="rearrangeColumns",sr([Object(a["u"])("columnModel")],e.prototype,"colModel",void 0),sr([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),e}(a["H"]),pr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},hr=function(t){function e(e){return t.call(this,e,"rowGroup")||this}return pr(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=e("groups","Row Groups");t.prototype.init.call(this,{dragAndDropIcon:a["O"].ICON_GROUP,icon:a["Bb"].createIconNoSpan("rowGroupPanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},e.prototype.getAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaRowGroupDropZonePanelLabel","Row Groups");return e},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="rowGroupColumnsList",e},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.is("functionsReadOnly")||!t.isPrimary())&&(t.isAllowRowGroup()&&!t.isRowGroupActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.is("functionsPassive")){var e={type:a["R"].EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setRowGroupColumns(t,"toolPanelUi")},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?a["O"].ICON_GROUP:a["O"].ICON_NOT_ALLOWED},e.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},dr([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),dr([Object(a["u"])("loggerFactory")],e.prototype,"loggerFactory",void 0),dr([Object(a["u"])("dragAndDropService")],e.prototype,"dragAndDropService",void 0),dr([a["fb"]],e.prototype,"passBeansUp",null),e}(cr),fr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},yr=function(t){function e(e){return t.call(this,e,"pivot")||this}return fr(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("pivotColumnsEmptyMessage","Drag here to set column labels"),n=e("pivots","Column Labels");t.prototype.init.call(this,{dragAndDropIcon:a["O"].ICON_GROUP,icon:a["Bb"].createIconNoSpan("pivotPanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},e.prototype.getAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaPivotDropZonePanelLabel","Column Labels");return e},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="pivotColumnsList",e},e.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},e.prototype.checkVisibility=function(){var t=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsService.get("pivotPanelShow")){case"always":this.setDisplayed(t);break;case"onlyWhenPivoting":var e=this.columnModel.isPivotActive();this.setDisplayed(t&&e);break;default:this.setDisplayed(!1);break}else this.setDisplayed(t)},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.is("functionsReadOnly")||!t.isPrimary())&&(t.isAllowPivot()&&!t.isPivotActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.is("functionsPassive")){var e={type:a["R"].EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setPivotColumns(t,"toolPanelUi")},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?a["O"].ICON_PIVOT:a["O"].ICON_NOT_ALLOWED},e.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},vr([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),vr([Object(a["u"])("loggerFactory")],e.prototype,"loggerFactory",void 0),vr([Object(a["u"])("dragAndDropService")],e.prototype,"dragAndDropService",void 0),vr([a["fb"]],e.prototype,"passBeansUp",null),e}(cr),gr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},br=function(t){function e(){return t.call(this)||this}return gr(e,t),e.prototype.postConstruct=function(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_ROW_GROUP_CHANGED,this.onRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,this.onRowGroupChanged.bind(this)),this.addManagedPropertyListener("rowGroupPanelShow",this.onRowGroupChanged.bind(this)),this.onRowGroupChanged()},e.prototype.createNorthPanel=function(){var t=document.createElement("div"),e=this.onDropPanelVisible.bind(this);return t.classList.add("ag-column-drop-wrapper"),a["Bb"].setAriaRole(t,"presentation"),this.rowGroupComp=new hr(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new yr(!0),this.createManagedBean(this.pivotComp),t.appendChild(this.rowGroupComp.getGui()),t.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,a["H"].EVENT_DISPLAYED_CHANGED,e),this.addManagedListener(this.pivotComp,a["H"].EVENT_DISPLAYED_CHANGED,e),this.onDropPanelVisible(),t},e.prototype.onDropPanelVisible=function(){var t=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t)},e.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var t=this.gridOptionsService.get("rowGroupPanelShow");if("always"===t)this.rowGroupComp.setDisplayed(!0);else if("onlyWhenGrouping"===t){var e=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(e)}else this.rowGroupComp.setDisplayed(!1)}},mr([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),mr([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),Cr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cr(e,t),e.prototype.execute=function(t){var e=this,r=this.columnModel.isPivotMode(),n=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),o=function(t){return!t.node.group},i=function(t){return t.node.leafGroup},a=this.gridOptionsService.getGroupAggFiltering()||(r?i:o),s=t.changedPath,l=function(t,r){void 0===r&&(r=!1),t.childrenAfterFilter&&(t.childrenAfterAggFilter=t.childrenAfterFilter,r&&t.childrenAfterAggFilter.forEach((function(t){return l(t,r)})),e.setAllChildrenCount(t)),t.sibling&&(t.sibling.childrenAfterAggFilter=t.childrenAfterAggFilter)},u=function(t){var r;t.childrenAfterAggFilter=(null===(r=t.childrenAfterFilter)||void 0===r?void 0:r.filter((function(t){var r,n=a({node:t});if(n){var o=e.filterManager.doesRowPassAggregateFilters({rowNode:t});if(o)return l(t,!0),!0}var i=null===(r=t.childrenAfterAggFilter)||void 0===r?void 0:r.length;return i})))||null,e.setAllChildrenCount(t),t.sibling&&(t.sibling.childrenAfterAggFilter=t.childrenAfterAggFilter)};s.forEachChangedNodeDepthFirst(n?u:l,!0)},e.prototype.setAllChildrenCountTreeData=function(t){var e=0;t.childrenAfterAggFilter.forEach((function(t){e++,e+=t.allChildrenCount})),t.setAllChildrenCount(e)},e.prototype.setAllChildrenCountGridGrouping=function(t){var e=0;t.childrenAfterAggFilter.forEach((function(t){t.group?e+=t.allChildrenCount:e++})),t.setAllChildrenCount(e)},e.prototype.setAllChildrenCount=function(t){t.hasChildren()?this.gridOptionsService.is("treeData")?this.setAllChildrenCountTreeData(t):this.setAllChildrenCountGridGrouping(t):t.setAllChildrenCount(null)},Sr([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),Sr([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),e=Sr([Object(a["y"])("filterAggregatesStage")],e),e}(a["z"]),xr="30.2.1",Or=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Er=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Tr=function(t){function e(){return t.call(this,'\n            <div class="ag-group-filter">\n                <div ref="eGroupField"></div>\n                <div ref="eUnderlyingFilter"></div>\n            </div>\n        ')||this}return Or(e,t),e.prototype.postConstruct=function(){this.initialiseTabGuard({})},e.prototype.init=function(t){var e=this;return this.params=t,this.validateParams(),this.updateGroups().then((function(){e.addManagedListener(e.eventService,a["R"].EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.onColumnRowGroupChanged()}))}))},e.prototype.validateParams=function(){var t=this.params.colDef;t.field&&a["Bb"].doOnce((function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "field". This property will be ignored.')}),"groupFilterFieldParam"),t.filterValueGetter&&a["Bb"].doOnce((function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.')}),"groupFilterFilterValueGetterParam"),t.filterParams&&a["Bb"].doOnce((function(){return console.warn('AG Grid: Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')}),"groupFilterFilterParams")},e.prototype.updateGroups=function(){var t=this.updateGroupField();return this.getUnderlyingFilters(t)},e.prototype.getSourceColumns=function(){if(this.groupColumn=this.params.column,this.gridOptionsService.is("treeData"))return a["Bb"].doOnce((function(){return console.warn("AG Grid: Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.")}),"groupFilterTreeData"),[];var t=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);return t||(a["Bb"].doOnce((function(){return console.warn("AG Grid: Group Column Filter only works on group columns. Please use a different filter.")}),"groupFilterNotGroupColumn"),[])},e.prototype.updateGroupField=function(){var t=this;a["Bb"].clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);var e=this.getSourceColumns(),r=e.filter((function(t){return t.isFilterAllowed()}));return r.length?(1===e.length?(this.selectedColumn=r[0],a["Bb"].setDisplayed(this.eGroupField,!1)):(this.selectedColumn&&r.some((function(e){return e.getId()===t.selectedColumn.getId()}))||(this.selectedColumn=r[0]),this.createGroupFieldSelectElement(r),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(a["Bb"].loadTemplate('<div class="ag-filter-separator"></div>')),a["Bb"].setDisplayed(this.eGroupField,!0)),r):(this.selectedColumn=void 0,a["Bb"].setDisplayed(this.eGroupField,!1),null)},e.prototype.createGroupFieldSelectElement=function(t){var e=this;this.eGroupFieldSelect=this.createManagedBean(new a["p"]);var r=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(r("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(t.map((function(t){var r;return{value:t.getId(),text:null!==(r=e.columnModel.getDisplayNameForColumn(t,"groupFilter",!1))&&void 0!==r?r:void 0}}))),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange((function(t){return e.updateSelectedColumn(t)})),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),1===t.length&&this.eGroupFieldSelect.setDisabled(!0)},e.prototype.getUnderlyingFilters=function(t){var e=this;if(!t)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),a["m"].resolve();var r=[],n=[];return t.forEach((function(t){var o=e.filterManager.getOrCreateFilterWrapper(t,"COLUMN_MENU");(null===o||void 0===o?void 0:o.filterPromise)&&r.push(o.filterPromise.then((function(r){return r&&n.push({filter:r,column:t}),t.getId()===e.selectedColumn.getId()&&(e.selectedFilter=null!==r&&void 0!==r?r:void 0),r})))})),a["m"].all(r).then((function(){e.filterColumnPairs=n,e.groupColumn.setFilterActive(e.isFilterActive(),"columnRowGroupChanged")}))},e.prototype.addUnderlyingFilterElement=function(){var t=this;if(a["Bb"].clearElement(this.eUnderlyingFilter),!this.selectedColumn)return a["m"].resolve();var e=this.filterManager.getOrCreateFilterWrapper(this.selectedColumn,"COLUMN_MENU");return e?e.guiPromise.then((function(r){var n;t.eUnderlyingFilter.appendChild(r),null===(n=e.filterPromise)||void 0===n||n.then((function(e){var r,n;null===(r=null===e||void 0===e?void 0:e.afterGuiAttached)||void 0===r||r.call(e,t.afterGuiAttachedParams),(null===(n=t.afterGuiAttachedParams)||void 0===n?void 0:n.suppressFocus)||!t.eGroupFieldSelect||t.eGroupFieldSelect.isDisabled()||t.eGroupFieldSelect.getFocusableElement().focus()}))})):a["m"].resolve()},e.prototype.updateSelectedColumn=function(t){var r,n;if(t){null===(n=null===(r=this.selectedFilter)||void 0===r?void 0:r.afterGuiDetached)||void 0===n||n.call(r);var o=this.getFilterColumnPair(t);this.selectedColumn=null===o||void 0===o?void 0:o.column,this.selectedFilter=null===o||void 0===o?void 0:o.filter,this.dispatchEvent({type:e.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}},e.prototype.isFilterActive=function(){var t;return!!(null===(t=this.filterColumnPairs)||void 0===t?void 0:t.some((function(t){var e=t.filter;return e.isFilterActive()})))},e.prototype.doesFilterPass=function(){return!0},e.prototype.getModel=function(){return null},e.prototype.setModel=function(){return a["m"].resolve()},e.prototype.afterGuiAttached=function(t){this.afterGuiAttachedParams=t,this.addUnderlyingFilterElement()},e.prototype.afterGuiDetached=function(){var t,e;a["Bb"].clearElement(this.eUnderlyingFilter),null===(e=null===(t=this.selectedFilter)||void 0===t?void 0:t.afterGuiDetached)||void 0===e||e.call(t)},e.prototype.onColumnRowGroupChanged=function(){var t=this;this.updateGroups().then((function(){t.dispatchEvent({type:e.EVENT_COLUMN_ROW_GROUP_CHANGED}),t.eventService.dispatchEvent({type:"filterAllowedUpdated"})}))},e.prototype.getFilterColumnPair=function(t){var e;if(t)return null===(e=this.filterColumnPairs)||void 0===e?void 0:e.find((function(e){var r=e.column;return r.getId()===t}))},e.prototype.getSelectedFilter=function(){return this.selectedFilter},e.prototype.getSelectedColumn=function(){return this.selectedColumn},e.prototype.isFilterAllowed=function(){return!!this.selectedColumn},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",e.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged",Er([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),Er([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Er([Object(a["kb"])("eGroupField")],e.prototype,"eGroupField",void 0),Er([Object(a["kb"])("eUnderlyingFilter")],e.prototype,"eUnderlyingFilter",void 0),Er([a["fb"]],e.prototype,"postConstruct",null),e}(a["rb"]),Pr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ar=function(t){function e(){var e=t.call(this,'\n            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>\n        ')||this;return e.haveAddedColumnListeners=!1,e}return Pr(e,t),e.prototype.init=function(t){var e=this;this.params=t;var r="multipleColumns"===this.gridOptionsService.get("groupDisplayType");return new a["m"]((function(t){e.params.parentFilterInstance((function(n){e.parentFilterInstance=n,r?e.setupUnderlyingFloatingFilterElement().then((function(){return t()})):(e.setupReadOnlyFloatingFilterElement(),t())}))})).then((function(){e.addManagedListener(e.parentFilterInstance,Tr.EVENT_SELECTED_COLUMN_CHANGED,(function(){return e.onSelectedColumnChanged()})),e.addManagedListener(e.parentFilterInstance,Tr.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.onColumnRowGroupChanged()}))}))},e.prototype.onParamsUpdated=function(t){this.params=t,this.setParams()},e.prototype.setParams=function(){var t,e=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),r=this.localeService.getLocaleTextFunc();null===(t=this.eFloatingFilterText)||void 0===t||t.setInputAriaLabel(e+" "+r("ariaFilterInput","Filter Input"))},e.prototype.setupReadOnlyFloatingFilterElement=function(){var t=this;this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new a["h"]),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(function(){return t.params.showParentFilter()})),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())},e.prototype.setupUnderlyingFloatingFilterElement=function(){var t=this;this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,a["Bb"].clearElement(this.eFloatingFilter);var e=this.parentFilterInstance.getSelectedColumn();if(e&&!e.isVisible()){var r=this.filterManager.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(r)return this.compDetails=r,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(e,a["G"].EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(e,a["G"].EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),r.newAgStackInstance().then((function(e){var r,n;t.underlyingFloatingFilter=e,null===(r=t.underlyingFloatingFilter)||void 0===r||r.onParentModelChanged(null===(n=t.parentFilterInstance.getSelectedFilter())||void 0===n?void 0:n.getModel()),t.appendChild(e.getGui()),t.showingUnderlyingFloatingFilter=!0}))}return this.setupReadOnlyFloatingFilterElement(),a["m"].resolve()},e.prototype.onColumnVisibleChanged=function(){this.setupUnderlyingFloatingFilterElement()},e.prototype.onColDefChanged=function(t){var e,r;if(t.column){var n=this.filterManager.getFloatingFilterCompDetails(t.column,this.params.showParentFilter);n&&(null===(r=null===(e=this.underlyingFloatingFilter)||void 0===e?void 0:e.onParamsUpdated)||void 0===r||r.call(e,n.params))}},e.prototype.onParentModelChanged=function(t,e){var r,n;this.showingUnderlyingFloatingFilter?null===(r=this.underlyingFloatingFilter)||void 0===r||r.onParentModelChanged(null===(n=this.parentFilterInstance.getSelectedFilter())||void 0===n?void 0:n.getModel(),e):this.updateDisplayedValue()},e.prototype.updateDisplayedValue=function(){if(this.parentFilterInstance&&this.eFloatingFilterText){var t=this.parentFilterInstance.getSelectedFilter();if(!t)return this.eFloatingFilterText.setValue(""),void this.eFloatingFilterText.setDisplayed(!1);if(this.eFloatingFilterText.setDisplayed(!0),t.getModelAsString){var e=t.getModel();this.eFloatingFilterText.setValue(null==e?"":t.getModelAsString(e))}else this.eFloatingFilterText.setValue("")}},e.prototype.onSelectedColumnChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},e.prototype.onColumnRowGroupChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},Dr([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Dr([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),Dr([Object(a["kb"])("eFloatingFilter")],e.prototype,"eFloatingFilter",void 0),e}(a["H"]),Mr={version:xr,moduleName:a["Z"].RowGroupingModule,beans:[Ae,wr,Ie,Ve,Ue,Ye],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:br}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:Tr},{componentName:"agGroupColumnFloatingFilter",componentClass:Ar}],dependantModules:[b]},Rr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_r=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},kr=function(t){function e(e){return t.call(this,e,"aggregation")||this}return Rr(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),r=e("valueColumnsEmptyMessage","Drag here to aggregate"),n=e("values","Values");t.prototype.init.call(this,{dragAndDropIcon:a["O"].ICON_AGGREGATE,icon:a["Bb"].createIconNoSpan("valuePanel",this.gridOptionsService,null),emptyMessage:r,title:n}),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},e.prototype.getAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaValuesDropZonePanelLabel","Values");return e},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="valueColumnsList",e},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?a["O"].ICON_AGGREGATE:a["O"].ICON_NOT_ALLOWED},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.is("functionsReadOnly")||!t.isPrimary())&&(t.isAllowValue()&&!t.isValueActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.is("functionsPassive")){var e={type:a["R"].EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setValueColumns(t,"toolPanelUi")},e.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},_r([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),_r([Object(a["u"])("loggerFactory")],e.prototype,"loggerFactory",void 0),_r([Object(a["u"])("dragAndDropService")],e.prototype,"dragAndDropService",void 0),_r([a["fb"]],e.prototype,"passBeansUp",null),e}(cr),Fr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ir=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Lr=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return Fr(e,t),e.prototype.init=function(t,e,r){this.allowDragging=t,this.params=e,this.eventType=r,this.primaryColsHeaderPanel.init(this.params);var n=this.params.suppressColumnFilter,o=this.params.suppressColumnSelectAll,i=this.params.suppressColumnExpandAll;i&&n&&o&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new a["eb"](this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},e.prototype.toggleResizable=function(t){this.positionableFeature.setResizable(!!t&&{bottom:!0})},e.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},e.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},e.prototype.expandGroups=function(t){this.primaryColsListPanel.setGroupsExpanded(!0,t)},e.prototype.collapseGroups=function(t){this.primaryColsListPanel.setGroupsExpanded(!1,t)},e.prototype.setColumnLayout=function(t){this.primaryColsListPanel.setColumnLayout(t)},e.prototype.onFilterChanged=function(t){this.primaryColsListPanel.setFilterText(t.filterText)},e.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},e.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},e.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},e.prototype.onGroupExpanded=function(t){this.primaryColsHeaderPanel.setExpandState(t.state)},e.prototype.onSelectionChange=function(t){this.primaryColsHeaderPanel.setSelectionState(t.state)},e.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',Ir([Object(a["kb"])("primaryColsHeaderPanel")],e.prototype,"primaryColsHeaderPanel",void 0),Ir([Object(a["kb"])("primaryColsListPanel")],e.prototype,"primaryColsListPanel",void 0),e}(a["H"]),Nr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gr=function(){return Gr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Gr.apply(this,arguments)},jr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Br=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.initialised=!1,r.childDestroyFuncs=[],r}return Nr(e,t),e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.init=function(t){var e=this,r={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(this.params=Gr(Gr(Gr({},r),t),{context:this.gridOptionsService.context}),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new Te),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotModePanel)})),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Lr),this.childDestroyFuncs.push((function(){return e.destroyBean(e.primaryColsPanel)})),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new hr(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.rowGroupDropZonePanel)})),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new kr(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.valuesDropZonePanel)})),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new yr(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotDropZonePanel)})),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var n=this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){e.resetChildrenHeight(),e.setLastVisible()}));this.childDestroyFuncs.push((function(){return n()}))}this.initialised=!0},e.prototype.setPivotModeSectionVisible=function(t){var e=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(t):t&&(this.pivotModePanel=this.createBean(new Te),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotModePanel)}))),this.setLastVisible())},e.prototype.setRowGroupsSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(t):t&&(this.rowGroupDropZonePanel=this.createManagedBean(new hr(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},e.prototype.setValuesSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(t):t&&(this.valuesDropZonePanel=this.createManagedBean(new kr(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},e.prototype.setPivotSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(t):t&&(this.pivotDropZonePanel=this.createManagedBean(new yr(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(t)),this.setLastVisible())},e.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((function(t){if(t){var e=t.getGui();t.toggleResizable(!e.classList.contains("ag-last-column-drop")&&!e.classList.contains("ag-hidden"))}}))},e.prototype.setLastVisible=function(){var t=this.getGui(),e=Array.prototype.slice.call(t.querySelectorAll(".ag-column-drop"));e.forEach((function(t){return t.classList.remove("ag-last-column-drop")}));var r=t.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),n=a["Bb"].last(r);n&&n.classList.add("ag-last-column-drop"),this.setResizers()},e.prototype.resetChildrenHeight=function(){for(var t=this.getGui(),e=t.children,r=0;r<e.length;r++){var n=e[r];n.style.removeProperty("height"),n.style.removeProperty("flex")}},e.prototype.isRowGroupingModuleLoaded=function(){return a["ab"].__assertRegistered(a["Z"].RowGroupingModule,"Row Grouping",this.context.getGridId())},e.prototype.expandColumnGroups=function(t){this.primaryColsPanel.expandGroups(t)},e.prototype.collapseColumnGroups=function(t){this.primaryColsPanel.collapseGroups(t)},e.prototype.setColumnLayout=function(t){this.primaryColsPanel.setColumnLayout(t)},e.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},e.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach((function(t){return t()})),this.childDestroyFuncs.length=0,a["Bb"].clearElement(this.getGui())},e.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},e.prototype.destroy=function(){this.destroyChildren(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-column-panel"></div>',jr([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),jr([Object(a["u"])("columnApi")],e.prototype,"columnApi",void 0),e}(a["H"]),Vr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},zr=function(t){function e(){var e=t.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return e.minWidth=100,e.maxWidth=null,e}return Vr(e,t),e.prototype.setElementToResize=function(t){this.elementToResize=t},e.prototype.postConstruct=function(){var t=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(t),this.setInverted(this.gridOptionsService.is("enableRtl"))},e.prototype.dispatchResizeEvent=function(t,e,r){var n={type:a["R"].EVENT_TOOL_PANEL_SIZE_CHANGED,width:r,started:t,ended:e};this.eventService.dispatchEvent(n)},e.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)},e.prototype.onResizeEnd=function(t){return this.onResizing(t,!0)},e.prototype.onResizing=function(t,e){void 0===e&&(e=!1);var r=this.inverted?-1:1,n=Math.max(this.minWidth,Math.floor(this.startingWidth-t*r));null!=this.maxWidth&&(n=Math.min(this.maxWidth,n)),this.elementToResize.style.width=n+"px",this.dispatchResizeEvent(!1,e,n)},e.prototype.setInverted=function(t){this.inverted=t},e.prototype.setMaxWidth=function(t){this.maxWidth=t},e.prototype.setMinWidth=function(t){this.minWidth=null!=t?t:100},Hr([Object(a["u"])("horizontalResizeService")],e.prototype,"horizontalResizeService",void 0),Hr([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),Ur=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Kr=function(t){function e(e){var r=t.call(this)||this;return r.toolPanelDef=e,r}return Ur(e,t),e.prototype.getToolPanelId=function(){return this.toolPanelDef.id},e.prototype.postConstruct=function(){var t=this.createTemplate();this.setTemplate(t),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id","ag-"+this.getCompId()+"-button")},e.prototype.createTemplate=function(){var t='<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span ref ="eLabel" class="ag-side-button-label"></span>\n                </button>\n            </div>';return t},e.prototype.setLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=this.toolPanelDef,r=t(e.labelKey,e.labelDefault);this.eLabel.innerText=r},e.prototype.setIcon=function(){this.eIconWrapper.insertAdjacentElement("afterbegin",a["Bb"].createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsService))},e.prototype.onButtonPressed=function(){this.dispatchEvent({type:e.EVENT_TOGGLE_BUTTON_CLICKED})},e.prototype.setSelected=function(t){this.addOrRemoveCssClass("ag-selected",t),a["Bb"].setAriaExpanded(this.eToggleButton,t)},e.prototype.getButtonElement=function(){return this.eToggleButton},e.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",Wr([Object(a["kb"])("eToggleButton")],e.prototype,"eToggleButton",void 0),Wr([Object(a["kb"])("eIconWrapper")],e.prototype,"eIconWrapper",void 0),Wr([Object(a["kb"])("eLabel")],e.prototype,"eLabel",void 0),Wr([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),Xr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},qr=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.buttonComps=[],r}return Xr(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},e.prototype.handleKeyDown=function(t){if(t.key===a["X"].TAB&&t.shiftKey){var e=a["Bb"].last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(e,!0)&&t.preventDefault()}},e.prototype.setActiveButton=function(t){this.buttonComps.forEach((function(e){e.setSelected(t===e.getToolPanelId())}))},e.prototype.addButtonComp=function(t){var r=this,n=this.createBean(new Kr(t));return this.buttonComps.push(n),this.appendChild(n),n.addEventListener(Kr.EVENT_TOGGLE_BUTTON_CLICKED,(function(){r.dispatchEvent({type:e.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:t.id})})),n},e.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),a["Bb"].clearElement(this.getGui())},e.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",e.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',Yr([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),Yr([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Yr([a["fb"]],e.prototype,"postConstruct",null),Yr([a["hb"]],e.prototype,"clearButtons",null),e}(a["H"]),Zr=function(){function t(){}return t.parse=function(e){if(e){if(!0===e)return{toolPanels:[t.DEFAULT_COLUMN_COMP,t.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"===typeof e)return t.parse([e]);if(Array.isArray(e)){var r=[];if(e.forEach((function(e){var n=t.DEFAULT_BY_KEY[e];n?r.push(n):console.warn("AG Grid: the key "+e+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(t.DEFAULT_BY_KEY).join(","))})),0===r.length)return;return{toolPanels:r,defaultToolPanel:r[0].id}}var n={toolPanels:t.parseComponents(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position};return n}},t.parseComponents=function(e){var r=[];return e?(e.forEach((function(e){var n=null;if("string"===typeof e){var o=t.DEFAULT_BY_KEY[e];if(!o)return void console.warn("AG Grid: the key "+e+" is not a valid key for specifying a tool panel, valid keys are: "+Object.keys(t.DEFAULT_BY_KEY).join(","));n=o}else n=e;r.push(n)})),r):r},t.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},t.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},t.DEFAULT_BY_KEY={columns:t.DEFAULT_COLUMN_COMP,filters:t.DEFAULT_FILTER_COMP},t}(),Jr=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qr=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},$r=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return Jr(e,t),e.prototype.setupResize=function(){var t=this.getGui(),e=this.resizeBar=this.createManagedBean(new zr);t.setAttribute("id","ag-"+this.getCompId()),e.setElementToResize(t),this.appendChild(e)},e.prototype.getToolPanelId=function(){return this.toolPanelId},e.prototype.setToolPanelDef=function(t){var e=t.id,r=t.minWidth,n=t.maxWidth,o=t.width;this.toolPanelId=e,this.width=o;var i={},a=this.userComponentFactory.getToolPanelCompDetails(t,i),s=a.newAgStackInstance();null!=s?(s.then(this.setToolPanelComponent.bind(this)),null!=r&&this.resizeBar.setMinWidth(r),null!=n&&this.resizeBar.setMaxWidth(n)):console.warn("AG Grid: error processing tool panel component "+e+". You need to specify 'toolPanel'")},e.prototype.setToolPanelComponent=function(t){var e=this;this.toolPanelCompInstance=t,this.appendChild(t.getGui()),this.addDestroyFunc((function(){e.destroyBean(t)})),this.width&&(this.getGui().style.width=this.width+"px")},e.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},e.prototype.setResizerSizerSide=function(t){var e=this.gridOptionsService.is("enableRtl"),r="left"===t,n=e?r:!r;this.resizeBar.setInverted(n)},e.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},e.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>',Qr([Object(a["u"])("userComponentFactory")],e.prototype,"userComponentFactory",void 0),Qr([a["fb"]],e.prototype,"setupResize",null),e}(a["H"]),tn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),en=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},rn=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nn=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.toolPanelWrappers=[],r}return tn(e,t),e.prototype.postConstruct=function(){var t=this;this.sideBarButtonsComp.addEventListener(qr.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this)),this.setSideBarDef(),this.addManagedPropertyListener("sideBar",(function(){t.clearDownUi(),t.setSideBarDef()})),this.gridApi.registerSideBarComp(this),this.createManagedBean(new a["Y"](this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},e.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented){var e=this,r=e.focusService,n=e.sideBarButtonsComp,o=this.getGui(),i=n.getGui(),a=this.gridOptionsService.getDocument(),s=a.activeElement,l=o.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),u=t.target;if(l)if(i.contains(s))r.focusInto(l,t.shiftKey)&&t.preventDefault();else if(t.shiftKey){var c=null;l.contains(s)?c=this.focusService.findNextFocusableElement(l,void 0,!0):r.isTargetUnderManagedComponent(l,u)&&t.shiftKey&&(c=this.focusService.findFocusableElementBeforeTabGuard(l,u)),c||(c=i.querySelector(".ag-selected button")),c&&(t.preventDefault(),c.focus())}}},e.prototype.handleKeyDown=function(t){var e=this.gridOptionsService.getDocument();if(this.sideBarButtonsComp.getGui().contains(e.activeElement)){var r=this.sideBarButtonsComp.getGui(),n=Array.prototype.slice.call(r.querySelectorAll(".ag-side-button")),o=e.activeElement,i=n.findIndex((function(t){return t.contains(o)})),s=null;switch(t.key){case a["X"].LEFT:case a["X"].UP:s=Math.max(0,i-1);break;case a["X"].RIGHT:case a["X"].DOWN:s=Math.min(i+1,n.length-1);break}if(null!==s){var l=n[s].querySelector("button");l&&(l.focus(),t.preventDefault())}}},e.prototype.onToolPanelButtonClicked=function(t){var e=t.toolPanelId,r=this.openedItem();r===e?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(e,"sideBarButtonClicked")},e.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},e.prototype.setSideBarDef=function(){this.setDisplayed(!1);var t=this.gridOptionsService.get("sideBar");if(this.sideBar=Zr.parse(t),this.sideBar&&this.sideBar.toolPanels){var e=this.sideBar.toolPanels;if(this.createToolPanelsAndSideButtons(e),!this.toolPanelWrappers.length)return;var r=!this.sideBar.hiddenByDefault;this.setDisplayed(r),this.setSideBarPosition(this.sideBar.position),this.sideBar.hiddenByDefault||this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}},e.prototype.getDef=function(){return this.sideBar},e.prototype.setSideBarPosition=function(t){t||(t="right");var e="left"===t,r=e?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",e),this.addOrRemoveCssClass("ag-side-bar-right",!e),this.toolPanelWrappers.forEach((function(t){t.setResizerSizerSide(r)})),this},e.prototype.createToolPanelsAndSideButtons=function(t){var e,r;try{for(var n=rn(t),o=n.next();!o.done;o=n.next()){var i=o.value;this.createToolPanelAndSideButton(i)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},e.prototype.validateDef=function(t){if(null==t.id)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if("agColumnsToolPanel"===t.toolPanel){var e=!a["ab"].__assertRegistered(a["Z"].ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId());if(e)return!1}if("agFiltersToolPanel"===t.toolPanel){e=!a["ab"].__assertRegistered(a["Z"].FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId());if(e)return!1;if(this.filterManager.isAdvancedFilterEnabled())return a["Bb"].doOnce((function(){console.warn("AG Grid: Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.")}),"advancedFilterToolPanel"),!1}return!0},e.prototype.createToolPanelAndSideButton=function(t){if(this.validateDef(t)){var e=this.sideBarButtonsComp.addButtonComp(t),r=this.getContext().createBean(new $r);r.setToolPanelDef(t),r.setDisplayed(!1);var n=r.getGui();this.appendChild(n),this.toolPanelWrappers.push(r),a["Bb"].setAriaControls(e.getButtonElement(),n)}},e.prototype.refresh=function(){this.toolPanelWrappers.forEach((function(t){return t.refresh()}))},e.prototype.openToolPanel=function(t,e){void 0===e&&(e="api");var r=this.openedItem();if(r!==t){this.toolPanelWrappers.forEach((function(e){var r=t===e.getToolPanelId();e.setDisplayed(r)}));var n=this.openedItem(),o=r!==n;o&&(this.sideBarButtonsComp.setActiveButton(t),this.raiseToolPanelVisibleEvent(t,null!==r&&void 0!==r?r:void 0,e))}},e.prototype.getToolPanelInstance=function(t){var e=this.toolPanelWrappers.filter((function(e){return e.getToolPanelId()===t}))[0];if(e)return e.getToolPanelInstance();console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: "+t)},e.prototype.raiseToolPanelVisibleEvent=function(t,e,r){var n=!!t&&!!e;if(e){var o={type:a["R"].EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:r,key:e,visible:!1,switchingToolPanel:n};this.eventService.dispatchEvent(o)}if(t){var i={type:a["R"].EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:r,key:t,visible:!0,switchingToolPanel:n};this.eventService.dispatchEvent(i)}},e.prototype.close=function(t){void 0===t&&(t="api"),this.openToolPanel(void 0,t)},e.prototype.isToolPanelShowing=function(){return!!this.openedItem()},e.prototype.openedItem=function(){var t=null;return this.toolPanelWrappers.forEach((function(e){e.isDisplayed()&&(t=e.getToolPanelId())})),t},e.prototype.destroyToolPanelWrappers=function(){var t=this;this.toolPanelWrappers.forEach((function(e){a["Bb"].removeFromParent(e.getGui()),t.destroyBean(e)})),this.toolPanelWrappers.length=0},e.prototype.destroy=function(){this.destroyToolPanelWrappers(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',en([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),en([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),en([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),en([Object(a["kb"])("sideBarButtons")],e.prototype,"sideBarButtonsComp",void 0),en([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),on=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),an=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isColGroupDef=function(t){return t&&"undefined"!==typeof t.children},e.getId=function(t){return e.isColGroupDef(t)?t.groupId:t.colId},e}return on(e,t),e.prototype.createColumnTree=function(t){var e=this,r=[],n=function(t,o){if(e.isColGroupDef(t)){var i=t,s="undefined"!==typeof i.groupId?i.groupId:i.headerName,l=new a["ib"](i,s,!1,o),u=[];return i.children.forEach((function(t){var e=n(t,o+1);e&&u.push(e)})),l.setChildren(u),l}var c=t,p=c.colId?c.colId:c.field,d=e.columnModel.getPrimaryColumn(p);return d||r.push(c),d},o=[];return t.forEach((function(t){var e=n(t,0);e&&o.push(e)})),r.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",r),o},e.prototype.syncLayoutWithGrid=function(t){var e=this.getLeafPathTrees(),r=this.mergeLeafPathTrees(e);t(r)},e.prototype.getLeafPathTrees=function(){var t=function(e,r){var n;if(e instanceof a["ib"])if(e.isPadding())n=r;else{var o=Object.assign({},e.getColGroupDef());o.groupId=e.getGroupId(),o.children=[r],n=o}else{var i=Object.assign({},e.getColDef());i.colId=e.getColId(),n=i}var s=e.getOriginalParent();return s?t(s,n):n},e=this.columnModel.getAllGridColumns(),r=e.filter((function(t){var e=t.getColDef();return t.isPrimary()&&!e.showRowGroup}));return r.map((function(e){return t(e,e.getColDef())}))},e.prototype.mergeLeafPathTrees=function(t){for(var e=this,r=function(t,r){var n=e.isColGroupDef(t)&&e.isColGroupDef(r);return n&&e.getId(t)===e.getId(r)},n=function(t,r){if(!e.isColGroupDef(r))return t;var o=t,i=r;if(i.children&&i.groupId){var a=e.addChildrenToGroup(o,i.groupId,i.children[0]);if(a)return o}return i.children.forEach((function(t){return n(o,t)})),o},o=[],i=1;i<=t.length;i++){var a=t[i-1],s=t[i];r(a,s)?t[i]=n(a,s):o.push(a)}return o},e.prototype.addChildrenToGroup=function(t,e,r){var n=this,o=function(t,e){var r=t.children.map(n.getId),o=a["Bb"].includes(r,n.getId(e)),i=a["Bb"].last(t.children),s=i&&n.getId(i)!==n.getId(e);return o&&s};if(!this.isColGroupDef(t))return!0;var i=t,s=r;if(o(i,s))return i.children.push(s),!0;if(i.groupId===e){var l=i.children.map(this.getId),u=a["Bb"].includes(l,this.getId(s));if(!u)return i.children.push(s),!0}return i.children.forEach((function(t){return n.addChildrenToGroup(t,e,r)})),!1},an([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),e=an([Object(a["y"])("toolPanelColDefService")],e),e}(a["z"]),ln="30.2.1",un={version:ln,moduleName:a["Z"].SideBarModule,beans:[sn],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:zr},{componentName:"AgSideBar",componentClass:nn},{componentName:"AgSideBarButtons",componentClass:qr}],dependantModules:[b]},cn=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},pn=function(){function t(){}return t.prototype.selectAllChildren=function(t,e,r){var n=this.extractAllLeafColumns(t);this.setAllColumns(n,e,r)},t.prototype.setColumn=function(t,e,r){this.setAllColumns([t],e,r)},t.prototype.setAllColumns=function(t,e,r){this.columnModel.isPivotMode()?this.setAllPivot(t,e,r):this.setAllVisible(t,e,r)},t.prototype.extractAllLeafColumns=function(t){var e=[],r=function(t){t.forEach((function(t){t.isPassesFilter()&&(t.isGroup()?r(t.getChildren()):e.push(t.getColumn()))}))};return r(t),e},t.prototype.setAllVisible=function(t,e,r){var n=[];t.forEach((function(t){t.getColDef().lockVisible||t.isVisible()!=e&&n.push({colId:t.getId(),hide:!e})})),n.length>0&&this.columnModel.applyColumnState({state:n},r)},t.prototype.setAllPivot=function(t,e,r){this.gridOptionsService.is("functionsPassive")?this.setAllPivotPassive(t,e):this.setAllPivotActive(t,e,r)},t.prototype.setAllPivotPassive=function(t,e){var r=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),o=this.columnModel.getRowGroupColumns().slice(),i=!1,s=!1,l=!1,u=function(t){t.isAnyFunctionActive()||(t.isAllowValue()?(n.push(t),s=!0):t.isAllowRowGroup()?(o.push(t),i=!0):t.isAllowPivot()&&(r.push(t),l=!0))},c=function(t){t.isAnyFunctionActive()&&(r.indexOf(t)>=0&&(a["Bb"].removeFromArray(r,t),i=!0),n.indexOf(t)>=0&&(a["Bb"].removeFromArray(n,t),s=!0),o.indexOf(t)>=0&&(a["Bb"].removeFromArray(o,t),l=!0))},p=e?u:c;if(t.forEach(p),i){var d={type:a["R"].EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(d)}if(l){var h={type:a["R"].EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:o};this.eventService.dispatchEvent(h)}if(s){var f={type:a["R"].EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:o};this.eventService.dispatchEvent(f)}},t.prototype.setAllPivotActive=function(t,e,r){var n=this,o=[],i=function(t){if(!t.isAnyFunctionActive())if(t.isAllowValue()){var e="string"===typeof t.getAggFunc()?t.getAggFunc():n.aggFuncService.getDefaultAggFunc(t);o.push({colId:t.getId(),aggFunc:e})}else t.isAllowRowGroup()?o.push({colId:t.getId(),rowGroup:!0}):t.isAllowPivot()&&o.push({colId:t.getId(),pivot:!0})},a=function(t){var e=t.isPivotActive()||t.isRowGroupActive()||t.isValueActive();e&&o.push({colId:t.getId(),pivot:!1,rowGroup:!1,aggFunc:null})},s=e?i:a;t.forEach(s),o.length>0&&this.columnModel.applyColumnState({state:o},r)},t.prototype.updateColumns=function(t){var e=this,r=t.columns,n=t.visibleState,o=t.pivotState,i=t.eventType,a=r.map((function(t){var r=t.getColId();if(e.columnModel.isPivotMode()){var i=null===o||void 0===o?void 0:o[r];return{colId:r,pivot:null===i||void 0===i?void 0:i.pivot,rowGroup:null===i||void 0===i?void 0:i.rowGroup,aggFunc:null===i||void 0===i?void 0:i.aggFunc}}return{colId:r,hide:!(null===n||void 0===n?void 0:n[r])}}));this.columnModel.applyColumnState({state:a},i)},t.prototype.createPivotState=function(t){return{pivot:t.isPivotActive(),rowGroup:t.isRowGroupActive(),aggFunc:t.isValueActive()?t.getAggFunc():void 0}},cn([Object(a["u"])("aggFuncService")],t.prototype,"aggFuncService",void 0),cn([Object(a["u"])("columnModel")],t.prototype,"columnModel",void 0),cn([Object(a["u"])("gridOptionsService")],t.prototype,"gridOptionsService",void 0),cn([Object(a["u"])("eventService")],t.prototype,"eventService",void 0),t=cn([Object(a["y"])("modelItemUtils")],t),t}(),dn="30.2.1",hn={version:dn,moduleName:a["Z"].ColumnsToolPanelModule,beans:[pn],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:re},{componentName:"AgPrimaryColsList",componentClass:xe},{componentName:"AgPrimaryCols",componentClass:Lr}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:Br}],dependantModules:[b,Mr,un]},fn={getTemplate:function(){return{name:"Workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",html:"http://www.w3.org/TR/REC-html40"}}],rawMap:{xmlns:"urn:schemas-microsoft-com:office:spreadsheet"}}}}},vn={getTemplate:function(){return{name:"ExcelWorkbook",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:excel"}},children:[{name:"WindowHeight",textNode:"8130"},{name:"WindowWidth",textNode:"15135"},{name:"WindowHeight",textNode:"8130"},{name:"WindowTopX",textNode:"120"},{name:"WindowTopY",textNode:"45"},{name:"ProtectStructure",textNode:"False"},{name:"ProtectWindow",textNode:"False"}]}}},yn={getTemplate:function(t){var e=t.width;return{name:"Column",properties:{prefixedAttributes:[{prefix:"ss:",map:{Width:e}}]}}}},gn={getTemplate:function(t){var e=t.mergeAcross,r=t.styleId,n=t.data,o={};return e&&(o.MergeAcross=e),r&&(o.StyleID=r),{name:"Cell",properties:{prefixedAttributes:[{prefix:"ss:",map:o}]},children:[{name:"Data",properties:{prefixedAttributes:[{prefix:"ss:",map:{Type:null===n||void 0===n?void 0:n.type}}]},textNode:null===n||void 0===n?void 0:n.value}]}}},mn={getTemplate:function(t){var e=t.cells;return{name:"Row",children:e.map((function(t){return gn.getTemplate(t)}))}}},bn={getTemplate:function(t){var e=t.table,r=t.name,n=e.columns,o=e.rows,i=n.map((function(t){return yn.getTemplate(t)})),a=o.map((function(t){return mn.getTemplate(t)}));return{name:"Worksheet",children:[{name:"Table",children:i.concat(a)}],properties:{prefixedAttributes:[{prefix:"ss:",map:{Name:r}}]}}}},Cn={getTemplate:function(){return{name:"DocumentProperties",properties:{rawMap:{xmlns:"urn:schemas-microsoft-com:office:office"}},children:[{name:"Version",textNode:"12.00"}]}}},Sn={getTemplate:function(t){var e=t.alignment,r=e.vertical,n=e.horizontal,o=e.indent,i=e.readingOrder,a=e.rotate,s=e.shrinkToFit,l=e.verticalText,u=e.wrapText;return{name:"Alignment",properties:{prefixedAttributes:[{prefix:"ss:",map:{Vertical:r,Horizontal:n,Indent:o,ReadingOrder:i,Rotate:a,ShrinkToFit:s,VerticalText:l,WrapText:u}}]}}}},wn={getTemplate:function(t){var e=t.borders,r=e.borderBottom,n=e.borderLeft,o=e.borderRight,i=e.borderTop;return{name:"Borders",children:[r,n,o,i].map((function(t,e){var r=0==e?"Bottom":1==e?"Left":2==e?"Right":"Top";return{name:"Border",properties:{prefixedAttributes:[{prefix:"ss:",map:{Position:r,LineStyle:t.lineStyle,Weight:t.weight,Color:t.color}}]}}}))}}},xn={getTemplate:function(t){var e=t.font,r=e.bold,n=e.fontName,o=e.italic,i=e.color,a=e.outline,s=e.shadow,l=e.size,u=e.strikeThrough,c=e.underline,p=e.verticalAlign,d=e.charSet,h=e.family;return{name:"Font",properties:{prefixedAttributes:[{prefix:"ss:",map:{Bold:r,FontName:n,Italic:o,Color:i,Outline:a,Shadow:s,Size:l,StrikeThrough:u,Underline:c,VerticalAlign:p}},{prefix:"x:",map:{CharSet:d,Family:h}}]}}}},On={getTemplate:function(t){var e=t.interior,r=e.color,n=e.pattern,o=e.patternColor;return{name:"Interior",properties:{prefixedAttributes:[{prefix:"ss:",map:{Color:r,Pattern:n,PatternColor:o}}]}}}},En={getTemplate:function(t){return{name:"Protection",properties:{prefixedAttributes:[{prefix:"ss:",map:{Protected:t.protection.protected,HideFormula:t.protection.hideFormula}}]}}}},Tn={getTemplate:function(t){var e=t.numberFormat.format;return{name:"NumberFormat",properties:{prefixedAttributes:[{prefix:"ss:",map:{Format:e}}]}}}},Pn={getTemplate:function(t){var e=t.id,r=t.name;return{name:"Style",properties:{prefixedAttributes:[{prefix:"ss:",map:{ID:e,Name:r||e}}]}}}},Dn=function(){function t(){}return t.createExcel=function(t,e){var r=this.excelXmlHeader(),n=Cn.getTemplate(),o=vn.getTemplate(),i=this.workbook(n,o,t,e);return""+r+a["zb"].createXml(i,(function(t){return t?"1":"0"}))},t.workbook=function(t,e,r,n){var o=[t,e,this.stylesXmlElement(r)].concat(bn.getTemplate(n));return Object.assign({},fn.getTemplate(),{children:o})},t.excelXmlHeader=function(){return'<?xml version="1.0" ?>\n        <?mso-application progid="Excel.Sheet" ?>\n        '},t.stylesXmlElement=function(t){var e=this;return{name:"Styles",children:t?t.map((function(t){return e.styleXmlElement(t)})):[]}},t.styleXmlElement=function(t){var e=a["Bb"].compose(this.addProperty("alignment",t),this.addProperty("borders",t),this.addProperty("font",t),this.addProperty("interior",t),this.addProperty("protection",t),this.addProperty("numberFormat",t))([]);return Object.assign({},Pn.getTemplate(t),{children:e})},t.addProperty=function(t,e){return function(r){if(!e[t])return r;var n={alignment:Sn,borders:wn,font:xn,interior:On,numberFormat:Tn,protection:En};return r.concat(n[t].getTemplate(e))}},t.factoryMode=a["S"].SINGLE_SHEET,t}(),An=9525,Mn={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},Rn=function(t){return Math.round(72*t/96)},_n=function(t){return Math.round(96*t/72)},kn=function(t){return Math.ceil(t*An)},Fn=function(t){if(void 0!==t){var e=["Automatic","Roman","Swiss","Modern","Script","Decorative"],r=e.indexOf(t||"Automatic");return Math.max(r,0)}},In=function(t,e){if(e){var r;if("number"===typeof e)r=e;else{var n=e;r=n({rowIndex:t})}return Rn(r)}},Ln=function(t,e){var r=t.position,n=r.colSpan,o=r.column;if(t.width)if(n)for(var i=e.slice(o-1,o+n-1),a=0,s=0;s<i.length;s++){var l=i[s].getActualWidth();if(t.width<a+l){t.position.colSpan=s+1,t.totalWidth=t.width,t.width=t.totalWidth-a;break}a+=l}else t.totalWidth=t.width},Nn=function(t,e){var r=t.position,n=r.rowSpan,o=r.row;if(t.height)if(n)for(var i=0,a=0,s=o;s<o+n;s++){var l=_n(In(s,e)||20);if(t.height<i+l){t.position.rowSpan=a+1,t.totalHeight=t.height,t.height=t.totalHeight-i;break}i+=l,a++}else t.totalHeight=t.height},Gn=function(t){var e=a["zb"].createHeader({encoding:"UTF-8",standalone:"yes"}),r=a["zb"].createXml(t);return""+e+r},jn=function(t){var e=65,r=26,n=String.fromCharCode,o=Math.floor(t/r),i=t%r;return o&&t!==r?i?o<r?n(e+o-1)+n(e+i-1):jn(o)+n(e+i-1):jn(o-1)+"Z":n(e+t-1)},Bn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vn=function(){return Vn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vn.apply(this,arguments)},Hn=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},zn=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Un=function(t){function e(e){var r=t.call(this,e)||this;return r.mixedStyles={},r.mixedStyleCounter=0,r.rows=[],r.config=Object.assign({},e),r.stylesByIds={},r.config.baseExcelStyles.forEach((function(t){r.stylesByIds[t.id]=t})),r.excelStyles=zn([],Hn(r.config.baseExcelStyles)),r}return Bn(e,t),e.prototype.addCustomContent=function(t){var e=this;t.forEach((function(t){var r,n=e.rows.length+1;e.config.suppressRowOutline||null==t.outlineLevel||(r=t.outlineLevel);var o={height:In(n,t.height||e.config.rowHeight),cells:(t.cells||[]).map((function(t,r){var o,i,a,s=e.addImage(n,e.columnsToExport[r],null===(o=t.data)||void 0===o?void 0:o.value),l=null;t.styleId&&(l="string"===typeof t.styleId?[t.styleId]:t.styleId);var u=e.getStyleId(l);if(s)return e.createCell(u,e.getDataTypeForValue(s.value),null==s.value?"":s.value);var c=null!==(a=null===(i=t.data)||void 0===i?void 0:i.value)&&void 0!==a?a:"",p=e.getDataTypeForValue(c);return t.mergeAcross?e.createMergedCell(u,p,c,t.mergeAcross):e.createCell(u,p,c)})),outlineLevel:r};null!=t.collapsed&&(o.collapsed=t.collapsed),null!=t.hidden&&(o.hidden=t.hidden),e.rows.push(o)}))},e.prototype.onNewHeaderGroupingRow=function(){var t=this,e=[];return this.rows.push({cells:e,height:In(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(r,n,o,i,s){var l=t.config.styleLinker({rowType:a["ob"].HEADER_GROUPING,rowIndex:1,value:"grouping-"+n,columnGroup:r});e.push(Vn(Vn({},t.createMergedCell(t.getStyleId(l),t.getDataTypeForValue("string"),n,i)),{collapsibleRanges:s}))}}},e.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},e.prototype.onNewBodyRow=function(t){var e=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return t&&this.addRowOutlineIfNecessary(t),e},e.prototype.addRowOutlineIfNecessary=function(t){var e=this.config,r=e.gridOptionsService,n=e.suppressRowOutline,o=e.rowGroupExpandState,i=void 0===o?"expanded":o,s=r.is("groupHideOpenParents");if(!s&&!n&&null!=t.level){var l=t.footer?1:0,u=a["Bb"].last(this.rows);if(u.outlineLevel=t.level+l,"expanded"!==i){var c="collapsed"===i;if(t.isExpandable()){var p=!c&&t.expanded;u.collapsed=!p}u.hidden=!!t.parent&&-1!==t.parent.level&&(c||this.isAnyParentCollapsed(t.parent))}}},e.prototype.isAnyParentCollapsed=function(t){while(t&&-1!==t.level){if(!t.expanded)return!0;t=t.parent}return!1},e.prototype.prepare=function(e){var r=this;t.prototype.prepare.call(this,e),this.columnsToExport=zn([],Hn(e)),this.cols=e.map((function(t,e){return r.convertColumnToExcel(t,e)}))},e.prototype.parse=function(){var t=this.rows.reduce((function(t,e){return Math.max(t,e.cells.length)}),0);while(this.cols.length<t)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));var e={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(e)},e.prototype.isFormula=function(t){return null!=t&&(this.config.autoConvertFormulas&&t.toString().startsWith("="))},e.prototype.isNumerical=function(t){return"bigint"===typeof t||isFinite(t)&&""!==t&&!isNaN(parseFloat(t))},e.prototype.getStyleById=function(t){return null==t?null:this.stylesByIds[t]||null},e.prototype.convertColumnToExcel=function(t,e){var r=this.config.columnWidth;if(r)return"number"===typeof r?{width:r}:{width:r({column:t,index:e})};if(t){var n=75;return{width:Math.max(t.getActualWidth(),n)}}return{}},e.prototype.onNewHeaderColumn=function(t,e){var r=this;return function(n,o){var i=r.extractHeaderValue(n),s=r.config.styleLinker({rowType:a["ob"].HEADER,rowIndex:t,value:i,column:n});e.push(r.createCell(r.getStyleId(s),r.getDataTypeForValue("string"),i))}},e.prototype.onNewRow=function(t,e){var r=[];return this.rows.push({cells:r,height:In(this.rows.length+1,e)}),{onColumn:t.bind(this,this.rows.length,r)()}},e.prototype.onNewBodyColumn=function(t,e){var r=this,n=0;return function(o,i,s){if(n>0)n-=1;else{var l=r.extractRowCellValue(o,i,t,"excel",s),u=l.value,c=l.valueFormatted,p=r.config.styleLinker({rowType:a["ob"].BODY,rowIndex:t,value:u,column:o,node:s}),d=r.getStyleId(p),h=o.getColSpan(s),f=r.addImage(t,o,u);f?e.push(r.createCell(d,r.getDataTypeForValue(f.value),null==f.value?"":f.value)):h>1?(n=h-1,e.push(r.createMergedCell(d,r.getDataTypeForValue(u),u,h-1))):e.push(r.createCell(d,r.getDataTypeForValue(u),u,c))}}},e.prototype.getStyleId=function(t){if(!t||!t.length)return null;if(1===t.length)return t[0];var e=t.join("-");return this.mixedStyles[e]||this.addNewMixedStyle(t),this.mixedStyles[e].excelID},e.prototype.addNewMixedStyle=function(t){var e=this;this.mixedStyleCounter+=1;var r="mixedStyle"+this.mixedStyleCounter,n={};t.forEach((function(t){e.excelStyles.forEach((function(e){e.id===t&&a["Bb"].mergeDeep(n,a["Bb"].deepCloneObject(e))}))})),n.id=r,n.name=r;var o=t.join("-");this.mixedStyles[o]={excelID:r,key:o,result:n},this.excelStyles.push(n),this.stylesByIds[r]=n},e}(a["x"]),Wn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wn(e,t),e.prototype.createExcel=function(t){return Dn.createExcel(this.excelStyles,t)},e.prototype.getDataTypeForValue=function(t){return this.isNumerical(t)?"Number":"String"},e.prototype.getType=function(t,e,r){if(this.isFormula(r))return"Formula";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"string":return"Formula";case"number":return"Number";case"datetime":return"DateTime";case"error":return"Error";case"boolean":return"Boolean";default:console.warn("AG Grid: Unrecognized data type for excel export ["+e.id+".dataType="+e.dataType+"]")}return t},e.prototype.addImage=function(){},e.prototype.createCell=function(t,e,r,n){var o=this.getStyleById(t);!(null===o||void 0===o?void 0:o.dataType)&&"String"===e&&n&&(r=n);var i=this.getType(e,o,r)||e;return{styleId:o?t:void 0,data:{type:i,value:this.getValueTransformed(i,r)}}},e.prototype.getValueTransformed=function(t,e){var r=this,n=function(t){if(r.config.suppressTextAsCDATA)return a["Bb"].escapeString(t);var e="<![CDATA[",n="]]>",o=new RegExp(n,"g");return e+String(t).replace(o,"]]"+n+e+">")+n},o=function(t){return t&&"0"!==t&&"false"!==t?"1":"0"};switch(t){case"String":return n(e);case"Number":return Number(e).valueOf()+"";case"Boolean":return o(e);default:return e}},e.prototype.createMergedCell=function(t,e,r,n){return{styleId:this.getStyleById(t)?t:void 0,data:{type:e,value:r},mergeAcross:n}},e}(Un),Xn={getTemplate:function(t){var e=new Date,r=e.toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:t},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:r},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:r}]}}},Yn={getTemplate:function(t){var e=t.name,r=t.ContentType,n=t.Extension,o=t.PartName;return{name:e,properties:{rawMap:{Extension:n,PartName:o,ContentType:r}}}}},qn=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Zn=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Jn={getTemplate:function(t){var e=new Array(t).fill(void 0).map((function(t,e){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet"+(e+1)+".xml"}})),r=la.worksheetImages.size,n={};la.workbookImageIds.forEach((function(t){n[t.type]=!0}));var o=new Array(r).fill(void 0).map((function(t,e){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing"+(e+1)+".xml"}})),i=Object.keys(n).map((function(t){return{name:"Default",ContentType:"image/"+t,Extension:t}})),a=Zn(Zn(Zn(Zn(Zn(Zn([],qn(i)),[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}]),qn(e)),[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}]),qn(o)),[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}]).map((function(t){return Yn.getTemplate(t)}));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:a}}},Qn=function(t,e){return{name:"xdr:"+t,children:[{name:"xdr:col",textNode:e.col.toString()},{name:"xdr:colOff",textNode:e.offsetX.toString()},{name:"xdr:row",textNode:e.row.toString()},{name:"xdr:rowOff",textNode:e.offsetY.toString()}]}},$n=function(t){var e=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}],r=t.recolor&&t.recolor.toLowerCase();switch(r){case"grayscale":case"sepia":case"washout":e.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:e}},to=function(t,e){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:e,name:t.id,descr:null!=t.altText?t.altText:void 0}},children:[$n(t)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},eo=function(t){if(t.saturation||t.tint){var e=[];return t.saturation&&e.push({name:"a:satMod",properties:{rawMap:{val:1e3*t.saturation}}}),t.tint&&e.push({name:"a:tint",properties:{rawMap:{val:1e3*t.tint}}}),e}},ro=function(t,e){return{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:t.color}},children:eo(t)},{name:"a:srgbClr",properties:{rawMap:{val:e.color}},children:eo(e)}]}},no=function(t,e){var r;if(t.transparency){var n=Math.min(Math.max(t.transparency,0),100);r=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*n)}}}]}if(t.recolor)switch(r||(r=[]),t.recolor.toLocaleLowerCase()){case"grayscale":r.push({name:"a:grayscl"});break;case"sepia":r.push(ro({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":r.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId"+e,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:r},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},oo=function(t,e){var r={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:e.width,cy:e.height}}}]};if(t.rotation){var n=t.rotation;r.properties={rawMap:{rot:6e4*Math.min(Math.max(n,0),360)}}}var o={name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]},i={name:"xdr:spPr",children:[r,o]};return i},io=function(t){t.fitCell=!!t.fitCell||!t.width||!t.height;var e=t.position,r=void 0===e?{}:e,n=t.fitCell,o=t.width,i=void 0===o?0:o,a=t.height,s=void 0===a?0:a,l=t.totalHeight,u=t.totalWidth,c=r.offsetX,p=void 0===c?0:c,d=r.offsetY,h=void 0===d?0:d,f=r.row,v=void 0===f?1:f,y=r.rowSpan,g=void 0===y?1:y,m=r.column,b=void 0===m?1:m,C=r.colSpan,S=void 0===C?1:C;return{from:{row:v-1,col:b-1,offsetX:kn(p),offsetY:kn(h)},to:{row:v-1+(n?1:g-1),col:b-1+(n?1:S-1),offsetX:kn(i+p),offsetY:kn(s+h)},height:kn(l||s),width:kn(u||i)}},ao=function(t,e,r,n){return{name:"xdr:pic",children:[to(t,e+1),no(t,r+1),oo(t,n)]}},so={getTemplate:function(t){var e=t.sheetIndex,r=la.worksheetImages.get(e),n=la.worksheetImageIds.get(e),o=r.map((function(t,e){var r=io(t);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[Qn("from",r.from),Qn("to",r.to),ao(t,e,n.get(t.id).index,r),{name:"xdr:clientData"}]}}));return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:o}}},lo=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},uo=function(t){var e=lo(t,4),r=e[0],n=e[1],o=e[2],i=e[3];return{name:"a:"+r,children:[{name:"a:"+n,properties:{rawMap:{val:o,lastClr:i}}}]}},co={getTemplate:function(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[uo(["dk1","sysClr","windowText","000000"]),uo(["lt1","sysClr","window","FFFFFF"]),uo(["dk2","srgbClr","44546A"]),uo(["lt2","srgbClr","E7E6E6"]),uo(["accent1","srgbClr","4472C4"]),uo(["accent2","srgbClr","ED7D31"]),uo(["accent3","srgbClr","A5A5A5"]),uo(["accent4","srgbClr","FFC000"]),uo(["accent5","srgbClr","5B9BD5"]),uo(["accent6","srgbClr","70AD47"]),uo(["hlink","srgbClr","0563C1"]),uo(["folHlink","srgbClr","954F72"])]}}},po=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},ho=function(t){var e=po(t,4),r=e[0],n=e[1],o=e[2],i=e[3];return{name:"a:"+r,properties:{rawMap:{script:o,typeface:n,panose:i}}}},fo={getTemplate:function(){var t=a["Bb"].utf8_encode;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[ho(["latin","Calibri Light",void 0,"020F0302020204030204"]),ho(["ea",""]),ho(["cs",""]),ho(["font",t("游ゴシック Light"),"Jpan"]),ho(["font",t("맑은 고딕"),"Hang"]),ho(["font",t("等线 Light"),"Hans"]),ho(["font",t("新細明體"),"Hant"]),ho(["font","Times New Roman","Arab"]),ho(["font","Times New Roman","Hebr"]),ho(["font","Tahoma","Thai"]),ho(["font","Nyala","Ethi"]),ho(["font","Vrinda","Beng"]),ho(["font","Shruti","Gujr"]),ho(["font","MoolBoran","Khmr"]),ho(["font","Tunga","Knda"]),ho(["font","Raavi","Guru"]),ho(["font","Euphemia","Cans"]),ho(["font","Plantagenet Cherokee","Cher"]),ho(["font","Microsoft Yi Baiti","Yiii"]),ho(["font","Microsoft Himalaya","Tibt"]),ho(["font","MV Boli","Thaa"]),ho(["font","Mangal","Deva"]),ho(["font","Gautami","Telu"]),ho(["font","Latha","Taml"]),ho(["font","Estrangelo Edessa","Syrc"]),ho(["font","Kalinga","Orya"]),ho(["font","Kartika","Mlym"]),ho(["font","DokChampa","Laoo"]),ho(["font","Iskoola Pota","Sinh"]),ho(["font","Mongolian Baiti","Mong"]),ho(["font","Times New Roman","Viet"]),ho(["font","Microsoft Uighur","Uigh"]),ho(["font","Sylfaen","Geor"]),ho(["font","Arial","Armn"]),ho(["font","Leelawadee UI","Bugi"]),ho(["font","Microsoft JhengHei","Bopo"]),ho(["font","Javanese Text","Java"]),ho(["font","Segoe UI","Lisu"]),ho(["font","Myanmar Text","Mymr"]),ho(["font","Ebrima","Nkoo"]),ho(["font","Nirmala UI","Olck"]),ho(["font","Ebrima","Osma"]),ho(["font","Phagspa","Phag"]),ho(["font","Estrangelo Edessa","Syrn"]),ho(["font","Estrangelo Edessa","Syrj"]),ho(["font","Estrangelo Edessa","Syre"]),ho(["font","Nirmala UI","Sora"]),ho(["font","Microsoft Tai Le","Tale"]),ho(["font","Microsoft New Tai Lue","Talu"]),ho(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[ho(["latin","Calibri",void 0,"020F0502020204030204"]),ho(["ea",""]),ho(["cs",""]),ho(["font",t("游ゴシック"),"Jpan"]),ho(["font",t("맑은 고딕"),"Hang"]),ho(["font",t("等线"),"Hans"]),ho(["font",t("新細明體"),"Hant"]),ho(["font","Arial","Arab"]),ho(["font","Arial","Hebr"]),ho(["font","Tahoma","Thai"]),ho(["font","Nyala","Ethi"]),ho(["font","Vrinda","Beng"]),ho(["font","Shruti","Gujr"]),ho(["font","DaunPenh","Khmr"]),ho(["font","Tunga","Knda"]),ho(["font","Raavi","Guru"]),ho(["font","Euphemia","Cans"]),ho(["font","Plantagenet Cherokee","Cher"]),ho(["font","Microsoft Yi Baiti","Yiii"]),ho(["font","Microsoft Himalaya","Tibt"]),ho(["font","MV Boli","Thaa"]),ho(["font","Mangal","Deva"]),ho(["font","Gautami","Telu"]),ho(["font","Latha","Taml"]),ho(["font","Estrangelo Edessa","Syrc"]),ho(["font","Kalinga","Orya"]),ho(["font","Kartika","Mlym"]),ho(["font","DokChampa","Laoo"]),ho(["font","Iskoola Pota","Sinh"]),ho(["font","Mongolian Baiti","Mong"]),ho(["font","Arial","Viet"]),ho(["font","Microsoft Uighur","Uigh"]),ho(["font","Sylfaen","Geor"]),ho(["font","Arial","Armn"]),ho(["font","Leelawadee UI","Bugi"]),ho(["font","Microsoft JhengHei","Bopo"]),ho(["font","Javanese Text","Java"]),ho(["font","Segoe UI","Lisu"]),ho(["font","Myanmar Text","Mymr"]),ho(["font","Ebrima","Nkoo"]),ho(["font","Nirmala UI","Olck"]),ho(["font","Ebrima","Osma"]),ho(["font","Phagspa","Phag"]),ho(["font","Estrangelo Edessa","Syrn"]),ho(["font","Estrangelo Edessa","Syrj"]),ho(["font","Estrangelo Edessa","Syre"]),ho(["font","Nirmala UI","Sora"]),ho(["font","Microsoft Tai Le","Tale"]),ho(["font","Microsoft New Tai Lue","Talu"]),ho(["font","Ebrima","Tfng"])]}]}}},vo=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},yo=function(t,e,r){return{name:"a:"+t,properties:{rawMap:{val:e}},children:r}},go=function(t){var e=vo(t,6),r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=[];return l.push(yo("satMod",o)),i&&l.push(yo("lumMod",i)),a&&l.push(yo("tint",a)),s&&l.push(yo("shade",s)),{name:"a:gs",properties:{rawMap:{pos:r}},children:[{name:"a:schemeClr",properties:{rawMap:{val:n}},children:l}]}},mo=function(t,e){return{name:"a:solidFill",children:[yo("schemeClr",t,e)]}},bo=function(t){var e=vo(t,5),r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=vo(a,2),l=s[0],u=s[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:r}},children:[{name:"a:gsLst",children:[go(n),go(o),go(i)]},{name:"a:lin",properties:{rawMap:{ang:l,scaled:u}}}]}},Co=function(t){var e=vo(t,4),r=e[0],n=e[1],o=e[2],i=e[3];return{name:"a:ln",properties:{rawMap:{w:r,cap:n,cmpd:o,algn:i}},children:[mo("phClr"),yo("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},So=function(t){var e=[];if(t){var r=vo(t,5),n=r[0],o=r[1],i=r[2],a=r[3],s=r[4];e.push({name:"a:outerShdw",properties:{rawMap:{blurRad:n,dist:o,dir:i,algn:a,rotWithShape:s}},children:[yo("srgbClr","000000",[yo("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},e.length?{children:e}:{})]}},wo=function(){return{name:"a:fillStyleLst",children:[mo("phClr"),bo(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),bo(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}},xo=function(){return{name:"a:lnStyleLst",children:[Co(["6350","flat","sng","ctr"]),Co(["12700","flat","sng","ctr"]),Co(["19050","flat","sng","ctr"])]}},Oo=function(){return{name:"a:effectStyleLst",children:[So(),So(),So(["57150","19050","5400000","ctr","0"])]}},Eo=function(){return{name:"a:bgFillStyleLst",children:[mo("phClr"),mo("phClr",[yo("tint","95000"),yo("satMod","170000")]),bo(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}},To={getTemplate:function(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[wo(),xo(),Oo(),Eo()]}}},Po={getTemplate:function(){return{name:"a:themeElements",children:[co.getTemplate(),fo.getTemplate(),To.getTemplate()]}}},Do={getTemplate:function(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[Po.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},Ao=function(t){var e=[];return t.forEach((function(t,r){var n=r.toString(),o={name:"t",textNode:a["Bb"].utf8_encode(a["Bb"].escapeString(n))},i=n.trim().length!==n.length;i&&(o.properties={rawMap:{"xml:space":"preserve"}}),e.push({name:"si",children:[o]})})),e},Mo={getTemplate:function(t){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:t.size,uniqueCount:t.size}},children:Ao(t)}}};function Ro(t){for(var e=t.split(/(\[[^\]]*\])/),r=0;r<e.length;r++){var n=e[r];n.length&&(n.startsWith("[")||(n=n.replace(/\$/g,'"$"')),e[r]=a["Bb"].escapeString(n))}return e.join("")}var _o,ko,Fo,Io,Lo,No,Go,jo,Bo,Vo,Ho={getTemplate:function(t){var e=t.formatCode,r=t.numFmtId;return e.length&&(e=Ro(e)),{name:"numFmt",properties:{rawMap:{formatCode:e,numFmtId:r}}}}},zo={getTemplate:function(t){return{name:"numFmts",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Ho.getTemplate(t)}))}}},Uo={getTemplate:function(t){var e=t.size,r=t.colorTheme,n=t.color,o=void 0===n?"FF000000":n,i=t.fontName,a=void 0===i?"Calibri":i,s=t.family,l=t.scheme,u=t.italic,c=t.bold,p=t.strikeThrough,d=t.outline,h=t.shadow,f=t.underline,v=t.verticalAlign,y=[{name:"sz",properties:{rawMap:{val:e}}},{name:"color",properties:{rawMap:{theme:r,rgb:o}}},{name:"name",properties:{rawMap:{val:a}}}];return s&&y.push({name:"family",properties:{rawMap:{val:s}}}),l&&y.push({name:"scheme",properties:{rawMap:{val:l}}}),u&&y.push({name:"i"}),c&&y.push({name:"b"}),p&&y.push({name:"strike"}),d&&y.push({name:"outline"}),h&&y.push({name:"shadow"}),f&&y.push({name:"u",properties:{rawMap:{val:f}}}),v&&y.push({name:"vertAlign",properties:{rawMap:{val:v}}}),{name:"font",children:y}}},Wo={getTemplate:function(t){return{name:"fonts",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Uo.getTemplate(t)}))}}},Ko={getTemplate:function(t){var e=t.patternType,r=t.fgTheme,n=t.fgTint,o=t.fgRgb,i=t.bgRgb,a=t.bgIndexed,s={name:"patternFill",properties:{rawMap:{patternType:e}}};return(r||n||o)&&(s.children=[{name:"fgColor",properties:{rawMap:{theme:r,tint:n,rgb:o}}}]),(a||i)&&(s.children||(s.children=[]),s.children.push({name:"bgColor",properties:{rawMap:{indexed:a,rgb:i}}})),{name:"fill",children:[s]}}},Xo={getTemplate:function(t){return{name:"fills",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Ko.getTemplate(t)}))}}},Yo=function(t){switch(t){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},qo={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},Zo=["Dashed","DashDot","DashDotDot"],Jo={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},Qo={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},$o={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},ti=function(t){return t?Jo[t]||t:"none"},ei=function(t){return void 0==t?t:("#"===t.charAt(0)&&(t=t.substr(1)),6===t.length?"FF"+t:t)},ri=function(t,e){if(!t)return"thin";var r=Yo(e),n=qo[t];return"Continuous"===t?r:"medium"===r&&-1!==Zo.indexOf(n)?"medium"+n:n.charAt(0).toLowerCase()+n.substr(1)},ni=function(t){return Qo[t]||"general"},oi=function(t){return $o[t]||void 0},ii=function(t){return{name:"color",properties:{rawMap:{rgb:ei(t||"#000000")}}}},ai={getTemplate:function(t){var e=t.left,r=t.right,n=t.top,o=t.bottom,i=t.diagonal,a=e?[ii(e.color)]:void 0,s=r?[ii(r.color)]:void 0,l=n?[ii(n.color)]:void 0,u=o?[ii(o.color)]:void 0,c=i?[ii(i.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:e&&e.style}},children:a},{name:"right",properties:{rawMap:{style:r&&r.style}},children:s},{name:"top",properties:{rawMap:{style:n&&n.style}},children:l},{name:"bottom",properties:{rawMap:{style:o&&o.style}},children:u},{name:"diagonal",properties:{rawMap:{style:i&&i.style}},children:c}]}}},si={getTemplate:function(t){return{name:"borders",properties:{rawMap:{count:t.length}},children:t.map((function(t){return ai.getTemplate(t)}))}}},li=function(t){var e=["Context","LeftToRight","RightToLeft"],r=e.indexOf(t);return Math.max(r,0)},ui={getTemplate:function(t){var e=t.horizontal,r=t.indent,n=t.readingOrder,o=t.rotate,i=t.shrinkToFit,a=t.vertical,s=t.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:e&&ni(e),indent:r,readingOrder:n&&li(n),textRotation:o,shrinkToFit:i,vertical:a&&oi(a),wrapText:s}}}}},ci={getTemplate:function(t){var e=!1===t.protected?0:1,r=!0===t.hideFormula?1:0;return{name:"protection",properties:{rawMap:{hidden:r,locked:e}}}}},pi={getTemplate:function(t){var e=t.alignment,r=t.borderId,n=t.fillId,o=t.fontId,i=t.numFmtId,a=t.protection,s=t.xfId,l=[];return e&&l.push(ui.getTemplate(e)),a&&l.push(ci.getTemplate(a)),{name:"xf",properties:{rawMap:{applyAlignment:e?1:void 0,applyProtection:a?1:void 0,applyBorder:r?1:void 0,applyFill:n?1:void 0,borderId:r,fillId:n,applyFont:o?1:void 0,fontId:o,applyNumberFormat:i?1:void 0,numFmtId:i,xfId:s}},children:l.length?l:void 0}}},di={getTemplate:function(t){return{name:"cellStyleXfs",properties:{rawMap:{count:t.length}},children:t.map((function(t){return pi.getTemplate(t)}))}}},hi={getTemplate:function(t){return{name:"cellXfs",properties:{rawMap:{count:t.length}},children:t.map((function(t){return pi.getTemplate(t)}))}}},fi={getTemplate:function(t){var e=t.builtinId,r=t.name,n=t.xfId;return{name:"cellStyle",properties:{rawMap:{builtinId:e,name:r,xfId:n}}}}},vi={getTemplate:function(t){return{name:"cellStyles",properties:{rawMap:{count:t.length}},children:t.map((function(t){return fi.getTemplate(t)}))}}},yi=function(){return yi=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},yi.apply(this,arguments)},gi=function(t,e){return-1!==t.indexOf("mixedStyle")&&e>1&&(t+="_"+e),t},mi=function(){_o={base:0},ko=[],Fo=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Io=[{patternType:"none"},{patternType:"gray125"}],Lo=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],No=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],Go=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],jo=[{builtinId:0,name:"Normal",xfId:0}]},bi=function(t){var e=ti(t.pattern),r=ei(t.color),n=ei(t.patternColor),o=Io.findIndex((function(t){var o=t.patternType,i=t.fgRgb,a=t.bgRgb;return o==e&&i==r&&a==n}));return-1===o&&(o=Io.length,Io.push({patternType:e,fgRgb:r,bgRgb:n})),o},Ci=function(t){if(t=a["Bb"].utf8_encode(t),Mn[t])return Mn[t];var e=ko.findIndex((function(e){return e.formatCode===t}));return-1===e?(e=ko.length+164,ko.push({formatCode:t,numFmtId:e})):e=ko[e].numFmtId,e},Si=function(t){var e,r,n,o,i,a,s,l,u=t.borderBottom,c=t.borderTop,p=t.borderLeft,d=t.borderRight;p&&(n=ri(p.lineStyle,p.weight),s=ei(p.color)),d&&(o=ri(d.lineStyle,d.weight),l=ei(d.color)),u&&(e=ri(u.lineStyle,u.weight),i=ei(u.color)),c&&(r=ri(c.lineStyle,c.weight),a=ei(c.color));var h=Lo.findIndex((function(t){var u=t.left,c=t.right,p=t.top,d=t.bottom;if(!u&&(n||s))return!1;if(!c&&(o||l))return!1;if(!p&&(r||a))return!1;if(!d&&(e||i))return!1;var h=u||{},f=h.style,v=h.color,y=c||{},g=y.style,m=y.color,b=p||{},C=b.style,S=b.color,w=d||{},x=w.style,O=w.color;return f==n&&v==s&&(g==o&&m==l&&(C==r&&S==a&&(x==e&&O==i)))}));return-1===h&&(h=Lo.length,Lo.push({left:{style:n,color:s},right:{style:o,color:l},top:{style:r,color:a},bottom:{style:e,color:i},diagonal:{style:void 0,color:void 0}})),h},wi=function(t){var e=t.fontName,r=void 0===e?"Calibri":e,n=t.color,o=t.size,i=t.bold,s=t.italic,l=t.outline,u=t.shadow,c=t.strikeThrough,p=t.underline,d=t.family,h=t.verticalAlign,f=r?a["Bb"].utf8_encode(r):r,v=ei(n),y=Fn(d),g=p?p.toLocaleLowerCase():void 0,m=h?h.toLocaleLowerCase():void 0,b=Fo.findIndex((function(t){return t.fontName==f&&t.color==v&&t.size==o&&t.bold==i&&t.italic==s&&t.outline==l&&t.shadow==u&&t.strikeThrough==c&&t.underline==g&&t.verticalAlign==m&&t.family==y}));return-1===b&&(b=Fo.length,Fo.push({fontName:f,color:v,size:o,bold:i,italic:s,outline:l,shadow:u,strikeThrough:c,underline:g,verticalAlign:m,family:null!=y?y.toString():void 0})),b},xi=function(t){var e=t.alignment,r=t.borders,n=t.font,o=t.interior,i=t.numberFormat,a=t.protection,s=t.id,l=0,u=0,c=0,p=0;s&&(s=gi(s,Bo),void 0==_o[s]&&(o&&(l=bi(o)),r&&(u=Si(r)),n&&(c=wi(n)),i&&(p=Ci(i.format)),_o[s]=Go.length,Go.push({alignment:e,borderId:u||0,fillId:l||0,fontId:c||0,numFmtId:p||0,protection:a,xfId:0})))},Oi={getTemplate:function(t){var e=zo.getTemplate(ko),r=Wo.getTemplate(Fo.map((function(e){return yi(yi({},e),{size:null!=e.size?e.size:t})}))),n=Xo.getTemplate(Io),o=si.getTemplate(Lo),i=di.getTemplate(No),a=hi.getTemplate(Go),s=vi.getTemplate(jo);return mi(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[e,r,n,o,i,a,s,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},Ei=function(t,e){return _o[gi(t,e)]||0},Ti=function(t,e){Bo=e,1===Bo&&mi(),t.forEach(xi)},Pi={getTemplate:function(t,e){var r=(e+1).toString();return{name:"sheet",properties:{rawMap:{name:t,sheetId:r,"r:id":"rId"+r}}}}},Di={getTemplate:function(t){return{name:"sheets",children:t.map((function(t,e){return Pi.getTemplate(t,e)}))}}},Ai={getTemplate:function(t){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[Di.getTemplate(t)]}}},Mi=function(t){return Math.ceil((t-12)/7+1)},Ri={getTemplate:function(t){var e=t.min,r=t.max,n=t.outlineLevel,o=t.s,i=t.width,a=t.hidden,s=t.bestFit,l=1,u="0";return i>1&&(l=Mi(i),u="1"),{name:"col",properties:{rawMap:{min:e,max:r,outlineLevel:null!=n?n:void 0,width:l,style:o,hidden:a?"1":"0",bestFit:s?"1":"0",customWidth:u}}}}},_i=function(t){var e=t.charAt(0).toLowerCase();return"s"===e?"inlineStr":e},ki={getTemplate:function(t,e,r){var n=t.ref,o=t.data,i=t.styleId,s=o||{type:"empty",value:null},l=s.type,u=s.value,c=l;"f"===l?c="str":l.charAt(0)===l.charAt(0).toUpperCase()&&(c=_i(l));var p,d={name:"c",properties:{rawMap:{r:n,t:"empty"===c?void 0:c,s:i?Ei(i,r):void 0}}};return"empty"===c?d:(p="str"===c&&"f"===l?[{name:"f",textNode:a["Bb"].escapeString(a["Bb"].utf8_encode(u))}]:"inlineStr"===c?[{name:"is",children:[{name:"t",textNode:a["Bb"].escapeString(a["Bb"].utf8_encode(u))}]}]:[{name:"v",textNode:u}],Object.assign({},d,{children:p}))}},Fi=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Ii=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Li=function(t,e){for(var r=[],n=0,o=0;o<t.length;o++){var i=t[o];i.mergeAcross&&(r.push({pos:o,excelPos:n}),n+=i.mergeAcross),n++}if(r.length)for(o=r.length-1;o>=0;o--){for(var a=[],s=(i=t[r[o].pos],1);s<=i.mergeAcross;s++)a.push({ref:""+jn(r[o].excelPos+1+s)+(e+1),styleId:i.styleId,data:{type:"empty",value:null}});a.length&&t.splice.apply(t,Ii([r[o].pos+1,0],Fi(a)))}},Ni=function(t){var e;return""!==(null===(e=t.data)||void 0===e?void 0:e.value)||void 0!==t.styleId},Gi={getTemplate:function(t,e,r){var n=t.collapsed,o=t.hidden,i=t.height,a=t.outlineLevel,s=t.cells,l=void 0===s?[]:s;Li(l,e);var u=l.filter(Ni).map((function(t,e){return ki.getTemplate(t,e,r)}));return{name:"row",properties:{rawMap:{r:e+1,collapsed:n?"1":"0",hidden:o?"1":"0",ht:i,customHeight:null!=i?"1":"0",spans:"1:1",outlineLevel:a||void 0}},children:u}}},ji={getTemplate:function(t){return{name:"mergeCell",properties:{rawMap:{ref:t}}}}},Bi=function(t,e,r){var n=[],o=[];t.forEach((function(t,r){var i,a=t.cells,s=0;a.forEach((function(t,a){var l=a+s+1,u=jn(l),c=r+1;if(t.mergeAcross){s+=t.mergeAcross;var p=jn(a+s+1);n.push(""+u+c+":"+p+c)}e[l-1]||(e[l-1]={});var d=t.collapsibleRanges;d&&d.forEach((function(t){o.push([l+t[0],l+t[1]])})),i=e[l-1],i.min=l,i.max=l,t.ref=""+u+c}))})),o.sort((function(t,e){return t[0]!==e[0]?t[0]-e[0]:e[1]-t[1]}));var i=new Map,a=new Map;return o.filter((function(t){var e=t.toString(),r=i.get(e);return!r&&(i.set(e,!0),!0)})).forEach((function(t){var n=e.find((function(e){return e.min==t[0]&&e.max==t[1]})),o=a.get(t[0]);e.push({min:t[0],max:t[1],outlineLevel:r?void 0:o||1,width:(n||{width:100}).width}),a.set(t[0],(o||0)+1)})),n},Vi=function(t){return!t||"Portrait"!==t&&"Landscape"!==t?"portrait":t.toLocaleLowerCase()},Hi=function(t){if(null==t)return 1;var e=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"],r=e.indexOf(t);return-1===r?1:r+1},zi=function(t){return function(e){return t.length&&e.push({name:"cols",children:t.map((function(t){return Ri.getTemplate(t)}))}),e}},Ui=function(t,e){return function(r){return t.length&&r.push({name:"sheetData",children:t.map((function(t,r){return Gi.getTemplate(t,r,e)}))}),r}},Wi=function(t){return function(e){return t.length&&e.push({name:"mergeCells",properties:{rawMap:{count:t.length}},children:t.map((function(t){return ji.getTemplate(t)}))}),e}},Ki=function(t){return function(e){var r=t.top,n=void 0===r?.75:r,o=t.right,i=void 0===o?.7:o,a=t.bottom,s=void 0===a?.75:a,l=t.left,u=void 0===l?.7:l,c=t.header,p=void 0===c?.3:c,d=t.footer,h=void 0===d?.3:d;return e.push({name:"pageMargins",properties:{rawMap:{bottom:s,footer:h,header:p,left:u,right:i,top:n}}}),e}},Xi=function(t){return function(e){return t&&e.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:Vi(t.orientation),paperSize:Hi(t.pageSize)}}}),e}},Yi=function(t){var e={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"};return a["Bb"].iterateObject(e,(function(e,r){t=t.replace(e,r)})),t},qi=function(t){return"Center"===t?"C":"Right"===t?"R":"L"},Zi=function(t,e){return e?(t+="&amp;&quot;",t+=e.fontName||"Calibri",e.bold!==e.italic?t+=e.bold?",Bold":",Italic":e.bold?t+=",Bold Italic":t+=",Regular",t+="&quot;",e.size&&(t+="&amp;"+e.size),e.strikeThrough&&(t+="&amp;S"),e.underline&&(t+="&amp;"+("Double"===e.underline?"E":"U")),e.color&&(t+="&amp;K"+e.color.replace("#","").toUpperCase()),t):t},Ji=function(t){return t.reduce((function(t,e){var r=qi(e.position),n=Zi(t+"&amp;"+r,e.font);return""+n+a["Bb"].escapeString(a["Bb"].utf8_encode(Yi(e.value)))}),"")},Qi=function(t){var e=["all","first","even"],r=[];return e.forEach((function(e){var n=t[e],o="all"===e?"odd":e;n&&(n.header||n.footer)&&a["Bb"].iterateObject(n,(function(t,e){var n=""+t.charAt(0).toUpperCase()+t.slice(1);e&&r.push({name:""+o+n,properties:{rawMap:{"xml:space":"preserve"}},textNode:Ji(e)})}))})),r},$i=function(t){return function(e){if(!t)return e;var r=null!=t.first?1:0,n=null!=t.even?1:0;return e.push({name:"headerFooter",properties:{rawMap:{differentFirst:r,differentOddEven:n}},children:Qi(t)}),e}},ta=function(t){return function(e){return la.worksheetImages.get(t)&&e.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),e}},ea=function(){return function(t){return t.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),t}},ra=function(t){return function(e){var r=t.reduce((function(t,e){return e.outlineLevel&&e.outlineLevel>t?e.outlineLevel:t}),0);return e.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:r||void 0}}}),e}},na={getTemplate:function(t){var e=t.worksheet,r=t.currentSheet,n=t.config,o=n.margins,i=void 0===o?{}:o,s=n.pageSetup,l=n.headerFooterConfig,u=n.suppressColumnOutline,c=e.table,p=c.rows,d=c.columns,h=d&&d.length?Bi(p,d,!!u):[],f=a["Bb"].compose(ea(),ra(p),zi(d),Ui(p,r+1),Wi(h),Ki(i),Xi(s),$i(l),ta(r)),v=f([]);return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:v}}},oa={getTemplate:function(t){var e=t.Id,r=t.Type,n=t.Target;return{name:"Relationship",properties:{rawMap:{Id:e,Type:r,Target:n}}}}},ia={getTemplate:function(t){var e=t.map((function(t){return oa.getTemplate(t)}));return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:e}}},aa=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},sa=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},la=function(){function t(){}return t.createExcel=function(t,e,r){return this.addSheetName(e),Ti(t,this.sheetNames.length),this.createWorksheet(e,r)},t.buildImageMap=function(t,e,r,n,o){var i=this.sheetNames.length,a=this.images.get(t.id);t.position&&t.position.row&&t.position.column||(t.position||(t.position={}),t.position=Object.assign({},t.position,{row:e,column:n.indexOf(r)+1}));var s=t;if(Ln(s,n),Nn(s,o),a){var l=a.find((function(t){return t.sheetId===i}));l?l.image.push(s):a.push({sheetId:i,image:[s]})}else this.images.set(s.id,[{sheetId:i,image:[s]}]),this.workbookImageIds.set(s.id,{type:s.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(i,s)},t.buildSheetImageMap=function(t,e){var r=this.worksheetImageIds.get(t);r||(r=new Map,this.worksheetImageIds.set(t,r));var n=this.worksheetImages.get(t);n?(n.push(e),r.get(e.id)||r.set(e.id,{index:r.size,type:e.imageType})):(this.worksheetImages.set(t,[e]),r.set(e.id,{index:0,type:e.imageType}))},t.addSheetName=function(t){var e=a["Bb"].escapeString(t.name)||"",r="";while(-1!==this.sheetNames.indexOf(""+e+r))if(""===r)r="_1";else{var n=parseInt(r.slice(1),10);r="_"+(n+1)}t.name=""+e+r,this.sheetNames.push(t.name)},t.getStringPosition=function(t){return this.sharedStrings.has(t)?this.sharedStrings.get(t):(this.sharedStrings.set(t,this.sharedStrings.size),this.sharedStrings.size-1)},t.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=a["S"].SINGLE_SHEET},t.createWorkbook=function(){return Gn(Ai.getTemplate(this.sheetNames))},t.createStylesheet=function(t){return Gn(Oi.getTemplate(t))},t.createSharedStrings=function(){return Gn(Mo.getTemplate(this.sharedStrings))},t.createCore=function(t){return Gn(Xn.getTemplate(t))},t.createContentTypes=function(t){return Gn(Jn.getTemplate(t))},t.createRels=function(){var t=ia.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return Gn(t)},t.createTheme=function(){return Gn(Do.getTemplate())},t.createWorkbookRels=function(t){var e=new Array(t).fill(void 0).map((function(t,e){return{Id:"rId"+(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet"+(e+1)+".xml"}})),r=ia.getTemplate(sa(sa([],aa(e)),[{Id:"rId"+(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId"+(t+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId"+(t+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]));return Gn(r)},t.createDrawing=function(t){return Gn(so.getTemplate({sheetIndex:t}))},t.createDrawingRel=function(t){var e=this,r=this.worksheetImageIds.get(t),n=[];return r.forEach((function(t,r){n.push({Id:"rId"+(t.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image"+(e.workbookImageIds.get(r).index+1)+"."+t.type})})),Gn(ia.getTemplate(n))},t.createWorksheetDrawingRel=function(t){var e=ia.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing"+(t+1)+".xml"}]);return Gn(e)},t.createWorksheet=function(t,e){return Gn(na.getTemplate({worksheet:t,currentSheet:this.sheetNames.length-1,config:e}))},t.sharedStrings=new Map,t.sheetNames=[],t.images=new Map,t.worksheetImages=new Map,t.workbookImageIds=new Map,t.worksheetImageIds=new Map,t.factoryMode=a["S"].SINGLE_SHEET,t}(),ua=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ua(e,t),e.prototype.createExcel=function(t){var e=this,r=e.excelStyles,n=e.config;return la.createExcel(r,t,n)},e.prototype.getDataTypeForValue=function(t){return void 0===t?"empty":this.isNumerical(t)?"n":"s"},e.prototype.getType=function(t,e,r){if(this.isFormula(r))return"f";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export ["+e.id+".dataType="+e.dataType+"]")}return t},e.prototype.addImage=function(t,e,r){if(this.config.addImageToCell){var n=this.config.addImageToCell(t,e,r);if(n)return la.buildImageMap(n.image,t,e,this.columnsToExport,this.config.rowHeight),n}},e.prototype.createCell=function(t,e,r,n){var o=this.getStyleById(t);!(null===o||void 0===o?void 0:o.dataType)&&"s"===e&&n&&(r=n);var i=this.getType(e,o,r)||e;return{styleId:o?t:void 0,data:{type:i,value:this.getCellValue(i,r)}}},e.prototype.createMergedCell=function(t,e,r,n){var o=null==r?"":r;return{styleId:this.getStyleById(t)?t:void 0,data:{type:e,value:"s"===e?la.getStringPosition(o).toString():r},mergeAcross:n}},e.prototype.getCellValue=function(t,e){if(null==e)return la.getStringPosition("").toString();switch(t){case"s":return""===e?"":la.getStringPosition(e).toString();case"f":return e.slice(1);case"n":return Number(e).toString();default:return e}},e}(Un),pa=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),da=function(){return da=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},da.apply(this,arguments)},ha=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},fa=function(t){var e=t.data,r=t.fontSize,n=void 0===r?11:r,o=t.author,i=void 0===o?"AG Grid":o,s=la.images.size>0;if(a["Ab"].addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),s){a["Ab"].addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var l=0;la.images.forEach((function(t){var e=t[0].image[0],r=e.imageType;a["Ab"].addFile("xl/media/image"+ ++l+"."+r,e.base64,!0)}))}if(!e||0===e.length)return console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),void la.resetFactory();var u=e.length,c=0;e.forEach((function(t,e){a["Ab"].addFile("xl/worksheets/sheet"+(e+1)+".xml",t),s&&la.worksheetImages.get(e)&&ya(e,c++)})),a["Ab"].addFile("xl/workbook.xml",la.createWorkbook()),a["Ab"].addFile("xl/styles.xml",la.createStylesheet(n)),a["Ab"].addFile("xl/sharedStrings.xml",la.createSharedStrings()),a["Ab"].addFile("xl/theme/theme1.xml",la.createTheme()),a["Ab"].addFile("xl/_rels/workbook.xml.rels",la.createWorkbookRels(u)),a["Ab"].addFile("docProps/core.xml",la.createCore(i)),a["Ab"].addFile("[Content_Types].xml",la.createContentTypes(u)),a["Ab"].addFile("_rels/.rels",la.createRels()),la.resetFactory();var p=t.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return a["Ab"].getContent(p)},va=function(t){var e=t.fileName,r=void 0===e?"export.xlsx":e,n=fa(t);n&&a["N"].download(r,n)},ya=function(t,e){var r="xl/drawings",n=r+"/drawing"+(e+1)+".xml",o=r+"/_rels/drawing"+(e+1)+".xml.rels",i="xl/worksheets/_rels/sheet"+(t+1)+".xml.rels";a["Ab"].addFile(o,la.createDrawingRel(t)),a["Ab"].addFile(n,la.createDrawing(t)),a["Ab"].addFile(i,la.createWorksheetDrawingRel(e))},ga=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.exportMode="xlsx",e}return pa(e,t),e.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},e.prototype.getMergedParams=function(t){var e=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({},e,t)},e.prototype.getData=function(e){return this.setExportMode(e.exportMode||"xlsx"),t.prototype.getData.call(this,e)},e.prototype.export=function(t){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var e=this.getMergedParams(t),r=this.getData(e),n={data:[r],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType},o=this.packageFile(n);return o&&a["N"].download(this.getFileName(e.fileName),o),r},e.prototype.exportDataAsExcel=function(t){return this.export(t)},e.prototype.getDataAsExcel=function(t){var e=this.getMergedParams(t),r=this.getData(e);if(t&&"xml"===t.exportMode)return r;var n={data:[r],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType};return this.packageFile(n)},e.prototype.setFactoryMode=function(t,e){void 0===e&&(e="xlsx");var r="xlsx"===e?la:Dn;r.factoryMode=t},e.prototype.getFactoryMode=function(t){var e="xlsx"===t?la:Dn;return e.factoryMode},e.prototype.getSheetDataForExcel=function(t){var e=this.getMergedParams(t),r=this.getData(e);return r},e.prototype.getMultipleSheetsAsExcel=function(t){return fa(t)},e.prototype.exportMultipleSheetsAsExcel=function(t){return va(t)},e.prototype.getDefaultFileName=function(){return"export."+this.getExportMode()},e.prototype.getDefaultFileExtension=function(){return this.getExportMode()},e.prototype.createSerializingSession=function(t){var e=this,r=e.columnModel,n=e.valueService,o=e.gridOptionsService,i=e.valueFormatterService,s=e.valueParserService,l="xlsx"===this.getExportMode(),u="ag-grid";null!=t.sheetName&&(u=a["Bb"].utf8_encode(t.sheetName.toString().substr(0,31)));var c=da(da({},t),{sheetName:u,columnModel:r,valueService:n,gridOptionsService:o,valueFormatterService:i,valueParserService:s,headerRowHeight:t.headerRowHeight||t.rowHeight,baseExcelStyles:this.gridOptionsService.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new(l?ca:Kn)(c)},e.prototype.styleLinker=function(t){var e=t.rowType,r=t.rowIndex,n=t.value,o=t.column,i=t.columnGroup,s=t.node,l=e===a["ob"].HEADER,u=e===a["ob"].HEADER_GROUPING,c=l?o:i,p=[];if(l||u)return p.push("header"),u&&p.push("headerGroup"),c&&(p=p.concat(a["J"].getHeaderClassesFromColDef(c.getDefinition(),this.gridOptionsService,o||null,i||null))),p;var d=this.gridOptionsService.get("excelStyles"),h=["cell"];if(!d||!d.length)return h;var f=d.map((function(t){return t.id}));return this.stylingService.processAllCellClasses(o.getDefinition(),{value:n,data:s.data,node:s,colDef:o.getDefinition(),column:o,rowIndex:r,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},(function(t){f.indexOf(t)>-1&&h.push(t)})),h.sort((function(t,e){return f.indexOf(t)<f.indexOf(e)?-1:1}))},e.prototype.isExportSuppressed=function(){return this.gridOptionsService.is("suppressExcelExport")},e.prototype.setExportMode=function(t){this.exportMode=t},e.prototype.getExportMode=function(){return this.exportMode},e.prototype.packageFile=function(t){if("xml"===this.getExportMode()){var e=t.mimeType||"application/vnd.ms-excel";return new Blob(["\ufeff",t.data[0]],{type:e})}return fa(t)},ha([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),ha([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),ha([Object(a["u"])("stylingService")],e.prototype,"stylingService",void 0),ha([Object(a["u"])("gridSerializer")],e.prototype,"gridSerializer",void 0),ha([Object(a["u"])("gridOptionsService")],e.prototype,"gridOptionsService",void 0),ha([Object(a["u"])("valueFormatterService")],e.prototype,"valueFormatterService",void 0),ha([Object(a["u"])("valueParserService")],e.prototype,"valueParserService",void 0),ha([a["fb"]],e.prototype,"postConstruct",null),e=ha([Object(a["y"])("excelCreator")],e),e}(a["w"]),ma="30.2.1",ba={version:ma,moduleName:a["Z"].ExcelExportModule,beans:[ga,a["W"],a["K"]],dependantModules:[a["L"],b]},Ca=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sa=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};(function(t){t[t["EXPANDED"]=0]="EXPANDED",t[t["COLLAPSED"]=1]="COLLAPSED",t[t["INDETERMINATE"]=2]="INDETERMINATE"})(Vo||(Vo={}));var wa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ca(e,t),e.prototype.preConstruct=function(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')},e.prototype.postConstruct=function(){var t=this.localeService.getLocaleTextFunc();this.eFilterTextField.onValueChange(this.onSearchTextChanged.bind(this)),this.eFilterTextField.setInputAriaLabel(t("ariaFilterColumnsInput","Filter Columns Input")),this.createExpandIcons(),this.setExpandState(Vo.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},e.prototype.init=function(t){this.params=t,this.columnModel.isReady()&&this.showOrHideOptions()},e.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=a["Bb"].createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=a["Bb"].createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=a["Bb"].createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))},e.prototype.showOrHideOptions=function(){var t=!this.params.suppressFilterSearch,e=!this.params.suppressExpandAll,r=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(r("searchOoo","Search..."));var n=function(t){return t.getOriginalParent()&&t.isFilterAllowed()},o=this.columnModel.getAllGridColumns().some(n);a["Bb"].setDisplayed(this.eFilterTextField.getGui(),t),a["Bb"].setDisplayed(this.eExpand,e&&o)},e.prototype.onSearchTextChanged=function(){var t=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=a["Bb"].debounce((function(){t.dispatchEvent({type:"searchChanged",searchText:t.eFilterTextField.getValue()})}),300)),this.onSearchTextChangedDebounced()},e.prototype.onExpandClicked=function(){var t=this.currentExpandState===Vo.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(t)},e.prototype.setExpandState=function(t){this.currentExpandState=t,a["Bb"].setDisplayed(this.eExpandChecked,this.currentExpandState===Vo.EXPANDED),a["Bb"].setDisplayed(this.eExpandUnchecked,this.currentExpandState===Vo.COLLAPSED),a["Bb"].setDisplayed(this.eExpandIndeterminate,this.currentExpandState===Vo.INDETERMINATE)},Sa([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Sa([Object(a["kb"])("eExpand")],e.prototype,"eExpand",void 0),Sa([Object(a["kb"])("eFilterTextField")],e.prototype,"eFilterTextField",void 0),Sa([a["gb"]],e.prototype,"preConstruct",null),Sa([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),xa=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oa=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ea=function(t){function e(r){void 0===r&&(r=!1);var n=t.call(this,e.TEMPLATE)||this;return n.expanded=!1,n.hideHeader=r,n}return xa(e,t),e.prototype.postConstruct=function(){this.eExpandChecked=a["Bb"].createIconNoSpan("columnSelectOpen",this.gridOptionsService),this.eExpandUnchecked=a["Bb"].createIconNoSpan("columnSelectClosed",this.gridOptionsService),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},e.prototype.setColumn=function(t){var e=this;this.column=t,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",(function(t){t.key!==a["X"].ENTER&&t.key!==a["X"].SPACE||(t.preventDefault(),e.toggleExpanded())})),this.addManagedListener(this.eventService,a["R"].EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),a["Bb"].setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),a["Bb"].setDisplayed(this.eExpandChecked,!1),this.hideHeader?(a["Bb"].setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,a["G"].EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))},e.prototype.getColumn=function(){return this.column},e.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},e.prototype.addCssClassToTitleBar=function(t){this.eFilterToolPanelHeader.classList.add(t)},e.prototype.addInIcon=function(t,e,r){if(null!=e){var n=a["Bb"].createIconNoSpan(t,this.gridOptionsService,r);e.appendChild(n)}},e.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},e.prototype.onFilterChanged=function(){a["Bb"].setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:a["G"].EVENT_FILTER_CHANGED})},e.prototype.onFilterDestroyed=function(t){this.expanded&&"api"===t.source&&t.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(this.removeFilterElement(),this.addFilterElement())},e.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},e.prototype.expand=function(){this.expanded||(this.expanded=!0,a["Bb"].setAriaExpanded(this.eFilterToolPanelHeader,!0),a["Bb"].setDisplayed(this.eExpandChecked,!0),a["Bb"].setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement())},e.prototype.addFilterElement=function(){var t=this,e=a["Bb"].loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),r=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(r){var n=r.filterPromise,o=r.guiPromise;null===n||void 0===n||n.then((function(r){t.underlyingFilter=r,r&&o.then((function(n){n&&e.appendChild(n),t.agFilterToolPanelBody.appendChild(e),r.afterGuiAttached&&r.afterGuiAttached({container:"toolPanel"})}))}))}},e.prototype.collapse=function(){var t,e;this.expanded&&(this.expanded=!1,a["Bb"].setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),a["Bb"].setDisplayed(this.eExpandChecked,!1),a["Bb"].setDisplayed(this.eExpandUnchecked,!0),null===(e=null===(t=this.underlyingFilter)||void 0===t?void 0:t.afterGuiDetached)||void 0===e||e.call(t))},e.prototype.removeFilterElement=function(){a["Bb"].clearElement(this.agFilterToolPanelBody)},e.prototype.isExpanded=function(){return this.expanded},e.prototype.refreshFilter=function(t){var e;if(this.expanded){var r=this.underlyingFilter;r&&(t?"function"===typeof r.refreshVirtualList&&r.refreshVirtualList():null===(e=r.afterGuiDetached)||void 0===e||e.call(r))}},e.prototype.onFilterOpened=function(t){"COLUMN_MENU"===t.source&&t.column===this.column&&this.expanded&&this.collapse()},e.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>',Oa([Object(a["kb"])("eFilterToolPanelHeader")],e.prototype,"eFilterToolPanelHeader",void 0),Oa([Object(a["kb"])("eFilterName")],e.prototype,"eFilterName",void 0),Oa([Object(a["kb"])("agFilterToolPanelBody")],e.prototype,"agFilterToolPanelBody",void 0),Oa([Object(a["kb"])("eFilterIcon")],e.prototype,"eFilterIcon",void 0),Oa([Object(a["kb"])("eExpand")],e.prototype,"eExpand",void 0),Oa([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),Oa([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Oa([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),Ta=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pa=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Da=function(t){function e(e,r,n,o,i){var a=t.call(this)||this;return a.columnGroup=e,a.childFilterComps=r,a.depth=o,a.expandedCallback=n,a.showingColumn=i,a}return Ta(e,t),e.prototype.preConstruct=function(){var t={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate(e.TEMPLATE,{filterGroupComp:t})},e.prototype.init=function(){var t=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-"+this.depth),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+this.depth+"-header"),this.childFilterComps.forEach((function(e){t.filterGroupComp.addItem(e),e.addCssClassToTitleBar("ag-filter-toolpanel-group-level-"+(t.depth+1)+"-header")})),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},e.prototype.setupTooltip=function(){var t=this;if(this.showingColumn){var e=function(){var e=t.columnGroup.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,e)}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="filterToolPanelColumnGroup",e},e.prototype.addCssClassToTitleBar=function(t){this.filterGroupComp.addCssClassToTitleBar(t)},e.prototype.refreshFilters=function(t){this.childFilterComps.forEach((function(r){r instanceof e?r.refreshFilters(t):r.refreshFilter(t)}))},e.prototype.isColumnGroup=function(){return this.columnGroup instanceof a["ib"]},e.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},e.prototype.getChildren=function(){return this.childFilterComps},e.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},e.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},e.prototype.hideGroupItem=function(t,e){this.filterGroupComp.hideItem(t,e)},e.prototype.hideGroup=function(t){this.setDisplayed(!t)},e.prototype.forEachToolPanelFilterChild=function(t){this.childFilterComps.forEach((function(e){e instanceof Ea&&t(e)}))},e.prototype.addExpandCollapseListeners=function(){var t=this,e=this.isColumnGroup()?function(){return t.expandedCallback()}:function(){return t.forEachToolPanelFilterChild((function(t){return t.expand()}))},r=this.isColumnGroup()?function(){return t.expandedCallback()}:function(){return t.forEachToolPanelFilterChild((function(t){return t.collapse()}))};this.addManagedListener(this.filterGroupComp,a["e"].EVENT_EXPANDED,e),this.addManagedListener(this.filterGroupComp,a["e"].EVENT_COLLAPSED,r)},e.prototype.getColumns=function(){return this.columnGroup instanceof a["ib"]?this.columnGroup.getLeafColumns():[this.columnGroup]},e.prototype.addFilterChangedListeners=function(){var t=this;this.getColumns().forEach((function(e){t.addManagedListener(e,a["G"].EVENT_FILTER_CHANGED,(function(){return t.refreshFilterClass()}))})),this.columnGroup instanceof a["ib"]||this.addManagedListener(this.eventService,a["R"].EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},e.prototype.refreshFilterClass=function(){var t=this.getColumns(),e=function(){return t.some((function(t){return t.isFilterActive()}))};this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",e())},e.prototype.onFilterOpened=function(t){"COLUMN_MENU"===t.source&&t.column===this.columnGroup&&this.isExpanded()&&this.collapse()},e.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},e.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},e.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof a["ib"]?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},e.prototype.getColumnGroupName=function(t){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,t,"filterToolPanel")},e.prototype.getColumnName=function(t){return this.columnModel.getDisplayNameForColumn(t,"filterToolPanel",!1)},e.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),a["Bb"].clearElement(this.getGui())},e.prototype.destroy=function(){this.destroyFilters(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>',Pa([Object(a["kb"])("filterGroupComp")],e.prototype,"filterGroupComp",void 0),Pa([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),Pa([a["gb"]],e.prototype,"preConstruct",null),Pa([a["fb"]],e.prototype,"init",null),e}(a["H"]),Aa=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ma=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ra=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.initialised=!1,r.filterGroupComps=[],r}return Aa(e,t),e.prototype.init=function(t){var e=this;this.initialised=!0;var r={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};a["Bb"].mergeDeep(r,t),this.params=r,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_MOVED,(function(){return e.onColumnsChanged()})),this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,(function(){return e.onColumnsChanged()})),this.addManagedListener(this.eventService,a["R"].EVENT_TOOL_PANEL_VISIBLE_CHANGED,(function(t){"filters"===t.key&&e.refreshFilters(t.visible)})),this.columnModel.isReady()&&this.onColumnsChanged()},e.prototype.onColumnsChanged=function(){var t=this.columnModel.isPivotMode(),e=!this.params.suppressSyncLayoutWithGrid&&!t;e?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs()},e.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this))},e.prototype.buildTreeFromProvidedColumnDefs=function(){var t=this.columnModel.getPrimaryColumnTree();this.recreateFilters(t)},e.prototype.setFiltersLayout=function(t){var e=this.toolPanelColDefService.createColumnTree(t);this.recreateFilters(e)},e.prototype.recreateFilters=function(t){var e=this,r=this.gridOptionsService.getDocument().activeElement,n=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(t,0,n);var o=this.filterGroupComps.length;o&&(this.filterGroupComps.forEach((function(t){return e.appendChild(t)})),this.setFirstAndLastVisible(0,o-1)),a["Bb"].exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(r)&&r.focus()},e.prototype.recursivelyAddComps=function(t,e,r){var n=this;return a["Bb"].flatten(t.map((function(t){if(t instanceof a["ib"])return a["Bb"].flatten(n.recursivelyAddFilterGroupComps(t,e,r));var o=t;if(!n.shouldDisplayFilter(o))return[];var i=0===e,s=new Ea(i);if(n.createBean(s),s.setColumn(o),r.get(o.getId())&&s.expand(),e>0)return s;var l=n.createBean(new Da(o,[s],n.onGroupExpanded.bind(n),e,!0));return l.addCssClassToTitleBar("ag-filter-toolpanel-header"),r.get(l.getFilterGroupId())||l.collapse(),l})))},e.prototype.recursivelyAddFilterGroupComps=function(t,e,r){if(this.filtersExistInChildren(t.getChildren())){var n=t.getColGroupDef();if(n&&n.suppressFiltersToolPanel)return[];var o=t.isPadding()?e:e+1,i=a["Bb"].flatten(this.recursivelyAddComps(t.getChildren(),o,r));if(t.isPadding())return i;var s=new Da(t,i,this.onGroupExpanded.bind(this),e,!1);return this.createBean(s),s.addCssClassToTitleBar("ag-filter-toolpanel-header"),!1===r.get(s.getFilterGroupId())&&s.collapse(),[s]}},e.prototype.filtersExistInChildren=function(t){var e=this;return t.some((function(t){return t instanceof a["ib"]?e.filtersExistInChildren(t.getChildren()):e.shouldDisplayFilter(t)}))},e.prototype.shouldDisplayFilter=function(t){var e=t.getColDef()&&t.getColDef().suppressFiltersToolPanel;return t.isFilterAllowed()&&!e},e.prototype.getExpansionState=function(){var t=new Map,e=function(r){t.set(r.getFilterGroupId(),r.isExpanded()),r.getChildren().forEach((function(r){r instanceof Da?e(r):t.set(r.getColumn().getId(),r.isExpanded())}))};return this.filterGroupComps.forEach(e),t},e.prototype.refresh=function(){},e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.expandFilterGroups=function(t,e){var r=[],n=function(o){var i=o.getFilterGroupId(),s=!e||a["Bb"].includes(e,i);s&&(t&&o.isColumnGroup()?o.expand():o.collapse(),r.push(i)),o.getChildren().forEach((function(t){t instanceof Da&&n(t)}))};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),e){var o=e.filter((function(t){return r.indexOf(t)<0}));o.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",o)}},e.prototype.expandFilters=function(t,e){var r=[],n=function(o){if(o instanceof Da){var i=!1;return o.getChildren().forEach((function(e){var r=n(e);r&&(t?(o.expand(),i=!0):o.isColumnGroup()||o.collapse())})),i}var s=o.getColumn().getColId(),l=!e||a["Bb"].includes(e,s);return l&&(t?o.expand():o.collapse(),r.push(s)),l};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),e){var o=e.filter((function(t){return r.indexOf(t)<0}));o.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",o)}},e.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},e.prototype.fireExpandedEvent=function(){var t,e=0,r=0,n=function(t){t.isColumnGroup()&&(t.isExpanded()?e++:r++,t.getChildren().forEach((function(t){t instanceof Da&&n(t)})))};this.filterGroupComps.forEach(n),t=e>0&&r>0?Vo.INDETERMINATE:r>0?Vo.COLLAPSED:Vo.EXPANDED,this.dispatchEvent({type:"groupExpanded",state:t})},e.prototype.performFilterSearch=function(t){this.searchFilterText=a["Bb"].exists(t)?t.toLowerCase():null,this.searchFilters(this.searchFilterText)},e.prototype.searchFilters=function(t){var e,r,n=function(e){return!a["Bb"].exists(t)||-1!==e.toLowerCase().indexOf(t)},o=function(t,e){if(!(t instanceof Da))return n(t.getColumnFilterName()||"");var r=t.getChildren(),i=n(t.getFilterGroupName()),a=e||i;if(a){t.hideGroup(!1);for(var s=0;s<r.length;s++)o(r[s],a),t.hideGroupItem(!1,s);return!0}var l=!1;return r.forEach((function(r,n){var i=o(r,e);t.hideGroupItem(!i,n),i&&(l=!0)})),t.hideGroup(!l),l};this.filterGroupComps.forEach((function(t,n){o(t,!1),void 0===e?t.containsCssClass("ag-hidden")||(e=n,r=n):t.containsCssClass("ag-hidden")||r===n||(r=n)})),this.setFirstAndLastVisible(e,r)},e.prototype.setFirstAndLastVisible=function(t,e){this.filterGroupComps.forEach((function(r,n){r.removeCssClass("ag-first-group-visible"),r.removeCssClass("ag-last-group-visible"),n===t&&r.addCssClass("ag-first-group-visible"),n===e&&r.addCssClass("ag-last-group-visible")}))},e.prototype.refreshFilters=function(t){this.filterGroupComps.forEach((function(e){return e.refreshFilters(t)}))},e.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),a["Bb"].clearElement(this.getGui())},e.prototype.destroy=function(){this.destroyFilters(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-list-panel"></div>',Ma([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),Ma([Object(a["u"])("columnApi")],e.prototype,"columnApi",void 0),Ma([Object(a["u"])("toolPanelColDefService")],e.prototype,"toolPanelColDefService",void 0),Ma([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),e}(a["H"]),_a=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ka=function(){return ka=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ka.apply(this,arguments)},Fa=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ia=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.initialised=!1,r.listenerDestroyFuncs=[],r}return _a(e,t),e.prototype.init=function(t){this.initialised&&(this.listenerDestroyFuncs.forEach((function(t){return t()})),this.listenerDestroyFuncs=[]),this.initialised=!0;var e={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};this.params=ka(ka(ka({},e),t),{context:this.gridOptionsService.context}),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);var r=this.params.suppressExpandAll,n=this.params.suppressFilterSearch;r&&n&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},e.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},e.prototype.onSearchChanged=function(t){this.filtersToolPanelListPanel.performFilterSearch(t.searchText)},e.prototype.setFilterLayout=function(t){this.filtersToolPanelListPanel.setFiltersLayout(t)},e.prototype.onGroupExpanded=function(t){this.filtersToolPanelHeaderPanel.setExpandState(t.state)},e.prototype.expandFilterGroups=function(t){this.filtersToolPanelListPanel.expandFilterGroups(!0,t)},e.prototype.collapseFilterGroups=function(t){this.filtersToolPanelListPanel.expandFilterGroups(!1,t)},e.prototype.expandFilters=function(t){this.filtersToolPanelListPanel.expandFilters(!0,t)},e.prototype.collapseFilters=function(t){this.filtersToolPanelListPanel.expandFilters(!1,t)},e.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},e.prototype.refresh=function(){this.init(this.params)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',Fa([Object(a["kb"])("filtersToolPanelHeaderPanel")],e.prototype,"filtersToolPanelHeaderPanel",void 0),Fa([Object(a["kb"])("filtersToolPanelListPanel")],e.prototype,"filtersToolPanelListPanel",void 0),Fa([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),Fa([Object(a["u"])("columnApi")],e.prototype,"columnApi",void 0),e}(a["H"]),La="30.2.1",Na={version:La,moduleName:a["Z"].FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:wa},{componentName:"AgFiltersToolPanelList",componentClass:Ra}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:Ia}],dependantModules:[un,b]},Ga=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ja=function(){function t(t,e,r){this._encode=t,this._decode=e,this._rangeCallback=r}return t.prototype.floor=function(t){var e=new Date(t),r=this._encode(e);return this._decode(r)},t.prototype.ceil=function(t){var e=new Date(Number(t)-1),r=this._encode(e);return this._decode(r+1)},t.prototype.range=function(t,e,r){var n,o=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),i=this._encode(r?this.floor(t):this.ceil(t)),a=this._encode(r?this.ceil(e):this.floor(e));if(a<i)return[];for(var s=[],l=i;l<=a;l++){var u=this._decode(l);s.push(u)}return null===o||void 0===o||o(),s},t}(),Ba=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ga(e,t),e.prototype.getOffset=function(t,e){var r="number"===typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(r)%e},e.prototype.every=function(t,e){var r,n=this,o=0,i=(null!==e&&void 0!==e?e:{}).snapTo,a=void 0===i?"start":i;if("string"===typeof a){var s=o;r=function(e,r){var i="start"===a?e:r;return o=n.getOffset(i,t),function(){return o=s}}}else"number"===typeof a?o=this.getOffset(new Date(a),t):a instanceof Date&&(o=this.getOffset(a,t));var l=function(e){var r=n._encode(e);return Math.floor((r-o)/t)},u=function(e){return n._decode(e*t+o)},c=new ja(l,u,r);return c},e}(ja);function Va(t){return t.getTime()}function Ha(t){return new Date(t)}var za=new Ba(Va,Ha);new Date(0).getFullYear();var Ua=1e3,Wa=60*Ua,Ka=60*Wa,Xa=24*Ka,Ya=7*Xa,qa=30*Xa,Za=365*Xa,Ja=(new Date).getTimezoneOffset()*Wa;function Qa(t){return Math.floor((t.getTime()-Ja)/Ua)}function $a(t){return new Date(Ja+t*Ua)}var ts=new Ba(Qa,$a),es=(new Date).getTimezoneOffset()*Wa;function rs(t){return Math.floor((t.getTime()-es)/Wa)}function ns(t){return new Date(es+t*Wa)}var os=new Ba(rs,ns),is=(new Date).getTimezoneOffset()*Wa;function as(t){return Math.floor((t.getTime()-is)/Ka)}function ss(t){return new Date(is+t*Ka)}var ls=new Ba(as,ss);function us(t){var e=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-e)/Xa)}function cs(t){var e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}var ps=new Ba(us,cs);function ds(t){var e=new Date(2023,0,1+t).getTime();function r(t){var r=t.getTime();return Math.floor((r-e)/Ya)}function n(t){var r=new Date(e);return r.setDate(r.getDate()+7*t),r}return new Ba(r,n)}var hs=ds(0);ds(1),ds(2),ds(3),ds(4),ds(5),ds(6);function fs(t){return 12*t.getFullYear()+t.getMonth()}function vs(t){var e=Math.floor(t/12),r=t-12*e;return new Date(e,r,1)}var ys=new Ba(fs,vs);function gs(t){return t.getFullYear()}function ms(t){var e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}var bs=new Ba(gs,ms);function Cs(t){return Math.floor(t.getTime()/Wa)}function Ss(t){return new Date(t*Wa)}new Ba(Cs,Ss);function ws(t){return Math.floor(t.getTime()/Ka)}function xs(t){return new Date(t*Ka)}new Ba(ws,xs);function Os(t){return Math.floor(t.getTime()/Xa)}function Es(t){var e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}new Ba(Os,Es);function Ts(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}function Ps(t){var e=Math.floor(t/12),r=t-12*e;return new Date(Date.UTC(e,r,1))}new Ba(Ts,Ps);function Ds(t){return t.getUTCFullYear()}function As(t){var e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}new Ba(Ds,As);var Ms=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function Rs(){var t=navigator.userAgent;return!Ms.some((function(e){return e.test(t)}))}var _s,ks=function(){function t(t){var e=t.document,r=void 0===e?window.document:e,n=t.width,o=void 0===n?600:n,i=t.height,a=void 0===i?300:i,s=t.domLayer,l=void 0!==s&&s,u=t.zIndex,c=void 0===u?0:u,p=t.name,d=void 0===p?void 0:p,h=t.overrideDevicePixelRatio,f=void 0===h?void 0:h;this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=r,this.element=r.createElement("canvas"),this.element.width=o,this.element.height=a,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;var v=this.element.style;v.userSelect="none",v.display="block",l&&(v.position="absolute",v.zIndex=String(c),v.top="0",v.left="0",v.pointerEvents="none",v.opacity="1",d&&(this.element.id=d)),this.setPixelRatio(f),this.resize(o,a)}return Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this.element.style.display=t?"block":"none",this._enabled=!!t},enumerable:!1,configurable:!0}),t.prototype.remove=function(){var t=this.element.parentNode;null!=t&&t.removeChild(this.element)},t.prototype.destroy=function(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)},t.prototype.snapshot=function(){},t.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},t.prototype.toImage=function(){var t=this.document.createElement("img");return t.src=this.getDataURL(),t},t.prototype.getDataURL=function(t){return this.element.toDataURL(t)},t.prototype.download=function(t,e){void 0===e&&(e="image/png"),t=(null!==t&&void 0!==t?t:"").trim()||"image";var r=this.getDataURL(e),n=this.document,o=n.createElement("a");o.href=r,o.download=t,o.style.display="none",n.body.appendChild(o),o.click(),n.body.removeChild(o)},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),t.prototype.setPixelRatio=function(e){var r=null!==e&&void 0!==e?e:window.devicePixelRatio;Rs()||(r=1),t.overrideScale(this.context,r),this._pixelRatio=r},Object.defineProperty(t.prototype,"pixelated",{get:function(){return"pixelated"===this.element.style.imageRendering},set:function(t){this.element.style.imageRendering=t?"pixelated":"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.element,o=r.context,i=r.pixelRatio;n.width=Math.round(t*i),n.height=Math.round(e*i),n.style.width=t+"px",n.style.height=e+"px",o.resetTransform(),this._width=t,this._height=e}},Object.defineProperty(t,"textMeasuringContext",{get:function(){if(this._textMeasuringContext)return this._textMeasuringContext;var t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext},enumerable:!1,configurable:!0}),Object.defineProperty(t,"svgText",{get:function(){if(this._svgText)return this._svgText;var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";var r=document.createElementNS(t,"text");return r.setAttribute("x","0"),r.setAttribute("y","30"),r.setAttribute("text","black"),e.appendChild(r),document.body.appendChild(e),this._svgText=r,r},enumerable:!1,configurable:!0}),Object.defineProperty(t,"has",{get:function(){if(this._has)return this._has;var t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,r=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!r,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has},enumerable:!1,configurable:!0}),t.measureText=function(t,e,r,n){var o=this.textMeasuringContext;return o.font=e,o.textBaseline=r,o.textAlign=n,o.measureText(t)},t.getTextSize=function(t,e){if(this.has.textMetrics){var r=this.textMeasuringContext;r.font=e;var n=r.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)},t.measureSvgText=function(t,e){var r=this.textSizeCache,n=r[e];if(n){var o=n[t];if(o)return o}else r[e]={};var i=this.svgText;i.style.font=e,i.textContent=t;var a=i.getBBox(),s={width:a.width,height:a.height};return r[e][t]=s,s},t.overrideScale=function(t,e){var r=0,n={save:function(){this.$save(),r++},restore:function(){if(!(r>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),r--},setTransform:function(t,r,n,o,i,a){"object"===typeof t?this.$setTransform(t):this.$setTransform(t*e,r*e,n*e,o*e,i*e,a*e)},resetTransform:function(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero:function(){if(0!==r)throw new Error("AG Charts - Save/restore depth is non-zero: "+r)}};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t["$"+o]||(t["$"+o]=t[o]),t[o]=n[o])},t.textSizeCache={},t}(),Fs=function(){return Fs=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Fs.apply(this,arguments)},Is=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Ls=function(){function t(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return t.prototype.clone=function(){var e=this,r=e.x,n=e.y,o=e.width,i=e.height;return new t(r,n,o,i)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.containsPoint=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t.prototype.collidesBBox=function(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y},t.prototype.isInfinite=function(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0},t.prototype.shrink=function(t,e){var r=this,n=function(t,e){switch(t){case"top":r.y+=e;case"bottom":r.height-=e;break;case"left":r.x+=e;case"right":r.width-=e;break;case"vertical":r.y+=e,r.height-=2*e;break;case"horizontal":r.x+=e,r.width-=2*e;break;default:r.x+=e,r.width-=2*e,r.y+=e,r.height-=2*e}};return"number"===typeof t?n(e,t):Object.entries(t).forEach((function(t){var e=Is(t,2),r=e[0],o=e[1];return n(r,o)})),this},t.prototype.grow=function(t,e){if("number"===typeof t)this.shrink(-t,e);else{var r=Fs({},t);for(var n in r)r[n]*=-1;this.shrink(r)}return this},t.merge=function(e){var r=1/0,n=1/0,o=-1/0,i=-1/0;return e.forEach((function(t){t.x<r&&(r=t.x),t.y<n&&(n=t.y),t.x+t.width>o&&(o=t.x+t.width),t.y+t.height>i&&(i=t.y+t.height)})),new t(r,n,o-r,i-n)},t}(),Ns=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Gs=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},js=function(){function t(t){void 0===t&&(t=[1,0,0,1,0,0]),this.elements=t}return Object.defineProperty(t.prototype,"e",{get:function(){return Gs([],Ns(this.elements))},enumerable:!1,configurable:!0}),t.prototype.setElements=function(t){var e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},Object.defineProperty(t.prototype,"identity",{get:function(){var t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]},enumerable:!1,configurable:!0}),t.prototype.AxB=function(t,e,r){var n=t[0]*e[0]+t[2]*e[1],o=t[1]*e[0]+t[3]*e[1],i=t[0]*e[2]+t[2]*e[3],a=t[1]*e[2]+t[3]*e[3],s=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];r=null!==r&&void 0!==r?r:t,r[0]=n,r[1]=o,r[2]=i,r[3]=a,r[4]=s,r[5]=l},t.prototype.multiplySelf=function(t){return this.AxB(this.elements,t.elements),this},t.prototype.multiply=function(e){var r=new Array(6);return this.AxB(this.elements,e.elements,r),new t(r)},t.prototype.preMultiplySelf=function(t){return this.AxB(t.elements,this.elements,this.elements),this},t.prototype.inverse=function(){var e=this.elements,r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=1/(r*i-n*o);return r*=l,n*=l,o*=l,i*=l,new t([i,-n,-o,r,o*s-i*a,n*a-r*s])},t.prototype.inverseTo=function(t){var e=this.elements,r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=1/(r*i-n*o);return r*=l,n*=l,o*=l,i*=l,t.setElements([i,-n,-o,r,o*s-i*a,n*a-r*s]),this},t.prototype.invertSelf=function(){var t=this.elements,e=t[0],r=t[1],n=t[2],o=t[3],i=t[4],a=t[5],s=1/(e*o-r*n);return e*=s,r*=s,n*=s,o*=s,t[0]=o,t[1]=-r,t[2]=-n,t[3]=e,t[4]=n*a-o*i,t[5]=r*i-e*a,this},t.prototype.transformPoint=function(t,e){var r=this.elements;return{x:t*r[0]+e*r[2]+r[4],y:t*r[1]+e*r[3]+r[5]}},t.prototype.transformBBox=function(t,e){var r=this.elements,n=r[0],o=r[1],i=r[2],a=r[3],s=.5*t.width,l=.5*t.height,u=t.x+s,c=t.y+l,p=Math.abs(s*n)+Math.abs(l*i),d=Math.abs(s*o)+Math.abs(l*a);return e||(e=new Ls(0,0,0,0)),e.x=u*n+c*i+r[4]-p,e.y=u*o+c*a+r[5]-d,e.width=p+p,e.height=d+d,e},t.prototype.toContext=function(t){if(!this.identity){var e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},t.flyweight=function(e){return t.instance.setElements(e.elements)},t.updateTransformMatrix=function(t,e,r,n,o,i,a){var s,l,u=Ns([0,0],2),c=u[0],p=u[1],d=e,h=r;1===d&&1===h?(s=0,l=0):(s=null==(null===a||void 0===a?void 0:a.scalingCenterX)?c:null===a||void 0===a?void 0:a.scalingCenterX,l=null==(null===a||void 0===a?void 0:a.scalingCenterY)?p:null===a||void 0===a?void 0:a.scalingCenterY);var f,v,y=n,g=Math.cos(y),m=Math.sin(y);0===y?(f=0,v=0):(f=null==(null===a||void 0===a?void 0:a.rotationCenterX)?c:null===a||void 0===a?void 0:a.rotationCenterX,v=null==(null===a||void 0===a?void 0:a.rotationCenterY)?p:null===a||void 0===a?void 0:a.rotationCenterY);var b=o,C=i,S=s*(1-d)-f,w=l*(1-h)-v;return t.setElements([g*d,m*d,-m*h,g*h,g*S-m*w+f+b,m*S+g*w+v+C]),t},t.fromContext=function(e){var r=e.getTransform();return new t([r.a,r.b,r.c,r.d,r.e,r.f])},t.instance=new t,t}(),Bs={};function Vs(t){var e,r=t.constructor,n=Object.prototype.hasOwnProperty.call(r,"className")?r.className:r.name;if(!n)throw new Error("The "+r+" is missing the 'className' property.");var o=(null!==(e=Bs[n])&&void 0!==e?e:0)+1;return Bs[n]=o,n+"-"+o}function Hs(){try{return new Function("return true"),!0}catch(t){return!1}}(function(t){t[t["NONE"]=0]="NONE",t[t["TRIVIAL"]=1]="TRIVIAL",t[t["MINOR"]=2]="MINOR",t[t["MAJOR"]=3]="MAJOR"})(_s||(_s={}));var zs=Hs();function Us(t){var e=null!==t&&void 0!==t?t:{},r=e.changeCb,n=e.convertor;return function(e,o){var i="__"+o;e[o]||(zs&&null==r&&null==n?Ws(e,o,i,t):Ks(e,o,i,t))}}function Ws(t,e,r,n){var o=null!==n&&void 0!==n?n:{},i=o.redraw,a=void 0===i?_s.TRIVIAL:i,s=o.type,l=void 0===s?"normal":s,u=o.checkDirtyOnAssignment,c=void 0!==u&&u,p=new Function("value","\n        const oldValue = this."+r+";\n        if (value !== oldValue) {\n            this."+r+" = value;\n            "+("normal"===l?"this.markDirty(this, "+a+");":"")+"\n            "+("transform"===l?"this.markDirtyTransform("+a+");":"")+"\n            "+("path"===l?"if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, "+a+"); }":"")+"\n            "+("font"===l?"if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, "+a+"); }":"")+"\n        }\n        "+(c?"if (value != null && value._dirty > "+_s.NONE+") { this.markDirty(value, value._dirty); }":"")+"\n"),d=new Function("return this."+r+";");Object.defineProperty(t,e,{set:p,get:d,enumerable:!0,configurable:!0})}function Ks(t,e,r,n){var o=null!==n&&void 0!==n?n:{},i=o.redraw,a=void 0===i?_s.TRIVIAL:i,s=o.type,l=void 0===s?"normal":s,u=o.changeCb,c=o.convertor,p=o.checkDirtyOnAssignment,d=void 0!==p&&p,h=function(t){var e=this[r];t=c?c(t):t,t!==e&&(this[r]=t,"normal"===l&&this.markDirty(this,a),"transform"===l&&this.markDirtyTransform(a),"path"!==l||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,a)),"font"!==l||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,a)),u&&u(this)),d&&null!=t&&t._dirty>_s.NONE&&this.markDirty(t,t._dirty)},f=function(){return this[r]};Object.defineProperty(t,e,{set:h,get:f,enumerable:!0,configurable:!0})}var Xs,Ys=function(){function t(){this._dirty=_s.MAJOR}return t.prototype.markDirty=function(t,e){void 0===e&&(e=_s.TRIVIAL),this._dirty>e||(this._dirty=e)},t.prototype.markClean=function(t){this._dirty=_s.NONE},t.prototype.isDirty=function(){return this._dirty>_s.NONE},t}(),qs=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zs=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Js=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qs=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},$s=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};(function(t){t[t["All"]=0]="All",t[t["None"]=1]="None"})(Xs||(Xs={}));var tl=function(t){t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()},el=function(t){function e(r){var n=void 0===r?{}:r,o=n.isVirtual,i=t.call(this)||this;return i.serialNumber=e._nextSerialNumber++,i.id=Vs(i),i.tag=NaN,i.isContainerNode=!1,i._virtualChildren=[],i._children=[],i.childSet={},i.matrix=new js,i.inverseMatrix=new js,i.dirtyTransform=!1,i.scalingX=1,i.scalingY=1,i.scalingCenterX=null,i.scalingCenterY=null,i.rotationCenterX=null,i.rotationCenterY=null,i.rotation=0,i.translationX=0,i.translationY=0,i.visible=!0,i.dirtyZIndex=!1,i.zIndex=0,i.zIndexSubOrder=void 0,i.pointerEvents=Xs.All,i.isVirtual=null!==o&&void 0!==o&&o,i}return qs(e,t),Object.defineProperty(e.prototype,"datum",{get:function(){var t;return void 0!==this._datum?this._datum:null===(t=this._parent)||void 0===t?void 0:t.datum},set:function(t){this._datum=t},enumerable:!1,configurable:!0}),e.prototype._setLayerManager=function(t){var e,r,n,o;this._layerManager=t,this._debug=null===t||void 0===t?void 0:t.debug;try{for(var i=Js(this._children),a=i.next();!a.done;a=i.next()){var s=a.value;s._setLayerManager(t)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}try{for(var l=Js(this._virtualChildren),u=l.next();!u.done;u=l.next()){s=u.value;s._setLayerManager(t)}}catch(p){n={error:p}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}},Object.defineProperty(e.prototype,"layerManager",{get:function(){return this._layerManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){var t,e;if(0===this._virtualChildren.length)return this._children;var r=$s([],Qs(this._children));try{for(var n=Js(this._virtualChildren),o=n.next();!o.done;o=n.next()){var i=o.value;r.push.apply(r,$s([],Qs(i.children)))}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"virtualChildren",{get:function(){return this._virtualChildren},enumerable:!1,configurable:!0}),e.prototype.hasVirtualChildren=function(){return this._virtualChildren.length>0},e.prototype.append=function(t){var e,r;Array.isArray(t)||(t=[t]);try{for(var n=Js(t),o=n.next();!o.done;o=n.next()){var i=o.value;if(i.parent)throw new Error(i+" already belongs to another parent: "+i.parent+".");if(i.layerManager)throw new Error(i+" already belongs to a scene: "+i.layerManager+".");if(this.childSet[i.id])throw new Error("Duplicate "+i.constructor.name+" node: "+i);i.isVirtual?this._virtualChildren.push(i):this._children.push(i),this.childSet[i.id]=!0,i._parent=this,i._setLayerManager(this.layerManager)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}this.dirtyZIndex=!0,this.markDirty(this,_s.MAJOR)},e.prototype.appendChild=function(t){return this.append(t),t},e.prototype.removeChild=function(t){var e=function(){throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){var r=this._virtualChildren.indexOf(t);r<0&&e(),this._virtualChildren.splice(r,1)}else{r=this._children.indexOf(t);r<0&&e(),this._children.splice(r,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,_s.MAJOR),t},e.prototype.calculateCumulativeMatrix=function(){this.computeTransformMatrix();var t=js.flyweight(this.matrix),e=this.parent;while(e)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t},e.prototype.transformPoint=function(t,e){var r=this.calculateCumulativeMatrix();return r.invertSelf().transformPoint(t,e)},e.prototype.inverseTransformPoint=function(t,e){var r=this.calculateCumulativeMatrix();return r.transformPoint(t,e)},e.prototype.transformBBox=function(t){var e=this.calculateCumulativeMatrix();return e.invertSelf().transformBBox(t)},e.prototype.inverseTransformBBox=function(t){var e=this.calculateCumulativeMatrix();return e.transformBBox(t)},e.prototype.markDirtyTransform=function(){this.dirtyTransform=!0,this.markDirty(this,_s.MAJOR)},e.prototype.containsPoint=function(t,e){return!1},e.prototype.pickNode=function(t,e){var r;if(this.visible&&this.pointerEvents!==Xs.None&&this.containsPoint(t,e)){var n=this.children;if(n.length>1e3)for(var o=n.length-1;o>=0;o--){var i=n[o],a=null===(r=i.computeTransformedBBox())||void 0===r?void 0:r.containsPoint(t,e),s=a?i.pickNode(t,e):void 0;if(s)return s}else if(n.length)for(o=n.length-1;o>=0;o--){s=n[o].pickNode(t,e);if(s)return s}else if(!this.isContainerNode)return this}},e.prototype.findNodes=function(t){var e,r,n=t(this)?[this]:[];try{for(var o=Js(this.children),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.findNodes(t);s&&n.push.apply(n,$s([],Qs(s)))}}catch(l){e={error:l}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},e.prototype.computeBBox=function(){},e.prototype.computeTransformedBBox=function(){var t=this.computeBBox();if(t){this.computeTransformMatrix();var e=js.flyweight(this.matrix),r=this.parent;while(r)r.computeTransformMatrix(),e.preMultiplySelf(r.matrix),r=r.parent;return e.transformBBox(t,t),t}},e.prototype.computeTransformMatrix=function(){if(this.dirtyTransform){var t=this,e=t.matrix,r=t.scalingX,n=t.scalingY,o=t.rotation,i=t.translationX,a=t.translationY,s=t.scalingCenterX,l=t.scalingCenterY,u=t.rotationCenterX,c=t.rotationCenterY;js.updateTransformMatrix(e,r,n,o,i,a,{scalingCenterX:s,scalingCenterY:l,rotationCenterX:u,rotationCenterY:c}),e.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}},e.prototype.render=function(t){var e=t.stats;this._dirty=_s.NONE,e&&e.nodesRendered++},e.prototype.clearBBox=function(t){var e=this.computeBBox();if(null!=e){var r=e.x,n=e.y,o=e.width,i=e.height,a=this.transformPoint(r,n),s=this.transformPoint(r+o,n+i);t.clearRect(a.x,a.y,s.x-a.x,s.y-a.y)}},e.prototype.markDirty=function(t,e,r){void 0===e&&(e=_s.TRIVIAL),void 0===r&&(r=e),this._dirty>e||this._dirty===e&&e===r||(this._dirty=e,this.parent?this.parent.markDirty(this,r):this.layerManager&&this.layerManager.markDirty())},Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},enumerable:!1,configurable:!0}),e.prototype.markClean=function(t){var e,r,n,o,i=null!==t&&void 0!==t?t:{},a=i.force,s=void 0!==a&&a,l=i.recursive,u=void 0===l||l;if(this._dirty!==_s.NONE||s){if(this._dirty=_s.NONE,!1!==u)try{for(var c=Js(this._virtualChildren),p=c.next();!p.done;p=c.next()){var d=p.value;d.markClean({force:s})}}catch(v){e={error:v}}finally{try{p&&!p.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(!0===u)try{for(var h=Js(this._children),f=h.next();!f.done;f=h.next()){d=f.value;d.markClean({force:s})}}catch(y){n={error:y}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}},e.prototype.visibilityChanged=function(){},Object.defineProperty(e.prototype,"nodeCount",{get:function(){var t,e,r,n,o=1,i=this._dirty>=_s.NONE||this.dirtyTransform?1:0,a=this.visible?1:0,s=function(t){var e=t.nodeCount,r=e.count,n=e.visibleCount,s=e.dirtyCount;o+=r,a+=n,i+=s};try{for(var l=Js(this._children),u=l.next();!u.done;u=l.next()){var c=u.value;s(c)}}catch(h){t={error:h}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}try{for(var p=Js(this._virtualChildren),d=p.next();!d.done;d=p.next()){c=d.value;s(c)}}catch(f){r={error:f}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}return{count:o,visibleCount:a,dirtyCount:i}},enumerable:!1,configurable:!0}),e.prototype.zIndexChanged=function(){},e._nextSerialNumber=0,Zs([Us({type:"transform"})],e.prototype,"scalingX",void 0),Zs([Us({type:"transform"})],e.prototype,"scalingY",void 0),Zs([Us({type:"transform"})],e.prototype,"scalingCenterX",void 0),Zs([Us({type:"transform"})],e.prototype,"scalingCenterY",void 0),Zs([Us({type:"transform"})],e.prototype,"rotationCenterX",void 0),Zs([Us({type:"transform"})],e.prototype,"rotationCenterY",void 0),Zs([Us({type:"transform"})],e.prototype,"rotation",void 0),Zs([Us({type:"transform"})],e.prototype,"translationX",void 0),Zs([Us({type:"transform"})],e.prototype,"translationY",void 0),Zs([Us({redraw:_s.MAJOR,changeCb:function(t){return t.visibilityChanged()}})],e.prototype,"visible",void 0),Zs([Us({redraw:_s.TRIVIAL,changeCb:tl})],e.prototype,"zIndex",void 0),Zs([Us({redraw:_s.TRIVIAL,changeCb:tl})],e.prototype,"zIndexSubOrder",void 0),e}(Ys);function rl(t,e){var r=0;return"number"===typeof t&&"number"===typeof e?r=t-e:"string"===typeof t&&"string"===typeof e?r=t.localeCompare(e):null==t&&null==e||(r=null==t?-1:null==e?1:String(t).localeCompare(String(e))),r}function nl(t,e,r){var n=function(t){return"function"===typeof t?t():t};for(var o in t){var i=r(n(t[o]),n(e[o]));if(0!==i)return i}return 0}var ol={};function il(t,e){ol[e]||(t(),ol[e]=!0)}var al,sl=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},ll=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},ul={debug:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,ll([],sl(t)))},warn:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];console.warn.apply(console,ll(["AG Charts - "+t],sl(e)))},error:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];"object"===typeof t?console.error.apply(console,ll(["AG Charts error",t],sl(e))):console.error.apply(console,ll(["AG Charts - "+t],sl(e)))},warnOnce:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];il((function(){return ul.warn.apply(ul,ll([t],sl(e)))}),"Logger.warn: "+t)},errorOnce:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];il((function(){return ul.error.apply(ul,ll([t],sl(e)))}),"Logger.warn: "+t)}},cl=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pl=function(){return pl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},pl.apply(this,arguments)},dl=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},hl=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fl=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},vl=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},yl=function(t){function e(e){var r,n=t.call(this,{isVirtual:null===e||void 0===e?void 0:e.isVirtual})||this;n.opts=e,n.opacity=1,n.lastBBox=void 0;var o=null!==e&&void 0!==e?e:{},i=o.zIndex,a=o.zIndexSubOrder;return n.isContainerNode=!0,void 0!==i&&(n.zIndex=i),void 0!==a&&(n.zIndexSubOrder=a),n.name=null===(r=n.opts)||void 0===r?void 0:r.name,n}return cl(e,t),e.prototype.zIndexChanged=function(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))},e.prototype.isLayer=function(){return null!=this.layer},e.prototype._setLayerManager=function(e){var r,n,o=this;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(t.prototype._setLayerManager.call(this,e),e&&(null===(r=this.opts)||void 0===r?void 0:r.layer)){var i=null!==(n=this.opts)&&void 0!==n?n:{},a=i.zIndex,s=i.zIndexSubOrder,l=i.name,u=function(){return o.getComputedOpacity()},c=function(){return o.getVisibility()};this.layer=e.addLayer({zIndex:a,zIndexSubOrder:s,name:l,getComputedOpacity:u,getVisibility:c})}},e.prototype.getComputedOpacity=function(){var t=1,r=this;do{r instanceof e&&(t*=r.opacity)}while(r=r.parent);return t},e.prototype.getVisibility=function(){var t=this,e=this.visible;while(t=t.parent)t.visible||(e=t.visible);return e},e.prototype.visibilityChanged=function(){this.layer&&(this.layer.enabled=this.visible)},e.prototype.markDirty=function(e,r){if(void 0===r&&(r=_s.TRIVIAL),this.isVirtual)t.prototype.markDirty.call(this,e,r);else{var n=r;(r<_s.MINOR||null!=this.layer)&&(n=_s.TRIVIAL),t.prototype.markDirty.call(this,e,r,n)}},e.prototype.containsPoint=function(t,e){return!0},e.prototype.computeBBox=function(){return this.computeTransformMatrix(),e.computeBBox(this.children)},e.prototype.computeTransformedBBox=function(){return this.computeBBox()},e.prototype.render=function(e){var r,n,o,i,a,s,l,u,c=this.opts,p=void 0===c?{}:c,d=p.name,h=void 0===d?void 0:d,f=this._debug,v=void 0===f?{}:f,y=v.consoleLog,g=void 0!==y&&y,m=this,b=m.dirty,C=m.dirtyZIndex,S=m.layer,w=m.children,x=m.clipRect,O=m.dirtyTransform,E=e.ctx,T=e.forceRender,P=e.clipBBox,D=e.resized,A=e.stats,M=E.getTransform(),R=b>=_s.MINOR||C||D,_=R,k=!1;try{for(var F=hl(w),I=F.next();!I.done;I=F.next()){var L=I.value;if(_||(_=null==L.layerManager&&L.dirty>=_s.TRIVIAL),k||(k=null!=L.layerManager&&L.dirty>=_s.TRIVIAL),_)break}}catch(Q){r={error:Q}}finally{try{I&&!I.done&&(n=F.return)&&n.call(F)}finally{if(r)throw r.error}}if(h&&g&&ul.debug({name:h,group:this,isDirty:R,isChildDirty:_,dirtyTransform:O,renderCtx:e,forceRender:T}),O)T="dirtyTransform";else if(S){var N=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(N)||(T="dirtyTransform",this.lastBBox=N)}if(!R&&!_&&!k&&!T){if(h&&g&&A){var G=this.nodeCount;ul.debug({name:h,result:"skipping",renderCtx:e,counts:G,group:this})}return S&&A&&(A.layersSkipped++,A.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1})}var j=this.visible;if(S){if(E=S.context,E.save(),E.resetTransform(),"dirtyTransform"!==T&&(T=_||C),T&&S.clear(),P){var B=P.width,V=P.height,H=P.x,z=P.y;g&&ul.debug({name:h,clipBBox:P,ctxTransform:E.getTransform(),renderCtx:e,group:this}),this.clipCtx(E,H,z,B,V)}E.setTransform(M)}else E.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(E),x){H=x.x,z=x.y,B=x.width,V=x.height;E.save(),g&&ul.debug({name:h,clipRect:x,ctxTransform:E.getTransform(),renderCtx:e,group:this}),this.clipCtx(E,H,z,B,V),P=this.matrix.transformBBox(x)}var U=this.hasVirtualChildren();C?(this.sortChildren(w),"dirtyTransform"!==T&&(T=!0)):U&&this.sortChildren(w);var W=T!==e.forceRender||P!==e.clipBBox||E!==e.ctx,K=W?pl(pl({},e),{ctx:E,forceRender:T,clipBBox:P}):e,X=0;try{for(var Y=hl(w),q=Y.next();!q.done;q=Y.next()){L=q.value;L.visible&&j?T||L.dirty!==_s.NONE?(E.save(),L.render(K),E.restore()):A&&(X+=L.nodeCount.count):(L.markClean(),A&&(X+=L.nodeCount.count))}}catch($){o={error:$}}finally{try{q&&!q.done&&(i=Y.return)&&i.call(Y)}finally{if(o)throw o.error}}if(A&&(A.nodesSkipped+=X),t.prototype.render.call(this,e),x&&E.restore(),U)try{for(var Z=hl(this.virtualChildren),J=Z.next();!J.done;J=Z.next()){L=J.value;L.markClean({recursive:"virtual"})}}catch(tt){a={error:tt}}finally{try{J&&!J.done&&(s=Z.return)&&s.call(Z)}finally{if(a)throw a.error}}if(S&&(A&&A.layersRendered++,E.restore(),T&&S.snapshot(),null===(u=(l=S.context).verifyDepthZero)||void 0===u||u.call(l)),h&&g&&A){G=this.nodeCount;ul.debug({name:h,result:"rendered",skipped:X,renderCtx:e,counts:G,group:this})}},e.prototype.sortChildren=function(t){this.dirtyZIndex=!1,t.sort((function(t,e){var r,n;return nl(vl(vl([t.zIndex],fl(null!==(r=t.zIndexSubOrder)&&void 0!==r?r:[void 0,void 0])),[t.serialNumber]),vl(vl([e.zIndex],fl(null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0])),[e.serialNumber]),rl)}))},e.prototype.clipCtx=function(t,e,r,n,o){t.beginPath(),t.moveTo(e,r),t.lineTo(e+n,r),t.lineTo(e+n,r+o),t.lineTo(e,r+o),t.closePath(),t.clip()},e.computeBBox=function(t){var e=1/0,r=-1/0,n=1/0,o=-1/0;return t.forEach((function(t){if(t.visible){var i=t.computeTransformedBBox();if(i){var a=i.x,s=i.y;a<e&&(e=a),s<n&&(n=s),a+i.width>r&&(r=a+i.width),s+i.height>o&&(o=s+i.height)}}})),new Ls(e,n,r-e,o-n)},e.prototype.setClipRectInGroupCoordinateSpace=function(t){this.clipRect=t?this.transformBBox(t):void 0},e.className="Group",dl([Us({redraw:_s.MAJOR,convertor:function(t){return Math.min(1,Math.max(0,t))}})],e.prototype,"opacity",void 0),e}(el),gl=function(){function t(t){var e=t.width,r=void 0===e?600:e,n=t.height,o=void 0===n?300:n,i=t.overrideDevicePixelRatio,a=void 0===i?void 0:i;this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(r,o),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(a),this.resize(r,o)}return t.isSupported=function(){return null!=window["OffscreenCanvas"]},t.prototype.snapshot=function(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()},t.prototype.destroy=function(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)},t.prototype.clear=function(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()},Object.defineProperty(t.prototype,"pixelRatio",{get:function(){return this._pixelRatio},enumerable:!1,configurable:!0}),t.prototype.setPixelRatio=function(t){var e=null!==t&&void 0!==t?t:window.devicePixelRatio;Rs()||(e=1),ks.overrideScale(this.context,e),this._pixelRatio=e},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.resize=function(t,e){if(t>0&&e>0){var r=this,n=r.canvas,o=r.context,i=r.pixelRatio;n.width=Math.round(t*i),n.height=Math.round(e*i),o.resetTransform(),this._width=t,this._height=e}},t}();function ml(t){var e="undefined"!==typeof window?window:void 0;return null===e||void 0===e?void 0:e[t]}(function(t){t[t["SUMMARY"]=0]="SUMMARY",t[t["DETAILED"]=1]="DETAILED"})(al||(al={}));var bl=function(){return bl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},bl.apply(this,arguments)},Cl=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Sl=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},wl=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},xl=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Ol=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function El(){var t,e=null!==(t=ml("agChartsSceneDebug"))&&void 0!==t?t:[];"string"===typeof e&&(e=[e]);var r=[];return e.forEach((function(t){"layout"===t?r.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):r.push(t)})),r}var Tl=function(){function t(t){var e,r,n;this.id=Vs(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,level:al.SUMMARY,sceneNodeHighlight:[]};var o=t.document,i=void 0===o?window.document:o,a=t.mode,s=void 0===a?null!==(e=ml("agChartsSceneRenderModel"))&&void 0!==e?e:"adv-composite":a,l=t.width,u=t.height,c=t.overrideDevicePixelRatio,p=void 0===c?void 0:c;this.overrideDevicePixelRatio=p,this.opts={document:i,mode:s},this.debug.consoleLog=[!0,"scene"].includes(ml("agChartsDebug")),this.debug.level=["scene"].includes(ml("agChartsDebug"))?al.DETAILED:al.SUMMARY,this.debug.stats=null!==(r=ml("agChartsSceneStats"))&&void 0!==r&&r,this.debug.dirtyTree=null!==(n=ml("agChartsSceneDirtyTree"))&&void 0!==n&&n,this.debug.sceneNodeHighlight=El(),this.canvas=new ks({document:i,width:l,height:u,overrideDevicePixelRatio:p})}return Object.defineProperty(t.prototype,"container",{get:function(){return this.canvas.container},set:function(t){this.canvas.container=t},enumerable:!1,configurable:!0}),t.prototype.download=function(t,e){this.canvas.download(t,e)},t.prototype.getDataURL=function(t){return this.canvas.getDataURL(t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.pendingSize?this.pendingSize[0]:this.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.pendingSize?this.pendingSize[1]:this.canvas.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(t,e){t=Math.round(t),e=Math.round(e);var r=t<=0||e<=0,n=isNaN(t)||isNaN(e),o=t===this.width&&e===this.height;return!(o||n||r)&&(this.pendingSize=[t,e],this.markDirty(),!0)},t.prototype.addLayer=function(t){var e,r=this.opts.mode,n=["composite","dom-composite","adv-composite"];if(n.includes(r)){var o=t.zIndex,i=void 0===o?this._nextZIndex++:o,a=t.name,s=t.zIndexSubOrder,l=t.getComputedOpacity,u=t.getVisibility,c=this,p=c.width,d=c.height,h=c.overrideDevicePixelRatio,f="dom-composite"===r,v="adv-composite"===r,y=v&&gl.isSupported()?new gl({width:p,height:d,overrideDevicePixelRatio:h}):new ks({document:this.opts.document,width:p,height:d,domLayer:f,zIndex:i,name:a,overrideDevicePixelRatio:h}),g={id:this._nextLayerId++,name:a,zIndex:i,zIndexSubOrder:s,canvas:y,getComputedOpacity:l,getVisibility:u};if(i>=this._nextZIndex&&(this._nextZIndex=i+1),this.layers.push(g),this.sortLayers(),f){var m=this.layers.map((function(t){return t.canvas})).filter((function(t){return t instanceof ks})),b=m.findIndex((function(t){return t===y})),C=null!==(e=m[b-1])&&void 0!==e?e:this.canvas;C.element.insertAdjacentElement("afterend",y.element)}return this.debug.consoleLog&&ul.debug("Scene.addLayer() - layers",this.layers),g.canvas}},t.prototype.removeLayer=function(t){var e=this.layers.findIndex((function(e){return e.canvas===t}));e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug.consoleLog&&ul.debug("Scene.removeLayer() -  layers",this.layers))},t.prototype.moveLayer=function(t,e,r){var n=this.layers.find((function(e){return e.canvas===t}));n&&(n.zIndex=e,n.zIndexSubOrder=r,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&ul.debug("Scene.moveLayer() -  layers",this.layers))},t.prototype.sortLayers=function(){this.layers.sort((function(t,e){var r,n;return nl(xl(xl([t.zIndex],wl(null!==(r=t.zIndexSubOrder)&&void 0!==r?r:[void 0,void 0])),[t.id]),xl(xl([e.zIndex],wl(null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0])),[e.id]),rl)}))},t.prototype.markDirty=function(){this._dirty=!0},Object.defineProperty(t.prototype,"dirty",{get:function(){return this._dirty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},set:function(t){var e=this;t!==this._root&&(this._root&&this._root._setLayerManager(),this._root=t,t&&(null===t.parent&&t.layerManager&&t.layerManager!==this&&(t.layerManager.root=null),t._setLayerManager({addLayer:function(t){return e.addLayer(t)},moveLayer:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.moveLayer.apply(e,xl([],wl(t)))},removeLayer:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.removeLayer.apply(e,xl([],wl(t)))},markDirty:function(){return e.markDirty()},canvas:this.canvas,debug:bl(bl({},this.debug),{consoleLog:this.debug.level>=al.DETAILED})})),this.markDirty())},enumerable:!1,configurable:!0}),t.prototype.strip=function(){var t,e,r=this.layers;try{for(var n=Ol(r),o=n.next();!o.done;o=n.next()){var i=o.value;i.canvas.destroy(),delete i["canvas"]}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}r.splice(0,r.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()},t.prototype.destroy=function(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})},t.prototype.render=function(t){var e;return Cl(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b;return Sl(this,(function(C){return r=null!==t&&void 0!==t?t:{},n=r.debugSplitTimes,o=void 0===n?[performance.now()]:n,i=r.extraDebugStats,a=void 0===i?{}:i,s=this,l=s.canvas,u=s.canvas.context,c=s.root,p=s.layers,d=s.pendingSize,h=s.opts.mode,d&&((b=this.canvas).resize.apply(b,xl([],wl(d))),this.layers.forEach((function(t){var e;return(e=t.canvas).resize.apply(e,xl([],wl(d)))})),this.pendingSize=void 0),c&&!c.visible?(this._dirty=!1,[2]):c&&!this.dirty?(this.debug.consoleLog&&ul.debug("Scene.render() - no-op",{redrawType:_s[c.dirty],tree:this.buildTree(c)}),this.debugStats(o,u,void 0,a),[2]):(f={ctx:u,forceRender:!0,resized:!!d,debugNodes:{}},"detailed"===this.debug.stats&&(f.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0}),v=!1,(!c||c.dirty>=_s.TRIVIAL)&&(v=!0,l.clear()),c&&this.debug.dirtyTree&&(y=this.buildDirtyTree(c),g=y.dirtyTree,m=y.paths,ul.debug("Scene.render() - dirtyTree",{dirtyTree:g,paths:m})),c&&v&&(this.debug.consoleLog&&ul.debug("Scene.render() - before",{redrawType:_s[c.dirty],canvasCleared:v,tree:this.buildTree(c)}),c.visible&&(u.save(),c.render(f),u.restore())),"dom-composite"!==h&&p.length>0&&v&&(this.sortLayers(),u.save(),u.setTransform(1/l.pixelRatio,0,0,1/l.pixelRatio,0,0),p.forEach((function(t){var e=t.canvas,r=e.imageSource,n=e.enabled,o=t.getComputedOpacity,i=t.getVisibility;n&&i()&&(u.globalAlpha=o(),u.drawImage(r,0,0))})),u.restore()),null===(e=u.verifyDepthZero)||void 0===e||e.call(u),this._dirty=!1,this.debugStats(o,u,f.stats,a),this.debugSceneNodeHighlight(u,this.debug.sceneNodeHighlight,f.debugNodes),c&&this.debug.consoleLog&&ul.debug("Scene.render() - after",{redrawType:_s[c.dirty],canvasCleared:v,tree:this.buildTree(c)}),[2])}))}))},t.prototype.debugStats=function(t,e,r,n){var o,i;void 0===n&&(n={});var a=performance.now();if(this.debug.stats){var s=t[0];t.push(a);var l=function(t,e){var r=t+e;return t+" / "+r+" ("+Math.round(100*t/r)+"%)"},u=function(t,e){return Math.round(100*(e-t))/100+"ms"},c=null!==r&&void 0!==r?r:{},p=c.layersRendered,d=void 0===p?0:p,h=c.layersSkipped,f=void 0===h?0:h,v=c.nodesRendered,y=void 0===v?0:v,g=c.nodesSkipped,m=void 0===g?0:g,b=t.map((function(e,r){return r>0?u(t[r-1],e):null})).filter((function(t){return null!=t})).join(" + "),C=Object.entries(n).map((function(t){var e=wl(t,2),r=e[0],n=e[1];return r+": "+n})).join(" ; "),S=[u(s,a)+" ("+b+")",""+C,"detailed"===this.debug.stats?"Layers: "+l(d,f):null,"detailed"===this.debug.stats?"Nodes: "+l(y,m):null].filter((function(t){return null!=t})),w=S.map((function(t){return[t,ks.getTextSize(t,e.font)]})),x=Math.max.apply(Math,xl([],wl(w.map((function(t){var e=wl(t,2),r=e[1].width;return r}))))),O=w.reduce((function(t,e){var r=wl(e,2),n=r[1].height;return t+n}),0);e.save(),e.fillStyle="white",e.fillRect(0,0,x,O),e.fillStyle="black";var E=0;try{for(var T=Ol(w),P=T.next();!P.done;P=T.next()){var D=wl(P.value,2),A=D[0],M=D[1];E+=M.height,e.fillText(A,2,E)}}catch(R){o={error:R}}finally{try{P&&!P.done&&(i=T.return)&&i.call(T)}finally{if(o)throw o.error}}e.restore()}},t.prototype.debugSceneNodeHighlight=function(t,e,r){var n,o,i,a,s,l,u,c=function(t){return function(e){return!!t.test(e.id)||e instanceof yl&&null!=e.name&&t.test(e.name)}},p=function(t){return function(e){return t===e.id||e instanceof yl&&null!=e.name&&t===e.name}};try{for(var d=Ol(e),h=d.next();!h.done;h=d.next()){var f=h.value;if("string"!==typeof f||null==r[f]){var v="string"===typeof f?p(f):c(f),y=null===(u=this.root)||void 0===u?void 0:u.findNodes(v);if(y&&0!==y.length)try{for(var g=(i=void 0,Ol(y)),m=g.next();!m.done;m=g.next()){var b=m.value;b instanceof yl&&b.name?r[b.name]=b:r[b.id]=b}}catch(E){i={error:E}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}else ul.debug("Scene.render() - no debugging node with id ["+f+"] in scene graph.")}}}catch(T){n={error:T}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}t.save();try{for(var C=Ol(Object.entries(r)),S=C.next();!S.done;S=C.next()){var w=wl(S.value,2),x=w[0],O=(b=w[1],b.computeTransformedBBox());O?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(O.x,O.y,O.width,O.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(x,O.x,O.y,O.width),t.fillText(x,O.x,O.y,O.width)):ul.debug("Scene.render() - no bbox for debugged node ["+x+"].")}}catch(P){s={error:P}}finally{try{S&&!S.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}t.restore()},t.prototype.buildTree=function(t){var e,r,n=this,o=null!==(e=t instanceof yl?t.name:null)&&void 0!==e?e:t.id;return bl(bl({name:o,node:t,dirty:_s[t.dirty]},(null===(r=t.parent)||void 0===r?void 0:r.isVirtual)?{virtualParentDirty:_s[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map((function(t){return n.buildTree(t)})).reduce((function(t,e){var r=e.name,n=e.node,o=n.visible,i=n.opacity,a=n.zIndex,s=n.zIndexSubOrder,l=e.node,u=e.virtualParent;(!o||i<=0)&&(r="("+r+")"),l instanceof yl&&l.isLayer()&&(r="*"+r+"*");var c=[""+(null!==r&&void 0!==r?r:"<unknown>"),"z: "+a,s&&"zo: "+s.map((function(t){return"function"===typeof t?t()+" (fn)":t})).join(" / "),u&&"(virtual parent)"].filter((function(t){return!!t})).join(" "),p=c,d=1;while(null!=t[p]&&d<100)p=c+" ("+d+++")";return t[p]=e,t}),{}))},t.prototype.buildDirtyTree=function(t){var e,r=this;if(t.dirty===_s.NONE)return{dirtyTree:{},paths:[]};var n=t.children.map((function(t){return r.buildDirtyTree(t)})).filter((function(t){return t.paths.length>0})),o=null!==(e=t instanceof yl?t.name:null)&&void 0!==e?e:t.id,i=0===n.length?[o]:n.map((function(t){return t.paths})).reduce((function(t,e){return t.concat(e)}),[]).map((function(t){return o+"."+t}));return{dirtyTree:bl({name:o,node:t,dirty:_s[t.dirty]},n.map((function(t){return t.dirtyTree})).filter((function(t){return void 0!==t.dirty})).reduce((function(t,e){var r;return t[null!==(r=e.name)&&void 0!==r?r:"<unknown>"]=e,t}),{})),paths:i}},t.className="Scene",t}(),Pl=function(){function t(){this.stops=[]}return t}(),Dl=2*Math.PI;function Al(t){return t%=Dl,t+=Dl,t%=Dl,t}function Ml(t){return t%=Dl,t<-Math.PI?t+=Dl:t>=Math.PI&&(t-=Dl),t}function Rl(t){return t/180*Math.PI}var _l=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.angle=0,e}return _l(e,t),e.prototype.createGradient=function(t,e){var r=90,n=this,o=n.stops,i=n.angle,a=Al(Rl(i+r)),s=Math.cos(a),l=Math.sin(a),u=e.width,c=e.height,p=e.x+.5*u,d=e.y+.5*c;if(u>0&&c>0){var h=Math.sqrt(c*c+u*u)/2,f=Math.atan2(c,u),v=void 0;v=a<Math.PI/2?a:a<Math.PI?Math.PI-a:a<3*Math.PI/2?a-Math.PI:2*Math.PI-a;var y=h*Math.abs(Math.cos(v-f)),g=t.createLinearGradient(p+s*y,d+l*y,p-s*y,d-l*y);return o.forEach((function(t){g.addColorStop(t.offset,t.color)})),g}return"black"},e}(Pl),Fl=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Il=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ll=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,Nl=function(t){function e(){var r=null!==t&&t.apply(this,arguments)||this;return r.lastInstanceId=0,r.fillOpacity=1,r.strokeOpacity=1,r.fill=e.defaultStyles.fill,r.stroke=e.defaultStyles.stroke,r.strokeWidth=e.defaultStyles.strokeWidth,r.lineDash=e.defaultStyles.lineDash,r.lineDashOffset=e.defaultStyles.lineDashOffset,r.lineCap=e.defaultStyles.lineCap,r.lineJoin=e.defaultStyles.lineJoin,r.opacity=e.defaultStyles.opacity,r.fillShadow=e.defaultStyles.fillShadow,r}return Fl(e,t),e.createInstance=function(t){var e=Object.create(t);return e._setParent(void 0),e.id=t.id+"-Instance-"+String(++t.lastInstanceId),e},e.prototype.restoreOwnStyles=function(){for(var t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t),r=0,n=e.length;r<n;r++){var o=e[r];this[o]=t[o]}},e.prototype.restoreAllStyles=function(){var t=this.constructor.defaultStyles;for(var e in t)this[e]=t[e]},e.prototype.restoreOverriddenStyles=function(){var t=this.constructor.defaultStyles,e=Object.getPrototypeOf(t);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&Object.prototype.hasOwnProperty.call(e,r)&&(this[r]=t[r])},e.prototype.updateGradient=function(){var t,e=this.fill;if((null===e||void 0===e?void 0:e.startsWith("linear-gradient"))&&(t=Ll.exec(e))){var r=parseFloat(t[1]),n=[],o=t[2],i=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi,a=void 0;while(a=i.exec(o))n.push(a[0]);this.gradient=new kl,this.gradient.angle=r,this.gradient.stops=n.map((function(t,e){var r=e/(n.length-1);return{offset:r,color:t}}))}else this.gradient=void 0},e.prototype.align=function(t,e){var r,n,o,i=null!==(o=null===(n=null===(r=this.layerManager)||void 0===r?void 0:r.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==o?o:1,a=Math.round(t*i)/i;return void 0==e?a:0===e?0:e<1?Math.ceil(e*i)/i:Math.round((e+t)*i)/i-a},e.prototype.fillStroke=function(t){this.renderFill(t),this.renderStroke(t)},e.prototype.renderFill=function(t){if(this.fill){var e=t.globalAlpha;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"},e.prototype.applyFill=function(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill},e.prototype.applyFillAlpha=function(t){var e=t.globalAlpha;t.globalAlpha=e*this.opacity*this.fillOpacity},e.prototype.applyShadow=function(t){var e,r,n=null!==(r=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==r?r:1,o=this.fillShadow;(null===o||void 0===o?void 0:o.enabled)&&(t.shadowColor=o.color,t.shadowOffsetX=o.xOffset*n,t.shadowOffsetY=o.yOffset*n,t.shadowBlur=o.blur*n)},e.prototype.renderStroke=function(t){if(this.stroke&&this.strokeWidth){var e=t.globalAlpha;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}},e.prototype.containsPoint=function(t,e){return this.isPointInPath(t,e)},e.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),Il([Us({redraw:_s.MINOR})],e.prototype,"fillOpacity",void 0),Il([Us({redraw:_s.MINOR})],e.prototype,"strokeOpacity",void 0),Il([Us({redraw:_s.MINOR,changeCb:function(t){return t.updateGradient()}})],e.prototype,"fill",void 0),Il([Us({redraw:_s.MINOR})],e.prototype,"stroke",void 0),Il([Us({redraw:_s.MINOR})],e.prototype,"strokeWidth",void 0),Il([Us({redraw:_s.MINOR})],e.prototype,"lineDash",void 0),Il([Us({redraw:_s.MINOR})],e.prototype,"lineDashOffset",void 0),Il([Us({redraw:_s.MINOR})],e.prototype,"lineCap",void 0),Il([Us({redraw:_s.MINOR})],e.prototype,"lineJoin",void 0),Il([Us({redraw:_s.MINOR,convertor:function(t){return Math.min(1,Math.max(0,t))}})],e.prototype,"opacity",void 0),Il([Us({redraw:_s.MINOR,checkDirtyOnAssignment:!0})],e.prototype,"fillShadow",void 0),e}(el),Gl=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jl=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Bl=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vl="…";function Hl(t){var e=null!==t&&void 0!==t?t:{},r=e.redraw,n=void 0===r?_s.MAJOR:r,o=e.changeCb;return Us({redraw:n,type:"font",changeCb:o})}var zl=function(t){function e(){var r=null!==t&&t.apply(this,arguments)||this;return r.x=0,r.y=0,r.lines=[],r.text=void 0,r._dirtyFont=!0,r.fontSize=10,r.fontFamily="sans-serif",r.textAlign=e.defaultStyles.textAlign,r.textBaseline=e.defaultStyles.textBaseline,r.lineHeight=void 0,r}return Gl(e,t),e.prototype._setLines=function(){this.lines=Zl(this.text)},Object.defineProperty(e.prototype,"font",{get:function(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Wl(this)),this._font},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(){return ks.has.textMetrics?Xl(this.lines,this.x,this.y,this):Yl(this.lines,this.x,this.y,this)},e.prototype.getLineHeight=function(t){var e,r;if(this.lineHeight)return this.lineHeight;if(ks.has.textMetrics){var n=ks.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(r=n.fontBoundingBoxDescent)&&void 0!==r?r:n.emHeightDescent)}return ks.getTextSize(t,this.font).height},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(r.x,r.y)},e.prototype.render=function(e){var r=e.ctx,n=e.forceRender,o=e.stats;if(this.dirty!==_s.NONE||n)if(this.lines.length&&this.layerManager){this.computeTransformMatrix(),this.matrix.toContext(r);var i=this,a=i.fill,s=i.stroke,l=i.strokeWidth;r.font=this.font,r.textAlign=this.textAlign,r.textBaseline=this.textBaseline;var u=this.layerManager.canvas.pixelRatio||1,c=r.globalAlpha;if(a){r.fillStyle=a,r.globalAlpha=c*this.opacity*this.fillOpacity;var p=this.fillShadow;(null===p||void 0===p?void 0:p.enabled)&&(r.shadowColor=p.color,r.shadowOffsetX=p.xOffset*u,r.shadowOffsetY=p.yOffset*u,r.shadowBlur=p.blur*u),this.renderLines((function(t,e,n){return r.fillText(t,e,n)}))}if(s&&l){r.strokeStyle=s,r.lineWidth=l,r.globalAlpha=c*this.opacity*this.strokeOpacity;var d=this,h=d.lineDash,f=d.lineDashOffset,v=d.lineCap,y=d.lineJoin;h&&r.setLineDash(h),f&&(r.lineDashOffset=f),v&&(r.lineCap=v),y&&(r.lineJoin=y),this.renderLines((function(t,e,n){return r.strokeText(t,e,n)}))}t.prototype.render.call(this,e)}else o&&(o.nodesSkipped+=this.nodeCount.count);else o&&(o.nodesSkipped+=this.nodeCount.count)},e.prototype.renderLines=function(t){for(var e=this,r=this,n=r.lines,o=r.x,i=r.y,a=this.lines.map((function(t){return e.getLineHeight(t)})),s=a.reduce((function(t,e){return t+e}),0),l=-(s-a[0])*ql(this.textBaseline),u=0;u<n.length;u++)t(n[u],o,i+l),l+=a[u]},e.wrap=function(t,r,n,o,i){var a,s,l=Wl(o),u=Ul(l),c=t.split(/\r?\n/g);if(0===c.length)return"";if("never"===i)return e.truncateLine(c[0],r,u,!1);var p=[],d=0;try{for(var h=Bl(c),f=h.next();!f.done;f=h.next()){var v=f.value,y=e.wrapLine(v,r,n,u,o,i,d);if(p.push(y.result),d=y.cumulativeHeight,y.truncated)break}}catch(g){a={error:g}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return p.join("\n").trim()},e.wrapLine=function(t,r,n,o,i,a,s){if(t=t.trim(),!t)return{result:"",truncated:!1,cumulativeHeight:s};var l=o.size(t);if(l.width<=r)return{result:t,truncated:!1,cumulativeHeight:s+l.height};if(l.height>n||o.width("W")>r)return{result:"",truncated:!0,cumulativeHeight:s};var u=t.split(/\s+/g),c=e.wrapLineSequentially(u,r,n,o,i,a,s);s=c.cumulativeHeight;var p=c.lines;if(!c.wordsBrokenOrTruncated&&!c.linesTruncated){var d=c.lines.length,h=e.wrapLineBalanced(u,r,o,d);h.length===p.length&&(p=h)}var f=p.map((function(t){return t.join(" ")})).join("\n");return{result:f,truncated:c.linesTruncated,cumulativeHeight:s}},e.breakWord=function(t,r,n,o,i){for(var a,s,l=function(r){return e.punctuationMarks.includes(t[r])},u=o?i.width("-"):0,c=[],p=0,d=0,h=0;h<t.length;h++){var f=t[h],v=i.width(f),y=0===d?r:n;p+v+u>y&&(c.push(h),p=0,d++),p+=v}var g=[],m=0;try{for(var b=Bl(c),C=b.next();!C.done;C=b.next()){var S=C.value,w=t.substring(m,S);o&&w.length>0&&!l(S-1)&&!l(S)&&(w+="-"),g.push(w),m=S}}catch(x){a={error:x}}finally{try{C&&!C.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}return g.push(t.substring(m)),g},e.truncateLine=function(t,e,r,n){var o=r.width(t);if(o<e&&!n)return t;var i=r.width(Vl);if(o+i<=e)return""+t+Vl;var a,s,l=Math.floor(t.length*e/o)+1;do{a=t.substring(0,l),s=r.width(a)}while(--l>=0&&s+i>e);return""+a+Vl},e.wrapLineSequentially=function(t,r,n,o,i,a,s){var l=i.fontSize,u=i.lineHeight,c=void 0===u?l*e.defaultLineHeightRatio:u,p="always"===a||"hyphenate"===a,d="hyphenate"===a,h=o.width(" "),f=!1,v=!1,y=[],g=[],m=0,b=function(){var t=s+c;if(t>=n){var i=g.join(" "),a=e.truncateLine(i,r,o,!0);return g.splice(0,g.length,a),v=!0,!1}return g=[],m=0,s=t,y.push(g),!0};if(!b())return{lines:y,linesTruncated:!0,wordsBrokenOrTruncated:f,cumulativeHeight:s};for(var C=0;C<t.length;C++){var S=t[C],w=o.width(S),x=0===g.length?0:h,O=m+x+w;if(O<=r)g.push(S),m=O;else if(w<=r){if(!b())break;g.push(S),m=w}else{if(f=!0,!p){if(!b())break;var E=e.truncateLine(S,r,o,!0);g.push(E),C<t.length-1&&(v=!0);break}for(var T=r-m-x,P=e.breakWord(S,T,r,d,o),D=!1,A=0;A<P.length;A++){var M=P[A];if(M&&g.push(M),A===P.length-1)m=o.width(M);else if(!b()){D=!0;break}}if(D)break}}return{lines:y,linesTruncated:v,wordsBrokenOrTruncated:f,cumulativeHeight:s}},e.wrapLineBalanced=function(t,e,r,n){var o,i,a=t.reduce((function(t,e){return t+r.width(e)}),0),s=r.width(" "),l=s*(t.length-n-2),u=(a+l)/n,c=[],p=[],d=r.width(t[0]),h=!0;try{for(var f=Bl(t),v=f.next();!v.done;v=f.next()){var y=v.value,g=r.width(y);if(h)p=[],p.push(y),d=g,h=!1,c.push(p);else{var m=d+s+g;m<=u?(p.push(y),d=m):m<=e?(p.push(y),h=!0):(p=[y],d=g,c.push(p))}}}catch(b){o={error:b}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return c},e.prototype.setFont=function(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight},e.prototype.setAlign=function(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline},e.className="Text",e.defaultLineHeightRatio=1.15,e.defaultStyles=Object.assign({},Nl.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),e.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],jl([Us({redraw:_s.MAJOR})],e.prototype,"x",void 0),jl([Us({redraw:_s.MAJOR})],e.prototype,"y",void 0),jl([Us({redraw:_s.MAJOR,changeCb:function(t){return t._setLines()}})],e.prototype,"text",void 0),jl([Hl()],e.prototype,"fontStyle",void 0),jl([Hl()],e.prototype,"fontWeight",void 0),jl([Hl()],e.prototype,"fontSize",void 0),jl([Hl()],e.prototype,"fontFamily",void 0),jl([Us({redraw:_s.MAJOR})],e.prototype,"textAlign",void 0),jl([Us({redraw:_s.MAJOR})],e.prototype,"textBaseline",void 0),jl([Us({redraw:_s.MAJOR})],e.prototype,"lineHeight",void 0),e}(Nl);function Ul(t){var e=new Map,r=function(e){return ks.getTextSize(e,t)},n=function(t){if(e.has(t))return e.get(t);var n=r(t).width;return e.set(t,n),n};return{size:r,width:n}}function Wl(t){var e=t.fontFamily,r=t.fontSize,n=t.fontStyle,o=t.fontWeight;return[null!==n&&void 0!==n?n:"",null!==o&&void 0!==o?o:"",r+"px",e].join(" ").trim()}function Kl(t,e,r,n){return ks.has.textMetrics?Xl(t,e,r,n):Yl(t,e,r,n)}function Xl(t,e,r,n){for(var o,i,a=0,s=0,l=0,u=0,c=0,p=Wl(n),d=n.lineHeight,h=n.textBaseline,f=void 0===h?zl.defaultStyles.textBaseline:h,v=n.textAlign,y=void 0===v?zl.defaultStyles.textAlign:v,g=0;g<t.length;g++){var m=ks.measureText(t[g],p,f,y);a=Math.max(a,m.actualBoundingBoxLeft),l=Math.max(l,m.width),0==g?(s+=m.actualBoundingBoxAscent,u+=m.actualBoundingBoxAscent):c+=null!==(o=m.fontBoundingBoxAscent)&&void 0!==o?o:m.emHeightAscent,g==t.length-1?u+=m.actualBoundingBoxDescent:c+=null!==(i=m.fontBoundingBoxDescent)&&void 0!==i?i:m.emHeightDescent}return void 0!==d&&(c=(t.length-1)*d),u+=c,s+=c*ql(f),new Ls(e-a,r-s,l,u)}function Yl(t,e,r,n){var o=0,i=0,a=0,s=Wl(n),l=n.lineHeight,u=n.textBaseline,c=void 0===u?zl.defaultStyles.textBaseline:u,p=n.textAlign,d=void 0===p?zl.defaultStyles.textAlign:p;if(t.length>0){var h=ks.getTextSize(t[0],s);o=h.width,i=h.height}for(var f=1;f<t.length;f++){h=ks.getTextSize(t[f],s);o=Math.max(o,h.width),a+=null!==l&&void 0!==l?l:h.height}switch(d){case"end":case"right":e-=o;break;case"center":e-=o/2}switch(c){case"alphabetic":r-=.7*i+.5*a;break;case"middle":r-=.45*i+.5*a;break;case"ideographic":r-=i+a;break;case"hanging":r-=.2*i+.5*a;break;case"bottom":r-=i+a;break}return new Ls(e,r,o,i+a)}function ql(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function Zl(t){return"string"===typeof t?t.split(/\r?\n/g):[]}var Jl=function(){function t(){this.allEventListeners=new Map}return t.prototype.addEventListener=function(t,e){if("function"!==typeof e)throw new Error("AG Charts - listener must be a Function");var r=this.allEventListeners,n=r.get(t);n||(n=new Set,r.set(t,n)),n.has(e)||n.add(e)},t.prototype.removeEventListener=function(t,e){var r=this.allEventListeners,n=r.get(t);n&&(n.delete(e),0===n.size&&r.delete(t))},t.prototype.hasEventListener=function(t){return this.allEventListeners.has(t)},t.prototype.clearEventListeners=function(){this.allEventListeners.clear()},t.prototype.fireEvent=function(t){var e=this.allEventListeners.get(t.type);null===e||void 0===e||e.forEach((function(e){return e(t)}))},t}(),Ql=function(t){return"string"===typeof t},$l=function(t){return!!t&&Object.prototype.hasOwnProperty.call(t,"toString")&&Ql(t.toString())},tu=function(t){return t instanceof Date&&!isNaN(+t)};function eu(t){return Ql(t)||$l(t)}function ru(t){var e=function(t){return!!t&&Object.prototype.hasOwnProperty.call(t,"valueOf")&&ou(t.valueOf())},r=function(t){return t instanceof Date&&!isNaN(+t)};return ou(t)||e(t)||r(t)}function nu(t,e){return e&&ru(t)?t:e?void 0:eu(t)?t:String(t)}var ou=function(t){return"number"===typeof t&&Number.isFinite(t)},iu=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},au=function(){function t(t,e,r,n){void 0===n&&(n=1),this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,r||0)),this.a=Math.min(1,Math.max(0,n||0))}return t.validColorString=function(e){return e.indexOf("#")>=0?!!t.parseHex(e):e.indexOf("rgb")>=0?!!t.stringToRgba(e):!!t.nameToHex[e.toLowerCase()]},t.fromString=function(e){if(e.indexOf("#")>=0)return t.fromHexString(e);var r=t.nameToHex[e.toLowerCase()];if(r)return t.fromHexString(r);if(e.indexOf("rgb")>=0)return t.fromRgbaString(e);throw new Error("Invalid color string: '"+e+"'")},t.tryParseFromString=function(e){try{return t.fromString(e)}catch(r){return ul.warnOnce("invalid color string: '"+e+"'."),t.fromArray([0,0,0])}},t.parseHex=function(t){var e;switch(t=t.replace(/ /g,"").slice(1),t.length){case 6:case 8:e=[];for(var r=0;r<t.length;r+=2)e.push(parseInt(""+t[r]+t[r+1],16));break;case 3:case 4:e=t.split("").map((function(t){return parseInt(t,16)})).map((function(t){return t+16*t}));break}if((null===e||void 0===e?void 0:e.length)>=3&&e.every((function(t){return t>=0})))return 3===e.length&&e.push(255),e},t.fromHexString=function(e){var r=t.parseHex(e);if(r){var n=iu(r,4),o=n[0],i=n[1],a=n[2],s=n[3];return new t(o/255,i/255,a/255,s/255)}throw new Error("Malformed hexadecimal color string: '"+e+"'")},t.stringToRgba=function(t){for(var e=iu([NaN,NaN],2),r=e[0],n=e[1],o=0;o<t.length;o++){var i=t[o];if(r||"("!==i){if(")"===i){n=o;break}}else r=o}var a=r&&n&&t.substring(r+1,n);if(a){var s=a.split(","),l=[];for(o=0;o<s.length;o++){var u=s[o],c=parseFloat(u);if(isNaN(c))return;u.indexOf("%")>=0?(c=Math.max(0,Math.min(100,c)),c/=100):3===o?c=Math.max(0,Math.min(1,c)):(c=Math.max(0,Math.min(255,c)),c/=255),l.push(c)}return l}},t.fromRgbaString=function(e){var r=t.stringToRgba(e);if(r){if(3===r.length)return new t(r[0],r[1],r[2]);if(4===r.length)return new t(r[0],r[1],r[2],r[3])}throw new Error("Malformed rgb/rgba color string: '"+e+"'")},t.fromArray=function(e){if(4===e.length)return new t(e[0],e[1],e[2],e[3]);if(3===e.length)return new t(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")},t.fromHSB=function(e,r,n,o){void 0===o&&(o=1);var i=t.HSBtoRGB(e,r,n);return new t(i[0],i[1],i[2],o)},t.padHex=function(t){return 1===t.length?"0"+t:t},t.prototype.toHexString=function(){var e="#"+t.padHex(Math.round(255*this.r).toString(16))+t.padHex(Math.round(255*this.g).toString(16))+t.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(e+=t.padHex(Math.round(255*this.a).toString(16))),e},t.prototype.toRgbaString=function(t){void 0===t&&(t=3);var e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],r=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*r)/r),"rgba("+e.join(", ")+")"):"rgb("+e.join(", ")+")"},t.prototype.toString=function(){return 1===this.a?this.toHexString():this.toRgbaString()},t.prototype.toHSB=function(){return t.RGBtoHSB(this.r,this.g,this.b)},t.RGBtoHSB=function(t,e,r){var n=Math.min(t,e,r),o=Math.max(t,e,r),i=0!==o?(o-n)/o:0,a=NaN;if(n!==o){var s=o-n,l=(o-t)/s,u=(o-e)/s,c=(o-r)/s;a=t===o?c-u:e===o?2+l-c:4+u-l,a/=6,a<0&&(a+=1)}return[360*a,i,o]},t.HSBtoRGB=function(t,e,r){isNaN(t)&&(t=0),t=(t%360+360)%360/360;var n=0,o=0,i=0;if(0===e)n=o=i=r;else{var a=6*(t-Math.floor(t)),s=a-Math.floor(a),l=r*(1-e),u=r*(1-e*s),c=r*(1-e*(1-s));switch(a>>0){case 0:n=r,o=c,i=l;break;case 1:n=u,o=r,i=l;break;case 2:n=l,o=r,i=c;break;case 3:n=l,o=u,i=r;break;case 4:n=c,o=l,i=r;break;case 5:n=r,o=l,i=u;break}}return[n,o,i]},t.prototype.derive=function(e,r,n,o){var i=t.RGBtoHSB(this.r,this.g,this.b),a=i[2];0==a&&n>1&&(a=.05);var s=((i[0]+e)%360+360)%360,l=Math.max(Math.min(i[1]*r,1),0);a=Math.max(Math.min(a*n,1),0);var u=Math.max(Math.min(this.a*o,1),0),c=t.HSBtoRGB(s,l,a);return c.push(u),t.fromArray(c)},t.prototype.brighter=function(){return this.derive(0,1,1/.7,1)},t.prototype.darker=function(){return this.derive(0,1,.7,1)},t.interpolate=function(e,r){var n=t.tryParseFromString(e),o=t.tryParseFromString(r);return function(e){var r=function(t,r){return t*(1-e)+r*e},i=new t(r(n.r,o.r),r(n.g,o.g),r(n.b,o.b),r(n.a,o.a));return i.toString()}},t.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}),t}(),su=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lu=Symbol("BREAK"),uu="__decorator_config";function cu(t,e,r,n){null==Object.getOwnPropertyDescriptor(t,uu)&&Object.defineProperty(t,uu,{value:{}});var o=t[uu];if(null!=o[r])return o[r];o[r]={setters:[],getters:[]};var i=Object.getOwnPropertyDescriptor(t,e),a=null===i||void 0===i?void 0:i.set,s=null===i||void 0===i?void 0:i.get,l=function(){var t,i,a,l,u=s?s.call(this):this[n];try{for(var c=su(null!==(l=null===(a=o[r])||void 0===a?void 0:a.getters)&&void 0!==l?l:[]),p=c.next();!p.done;p=c.next()){var d=p.value;if(u=d(this,e,u),u===lu)return}}catch(h){t={error:h}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}return u},u=function(t){var i,l,u,c,p,d=null!==(c=null===(u=o[r])||void 0===u?void 0:u.setters)&&void 0!==c?c:[];d.some((function(t){return t.length>2}))&&(p=s?s.call(this):this[n]);try{for(var h=su(d),f=h.next();!f.done;f=h.next()){var v=f.value;if(t=v(this,e,t,p),t===lu)return}}catch(y){i={error:y}}finally{try{f&&!f.done&&(l=h.return)&&l.call(h)}finally{if(i)throw i.error}}a?a.call(this,t):this[n]=t};return Object.defineProperty(t,e,{set:u,get:l,enumerable:!0,configurable:!1}),o[r]}function pu(t,e){return function(r,n){var o=n.toString(),i="__"+o,a=cu(r,n,o,i),s=a.getters,l=a.setters;l.push(t),e&&s.splice(0,0,e)}}function du(t){return pu((function(e,r,n){var o,i,a;if(t(n,{target:e}))return n;var s=r.toString().replace(/^_*/,""),l=null!==(i=null===(o=e.constructor)||void 0===o?void 0:o.className)&&void 0!==i?i:null===(a=e.constructor)||void 0===a?void 0:a.name;(null===l||void 0===l?void 0:l.length)<3&&(l=null);var u=l?"of ["+l+"] ":"";return t.message?ul.warn("Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(n)+"]; "+t.message+", ignoring."):ul.warn("Property ["+s+"] "+u+"cannot be set to ["+JSON.stringify(n)+"], ignoring."),lu}))}function hu(t,e){return t.message=e,t}var fu=function(t,e,r){return void 0===t||r(t,e)},vu=function(t,e){return hu((function(r,n){return Array.isArray(r)&&(!t||r.length===t)&&(!e||r.every((function(t){return e(t,n)})))}),"expecting an Array")},yu=function(t){return hu((function(e,r){return fu(e,r,vu(t))}),"expecting an optional Array")},gu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return hu((function(e,r){return t.every((function(t){return t(e,r)}))}),t.map((function(t){return t.message})).filter((function(t){return null!=t})).join(" AND "))},mu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return hu((function(e,r){return t.some((function(t){return t(e,r)}))}),t.map((function(t){return t.message})).filter((function(t){return null!=t})).join(" OR "))},bu=function(t){return null!=t&&!isNaN(t)},Cu=function(t){return hu((function(e,r){return!bu(e)||!bu(r.target[t])||e<r.target[t]}),"expected to be less than "+t)},Su=function(t){return hu((function(e,r){return!bu(e)||!bu(r.target[t])||e>r.target[t]}),"expected to be greater than "+t)},wu=hu((function(t){return"function"===typeof t}),"expecting a Function"),xu=hu((function(t,e){return fu(t,e,wu)}),"expecting an optional Function"),Ou=hu((function(t){return!0===t||!1===t}),"expecting a Boolean"),Eu=hu((function(t,e){return fu(t,e,Ou)}),"expecting an optional Boolean"),Tu=hu((function(t){return"string"===typeof t}),"expecting a String"),Pu=hu((function(t,e){return fu(t,e,Tu)}),"expecting an optional String"),Du=hu((function(t){return t instanceof Date&&!isNaN(+t)}),"expecting a Date object"),Au=hu((function(t,e){return fu(t,e,Du)}),"expecting an optional Date");hu(vu(void 0,Du),"expecting an Array of Date objects");var Mu=Gu(0),Ru=hu((function(t,e){return fu(t,e,Mu)}),"expecting an optional number"),_u=mu(Au,Ru),ku="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Fu=hu((function(t){return"string"===typeof t&&au.validColorString(t)}),"expecting a color String. "+ku),Iu=hu((function(t,e){return fu(t,e,Fu)}),"expecting an optional color String. "+ku),Lu=hu(vu(void 0,Fu),"expecting an Array of color strings. "+ku),Nu=hu((function(t,e){return fu(t,e,Lu)}),"expecting an optional Array of color strings. "+ku);function Gu(t,e){var r="expecting a finite Number"+(void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"");return hu((function(r){return"number"===typeof r&&Number.isFinite(r)&&(void 0===t||r>=t)&&(void 0===e||r<=e)}),r)}function ju(t,e){var r="expecting an optional finite Number"+(void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"");return hu((function(r,n){return fu(r,n,Gu(t,e))}),r)}function Bu(t,e){var r="expecting a finite Number"+(void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"");return hu((function(r){return"number"===typeof r&&(isNaN(r)||Number.isFinite(r)&&(void 0===t||r>=t)&&(void 0===e||r<=e))}),r)}var Vu=hu(vu(void 0,Gu()),"expecting an Array of numbers"),Hu=hu((function(t,e){return fu(t,e,Vu)}),"expecting an optional Array of numbers"),zu=hu(vu(void 0,Tu),"expecting an Array of strings");function Uu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r="expecting one of: "+t.join(", ");return hu((function(e){return"string"===typeof e&&t.indexOf(e)>=0}),r)}hu((function(t,e){return fu(t,e,zu)}),"expecting an optional Array of strings");var Wu=hu(vu(void 0,Ou),"expecting an Array of boolean values");hu((function(t,e){return fu(t,e,Wu)}),"expecting an optional Array of boolean values");var Ku=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],Xu=hu((function(t){return"normal"===t||"italic"===t||"oblique"===t}),"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),Yu=hu((function(t,e){return fu(t,e,Xu)}),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),qu=hu((function(t){return Ku.includes(t)}),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Zu=hu((function(t,e){return fu(t,e,qu)}),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Ju=hu(vu(void 0,Gu(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Qu=hu((function(t,e){return fu(t,e,Ju)}),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),$u=["butt","round","square"],tc=hu((function(t){return $u.includes(t)}),"expecting a line cap keyword such as 'butt', 'round' or 'square'");hu((function(t,e){return fu(t,e,tc)}),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");var ec=["round","bevel","miter"],rc=hu((function(t){return ec.includes(t)}),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");hu((function(t,e){return fu(t,e,rc)}),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");var nc,oc,ic=["top","right","bottom","left"],ac=hu((function(t){return ic.includes(t)}),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),sc=["exact","nearest"],lc=hu((function(t){return"number"===typeof t&&Number.isFinite(t)||sc.includes(t)}),"expecting an interaction range of 'exact', 'nearest' or a number"),uc=["never","always","hyphenate","on-space"],cc=hu((function(t){return uc.includes(t)}),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'");(function(t){t[t["SERIES_BACKGROUND_ZINDEX"]=-10]="SERIES_BACKGROUND_ZINDEX",t[t["AXIS_GRID_ZINDEX"]=0]="AXIS_GRID_ZINDEX",t[t["AXIS_ZINDEX"]=20]="AXIS_ZINDEX",t[t["SERIES_CROSSLINE_RANGE_ZINDEX"]=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t["SERIES_LAYER_ZINDEX"]=500]="SERIES_LAYER_ZINDEX",t[t["SERIES_CROSSHAIR_ZINDEX"]=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t["SERIES_LABEL_ZINDEX"]=1500]="SERIES_LABEL_ZINDEX",t[t["SERIES_CROSSLINE_LINE_ZINDEX"]=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t["LEGEND_ZINDEX"]=3e3]="LEGEND_ZINDEX"})(nc||(nc={})),function(t){t["X"]="x",t["Y"]="y"}(oc||(oc={}));var pc=function(){function t(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}return t.prototype.extend=function(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))},t.prototype.getDomain=function(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)},t}(),dc=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function hc(t,e){var r,n;void 0===e&&(e=[1/0,-1/0]);try{for(var o=dc(t),i=o.next();!i.done;i=o.next()){var a=i.value;"number"===typeof a&&(a<e[0]&&(e[0]=a),a>e[1]&&(e[1]=a))}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e}var fc=function(){return fc=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},fc.apply(this,arguments)},vc=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},yc=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gc=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};function mc(t){return t.map((function(t){return null==t||"number"===typeof t||"string"===typeof t||"boolean"===typeof t?t:"object"===typeof t?JSON.stringify(t):t})).join("-")}function bc(t){var e=1e4;return Number.isInteger(t)?t:Math.abs(t)>e?Math.trunc(t):Math.round(t*e)/e}function Cc(t){if(void 0===t)return[];var e=vc(t,2),r=e[0],n=e[1];return r=+r,n=+n,0===r&&0===n?[0,1]:r===1/0&&n===-1/0?[]:(r===1/0&&(r=0),n===-1/0&&(n=0),ou(r)&&ou(n)?[r,n]:[])}var Sc=Symbol("invalid"),wc=function(){function t(t){var e,r,n,o,i,a,s=this,l=t.props,u=!0;try{for(var c=yc(l),p=c.next();!p.done;p=c.next()){var d=p.value;if("key"===d.type&&!u)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===d.type&&u&&(u=!1)}}catch(S){e={error:S}}finally{try{p&&!p.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}this.opts=fc({dataVisible:!0},t),this.keys=l.filter((function(t){return"key"===t.type})).map((function(t,e){return fc(fc({},t),{index:e,missing:0})})),this.values=l.filter((function(t){return"value"===t.type})).map((function(t,e){return fc(fc({},t),{index:e,missing:0})})),this.aggregates=l.filter((function(t){return"aggregate"===t.type})).map((function(t,e){return fc(fc({},t),{index:e})})),this.groupProcessors=l.filter((function(t){return"group-value-processor"===t.type})).map((function(t,e){return fc(fc({},t),{index:e})})),this.propertyProcessors=l.filter((function(t){return"property-value-processor"===t.type})).map((function(t,e){return fc(fc({},t),{index:e})})),this.reducers=l.filter((function(t){return"reducer"===t.type})).map((function(t,e){return fc(fc({},t),{index:e})})),this.processors=l.filter((function(t){return"processor"===t.type})).map((function(t,e){return fc(fc({},t),{index:e})}));try{for(var h=yc(this.values),f=h.next();!f.done;f=h.next()){var v=f.value;if(null==v.property)throw new Error("AG Charts - internal config error: no properties specified for value definitions: "+JSON.stringify(v))}}catch(w){n={error:w}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}var y=function(t){var e,r,n=t.matchGroupIds,o=function(t){if(!s.values.some((function(e){return e.groupId===t})))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+t+").")};try{for(var i=yc(null!==n&&void 0!==n?n:[]),a=i.next();!a.done;a=i.next()){var l=a.value;o(l)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},g=function(t){var e,r,n=t.matchScopes,o=function(t){if(!s.values.some((function(e){var r;return null===(r=e.scopes)||void 0===r?void 0:r.includes(t)})))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+t+").")};try{for(var i=yc(null!==n&&void 0!==n?n:[]),a=i.next();!a.done;a=i.next()){var l=a.value;o(l)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},m=function(t){var e,r,n=t.matchIds,o=function(t){if(!s.values.some((function(e){return e.id===t})))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups ("+t+").")};try{for(var i=yc(null!==n&&void 0!==n?n:[]),a=i.next();!a.done;a=i.next()){var l=a.value;o(l)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}};try{for(var b=yc(gc(gc([],vc(this.groupProcessors)),vc(this.aggregates))),C=b.next();!C.done;C=b.next()){v=C.value;m(v),y(v),g(v)}}catch(x){i={error:x}}finally{try{C&&!C.done&&(a=b.return)&&a.call(b)}finally{if(i)throw i.error}}}return t.prototype.resolveProcessedDataIndexById=function(t,e,r){var n;void 0===r&&(r="value");var o=null!==(n=this.resolveProcessedDataDefById(t,e,r))&&void 0!==n?n:{},i=o.index,a=o.def;return{type:r,index:i,def:a}},t.prototype.resolveProcessedDataIndicesById=function(t,e,r){return void 0===r&&(r="value"),this.resolveProcessedDataDefsById(t,e,r).map((function(t){var e=t.index,n=t.def;return{type:r,index:e,def:n}}))},t.prototype.resolveProcessedDataDefById=function(t,e,r){return void 0===r&&(r="value"),this.resolveProcessedDataDefsById(t,e,r)[0]},t.prototype.resolveProcessedDataDefsById=function(t,e,r){var n,o;void 0===r&&(r="value");var i=this,a=i.keys,s=i.values,l=i.aggregates,u=i.groupProcessors,c=i.reducers,p=function(r){var n=r.id,o=r.scopes;return null!=n&&(!(null!=t&&!(null===o||void 0===o?void 0:o.includes(t.id)))&&("string"===typeof e?n===e:e.test(n)))},d=[a,s,l,u,c],h=[];try{for(var f=yc(d),v=f.next();!v.done;v=f.next()){var y=v.value;h.push.apply(h,gc([],vc(y.filter(p).map((function(t){return{index:t.index,def:t}})))))}}catch(g){n={error:g}}finally{try{v&&!v.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}if(h.length>0)return h;throw new Error("AG Charts - didn't find property definition for ["+e+", "+t.id+", "+r+"]")},t.prototype.getDomain=function(t,e,r,n){var o,i,a,s,l,u,c,p;void 0===r&&(r="value");try{c=this.resolveProcessedDataIndicesById(t,e,r)}catch(g){if("string"!==typeof e&&/didn't find property definition/.test(g.message))return[];throw g}switch(r){case"key":p="keys";break;case"value":p="values";break;case"aggregate":p="aggValues";break;case"group-value-processor":p="groups";break;default:return[]}var d=null!==(s=null===(a=n.domain[p])||void 0===a?void 0:a[c[0].index])&&void 0!==s?s:[];if(1===c.length)return d;var h=gc([],vc(d));try{for(var f=yc(c.slice(1)),v=f.next();!v.done;v=f.next()){var y=v.value;hc(null!==(u=null===(l=n.domain[p])||void 0===l?void 0:l[y.index])&&void 0!==u?u:[],h)}}catch(m){o={error:m}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return h},t.prototype.processData=function(e){var r,n,o,i,a=this,s=a.opts,l=s.groupByKeys,u=s.groupByFn,c=a.aggregates,p=a.groupProcessors,d=a.reducers,h=a.processors,f=a.propertyProcessors,v=performance.now();try{for(var y=yc(gc(gc([],vc(this.keys)),vc(this.values))),g=y.next();!g.done;g=y.next()){var m=g.value;m.missing=0}}catch(x){r={error:x}}finally{try{g&&!g.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}if(!l||0!==this.keys.length){var b=this.extractData(e);l?b=this.groupData(b):u&&(b=this.groupData(b,u(b))),p.length>0&&this.postProcessGroups(b),c.length>0&&this.aggregateData(b),f.length>0&&this.postProcessProperties(b),d.length>0&&this.reduceData(b),h.length>0&&this.postProcessData(b);try{for(var C=yc(gc(gc([],vc(this.keys)),vc(this.values))),S=C.next();!S.done;S=C.next()){m=S.value;e.length>0&&m.missing>=e.length&&ul.warnOnce("the key '"+m.property+"' was not found in any data element.")}}catch(O){o={error:O}}finally{try{S&&!S.done&&(i=C.return)&&i.call(C)}finally{if(o)throw o.error}}var w=performance.now();return b.time=w-v,t.DEBUG()&&xc(b),b}},t.prototype.valueGroupIdxLookup=function(t){var e=t.matchGroupIds,r=t.matchIds,n=t.matchScopes;return this.values.map((function(t,e){return{def:t,index:e}})).filter((function(t){var o=t.def;return!(e&&(null==o.groupId||!e.includes(o.groupId)))&&(!(r&&(null==o.id||!r.includes(o.id)))&&!(n&&(null==o.scopes||!n.some((function(t){var e;return null===(e=o.scopes)||void 0===e?void 0:e.includes(t)})))))})).map((function(t){var e=t.index;return e}))},t.prototype.valueIdxLookup=function(t,e){var r,n=null==t||0===t.length,o=function(e){var r=null==e;if(r)return!0;var o=null==e||0===e.length;return n===o||(null===e||void 0===e?void 0:e.some((function(e){return t.includes(e)})))};if(r="string"===typeof e?this.values.findIndex((function(t){return o(t.scopes)&&t.property===e})):this.values.findIndex((function(t){return o(t.scopes)&&t.id===e.id})),r>=0)return r;throw new Error("AG Charts - configuration error, unknown property "+JSON.stringify(e)+" in scope(s) "+JSON.stringify(t))},t.prototype.extractData=function(t){var e,r,n,o,i,a,s,l,u,c=this,p=c.keys,d=c.values,h=c.opts.dataVisible,f=this.initDataDomainProcessor(),v=f.dataDomain,y=f.processValue,g=f.scopes,m=f.allScopesHaveSameDefs,b=new Array(h?t.length:0),C=0,S=0;try{for(var w=yc(t),x=w.next();!x.done;x=w.next()){var O=x.value,E=g.size>0?new Set(g):void 0,T=h?new Array(p.length):void 0,P=0,D=void 0;try{for(var A=(n=void 0,yc(p)),M=A.next();!M.done;M=A.next()){var R=M.value;if(D=y(R,O,D),D===Sc)break;T&&(T[P++]=D)}}catch(H){n={error:H}}finally{try{M&&!M.done&&(o=A.return)&&o.call(A)}finally{if(n)throw n.error}}if(D!==Sc){var _=h&&d.length>0?new Array(d.length):void 0,k=0,F=void 0;try{for(var I=(i=void 0,yc(d)),L=I.next();!L.done;L=I.next()){R=L.value;if(F=y(R,O,F),F===Sc){if(m)break;try{for(var N=(s=void 0,yc(null!==(u=R.scopes)&&void 0!==u?u:g)),G=N.next();!G.done;G=N.next()){var j=G.value;null===E||void 0===E||E.delete(j)}}catch(z){s={error:z}}finally{try{G&&!G.done&&(l=N.return)&&l.call(N)}finally{if(s)throw s.error}}if(k++,0===(null===E||void 0===E?void 0:E.size))break}else _&&(_[k++]=F)}}catch(U){i={error:U}}finally{try{L&&!L.done&&(a=I.return)&&a.call(I)}finally{if(i)throw i.error}}if((F!==Sc||!m)&&0!==(null===E||void 0===E?void 0:E.size)&&h){var B={datum:O,keys:T,values:_};!m&&E&&E.size<g.size&&(S++,B.validScopes=gc([],vc(E))),b[C++]=B}}}}catch(W){e={error:W}}finally{try{x&&!x.done&&(r=w.return)&&r.call(w)}finally{if(e)throw e.error}}b.length=C;var V=function(t){var e=v.get(t).getDomain();return Array.isArray(e)&&e[0]>e[1]?[]:gc([],vc(e))};return{type:"ungrouped",data:b,domain:{keys:p.map((function(t){return V(t)})),values:d.map((function(t){return V(t)}))},defs:{allScopesHaveSameDefs:m,keys:p,values:d},partialValidDataCount:S,time:0}},t.prototype.groupData=function(t,e){var r,n,o,i,a,s,l,u,c=new Map;try{for(var p=yc(t.data),d=p.next();!d.done;d=p.next()){var h=d.value,f=h.keys,v=h.values,y=h.datum,g=h.validScopes,m=e?e(h):f,b=mc(m);if(c.has(b)){var C=c.get(b);if(C.values.push(v),C.datum.push(y),null!=g)for(var S=function(t){var e=null===(l=C.validScopes)||void 0===l?void 0:l[t];if(g.some((function(t){return t===e})))return"continue";null===(u=C.validScopes)||void 0===u||u.splice(t,1)},w=0;w<(null!==(s=null===(a=C.validScopes)||void 0===a?void 0:a.length)&&void 0!==s?s:0);w++)S(w)}else c.set(b,{keys:m,values:[v],datum:[y],validScopes:g})}}catch(M){r={error:M}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}var x=new Array(c.size),O=new Array(c.size),E=0;try{for(var T=yc(c.entries()),P=T.next();!P.done;P=T.next()){var D=vc(P.value,2),A=D[1];f=A.keys,v=A.values,y=A.datum,g=A.validScopes;0!==(null===g||void 0===g?void 0:g.length)&&(O[E]=f,x[E++]={keys:f,values:v,datum:y,validScopes:g})}}catch(R){o={error:R}}finally{try{P&&!P.done&&(i=T.return)&&i.call(T)}finally{if(o)throw o.error}}return fc(fc({},t),{type:"grouped",data:x,domain:fc(fc({},t.domain),{groups:O})})},t.prototype.aggregateData=function(t){var e,r,n,o,i,a,s,l,u,c,p=this,d=this.aggregates;if(d){var h=d.map((function(){return[1/0,-1/0]})),f=d.map((function(t){return p.valueGroupIdxLookup(t)})),v=d.map((function(t){return t.aggregateFunction})),y=d.map((function(t){return t.groupAggregateFunction})),g=d.map((function(t){return t.finalFunction})),m=function(e){var r,p,m,b,C=e.values,S=e.validScopes;null!==(n=e.aggValues)&&void 0!==n||(e.aggValues=new Array(f.length)),"ungrouped"===t.type&&(C=[C]);var w=0;try{for(var x=(r=void 0,yc(f)),O=x.next();!O.done;O=x.next()){var E=O.value,T=null===(o=null===S||void 0===S?void 0:S.some((function(t){var e;return null===(e=d[w].matchScopes)||void 0===e?void 0:e.some((function(e){return t===e}))})))||void 0===o||o;if(T){var P=null!==(a=null===(i=y[w])||void 0===i?void 0:i.call(y))&&void 0!==a?a:hc([]),D=function(t){var r=E.map((function(e){return t[e]})),n=v[w](r,e.keys);n&&(P=null!==(l=null===(s=y[w])||void 0===s?void 0:s.call(y,n,P))&&void 0!==l?l:hc(n,P))};try{for(var A=(m=void 0,yc(C)),M=A.next();!M.done;M=A.next()){var R=M.value;D(R)}}catch(k){m={error:k}}finally{try{M&&!M.done&&(b=A.return)&&b.call(A)}finally{if(m)throw m.error}}var _=(null!==(c=null===(u=g[w])||void 0===u?void 0:u.call(g,P))&&void 0!==c?c:P).map((function(t){return bc(t)}));hc(_,h[w]),e.aggValues[w++]=_}else w++}}catch(F){r={error:F}}finally{try{O&&!O.done&&(p=x.return)&&p.call(x)}finally{if(r)throw r.error}}};try{for(var b=yc(t.data),C=b.next();!C.done;C=b.next()){var S=C.value;m(S)}}catch(w){e={error:w}}finally{try{C&&!C.done&&(r=b.return)&&r.call(b)}finally{if(e)throw e.error}}t.domain.aggValues=h}},t.prototype.postProcessGroups=function(t){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m=this.groupProcessors;if(m){var b=new Set,C=new Map,S=new Map,w=new Map;try{for(var x=yc(m),O=x.next();!O.done;O=x.next()){var E=O.value,T=this.valueGroupIdxLookup(E);S.set(E,T),w.set(E,E.adjust());try{for(var P=(n=void 0,yc(T)),D=P.next();!D.done;D=P.next()){var A=D.value,M=this.values[A];b.add(A),C.set(A,new pc("category"===M.valueType?"discrete":"continuous"))}}catch(W){n={error:W}}finally{try{D&&!D.done&&(o=P.return)&&o.call(P)}finally{if(n)throw n.error}}}}catch(K){e={error:K}}finally{try{O&&!O.done&&(r=x.return)&&r.call(x)}finally{if(e)throw e.error}}var R=function(t){var e,r,n;try{for(var o=yc(b),i=o.next();!i.done;i=o.next()){var a=i.value;null===(n=C.get(a))||void 0===n||n.extend(t[a])}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}};try{for(var _=yc(t.data),k=_.next();!k.done;k=_.next()){var F=k.value,I=function(e){var r,n,o=null===(f=null===(h=F.validScopes)||void 0===h?void 0:h.some((function(t){var r;return null===(r=e.matchScopes)||void 0===r?void 0:r.some((function(e){return t===e}))})))||void 0===f||f;if(!o)return"continue";var i=null!==(v=S.get(e))&&void 0!==v?v:[],a=null!==(g=null===(y=w.get(e))||void 0===y?void 0:y())&&void 0!==g?g:function(){};if("grouped"===t.type){try{for(var s=(r=void 0,yc(F.values)),l=s.next();!l.done;l=s.next()){var u=l.value;u&&a(u,i)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return"continue"}F.values&&a(F.values,i)};try{for(var L=(s=void 0,yc(m)),N=L.next();!N.done;N=L.next()){E=N.value;I(E)}}catch(X){s={error:X}}finally{try{N&&!N.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}if("grouped"===t.type)try{for(var G=(u=void 0,yc(F.values)),j=G.next();!j.done;j=G.next()){var B=j.value;R(B)}}catch(Y){u={error:Y}}finally{try{j&&!j.done&&(c=G.return)&&c.call(G)}finally{if(u)throw u.error}}else R(F.values)}}catch(q){i={error:q}}finally{try{k&&!k.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var V=yc(C),H=V.next();!H.done;H=V.next()){var z=vc(H.value,2),U=(A=z[0],z[1]);t.domain.values[A]=gc([],vc(U.getDomain()))}}catch(Z){p={error:Z}}finally{try{H&&!H.done&&(d=V.return)&&d.call(V)}finally{if(p)throw p.error}}}},t.prototype.postProcessProperties=function(t){var e,r,n=this.propertyProcessors;if(n)try{for(var o=yc(n),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.adjust,l=a.property,u=a.scopes;s()(t,this.valueIdxLookup(null!==u&&void 0!==u?u:[],l))}}catch(c){e={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},t.prototype.reduceData=function(t){var e,r,n,o,i,a=this.reducers,s=a.map((function(t){return t.scopes})),l=a.map((function(t){return t.reducer()})),u=a.map((function(t){return t.initialValue})),c=function(t){var e,r,i=0;try{for(var a=(e=void 0,yc(l)),c=a.next();!c.done;c=a.next()){var p=c.value,d=null===(o=null===(n=t.validScopes)||void 0===n?void 0:n.some((function(t){var e;return null===(e=s[i])||void 0===e?void 0:e.some((function(e){return t===e}))})))||void 0===o||o;d?(u[i]=p(u[i],t),i++):i++}}catch(h){e={error:h}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}};try{for(var p=yc(t.data),d=p.next();!d.done;d=p.next()){var h=d.value;c(h)}}catch(v){e={error:v}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}for(var f=0;f<u.length;f++)null!==(i=t.reduced)&&void 0!==i||(t.reduced={}),t.reduced[a[f].property]=u[f]},t.prototype.postProcessData=function(t){var e,r,n,o=this.processors;try{for(var i=yc(o),a=i.next();!a.done;a=i.next()){var s=a.value;null!==(n=t.reduced)&&void 0!==n||(t.reduced={}),t.reduced[s.property]=s.calculate(t)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.initDataDomainProcessor=function(){var t,e,r,n,o,i=this,a=i.keys,s=i.values,l=new Set;try{for(var u=yc(s),c=u.next();!c.done;c=u.next()){var p=c.value;try{for(var d=(r=void 0,yc(null!==(o=p.scopes)&&void 0!==o?o:[])),h=d.next();!h.done;h=d.next()){var f=h.value;l.add(f)}}catch(x){r={error:x}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}}}catch(O){t={error:O}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}var v=l.size,y=new Map,g=new Map,m=!0,b=function(t,e,r){var n;void 0===r&&(r=y),"category"===e?r.set(t,new pc("discrete")):(r.set(t,new pc("continuous")),m&&(m=(null!==(n=t.scopes)&&void 0!==n?n:[]).length===v))},C=function(){a.forEach((function(t){return b(t,t.valueType)})),s.forEach((function(t){return b(t,t.valueType)}))};C();var S=this.buildAccessors.apply(this,gc(gc([],vc(a)),vc(s))),w=function(t,e,r){var n,o,i,a,s,l=t.property in S,u=!1;if(l){try{s=S[t.property](e)}catch(d){}u=void 0!==s}else u=t.property in e,s=u?e[t.property]:t.missingValue;var c="missingValue"in t;if(u||c||t.missing++,y.has(t)||C(),u){var p=null===(o=null===(n=t.validation)||void 0===n?void 0:n.call(t,s,e))||void 0===o||o;if(!p){if(!("invalidValue"in t))return Sc;s=t.invalidValue}}return t.processor&&(g.has(t)||g.set(t,t.processor()),s=null===(i=g.get(t))||void 0===i?void 0:i(s,r!==Sc?r:void 0)),null===(a=y.get(t))||void 0===a||a.extend(s),s};return{dataDomain:y,processValue:w,initDataDomain:C,scopes:l,allScopesHaveSameDefs:m}},t.prototype.buildAccessors=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o={};try{for(var i=yc(r),a=i.next();!a.done;a=i.next()){var s=a.value,l=s.property.indexOf(".")>=0||s.property.indexOf("[")>=0;if(l){var u=void 0;u=s.property.startsWith("[")?"return datum"+s.property+";":"return datum."+s.property+";",o[s.property]=new Function("datum",u)}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return o},t.DEBUG=function(){var t;return null!==(t=[!0,"data-model"].includes(ml("agChartsDebug")))&&void 0!==t&&t},t}();function xc(t){var e,r,n=function(t,e){e.length>0&&(console.log("DataModel.processData() - "+t),console.table(e))};if(console.log("DataModel.processData() - processedData",t),n("Key Domains",t.domain.keys),n("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),n("Value Domains",t.domain.values),n("Aggregate Domains",null!==(r=t.domain.aggValues)&&void 0!==r?r:[]),"grouped"===t.type){var o=t.data.reduce((function(t,e){var r,n,o=null!==(r=e.keys)&&void 0!==r?r:[],i=null!==(n=e.aggValues)&&void 0!==n?n:[],a=e.keys.map((function(){})),s=null===i||void 0===i?void 0:i.map((function(){}));return t.push.apply(t,gc([],vc(e.values.map((function(t,e){return gc(gc(gc([],vc(0===e?o:a)),vc(null!==t&&void 0!==t?t:[])),vc(0==e?i:s))}))))),t}),[]);n("Values",o)}else{o=t.data.reduce((function(t,e){var r,n=null!==(r=e.aggValues)&&void 0!==r?r:[];return t.push(gc(gc(gc([],vc(e.keys)),vc(e.values)),vc(n))),t}),[]);n("Values",o)}}function Oc(){return function(t,e){var r=["Property ["+t+"] is deprecated.",e].filter((function(t){return null!=t})).join(" ");ul.warnOnce(r)}}function Ec(t,e){var r=null===e||void 0===e?void 0:e.default,n=Oc();return pu((function(e,o,i){return i!==r&&n(o.toString(),t),i}))}function Tc(t,e){var r=Oc();return pu((function(n,o,i){return i!==n[t]&&(r(o.toString(),"Use ["+t+"] instead."),n[t]=e?e(i):i),lu}),(function(e,n){return r(n.toString(),"Use ["+t+"] instead."),e[t]}))}var Pc=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Dc=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ac="ag-chart-tooltip",Mc="\n."+Ac+" {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n."+Ac+"-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n."+Ac+"-no-animation {\n    transition: none !important;\n}\n\n."+Ac+"-hidden {\n    visibility: hidden;\n}\n\n."+Ac+"-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n."+Ac+"-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n."+Ac+"-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n."+Ac+'-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.'+Ac+'-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n';function Rc(t,e){var r,n,o,i;if("string"===typeof t)return t;e=null!==e&&void 0!==e?e:{};var a=t.content,s=void 0===a?null!==(r=e.content)&&void 0!==r?r:"":a,l=t.title,u=void 0===l?null!==(n=e.title)&&void 0!==n?n:void 0:l,c=t.color,p=void 0===c?null!==(o=e.color)&&void 0!==o?o:"white":c,d=t.backgroundColor,h=void 0===d?null!==(i=e.backgroundColor)&&void 0!==i?i:"#888":d,f=u?'<div class="'+Ac+'-title"\n        style="color: '+p+"; background-color: "+h+'">'+u+"</div>":"";return f+'<div class="'+Ac+'-content">'+s+"</div>"}var _c=["pointer","node"],kc=hu((function(t){return _c.includes(t)}),"expecting a position type keyword such as 'pointer' or 'node'"),Fc=function(){function t(){this.type="pointer",this.xOffset=0,this.yOffset=0}return Pc([du(kc)],t.prototype,"type",void 0),Pc([du(Gu())],t.prototype,"xOffset",void 0),Pc([du(Gu())],t.prototype,"yOffset",void 0),t}(),Ic=function(){function t(e,r,n){var o=this;this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new Fc,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n;var i=r.createElement("div");if(this.element=this.tooltipRoot.appendChild(i),this.element.classList.add(Ac),this.canvasElement=e,window.IntersectionObserver){var a=new IntersectionObserver((function(t){var e,r;try{for(var n=Dc(t),i=n.next();!i.done;i=n.next()){var a=i.value;a.target===o.canvasElement&&0===a.intersectionRatio&&o.toggle(!1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}),{root:this.tooltipRoot});a.observe(this.canvasElement),this.observer=a}if(t.tooltipDocuments.indexOf(r)<0){var s=r.createElement("style");s.innerHTML=Mc,r.head.insertBefore(s,r.head.querySelector("style")),t.tooltipDocuments.push(r)}}return t.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)},t.prototype.isVisible=function(){var t=this.element;return!t.classList.contains(Ac+"-hidden")},t.prototype.updateClass=function(t,e){var r=this,n=r.element,o=r.class,i=r.lastClass,a=r.enableInteraction,s=this.isVisible(),l=function(t,e){var r=Ac+"-"+t;e?n.classList.add(r):n.classList.remove(r)};l("no-animation",!s&&!!t),l("no-interaction",!a),l("hidden",!t),l("arrow",!!e),o!==i&&(i&&n.classList.remove(i),o&&n.classList.add(o),this.lastClass=o)},t.prototype.show=function(t,e,r){var n,o,i,a,s,l,u,c=this;void 0===r&&(r=!1);var p=this,d=p.element,h=p.canvasElement;if(void 0!==e)d.innerHTML=e;else if(!d.innerHTML)return void this.toggle(!1);var f=function(t,e,r){return Math.max(Math.min(e,r),t)},v=null!==(o=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==o?o:0,y=null!==(a=null===(i=t.position)||void 0===i?void 0:i.yOffset)&&void 0!==a?a:0,g=h.getBoundingClientRect(),m=g.left+t.offsetX-d.clientWidth/2+v,b=g.top+t.offsetY-d.clientHeight-8+y,C=this.getWindowBoundingBox(),S=C.x+C.width-d.clientWidth-1,w=C.y+C.height-d.clientHeight,x=f(C.x,m,S),O=f(C.y,b,w),E=x!==m||O!==b,T=!E&&!v&&!y,P=null!==(l=null!==(s=t.showArrow)&&void 0!==s?s:this.showArrow)&&void 0!==l?l:T;if(this.updateShowArrow(P),d.style.transform="translate("+Math.round(x)+"px, "+Math.round(O)+"px)",this.enableInteraction=null!==(u=t.enableInteraction)&&void 0!==u&&u,this.delay>0&&!r)return this.toggle(!1),void(this.showTimeout=window.setTimeout((function(){c.toggle(!0)}),this.delay));this.toggle(!0)},t.prototype.getWindowBoundingBox=function(){return new Ls(0,0,window.innerWidth,window.innerHeight)},t.prototype.toggle=function(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)},t.prototype.pointerLeftOntoTooltip=function(t){var e;if(!this.enableInteraction)return!1;var r=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,n=["","-title","-content"],o=Boolean(n.filter((function(t){return null===r||void 0===r?void 0:r.contains(""+Ac+t)})));return void 0!==r&&o},t.prototype.updateShowArrow=function(t){this._showArrow=t},t.tooltipDocuments=[],Pc([du(Ou)],t.prototype,"enabled",void 0),Pc([du(Eu)],t.prototype,"showArrow",void 0),Pc([du(Pu)],t.prototype,"class",void 0),Pc([du(Gu(0))],t.prototype,"delay",void 0),Pc([Tc("range",(function(t){return t?"nearest":"exact"}))],t.prototype,"tracking",void 0),Pc([du(lc)],t.prototype,"range",void 0),t}(),Lc=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Nc(t,e){var r,n;void 0===e&&(e=[0,0]);try{for(var o=Lc(t),i=o.next();!i.done;i=o.next()){var a=i.value;"number"===typeof a&&(a<0&&(e[0]+=a),a>0&&(e[1]+=a))}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e}function Gc(t,e,r){return{id:e,scopes:[t.id],type:"aggregate",matchGroupIds:r?[r]:void 0,aggregateFunction:function(t){return Nc(t)},groupAggregateFunction:function(t,e){var r,n;return void 0===e&&(e=[0,0]),e[0]+=null!==(r=null===t||void 0===t?void 0:t[0])&&void 0!==r?r:0,e[1]+=null!==(n=null===t||void 0===t?void 0:t[1])&&void 0!==n?n:0,e}}}function jc(t,e){return{id:e,scopes:[t.id],type:"aggregate",aggregateFunction:function(){return[0,1]},groupAggregateFunction:function(t,e){var r,n;return void 0===e&&(e=[0,0]),e[0]+=null!==(r=null===t||void 0===t?void 0:t[0])&&void 0!==r?r:0,e[1]+=null!==(n=null===t||void 0===t?void 0:t[1])&&void 0!==n?n:0,e}}}function Bc(t,e,r){var n={id:e,scopes:[t.id],matchGroupIds:r?[r]:void 0,type:"aggregate",aggregateFunction:function(t){return Nc(t)},groupAggregateFunction:function(t,e){var r,n;return void 0===e&&(e=[0,0,-1]),e[0]+=null!==(r=null===t||void 0===t?void 0:t[0])&&void 0!==r?r:0,e[1]+=null!==(n=null===t||void 0===t?void 0:t[1])&&void 0!==n?n:0,e[2]++,e},finalFunction:function(t){void 0===t&&(t=[0,0,0]);var e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}};return n}function Vc(t,e,r,n){var o={id:e,scopes:[t.id],matchGroupIds:n?[n]:void 0,type:"aggregate",aggregateFunction:function(t,e){void 0===e&&(e=[]);var n=e[1]-e[0];return r.aggregateFunction(t).map((function(t){return t/n}))}};return r.groupAggregateFunction&&(o.groupAggregateFunction=r.groupAggregateFunction),o}function Hc(){return function(){var t=0;return function(e){return"number"!==typeof e||isNaN(e)?e:(t+=e,t)}}}var zc=new Map;function Uc(t,e){var r,n,o,i=JSON.stringify(t,null,0);return zc.has(e)||zc.set(e,new Map),(null===(r=zc.get(e))||void 0===r?void 0:r.has(i))||null===(n=zc.get(e))||void 0===n||n.set(i,e(t)),null===(o=zc.get(e))||void 0===o?void 0:o.get(i)}var Wc=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Kc=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Xc=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yc={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:function(){var t=NaN;return function(e,r){var n=r.keys[0],o=Math.abs(n-t);return t=n,!isNaN(o)&&o>0&&o<e?o:e}}},qc={type:"processor",property:"sortedGroupDomain",calculate:function(t){var e=t.domain.groups;if(null!=e)return Kc([],Wc(e)).sort((function(t,e){for(var r=0;r<t.length;r++){var n=t[r]-e[r];if(0!==n)return n}return 0}))}};function Zc(t){var e=t.normaliseTo,r=t.mode,n=function(t,r){var n=t*e/r;return n>=0?Math.min(e,n):Math.max(-e,n)};return function(){return function(){return function(t,e){var o,i,a,s,l=[0,0];try{for(var u=Xc(e),c=u.next();!c.done;c=u.next()){var p=c.value,d=t[p],h=d<0?0:1;"sum"===r?l[h]+=d:l[h]=0===h?Math.min(l[h],d):Math.max(l[h],d)}}catch(g){o={error:g}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}var f=Math.max(Math.abs(l[0]),l[1]);try{for(var v=Xc(e),y=v.next();!y.done;y=v.next()){p=y.value;t[p]=n(t[p],f)}}catch(m){a={error:m}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}}}}}function Jc(t,e,r,n){return void 0===n&&(n="sum"),{scopes:[t.id],type:"group-value-processor",matchGroupIds:e,adjust:Uc({normaliseTo:r,mode:n},Zc)}}function Qc(t){var e=t.normaliseTo,r=t.rangeMin,n=t.rangeMax,o=e[1]-e[0],i=function(t,r,n){var i=e[0]+(t-r)/n*o;return 0===n||i>=e[1]?e[1]:i<e[0]?e[0]:i};return function(){return function(t,o){var a,s,l,u,c=Wc(t.domain.values[o],2),p=c[0],d=c[1];null!=r&&(p=r),null!=n&&(d=n);var h=d-p;t.domain.values[o]=[e[0],e[1]];try{for(var f=Xc(t.data),v=f.next();!v.done;v=f.next()){var y=v.value,g=y.values;"ungrouped"===t.type&&(g=[g]);try{for(var m=(l=void 0,Xc(g)),b=m.next();!b.done;b=m.next()){var C=b.value;C[o]=i(C[o],p,h)}}catch(S){l={error:S}}finally{try{b&&!b.done&&(u=m.return)&&u.call(m)}finally{if(l)throw l.error}}}}catch(w){a={error:w}}finally{try{v&&!v.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}}}}function $c(t,e,r,n,o){return{scopes:[t.id],type:"property-value-processor",property:e,adjust:Uc({normaliseTo:r,rangeMin:n,rangeMax:o},Qc)}}function tp(t){return function(){return function(){return function(e,r){var n,o,i=0;try{for(var a=Xc(r),s=a.next();!s.done;s=a.next()){var l=s.value,u=e[l];"number"!==typeof u||isNaN(u)||("normal"===t&&(i+=u),e[l]=i,"trailing"===t&&(i+=u))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}}}}function ep(t){var e=t.mode,r=t.sum;return function(){var t=[],n=!0;return function(){return function(o,i){var a,s,l=0;try{for(var u=Xc(i),c=u.next();!c.done;c=u.next()){var p=c.value,d=o[p],h=n&&"current"===r?0:t[p];t[p]=d;var f="current"===r?d:h;"number"!==typeof d||isNaN(d)?o[p]=f:"number"!==typeof h||isNaN(h)?o[p]=f:("normal"===e&&(l+=f),o[p]=l,"trailing"===e&&(l+=f))}}catch(v){a={error:v}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}n=!1}}}}function rp(t,e,r,n){var o;if(r.startsWith("window")){var i=r.endsWith("-trailing")?"trailing":"normal";o=Uc({mode:i,sum:n},ep)}else o=Uc(r,tp);return{scopes:[t.id],type:"group-value-processor",matchGroupIds:[e],adjust:o}}function np(t,e){return void 0===e&&(e=!0),{type:"processor",property:"diff",calculate:function(r){for(var n={changed:!1,added:[],updated:[],removed:[]},o=new Map,i=new Map,a=new Map,s="___",l=0;l<Math.max(t.data.length,r.data.length);l++){var u=t.data[l],c=r.data[l],p=null===u||void 0===u?void 0:u.keys.join(s),d=null===c||void 0===c?void 0:c.keys.join(s);p!==d?(a.has(d)?(!e&&op(a.get(d).values,c.values)||i.set(d,c),a.delete(d)):c&&o.set(d,c),o.has(p)?(!e&&op(o.get(p).values,u.values)||i.set(p,u),o.delete(p)):u&&a.set(p,u)):op(u.values,c.values)||i.set(d,c)}return n.added=Array.from(o.values()).map((function(t){return t.keys})),n.updated=Array.from(i.values()).map((function(t){return t.keys})),n.removed=Array.from(a.values()).map((function(t){return t.keys})),n.changed=n.added.length>0||n.updated.length>0||n.removed.length>0,n}}}function op(t,e){if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){if(Array.isArray(t[r])&&Array.isArray(e[r]))return op(t[r],e[r]);if(t[r]!==e[r])return!1}return!0}function ip(t,e){return pu((function(r,n,o){return r[t][null!==e&&void 0!==e?e:n]=o,o}))}function ap(t){var e=t.newValue,r=t.oldValue,n=t.changeValue;return pu((function(t,o,i,a){return i!==a&&(void 0!==a&&(null===r||void 0===r||r.call(t,a)),void 0!==i&&(null===e||void 0===e||e.call(t,i)),null===n||void 0===n||n.call(t,i,a)),i}))}var sp,lp=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),up=function(){return up=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},up.apply(this,arguments)},cp=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},pp=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},dp=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hp=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},fp=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};function vp(t){return null!=nu(t,!0)}function yp(t){return null!=nu(t,!1)}function gp(t,e,r,n){void 0===n&&(n={});var o=up({scopes:[t.id],property:e,type:"key",valueType:r?"range":"category",validation:r?vp:yp},n);return o}function mp(t,e,r,n){void 0===n&&(n={});var o=up({scopes:[t.id],property:e,type:"value",valueType:r?"range":"category",validation:r?vp:yp},n);return o}function bp(t,e,r){void 0===r&&(r={});var n=r.min,o=void 0===n?-1/0:n,i=r.max,a=void 0===i?1/0:i,s=pp(r,["min","max"]);return up({scopes:[t.id],type:"value",property:e,valueType:"range",validation:vp,processor:function(){return function(t){return"number"!==typeof t||isNaN(t)?t:Math.min(Math.max(t,o),a)}}},s)}function Cp(t,e,r,n){void 0===n&&(n={});var o=up(up({},mp(t,e,r,n)),{processor:Hc()});return o}function Sp(t,e,r,n,o,i){return void 0===o&&(o="current"),[mp(t,e,r,i),rp(t,i.groupId,n,o)]}(function(t){t[t["EXACT_SHAPE_MATCH"]=0]="EXACT_SHAPE_MATCH",t[t["NEAREST_BY_MAIN_AXIS_FIRST"]=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t["NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST"]=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t["NEAREST_NODE"]=3]="NEAREST_NODE"})(sp||(sp={}));var wp=function(){function t(t,e,r){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=r.id}return t}(),xp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lp(e,t),e}(wp),Op=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return lp(e,t),e}(wp),Ep=function(){function t(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}return cp([du(Iu)],t.prototype,"fill",void 0),cp([du(ju(0,1))],t.prototype,"fillOpacity",void 0),cp([du(Iu)],t.prototype,"stroke",void 0),cp([du(ju(0))],t.prototype,"strokeWidth",void 0),t}(),Tp=function(){function t(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}return cp([du(ju(0))],t.prototype,"strokeWidth",void 0),cp([du(ju(0,1))],t.prototype,"dimOpacity",void 0),cp([du(Eu)],t.prototype,"enabled",void 0),t}(),Pp=function(){function t(){this.color="black"}return cp([du(Iu)],t.prototype,"color",void 0),t}(),Dp=function(){function t(){this.item=new Ep,this.series=new Tp,this.text=new Pp}return t}(),Ap=function(){function t(){this.enabled=!0,this.showArrow=void 0,this.interaction=new Mp,this.position=new Fc}return cp([du(Ou)],t.prototype,"enabled",void 0),cp([du(Eu)],t.prototype,"showArrow",void 0),t}(),Mp=function(){function t(){this.enabled=!1}return cp([du(Ou)],t.prototype,"enabled",void 0),t}(),Rp=function(t){function e(e){var r,n=t.call(this)||this;n.id=Vs(n),n.rootGroup=new yl({name:"seriesRoot",isVirtual:!0}),n.axes=(r={},r[oc.X]=void 0,r[oc.Y]=void 0,r),n.directions=[oc.X,oc.Y],n.nodeDataRefresh=!0,n._data=void 0,n._visible=!0,n.showInLegend=!0,n.cursor="default",n.nodeClickRange="exact",n.seriesGrouping=void 0,n._declarationOrder=-1,n.highlightStyle=new Dp,n.ctx=e.moduleCtx;var o=e.useLabelLayer,i=void 0!==o&&o,a=e.pickModes,s=void 0===a?[sp.NEAREST_BY_MAIN_AXIS_FIRST]:a,l=e.directionKeys,u=void 0===l?{}:l,c=e.directionNames,p=void 0===c?{}:c,d=e.contentGroupVirtual,h=void 0===d||d,f=n.rootGroup;return n.directionKeys=u,n.directionNames=p,n.contentGroup=f.appendChild(new yl({name:n.id+"-content",layer:!h,isVirtual:h,zIndex:nc.SERIES_LAYER_ZINDEX,zIndexSubOrder:n.getGroupZIndexSubOrder("data")})),n.highlightGroup=f.appendChild(new yl({name:n.id+"-highlight",layer:!0,zIndex:nc.SERIES_LAYER_ZINDEX,zIndexSubOrder:n.getGroupZIndexSubOrder("highlight")})),n.highlightNode=n.highlightGroup.appendChild(new yl({name:"highlightNode"})),n.highlightLabel=n.highlightGroup.appendChild(new yl({name:"highlightLabel"})),n.highlightNode.zIndex=0,n.highlightLabel.zIndex=10,n.pickModes=s,i&&(n.labelGroup=f.appendChild(new yl({name:n.id+"-series-labels",layer:!0,zIndex:nc.SERIES_LABEL_ZINDEX}))),n}return lp(e,t),Object.defineProperty(e.prototype,"type",{get:function(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.nodeDataRefresh=!0},enumerable:!1,configurable:!0}),e.prototype.hasData=function(){var t=this.data;return t&&(!Array.isArray(t)||t.length>0)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.visibleChanged()},enumerable:!1,configurable:!0}),e.prototype.onSeriesGroupingChange=function(t,e){var r=this,n=this,o=n.id,i=n.type,a=n.visible,s=n.rootGroup;t&&this.ctx.seriesStateManager.deregisterSeries({id:o,type:i}),e&&this.ctx.seriesStateManager.registerSeries({id:o,type:i,visible:a,seriesGrouping:e}),this.ctx.seriesLayerManager.changeGroup({id:o,type:i,rootGroup:s,getGroupZIndexSubOrder:function(t){return r.getGroupZIndexSubOrder(t)},seriesGrouping:e,oldGrouping:t})},e.prototype.getBandScalePadding=function(){return{inner:1,outer:0}},e.prototype.getGroupZIndexSubOrder=function(t,e){var r=this;void 0===e&&(e=0);var n=0;switch(t){case"data":case"paths":break;case"labels":n+=2e4;break;case"marker":n+=1e4;break;case"highlight":e+=15e3;break}var o=function(){return r._declarationOrder+n};return[o,e]},e.prototype.addChartEventListeners=function(){},e.prototype.destroy=function(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)},e.prototype.getDirectionValues=function(t,e){var r=this,n=this.resolveKeyDirection(t),o=null===e||void 0===e?void 0:e[n],i=[],a=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{for(var o=dp(r),i=o.next();!i.done;i=o.next()){var a=i.value;s(a)}}catch(l){t={error:l}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},s=function(t){Array.isArray(t)?a.apply(void 0,fp([],hp(t))):"object"===typeof t?a(Object.values(t)):i.push(t)};return o?(o.forEach((function(t){var e=r[t];s(e)})),i):i},e.prototype.getKeys=function(t){return this.getDirectionValues(t,this.directionKeys)},e.prototype.getNames=function(t){return this.getDirectionValues(t,this.directionNames)},e.prototype.resolveKeyDirection=function(t){return t},e.prototype.markNodeDataDirty=function(){this.nodeDataRefresh=!0},e.prototype.visibleChanged=function(){this.ctx.seriesStateManager.registerSeries(this)},e.prototype.getOpacity=function(t){var e=this.highlightStyle.series,r=e.dimOpacity,n=void 0===r?1:r,o=e.enabled,i=void 0===o||o,a=1;if(!1===i||n===a)return a;switch(this.isItemIdHighlighted(t)){case"no-highlight":case"highlighted":return a;case"peer-highlighted":case"other-highlighted":return n}},e.prototype.getStrokeWidth=function(t,e){var r=this.highlightStyle.series,n=r.strokeWidth,o=r.enabled,i=void 0===o||o;if(!1===i||void 0===n)return t;switch(this.isItemIdHighlighted(e)){case"highlighted":return n;case"no-highlight":case"other-highlighted":case"peer-highlighted":return t}},e.prototype.isItemIdHighlighted=function(t){var e,r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=null!==r&&void 0!==r?r:{},o=n.series,i=n.itemId,a=null!=o;return a?o!==this?"other-highlighted":void 0===i?"highlighted":t&&r!==t&&i!==t.itemId?"peer-highlighted":"highlighted":"no-highlight"},e.prototype.pickNode=function(t,e){var r,n,o=this,i=o.pickModes,a=o.visible,s=o.rootGroup;if(a&&s.visible)try{for(var l=dp(i),u=l.next();!u.done;u=l.next()){var c=u.value;if(!e||e.includes(c)){var p=void 0;switch(c){case sp.EXACT_SHAPE_MATCH:p=this.pickNodeExactShape(t);break;case sp.NEAREST_BY_MAIN_AXIS_FIRST:case sp.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:p=this.pickNodeMainAxisFirst(t,c===sp.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case sp.NEAREST_NODE:p=this.pickNodeClosestDatum(t);break}if(p)return{pickMode:c,match:p.datum,distance:p.distance}}}}catch(d){r={error:d}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}},e.prototype.pickNodeExactShape=function(t){var e=this.contentGroup.pickNode(t.x,t.y);if(e)return{datum:e.datum,distance:0}},e.prototype.pickNodeClosestDatum=function(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")},e.prototype.pickNodeMainAxisFirst=function(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")},e.prototype.fireNodeClickEvent=function(t,e){var r=this.getNodeClickEvent(t,e);this.fireEvent(r)},e.prototype.fireNodeDoubleClickEvent=function(t,e){var r=this.getNodeDoubleClickEvent(t,e);this.fireEvent(r)},e.prototype.getNodeClickEvent=function(t,e){return new xp(t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){return new Op(t,e,this)},e.prototype.toggleSeriesItem=function(t,e){this.visible=e,this.nodeDataRefresh=!0},e.prototype.isEnabled=function(){return this.visible},e.prototype.fixNumericExtent=function(t,e){var r,n=Cc(t);if(0===n.length)return n;var o=hp(n,2),i=o[0],a=o[1];if(i===a){var s=hp(null!==(r=null===e||void 0===e?void 0:e.calculatePadding(i,a))&&void 0!==r?r:[1,1],2),l=s[0],u=s[1];i-=l,a+=u}return[i,a]},e.highlightedZIndex=1e12,cp([du(Tu)],e.prototype,"id",void 0),cp([du(Ou)],e.prototype,"_visible",void 0),cp([du(Ou)],e.prototype,"showInLegend",void 0),cp([du(Tu)],e.prototype,"cursor",void 0),cp([du(lc)],e.prototype,"nodeClickRange",void 0),cp([ap({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],e.prototype,"seriesGrouping",void 0),e}(Jl),_p=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},kp=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===r&&(r=t),void 0===n&&(n=e),this.top=t,this.right=e,this.bottom=r,this.left=n}return t.prototype.clear=function(){this.top=this.right=this.bottom=this.left=0},_p([du(Gu(0))],t.prototype,"top",void 0),_p([du(Gu(0))],t.prototype,"right",void 0),_p([du(Gu(0))],t.prototype,"bottom",void 0),_p([du(Gu(0))],t.prototype,"left",void 0),t}(),Fp=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ip=function(){function t(){}return t.init=function(){var t=this,e=window.ResizeObserver;if(e)this.resizeObserver=new e((function(e){var r,n;try{for(var o=Fp(e),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.contentRect,l=s.width,u=s.height;t.checkSize(t.elements.get(a.target),a.target,l,u)}}catch(c){r={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}));else{var r=function(){t.elements.forEach((function(e,r){t.checkClientSize(r,e)}))};this.pollerHandler=window.setInterval(r,100)}this.ready=!0},t.destroy=function(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1},t.checkSize=function(t,e,r,n){t&&(t.size&&r===t.size.width&&n===t.size.height||(t.size={width:r,height:n},t.cb(t.size,e)))},t.observe=function(t,e){this.ready||this.init(),this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})},t.unobserve=function(t,e){void 0===e&&(e=!0),this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),e&&0===this.elements.size&&this.destroy()},t.checkClientSize=function(t,e){var r=t.clientWidth?t.clientWidth:0,n=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,r,n)},t.elements=new Map,t.ready=!1,t}();function Lp(t,e,r,n,o){var i=t.x;t.x<e?i=e:t.x>e+n&&(i=e+n);var a=t.y;t.y<r?a=r:t.y>r+o&&(a=r+o);var s=t.x-i,l=t.y-a,u=Math.sqrt(s*s+l*l);return u<=.5*t.size}function Np(t,e,r,n,o){var i=t.x+t.width>e&&t.x<e+n,a=t.y+t.height>r&&t.y<r+o;return i&&a}function Gp(t,e,r,n,o){return e+n<t.x+t.width&&e>t.x&&r>t.y&&r+o<t.y+t.height}function jp(t){return null!=t&&"object"===typeof t.point&&"object"===typeof t.label}function Bp(t,e,r){void 0===r&&(r=5);var n=[];t=t.map((function(t){return t.slice().sort((function(t,e){return e.point.size-t.point.size}))}));for(var o=0;o<t.length;o++){var i=n[o]=[],a=t[o];if((null===a||void 0===a?void 0:a.length)&&a[0].label)for(var s=function(o,s){var l=a[o],u=l.label,c=.5*l.point.size,p=l.point.x-.5*u.width,d=l.point.y-c-u.height-r,h=u.width,f=u.height,v=!e||Gp(e,p,d,h,f);if(!v)return"continue";var y=t.some((function(t){return t.some((function(t){return Lp(t.point,p,d,h,f)}))}));if(y)return"continue";var g=n.some((function(t){return t.some((function(t){return Np(t,p,d,h,f)}))}));if(g)return"continue";i.push({index:o,text:u.text,x:p,y:d,width:h,height:f,datum:l})},l=0,u=a.length;l<u;l++)s(l,u)}return n}function Vp(t,e){for(var r=[],n=function(n){var o=t[n],i=o.point,a=i.x,s=i.y,l=o.label.text,u=o.label,c=u.width,p=u.height;c+=null!==e&&void 0!==e?e:0,p+=null!==e&&void 0!==e?e:0;var d=r.some((function(t){var e=Np(t,a,s,c,p);return e}));if(d)return{value:!0};r.push({index:n,text:l,x:a,y:s,width:c,height:p,datum:o})},o=0;o<t.length;o++){var i=n(o);if("object"===typeof i)return i.value}return!1}var Hp=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},zp=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};function Up(t){return Kp((function(t,e){return requestAnimationFrame(t)}),t)}function Wp(t){return Kp((function(t,e){return void 0===e&&(e=0),setTimeout(t,e)}),t)}function Kp(t,e){var r,n,o=0,i=!1,a=function(){return i},s=function(){i=!1,null===n||void 0===n||n(),n=void 0,r=void 0,o>0&&t(l)},l=function(){var t=o;o=0,i=!0;var r=e({count:t});r?r.then(s).catch(s):s()};return{schedule:function(e){0!==o||a()||t(l,e),o++},await:function(){return Hp(this,void 0,void 0,(function(){return zp(this,(function(t){switch(t.label){case 0:if(!a())return[2];null==r&&(r=new Promise((function(t){n=t}))),t.label=1;case 1:return a()?[4,r]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}}))}))}}}function Xp(t){return new Promise((function(e){setTimeout((function(){return e(void 0)}),t)}))}var Yp=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},qp=function(){function t(t,e){this.renderer=void 0,this.text=void 0,this.className=t,this.parentElement=e}return t.prototype.show=function(t){var e,r,n=this.element;if(n||(n=document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",this.renderer)n.innerHTML=this.renderer();else{var o=document.createElement("div");o.style.alignItems="center",o.style.boxSizing="border-box",o.style.display="flex",o.style.justifyContent="center",o.style.margin="8px",o.style.height="100%",o.style.font="12px Verdana, sans-serif",o.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(o)}null===(r=this.parentElement)||void 0===r||r.append(n)},t.prototype.hide=function(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0},Yp([du(xu)],t.prototype,"renderer",void 0),Yp([du(Pu)],t.prototype,"text",void 0),t}(),Zp=function(){function t(t){this.noData=new qp("ag-chart-no-data-overlay",t)}return t}(),Jp=function(){return Jp=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Jp.apply(this,arguments)},Qp=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},$p=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},td=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function ed(t,e){var r,n,o=ld(t),i=ld(e);if("array"===i){var a=e;return"array"!==o||t.length!==a.length||a.some((function(e,r){var n;return null!=ed(null===(n=t)||void 0===n?void 0:n[r],e)}))?$p([],Qp(a)):null}if("primitive"===i)return"primitive"!==o?Jp({},e):t!==e?e:null;var s=t||{},l=e||{},u=new Set($p($p([],Qp(Object.keys(s))),Qp(Object.keys(l)))),c=0,p={},d=function(t){if(s[t]===l[t])return"continue";var e=function(e){p[t]=e,c++},r=ld(s[t]),n=ld(l[t]);if(r!==n)return e(l[t]),"continue";if("primitive"===n||null===n)return e(l[t]),"continue";if("array"===n&&s[t].length!==l[t].length)return e(l[t]),"continue";if("class-instance"===n)return e(l[t]),"continue";if("function"===n&&s[t]!==l[t])return e(l[t]),"continue";var o=ed(s[t],l[t]);null!==o&&e(o)};try{for(var h=td(u),f=h.next();!f.done;f=h.next()){var v=f.value;d(v)}}catch(y){r={error:y}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}return 0===c?null:p}var rd=Symbol("<delete-property>"),nd=Symbol("<unspecified-property>");function od(t,e){var r,n,o,i=null!==(o=null===e||void 0===e?void 0:e.avoidDeepClone)&&void 0!==o?o:[],a=t.map((function(t){return ld(t)}));if(a.some((function(t){return"array"===t}))){var s=t[t.length-1];return s instanceof Array?s.map((function(t){var r=ld(t);return"array"===r?od([[],t],e):"object"===r?od([{},t],e):t})):s}var l={},u=new Set(t.map((function(t){return null!=t?Object.keys(t):[]})).reduce((function(t,e){return t.concat(e)}),[])),c=function(r){var n=t.map((function(t){return null!=t&&"object"===typeof t&&r in t?t[r]:nd})).filter((function(t){return t!==nd}));if(0===n.length)return"continue";var o=n[n.length-1];if(o===rd)return"continue";var a=n.map((function(t){return ld(t)})),s=a[0];if(a.some((function(t){return t!==s})))return l[r]=o,"continue";"array"!==s&&"object"!==s||i.includes(r)?l[r]="array"===s?$p([],Qp(o)):o:l[r]=od(n,e)};try{for(var p=td(u),d=p.next();!d.done;d=p.next()){var h=d.value;c(h)}}catch(f){r={error:f}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}return l}function id(t,e,r){var n,o,i;void 0===r&&(r={});var a=r.path,s=void 0===a?void 0:a,l=r.matcherPath,u=void 0===l?s?s.replace(/(\[[0-9+]+\])/i,"[]"):void 0:l,c=r.skip,p=void 0===c?[]:c,d=r.constructors,h=void 0===d?{}:d,f=r.constructedArrays,v=void 0===f?new WeakMap:f,y=r.allowedTypes,g=void 0===y?{}:y,m=r.idx;if(null==t)throw new Error("AG Charts - target is uninitialised: "+(null!==s&&void 0!==s?s:"<root>"));if(null==e)return t;var b=t;null!=m&&"_declarationOrder"in b&&(b["_declarationOrder"]=m);var C=ld(t),S=function(a){var l=(u?u+".":"")+a;if(p.indexOf(l)>=0)return"continue";var c=e[a],d=(s?s+".":"")+a,f=b.constructor,y=b[a],m=null!==(n=h[l])&&void 0!==n?n:h[a];try{var S=ld(y),w=ld(c);if("class-instance"===C&&!(a in t)&&!Object.prototype.hasOwnProperty.call(b,a))return ul.warn("unable to set ["+d+"] in "+(null===f||void 0===f?void 0:f.name)+" - property is unknown"),"continue";var x=null!==(o=g[l])&&void 0!==o?o:[S];if("class-instance"===S&&"object"===w);else if(null!=S&&null!=w&&!x.includes(w))return ul.warn("unable to set ["+d+"] in "+(null===f||void 0===f?void 0:f.name)+" - can't apply type of ["+w+"], allowed types are: ["+x+"]"),"continue";if("array"===w)if(m=null!==(i=null!==m&&void 0!==m?m:v.get(y))&&void 0!==i?i:h[l+"[]"],null!=m){var O=c;b[a]=O.map((function(t,e){return id(new m,t,Jp(Jp({},r),{path:d,matcherPath:l+"[]",idx:e}))}))}else b[a]=c;else"class-instance"===w?b[a]=c:"object"===w?null!=y?id(y,c,Jp(Jp({},r),{path:d,matcherPath:l,idx:void 0})):b[a]=null!=m?id(new m,c,Jp(Jp({},r),{path:d,matcherPath:l,idx:void 0})):c:b[a]=c}catch(E){return ul.warn("unable to set ["+d+"] in ["+(null===f||void 0===f?void 0:f.name)+"]; nested error is: "+E.message),"continue"}};for(var w in e)S(w);return t}function ad(t,e,r){for(var n,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=ld(t),s=null!==(n=r.skip)&&void 0!==n?n:[];if("array"!==a){if("object"===a){e.apply(void 0,$p([a,t],Qp(o)));var l=function(n){if(s.indexOf(n)>=0)return"continue";var i=t[n],a=null===o||void 0===o?void 0:o.map((function(t){return null===t||void 0===t?void 0:t[n]})),l=ld(i);"object"!==l&&"array"!==l||ad.apply(void 0,$p([i,e,r],Qp(a)))};for(var u in t)l(u)}}else t.forEach((function(t,n){ad.apply(void 0,$p([t,e,r],Qp((null!==o&&void 0!==o?o:[]).map((function(t){return null===t||void 0===t?void 0:t[n]})))))}))}var sd="undefined"!==typeof window;function ld(t){return null==t?null:sd&&t instanceof HTMLElement?"primitive":t instanceof Array?"array":t instanceof Date?"primitive":"object"===typeof t&&t.constructor===Object?"object":"function"===typeof t?"function":"object"===typeof t&&null!=t.constructor?"class-instance":"primitive"}var ud=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cd=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},pd=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},dd=function(){function t(){this.registeredListeners={}}return t.prototype.addListener=function(t,e){var r,n=Symbol(t);return this.registeredListeners[t]||(this.registeredListeners[t]=[]),null===(r=this.registeredListeners[t])||void 0===r||r.push({symbol:n,handler:e}),n},t.prototype.dispatch=function(t){for(var e,r,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];var a=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[],s=[];try{for(var l=ud(a),u=l.next();!u.done;u=l.next()){var c=u.value;try{s.push(c.handler.apply(c,pd([],cd(o))))}catch(p){ul.errorOnce(p),s.push(void 0)}}}catch(d){e={error:d}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s},t.prototype.cancellableDispatch=function(t,e){for(var r,n,o,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=null!==(o=this.registeredListeners[t])&&void 0!==o?o:[],l=[];try{for(var u=ud(s),c=u.next();!c.done;c=u.next()){var p=c.value;if(e())break;l.push(p.handler.apply(p,pd([],cd(i))))}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return l},t.prototype.reduceDispatch=function(t,e){for(var r,n,o,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=null!==(o=this.registeredListeners[t])&&void 0!==o?o:[],l=void 0;try{for(var u=ud(s),c=u.next();!c.done;c=u.next()){var p=c.value;l=p.handler.apply(p,pd([],cd(i))),i=e.apply(void 0,pd([l],cd(i)))}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return l},t.prototype.removeListener=function(t){for(var e in this.registeredListeners){var r=this.registeredListeners[e],n=null===r||void 0===r?void 0:r.findIndex((function(e){return e.symbol===t}));null!=n&&n>=0&&(null===r||void 0===r||r.splice(n,1)),null!=n&&0===(null===r||void 0===r?void 0:r.length)&&delete this.registeredListeners[e]}},t}(),hd=function(){function t(){this.listeners=new dd}return t.prototype.addListener=function(t,e){return this.listeners.addListener(t,e)},t.prototype.removeListener=function(t){this.listeners.removeListener(t)},t}();function fd(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function vd(t,e){if("string"===typeof t)try{t=au.fromString(t)}catch(a){t=au.fromArray([0,0,0])}if("string"===typeof e)try{e=au.fromString(e)}catch(a){e=au.fromArray([0,0,0])}var r=fd(t.r,e.r),n=fd(t.g,e.g),o=fd(t.b,e.b),i=fd(t.a,e.a);return function(t){return au.fromArray([r(t),n(t),o(t),i(t)]).toRgbaString()}}function yd(t,e){var r,n=typeof e;if("number"===n)return fd(t,e);if("string"===n)try{return r=au.fromString(e),e=r,vd(t,e)}catch(o){}throw new Error("Unable to interpolate values")}function gd(t){return function(e){var r=e.from,n=e.to,o=yd(r,n);return function(e){return o(t(e))}}}function md(t){var e=t.from,r=t.to;return yd(e,r)}var bd,Cd=gd((function(t){return Math.sin(t*Math.PI/2)})),Sd=function(){return Sd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Sd.apply(this,arguments)};function wd(t){var e,r=t.driver,n=t.duration,o=t.from,i=t.to,a=t.autoplay,s=void 0===a||a,l=t.delay,u=void 0===l?0:l,c=t.ease,p=void 0===c?md:c,d=t.repeat,h=void 0===d?0:d,f=t.repeatType,v=void 0===f?bd.Loop:f,y=t.onComplete,g=t.onPlay,m=t.onRepeat,b=t.onStop,C=t.onUpdate,S=0,w=0,x=0,O=!0,E=!1,T=p({from:o,to:i}),P={isPlaying:!1,play:A,pause:M,stop:R,reset:_},D=r(I);function A(){return P.isPlaying=!0,D.start(),null===g||void 0===g||g(),P}function M(){return P.isPlaying=!1,P}function R(){return P.isPlaying=!1,D.stop(),null===b||void 0===b||b(),P}function _(){return E=!1,w=0,x=0,D.reset(),P}function k(){x++,v===bd.Reverse?(O=x%2===0,w=O?w%n:n-w%n):w%=n,E=!1,null===m||void 0===m||m()}function F(){R(),null===y||void 0===y||y()}function I(t){O||(t=-t),S>=u?(w+=t,E||(e=T(Math.min(1,Math.max(0,w/n))),E=O?w>=n:w<=0),null===C||void 0===C||C(e),E&&(x<h?k():F())):S+=t}return s&&A(),P}function xd(t){var e,r=Sd(Sd({},t),{autoplay:!1,onUpdate:function(t){null===e||void 0===e||e(t)}}),n=wd(r),o={start:function(t){return n.stop(),n.reset(),n.play(),e=t,o},stop:function(){return n.stop(),o}};return o}(function(t){t["Loop"]="loop",t["Reverse"]="reverse"})(bd||(bd={}));var Od=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ed=function(){return Ed=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ed.apply(this,arguments)},Td=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},Pd=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dd=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Ad=function(t){function e(e){var r=t.call(this)||this;return r.controllers={},r.throttles={},r.throttleGroups=new Set,r.updaters=[],r.isPlaying=!1,r.readyToPlay=!1,r.defaultOptions={},r.skipAnimations=!1,r.debug=!1,r.interactionManager=e,window.addEventListener("DOMContentLoaded",(function(){r.readyToPlay=!0})),setTimeout((function(){r.readyToPlay=!0}),10),r}return Od(e,t),e.prototype.play=function(){if(!this.isPlaying){for(var t in this.isPlaying=!0,this.debug&&ul.debug("AnimationManager.play()"),this.controllers)this.controllers[t].play();this.startAnimationCycle()}},e.prototype.pause=function(){if(this.isPlaying)for(var t in this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&ul.debug("AnimationManager.pause()"),this.controllers)this.controllers[t].pause()},e.prototype.stop=function(){for(var t in this.isPlaying=!1,this.cancelAnimationFrame(),this.debug&&ul.debug("AnimationManager.stop()"),this.controllers)this.controllers[t].stop()},e.prototype.reset=function(){this.isPlaying?(this.stop(),this.play()):this.stop()},e.prototype.animate=function(t,e){var r,n,o=e.disableInteractions,i=void 0===o||o,a=Td(e,["disableInteractions"]);if(!this.skipAnimations){var s=Ed(Ed({},a),{autoplay:!!this.isPlaying&&a.autoplay,driver:this.createDriver(t,i)});this.controllers[t]&&this.controllers[t].stop();var l=wd(s);return this.controllers[t]=l,null===(n=a.onUpdate)||void 0===n||n.call(a,a.from),l}null===(r=a.onUpdate)||void 0===r||r.call(a,a.to)},e.prototype.animateMany=function(t,e,r){var n,o,i;if(this.skipAnimations){var a=e.map((function(t){return t.to}));return r.onUpdate(a),void(null===(i=r.onComplete)||void 0===i||i.call(r))}var s=e.map((function(t){return t.from})),l=0,u=0,c=0,p=0,d=function(t){return function(n){var o;s[t]=n,++c>=e.length&&(null===(o=r.onUpdate)||void 0===o||o.call(r,s),c=0)}},h=function(){var t;++l>=e.length&&(null===(t=r.onPlay)||void 0===t||t.call(r))},f=function(){var t;++u>=e.length&&(null===(t=r.onStop)||void 0===t||t.call(r))},v=function(){var t;++p>=e.length&&(null===(t=r.onComplete)||void 0===t||t.call(r))},y=0;try{for(var g=Pd(e),m=g.next();!m.done;m=g.next()){var b=m.value,C=t+"-"+y;this.animate(C,Ed(Ed(Ed({},r),b),{onUpdate:d(y),onPlay:h,onStop:f,onComplete:v})),y++}}catch(S){n={error:S}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(n)throw n.error}}},e.prototype.animateWithThrottle=function(t,e){var r,n=null!==(r=e.throttleId)&&void 0!==r?r:t;this.throttles[n]&&e.duration&&Date.now()-this.throttles[n]<e.duration&&(e.delay=0,e.duration=1),this.throttles[t]=Date.now(),this.animate(t,Ed({},e))},e.prototype.animateManyWithThrottle=function(t,e,r){var n,o=this,i=r.throttleGroup,a=null!==(n=r.throttleId)&&void 0!==n?n:t,s=Date.now(),l=this.throttles[a]&&r.duration&&s-this.throttles[a]<r.duration,u=i&&this.throttleGroups.has(i);l&&!u&&(r.delay=0,r.duration=1),!l&&i&&this.throttleGroups.add(i);var c=function(){var t;i&&o.throttleGroups.delete(i),null===(t=r.onStop)||void 0===t||t.call(r)};return this.throttles[a]=s,this.animateMany(t,e,Ed(Ed({},r),{onStop:c}))},e.prototype.tween=function(t){var e="tween-"+btoa(JSON.stringify(t)),r=Ed(Ed({},t),{driver:this.createDriver(e)});return xd(r)},e.prototype.createDriver=function(t,e){var r=this;return function(n){return{start:function(){r.updaters.push([t,n]),null==r.requestId&&r.startAnimationCycle(),e&&r.interactionManager.pause("animation_"+t)},stop:function(){delete r.controllers[t],r.updaters=r.updaters.filter((function(e){var r=Dd(e,1),n=r[0];return n!==t})),r.updaters.length<=0&&r.cancelAnimationFrame(),e&&r.interactionManager.resume("animation_"+t)},reset:function(){}}}},e.prototype.startAnimationCycle=function(){var t=this;if(0!==this.updaters.length){var e=function(r){if(t.requestId=requestAnimationFrame(e),t.readyToPlay){void 0===t.lastTime&&(t.lastTime=r);var n=r-t.lastTime;t.lastTime=r,t.debug&&ul.debug("AnimationManager - frame()",{updaterCount:t.updaters.length}),t.updaters.forEach((function(t){var e=Dd(t,2);e[0];var r=e[1];return r(n)})),t.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:n})}};this.requestId=requestAnimationFrame(e)}},e.prototype.cancelAnimationFrame=function(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0,this.lastTime=void 0)},e}(hd),Md=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Rd=function(){function t(t){this.states={},this.element=t}return t.prototype.updateCursor=function(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()},t.prototype.applyStates=function(){var t="default";Object.entries(this.states).reverse().slice(0,1).forEach((function(e){var r=Md(e,2);r[0];var n=r[1].style;return t=n})),this.element.style.cursor=t},t}(),_d=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _d(e,t),e.prototype.legendItemClick=function(t,e,r,n){var o={type:"legend-item-click",series:t,itemId:e,enabled:r,legendItemName:n};this.listeners.dispatch("legend-item-click",o)},e.prototype.legendItemDoubleClick=function(t,e,r,n,o){var i={type:"legend-item-double-click",series:t,itemId:e,enabled:r,legendItemName:o,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",i)},e.prototype.axisHover=function(t,e){var r={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",r)},e}(hd),Fd=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Id=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a};function Ld(t,e){return t===e||(null===t||void 0===t?void 0:t.series)===(null===e||void 0===e?void 0:e.series)&&((null===t||void 0===t?void 0:t.itemId)===(null===e||void 0===e?void 0:e.itemId)&&(null===t||void 0===t?void 0:t.datum)===(null===e||void 0===e?void 0:e.datum))}var Nd=function(t){function e(){var e=t.call(this)||this;return e.states={},e.activeHighlight=void 0,e}return Fd(e,t),e.prototype.updateHighlight=function(t,e){delete this.states[t],null!=e&&(this.states[t]={highlightedDatum:e}),this.applyStates()},e.prototype.getActiveHighlight=function(){return this.activeHighlight},e.prototype.applyStates=function(){var t=this.activeHighlight,e=void 0;Object.entries(this.states).reverse().slice(0,1).forEach((function(t){var r=Id(t,2);r[0];var n=r[1].highlightedDatum;return e=n})),this.activeHighlight=e;var r=!Ld(t,this.activeHighlight);if(r){var n={type:"highlight-change",previousHighlight:t,currentHighlight:this.activeHighlight};this.listeners.dispatch("highlight-change",n)}},e}(hd),Gd=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jd=function(){return jd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},jd.apply(this,arguments)},Bd=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Vd=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Hd=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zd=["pagehide","mousemove","mouseup","wheel"],Ud=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"],Wd="\n.ag-chart-wrapper {\n    touch-action: none;\n}\n",Kd=function(t){function e(r,n){var o,i,a,s;void 0===n&&(n=document);var l=t.call(this)||this;l.eventHandler=function(t){return l.processEvent(t)},l.mouseDown=!1,l.touchDown=!1,l.enabled=!0,l.pausers=[],l.rootElement=n.body,l.element=r;try{for(var u=Hd(Ud),c=u.next();!c.done;c=u.next()){var p=c.value;p.startsWith("touch")?r.addEventListener(p,l.eventHandler,{passive:!0}):r.addEventListener(p,l.eventHandler)}}catch(v){o={error:v}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}try{for(var d=Hd(zd),h=d.next();!h.done;h=d.next()){p=h.value;"wheel"===p?window.addEventListener(p,l.eventHandler,{passive:!1}):window.addEventListener(p,l.eventHandler)}}catch(y){a={error:y}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}if(e.interactionDocuments.indexOf(n)<0){var f=document.createElement("style");f.innerHTML=Wd,document.head.insertBefore(f,document.head.querySelector("style")),e.interactionDocuments.push(n)}return l}return Gd(e,t),e.prototype.destroy=function(){var t,e,r,n;try{for(var o=Hd(zd),i=o.next();!i.done;i=o.next()){var a=i.value;window.removeEventListener(a,this.eventHandler)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}try{for(var s=Hd(Ud),l=s.next();!l.done;l=s.next()){a=l.value;this.element.removeEventListener(a,this.eventHandler)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},e.prototype.resume=function(t){return this.pausers=this.pausers.filter((function(e){return e!==t})),this.enabled=this.pausers.length<=0,this.enabled},e.prototype.pause=function(t){this.enabled=!1,this.pausers.push(t)},e.prototype.processEvent=function(t){var e=this.decideInteractionEventTypes(t);e.length>0&&this.enabled&&this.dispatchEvent(t,e).catch((function(t){return ul.errorOnce(t)}))},e.prototype.dispatchEvent=function(t,e){return Bd(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u;return Vd(this,(function(c){if(r=this.calculateCoordinates(t),null==r)return[2];n=function(e){var n=o.buildEvent(jd(jd({event:t},r),{type:e}));o.listeners.cancellableDispatch(e,(function(){return n.consumed}),n)},o=this;try{for(i=Hd(e),a=i.next();!a.done;a=i.next())s=a.value,n(s)}catch(p){l={error:p}}finally{try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}}return[2]}))}))},e.prototype.decideInteractionEventTypes=function(t){switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":var e=t instanceof MouseEvent&&1===(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]},e.prototype.isEventOverElement=function(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element},e.prototype.calculateCoordinates=function(t){var r;if(t instanceof MouseEvent){var n=t.clientX,o=t.clientY,i=t.pageX,a=t.pageY,s=t.offsetX,l=t.offsetY;return this.fixOffsets(t,{clientX:n,clientY:o,pageX:i,pageY:a,offsetX:s,offsetY:l})}if("undefined"!==typeof TouchEvent&&t instanceof TouchEvent){var u=null!==(r=t.touches[0])&&void 0!==r?r:t.changedTouches[0];n=u.clientX,o=u.clientY,i=u.pageX,a=u.pageY;return jd(jd({},e.NULL_COORDS),{clientX:n,clientY:o,pageX:i,pageY:a})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return e.NULL_COORDS}},e.prototype.fixOffsets=function(t,e){var r=function(t){var e=0,r=0;while(t)e+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{x:e,y:r}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){var n=r(this.dragStartElement),o=r(t.target);e.offsetX-=n.x-o.x,e.offsetY-=n.y-o.y}return e},e.prototype.buildEvent=function(t){var e=t.type,r=t.event,n=t.clientX,o=t.clientY,i=t.offsetX,a=t.offsetY,s=t.pageX,l=t.pageY;if(!ou(i)||!ou(a)){var u=this.element.getBoundingClientRect();i=n-u.left,a=o-u.top}if(!ou(s)||!ou(l)){var c=this.rootElement.getBoundingClientRect();s=n-c.left,l=o-c.top}var p={type:e,offsetX:i,offsetY:a,pageX:s,pageY:l,sourceEvent:r,consumed:!1,consume:function(){return p.consumed=!0}};return p},e.interactionDocuments=[],e.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0},e}(hd),Xd=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yd=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},qd=function(){function t(t,e){var r=this;this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t;var n=e.addListener("hover",(function(t){return r.checkExclusiveRects(t)}));this.destroyFns.push((function(){return e.removeListener(n)}))}return t.prototype.updateTooltip=function(t,e,r){var n;null==r&&(r=null===(n=this.states[t])||void 0===n?void 0:n.content),this.states[t]={content:r,meta:e},this.applyStates()},t.prototype.updateExclusiveRect=function(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]},t.prototype.removeTooltip=function(t){delete this.states[t],this.applyStates()},t.prototype.getTooltipMeta=function(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta},t.prototype.destroy=function(){var t,e;try{for(var r=Xd(this.destroyFns),n=r.next();!n.done;n=r.next()){var o=n.value;o()}}catch(i){t={error:i}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.checkExclusiveRects=function(t){var e,r,n;try{for(var o=Xd(Object.entries(this.exclusiveAreas)),i=o.next();!i.done;i=o.next()){var a=Yd(i.value,2),s=a[0],l=a[1];if(l.containsPoint(t.offsetX,t.offsetY)){n=s;break}}}catch(u){e={error:u}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}n!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=n,this.applyStates())},t.prototype.applyStates=function(){var t,e=this,r=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states),n=void 0,o=void 0;if(r.reverse(),r.slice(0,1).forEach((function(t){var r,i=null!==(r=e.states[t])&&void 0!==r?r:{},a=i.content,s=i.meta;n=a,o=s})),void 0===o||void 0===n)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===n){var i=this.tooltip.isVisible();this.tooltip.show(o,void 0,i)}else this.tooltip.show(o,n);this.appliedState={content:n,meta:o}},t}(),Zd=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jd=function(){return Jd=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Jd.apply(this,arguments)},Qd=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$d=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},th=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.axes={},e}return Zd(e,t),e.prototype.updateAxes=function(t){var e=this,r=new Set(Object.keys(this.axes));t.forEach((function(t){var n,o,i;r.delete(t.id),null!==(n=(o=e.axes)[i=t.id])&&void 0!==n||(o[i]=new eh(t))})),r.forEach((function(t){delete e.axes[t]})),this.initialZoom&&(this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0)},e.prototype.updateZoom=function(t,e){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach((function(r){r.updateZoom(t,null===e||void 0===e?void 0:e[r.getDirection()])})),this.applyStates()):this.initialZoom={callerId:t,newZoom:e}},e.prototype.updateAxisZoom=function(t,e,r){var n;null===(n=this.axes[e])||void 0===n||n.updateZoom(t,r),this.applyStates()},e.prototype.getZoom=function(){var t,e;if(Object.values(this.axes).forEach((function(r){r.getDirection()===oc.X?t=r.getZoom():r.getDirection()===oc.Y&&(e=r.getZoom())})),t||e)return{x:t,y:e}},e.prototype.getAxisZoom=function(t){var e;return null===(e=this.axes[t])||void 0===e?void 0:e.getZoom()},e.prototype.getAxisZooms=function(){var t,e,r={};try{for(var n=Qd(Object.entries(this.axes)),o=n.next();!o.done;o=n.next()){var i=$d(o.value,2),a=i[0],s=i[1];r[a]={direction:s.getDirection(),zoom:s.getZoom()}}}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},e.prototype.applyStates=function(){var t,e,r=Object.values(this.axes).map((function(t){return t.applyStates()})).some(Boolean);if(r){var n=this.getZoom(),o={};try{for(var i=Qd(Object.entries(this.axes)),a=i.next();!a.done;a=i.next()){var s=$d(a.value,2),l=s[0],u=s[1];o[l]=u.getZoom()}}catch(p){t={error:p}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}var c=Jd(Jd({type:"zoom-change"},null!==n&&void 0!==n?n:{}),{axes:o});this.listeners.dispatch("zoom-change",c)}},e}(hd),eh=function(){function t(t){this.states={},this.currentZoom=void 0,this.axis=t}return t.prototype.getDirection=function(){return this.axis.direction},t.prototype.updateZoom=function(t,e){delete this.states[t],null!=e&&(this.states[t]=Jd({},e))},t.prototype.getZoom=function(){return this.currentZoom},t.prototype.applyStates=function(){var t,e,r=this.currentZoom,n=Object.keys(this.states)[Object.keys(this.states).length-1];this.currentZoom=Jd({},this.states[n]);var o=(null===r||void 0===r?void 0:r.min)!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||(null===r||void 0===r?void 0:r.max)!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max);return o},t}(),rh=function(){return rh=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},rh.apply(this,arguments)};function nh(t){return"layout-complete"!==t}function oh(t){return"layout-complete"===t}var ih,ah=function(){function t(){this.layoutProcessors=new dd,this.listeners=new dd}return t.prototype.addListener=function(t,e){if(nh(t))return this.layoutProcessors.addListener(t,e);if(oh(t))return this.listeners.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)},t.prototype.removeListener=function(t){this.listeners.removeListener(t),this.layoutProcessors.removeListener(t)},t.prototype.dispatchPerformLayout=function(t,e){var r=this.layoutProcessors.reduceDispatch(t,(function(t,e){var r=t.shrinkRect;return[rh(rh({},e),{shrinkRect:r})]}),e);return null!==r&&void 0!==r?r:e},t.prototype.dispatchLayoutComplete=function(t){this.listeners.dispatch("layout-complete",t)},t}(),sh=function(){function t(t){this.getSeries=t}return t}();(function(t){t[t["FULL"]=0]="FULL",t[t["PROCESS_DATA"]=1]="PROCESS_DATA",t[t["PERFORM_LAYOUT"]=2]="PERFORM_LAYOUT",t[t["SERIES_UPDATE"]=3]="SERIES_UPDATE",t[t["TOOLTIP_RECALCULATION"]=4]="TOOLTIP_RECALCULATION",t[t["SCENE_RENDER"]=5]="SCENE_RENDER",t[t["NONE"]=6]="NONE"})(ih||(ih={}));var lh=function(){function t(t){this.updateCallback=t}return t.prototype.update=function(t,e){void 0===t&&(t=ih.FULL);var r=void 0===e?{}:e,n=r.forceNodeDataRefresh,o=void 0!==n&&n;this.updateCallback(t,{forceNodeDataRefresh:o})},t}(),uh=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ch=function(){function t(){this.range="tooltip"}return uh([du(Uu("tooltip","node"))],t.prototype,"range",void 0),t}(),ph=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dh=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},hh=function(){function t(t,e,r){void 0===r&&(r=!0),this._nodes=[],this._data=[],this._datumNodeIndices=new Map,this._garbage=[],this._garbageCollection=!0,this._parent=t,this._factory=Object.prototype.isPrototypeOf.call(el,e)?function(){return new e}:e,this._garbageCollection=r}return t.select=function(e,r,n){return void 0===n&&(n=!0),new t(e,r,n)},t.prototype.each=function(t){return this._nodes.forEach((function(e,r){return t(e,e.datum,r)})),this},t.prototype.update=function(t,e,r){var n,o,i=this,a=this._data,s=this._parent,l=this._factory,u=new Map;if(r?t.forEach((function(t,n){var o=r(t);if(u.set(o,n),!i._datumNodeIndices.has(o)){var a=l(t);a.datum=t,null===e||void 0===e||e(a),s.appendChild(a),i._nodes.push(a),i._datumNodeIndices.set(o,i._nodes.length-1)}})):t.length>a.length?t.slice(a.length).forEach((function(t){var r=l(t);r.datum=t,null===e||void 0===e||e(r),s.appendChild(r),i._nodes.push(r)})):t.length<a.length&&this._nodes.splice(t.length).forEach((function(t){s.removeChild(t)})),this._data=t.slice(0),r){try{for(var c=ph(this._datumNodeIndices),p=c.next();!p.done;p=c.next()){var d=dh(p.value,2),h=d[0],f=d[1],v=u.get(h);void 0!==v?this._nodes[f].datum=t[v]:this._garbage.push(h)}}catch(g){n={error:g}}finally{try{p&&!p.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}this._garbageCollection&&this.cleanup()}else for(var y=0;y<t.length;y++)this._nodes[y].datum=this._data[y];return this},t.prototype.clear=function(){return this.update([]),this},t.prototype.cleanup=function(){var t,e,r=this;if(0!==this._garbage.length){this._garbage.forEach((function(t){var e=r._datumNodeIndices.get(t);if(void 0!==e){var n=r._nodes[e];delete r._nodes[e],r._datumNodeIndices.delete(t),n&&r._parent.removeChild(n)}}));var n=0,o=this._datumNodeIndices.entries(),i=new Map;try{for(var a=ph(o),s=a.next();!s.done;s=a.next()){var l=dh(s.value,2),u=l[0],c=l[1];i.set(c,u)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this._nodes=this._nodes.filter((function(t,e){if(void 0===t)return!1;var o=i.get(e);return r._datumNodeIndices.set(o,n),n++,!0})),this._garbage=[]}},t.selectAll=function(t,e){var r=[],n=function(t){e(t)&&r.push(t),t.children.forEach(n)};return n(t),r},t.selectByClass=function(e,r){return t.selectAll(e,(function(t){return t instanceof r}))},t.selectByTag=function(e,r){return t.selectAll(e,(function(t){return t.tag===r}))},t.prototype.select=function(e){return t.selectAll(this._parent,e)},t.prototype.selectByClass=function(t){return this.select((function(e){return e instanceof t}))},t.prototype.selectByTag=function(t){return this.select((function(e){return e.tag===t}))},t.prototype.nodes=function(){return this._nodes},t}();function fh(t,e){var r=-e/t;return 0!==t&&r>=0&&r<=1?[r]:[]}function vh(t,e,r){if(0===t)return fh(e,r);var n=e*e-4*t*r,o=[];if(0===n){var i=-e/(2*t);i>=0&&i<=1&&o.push(i)}else if(n>0){var a=Math.sqrt(n),s=(-e-a)/(2*t),l=(-e+a)/(2*t);s>=0&&s<=1&&o.push(s),l>=0&&l<=1&&o.push(l)}return o}function yh(t,e,r,n){if(0===t)return vh(e,r,n);var o=e/t,i=r/t,a=n/t,s=(3*i-o*o)/9,l=(9*o*i-27*a-2*o*o*o)/54,u=s*s*s+l*l,c=1/3,p=[];if(u>=0){var d=Math.sqrt(u),h=Math.sign(l+d)*Math.pow(Math.abs(l+d),c),f=Math.sign(l-d)*Math.pow(Math.abs(l-d),c),v=Math.abs(Math.sqrt(3)*(h-f)/2),y=-c*o+(h+f);if(y>=0&&y<=1&&p.push(y),0===v){var g=-c*o-(h+f)/2;g>=0&&g<=1&&p.push(g)}}else{var m=Math.acos(l/Math.sqrt(-s*s*s)),b=c*o,C=2*Math.sqrt(-s),S=C*Math.cos(c*m)-b,w=C*Math.cos(c*(m+2*Math.PI))-b,x=C*Math.cos(c*(m+4*Math.PI))-b;S>=0&&S<=1&&p.push(S),w>=0&&w<=1&&p.push(w),x>=0&&x<=1&&p.push(x)}return p}var gh=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function mh(t,e,r,n,o,i,a,s){var l=(r-t)*(s-i)-(n-e)*(a-o);if(0===l)return null;var u=((a-o)*(e-i)-(t-o)*(s-i))/l,c=((r-t)*(e-i)-(n-e)*(t-o))/l;return u>=0&&u<=1&&c>=0&&c<=1?{x:t+u*(r-t),y:e+u*(n-e)}:null}function bh(t,e,r,n,o,i,a,s,l,u,c,p){var d,h,f=[],v=u-p,y=c-l,g=l*(p-u)-u*(c-l),m=Ch(t,r,o,a),b=Ch(e,n,i,s),C=v*m[0]+y*b[0],S=v*m[1]+y*b[1],w=v*m[2]+y*b[2],x=v*m[3]+y*b[3]+g,O=yh(C,S,w,x);try{for(var E=gh(O),T=E.next();!T.done;T=E.next()){var P=T.value,D=P*P,A=P*D,M=m[0]*A+m[1]*D+m[2]*P+m[3],R=b[0]*A+b[1]*D+b[2]*P+b[3],_=void 0;_=l!==c?(M-l)/(c-l):(R-u)/(p-u),_>=0&&_<=1&&f.push({x:M,y:R})}}catch(k){d={error:k}}finally{try{T&&!T.done&&(h=E.return)&&h.call(E)}finally{if(d)throw d.error}}return f}function Ch(t,e,r,n){return[3*e-t-3*r+n,3*t-6*e+3*r,-3*t+3*e,t]}function Sh(t,e,r,n,o,i,a,s,l,u){var c=(u-s)/(l-a),p=s-c*a,d=Math.pow(c,2)+1,h=2*(c*(p-e)-t),f=Math.pow(t,2)+Math.pow(p-e,2)-Math.pow(r,2),v=Math.pow(h,2)-4*d*f;if(v<0)return[];var y=(-h+Math.sqrt(v))/2/d,g=(-h-Math.sqrt(v))/2/d,m=[];return[y,g].forEach((function(t){var e=t>=Math.min(a,l)&&t<=Math.max(a,l);if(e){var r=c*t,s=Al(i?o:n),u=Al(i?n:o),p=Al(Math.atan2(r,t));u<=s&&(u+=2*Math.PI),p<s&&(p+=2*Math.PI),p>=s&&p<=u&&m.push({x:t,y:r})}})),m}var wh,xh=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(t){t[t["Move"]=0]="Move",t[t["Line"]=1]="Line",t[t["Arc"]=2]="Arc",t[t["Curve"]=3]="Curve",t[t["ClosePath"]=4]="ClosePath"})(wh||(wh={}));var Oh=function(){function t(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}return t.prototype.isDirty=function(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(var t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1},t.prototype.draw=function(t){var e,r,n=this.commands,o=this.params,i=0;t.beginPath();try{for(var a=xh(n),s=a.next();!s.done;s=a.next()){var l=s.value;switch(l){case wh.Move:t.moveTo(o[i++],o[i++]);break;case wh.Line:t.lineTo(o[i++],o[i++]);break;case wh.Curve:t.bezierCurveTo(o[i++],o[i++],o[i++],o[i++],o[i++],o[i++]);break;case wh.Arc:t.arc(o[i++],o[i++],o[i++],o[i++],o[i++],1===o[i++]);break;case wh.ClosePath:t.closePath();break}}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}0===n.length&&t.closePath()},t.prototype.moveTo=function(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(wh.Move),this.params.push(t,e)},t.prototype.lineTo=function(t,e){this.xy?(this.commands.push(wh.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)},t.prototype.rect=function(t,e,r,n){this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+n),this.lineTo(t,e+n),this.closePath()},t.prototype.arc=function(t,e,r,n,o,i){void 0===i&&(i=!1);var a=t+r*Math.cos(o),s=e+r*Math.sin(o);this.xy?(this.xy[0]=a,this.xy[1]=s):this.xy=[a,s],this.commands.push(wh.Arc),this.params.push(t,e,r,n,o,i?1:0)},t.prototype.cubicCurveTo=function(t,e,r,n,o,i){this.xy||this.moveTo(t,e),this.commands.push(wh.Curve),this.params.push(t,e,r,n,o,i),this.xy&&(this.xy[0]=o,this.xy[1]=i)},Object.defineProperty(t.prototype,"closedPath",{get:function(){return this._closedPath},enumerable:!1,configurable:!0}),t.prototype.closePath=function(){this.xy&&(this.xy=void 0,this.commands.push(wh.ClosePath),this._closedPath=!0)},t.prototype.clear=function(t){var e=void 0===t?{trackChanges:!1}:t,r=e.trackChanges;r?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1},t.prototype.isPointInPath=function(t,e){for(var r=this.commands,n=this.params,o=r.length,i=-1e4,a=-1e4,s=NaN,l=NaN,u=0,c=0,p=0,d=0,h=0;d<o;d++)switch(r[d]){case wh.Move:isNaN(s)||mh(s,l,u,c,i,a,t,e)&&p++,u=n[h++],s=u,c=n[h++],l=c;break;case wh.Line:mh(u,c,n[h++],n[h++],i,a,t,e)&&p++,u=n[h-2],c=n[h-1];break;case wh.Curve:p+=bh(u,c,n[h++],n[h++],n[h++],n[h++],n[h++],n[h++],i,a,t,e).length,u=n[h-2],c=n[h-1];break;case wh.Arc:p+=Sh(n[h++],n[h++],n[h++],n[h++],n[h++],Boolean(n[h++]),i,a,t,e).length,u=n[h-2],c=n[h-1];break;case wh.ClosePath:isNaN(s)||mh(s,l,u,c,i,a,t,e)&&p++;break}return p%2===1},t}(),Eh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Th=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};function Ph(t){var e=null!==t&&void 0!==t?t:{},r=e.redraw,n=void 0===r?_s.MAJOR:r,o=e.changeCb,i=e.convertor;return Us({redraw:n,type:"path",convertor:i,changeCb:o})}var Dh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.path=new Oh,e._dirtyPath=!0,e}return Eh(e,t),Object.defineProperty(e.prototype,"dirtyPath",{get:function(){return this._dirtyPath},set:function(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,_s.MAJOR))},enumerable:!1,configurable:!0}),e.prototype.checkPathDirty=function(){var t,e;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e)},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(r.x,r.y)},e.prototype.isDirtyPath=function(){return!1},e.prototype.updatePath=function(){},e.prototype.render=function(e){var r,n,o=e.ctx,i=e.forceRender,a=e.stats;if(this.dirty!==_s.NONE||i){if(this.computeTransformMatrix(),this.matrix.toContext(o),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(o.save(),"normal"===this.clipMode&&(this.clipPath.draw(o),o.clip()),this.path.draw(o),this.fillStroke(o),"punch-out"===this.clipMode){this.clipPath.draw(o),o.clip();var s=null!==(r=this.computeBBox())&&void 0!==r?r:{},l=s.x,u=void 0===l?-1e4:l,c=s.y,p=void 0===c?-1e4:c,d=s.width,h=void 0===d?2e4:d,f=s.height,v=void 0===f?2e4:f;o.clearRect(u,p,h,v)}o.restore()}else this.path.draw(o),this.fillStroke(o);null===(n=this.fillShadow)||void 0===n||n.markClean(),t.prototype.render.call(this,e)}else a&&(a.nodesSkipped+=this.nodeCount.count)},e.className="Path",Th([Ph()],e.prototype,"clipPath",void 0),Th([Ph()],e.prototype,"clipMode",void 0),e}(Nl),Ah=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mh=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Rh=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.x=0,e.y=0,e.size=12,e}return Ah(e,t),e.prototype.computeBBox=function(){var t=this,e=t.x,r=t.y,n=t.size,o=n/2;return new Ls(e-o,r-o,n,n)},e.prototype.applyPath=function(t,e){var r,n,o=this.path,i=this,a=i.x,s=i.y;o.clear();try{for(var l=Rh(e),u=l.next();!u.done;u=l.next()){var c=u.value,p=c.x,d=c.y,h=c.t;a+=p*t,s+=d*t,"move"===h?o.moveTo(a,s):o.lineTo(a,s)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}o.closePath()},Mh([Ph()],e.prototype,"x",void 0),Mh([Ph()],e.prototype,"y",void 0),Mh([Ph({convertor:Math.abs})],e.prototype,"size",void 0),e}(Dh),kh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kh(e,t),e.prototype.updatePath=function(){var t=this,e=t.path,r=t.x,n=t.y,o=this.size/2;e.clear(),e.moveTo(this.align(r-o),this.align(n-o)),e.lineTo(this.align(r+o),this.align(n-o)),e.lineTo(this.align(r+o),this.align(n+o)),e.lineTo(this.align(r-o),this.align(n+o)),e.closePath()},e.className="Square",e}(_h),Ih=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lh=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Nh=function(t){function e(){var e=t.call(this,{name:"markerLabelGroup"})||this;e.label=new zl,e._marker=new Fh,e._markerSize=15,e._spacing=8;var r=e.label;return r.textBaseline="middle",r.fontSize=12,r.fontFamily="Verdana, sans-serif",r.fill="black",r.y=ks.has.textMetrics?1:0,e.append([e.marker,r]),e.update(),e}return Ih(e,t),Object.defineProperty(e.prototype,"marker",{get:function(){return this._marker},set:function(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markerSize",{get:function(){return this._markerSize},set:function(t){this._markerSize!==t&&(this._markerSize=t,this.update())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){return this._spacing},set:function(t){this._spacing!==t&&(this._spacing=t,this.update())},enumerable:!1,configurable:!0}),e.prototype.update=function(){var t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing},e.prototype.render=function(e){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,t.prototype.render.call(this,e)},e.className="MarkerLabel",Lh([ip("label")],e.prototype,"text",void 0),Lh([ip("label")],e.prototype,"fontStyle",void 0),Lh([ip("label")],e.prototype,"fontWeight",void 0),Lh([ip("label")],e.prototype,"fontSize",void 0),Lh([ip("label")],e.prototype,"fontFamily",void 0),Lh([ip("label","fill")],e.prototype,"color",void 0),Lh([ip("marker","fill")],e.prototype,"markerFill",void 0),Lh([ip("marker","stroke")],e.prototype,"markerStroke",void 0),Lh([ip("marker","strokeWidth")],e.prototype,"markerStrokeWidth",void 0),Lh([ip("marker","fillOpacity")],e.prototype,"markerFillOpacity",void 0),Lh([ip("marker","strokeOpacity")],e.prototype,"markerStrokeOpacity",void 0),e}(yl),Gh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Gh(e,t),e.prototype.updatePath=function(){var t=this,e=t.x,r=t.y,n=t.path,o=t.size,i=o/2;n.clear(),n.arc(e,r,i,0,2*Math.PI),n.closePath()},e.className="Circle",e}(_h),Bh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bh(e,t),e.prototype.updatePath=function(){var r=this.size/4.2;t.prototype.applyPath.call(this,r,e.moves)},e.className="Cross",e.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}],e}(_h),Hh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hh(e,t),e.prototype.updatePath=function(){var r=this.size/2;t.prototype.applyPath.call(this,r,e.moves)},e.className="Diamond",e.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}],e}(_h),Uh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Uh(e,t),e.prototype.rad=function(t){return t/180*Math.PI},e.prototype.updatePath=function(){var t=this,e=t.x,r=t.path,n=t.size,o=t.rad,i=n/4,a=this.y+i/2;r.clear(),r.arc(e-i,a-i,i,o(130),o(330)),r.arc(e+i,a-i,i,o(220),o(50)),r.lineTo(e,a+i),r.closePath()},e.className="Heart",e}(_h),Kh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Kh(e,t),e.prototype.updatePath=function(){var r=this.size/3;t.prototype.applyPath.call(this,r,e.moves)},e.className="Plus",e.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}],e}(_h),Yh=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yh(e,t),e.prototype.updatePath=function(){var r=1.1*this.size;t.prototype.applyPath.call(this,r,e.moves)},e.className="Triangle",e.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}],e}(_h);function Zh(t){if(void 0===t&&(t=Fh),"string"===typeof t)switch(t){case"circle":return jh;case"cross":return Vh;case"diamond":return zh;case"heart":return Wh;case"plus":return Xh;case"triangle":return qh;default:return Fh}return"function"===typeof t?t:Fh}var Jh=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Qh(t){var e=t.orientation,r=t.bboxes,n=t.maxHeight,o=t.maxWidth,i=t.itemPaddingY,a=void 0===i?0:i,s=t.itemPaddingX,l=void 0===s?0:s,u=t.forceResult,c=void 0!==u&&u,p="horizontal"===e,d={max:p?o:n,fn:p?function(t){return t.width}:function(t){return t.height},padding:p?l:a},h={max:p?n:o,fn:p?function(t){return t.height}:function(t){return t.width},padding:p?a:l},f=0,v=[];while(f<r.length){var y=r.slice(f),g=$h(y,f,d,h,c);if(!g)return;f+=g.processedBBoxCount,v.push(g.pageIndices)}return ef(v,e,r,a,l)}function $h(t,e,r,n,o){var i=1,a=nf(t,r);if(a<i){if(!o)return;a=i}for(var s=a;s>=i;s--){var l=tf(t,e,s,r,n,o);if(null==l&&s<=i)return;if(null!=l){if("number"!==typeof l){var u=l.length*l[0].length;return{processedBBoxCount:u,pageIndices:l}}if(l<=i)return;s=l<s&&l>i?l:s}}}function tf(t,e,r,n,o,i){for(var a,s=[],l=0,u=0,c=[],p=[],d=0;d<t.length;d++){var h=(d+r)%r;0===h&&(l+=u,u=0,c.length>0&&s.push(c),c=[]);var f=n.fn(t[d])+n.padding;p[h]=Math.max(null!==(a=p[h])&&void 0!==a?a:0,f),u=Math.max(u,o.fn(t[d])+o.padding);var v=l+u,y=!i||s.length>0;if(v>o.max&&y){c=[];break}var g=p.reduce((function(t,e){return t+e}),0);if(g>n.max&&!i)return p.length<r?p.length:void 0;c.push(d+e)}return c.length>0&&s.push(c),s.length>0?s:void 0}function ef(t,e,r,n,o){var i=0,a=0,s=t.map((function(t){"horizontal"===e&&(t=rf(t));var s=0,l=t.map((function(t){var e=t.map((function(t){return s=Math.max(t,s),r[t]})),i=0,a=0;return e.forEach((function(t){i+=t.height+n,a=Math.max(a,t.width+o)})),{indices:t,bboxes:e,columnHeight:i,columnWidth:a}})),u=0,c=0;return l.forEach((function(t){u+=t.columnWidth,c=Math.max(c,t.columnHeight)})),i=Math.max(u,i),a=Math.max(c,a),{columns:l,startIndex:t[0][0],endIndex:s,pageWidth:u,pageHeight:c}}));return{pages:s,maxPageWidth:i,maxPageHeight:a}}function rf(t){var e,r,n=[];try{for(var o=Jh(t[0]),i=o.next();!i.done;i=o.next()){i.value;n.push([])}}catch(a){e={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return t.forEach((function(t,e){t.forEach((function(t,r){n[r][e]=t}))})),n}function nf(t,e){for(var r=t.length,n=0,o=0;o<r;o++)if(n+=e.fn(t[o])+e.padding,n>e.max){var i=r/o;return i<2?Math.ceil(r/2):o}return r}var of=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},af=function(){function t(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}return of([du(Fu)],t.prototype,"color",void 0),of([du(Yu)],t.prototype,"fontStyle",void 0),of([du(Zu)],t.prototype,"fontWeight",void 0),of([du(Gu(0))],t.prototype,"fontSize",void 0),of([du(Tu)],t.prototype,"fontFamily",void 0),t}(),sf=function(){function t(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}return of([du(Gu(0))],t.prototype,"size",void 0),of([du(Iu)],t.prototype,"fill",void 0),of([du(ju(0,1))],t.prototype,"fillOpacity",void 0),of([du(Iu)],t.prototype,"stroke",void 0),of([du(Gu(0))],t.prototype,"strokeWidth",void 0),of([du(Gu(0,1))],t.prototype,"strokeOpacity",void 0),t}(),lf=function(){function t(){this.size=15,this._shape=qh,this.padding=8}return Object.defineProperty(t.prototype,"shape",{get:function(){return this._shape},set:function(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()},enumerable:!1,configurable:!0}),of([du(Gu(0))],t.prototype,"size",void 0),of([du(Gu(0))],t.prototype,"padding",void 0),t}(),uf=function(){function t(t,e,r,n){var o=this;this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=r,this.cursorManager=n,this.id=Vs(this),this.group=new yl({name:"pagination"}),this.labelNode=new zl,this.marker=new lf,this.activeStyle=new sf,this.inactiveStyle=new sf,this.highlightStyle=new sf,this.label=new af,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new qh,this._previousButton=new qh;var i=this.labelNode;i.textBaseline="middle",i.fontSize=12,i.fontFamily="Verdana, sans-serif",i.fill="black",i.y=ks.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,i]),this.interactionManager.addListener("click",(function(t){return o.onPaginationClick(t)})),this.interactionManager.addListener("hover",(function(t){return o.onPaginationMouseMove(t)})),this.marker.parent=this,this.update(),this.updateMarkers()}return Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),t.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible},Object.defineProperty(t.prototype,"orientation",{get:function(){return this._orientation},set:function(t){switch(this._orientation=t,t){case"horizontal":this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break;case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextButton",{get:function(){return this._nextButton},set:function(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousButton",{get:function(){return this._previousButton},set:function(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()},t.prototype.updatePositions=function(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()},t.prototype.updateLabelPosition=function(){var t=this.marker,e=t.size,r=t.padding;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+r},t.prototype.updateNextButtonPosition=function(){var t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding},t.prototype.updateLabel=function(){var t=this,e=t.currentPage,r=t.totalPages,n=t.labelNode,o=t.label,i=o.color,a=o.fontStyle,s=o.fontWeight,l=o.fontSize,u=o.fontFamily;n.text=e+1+" / "+r,n.fill=i,n.fontStyle=a,n.fontWeight=s,n.fontSize=l,n.fontFamily=u},t.prototype.updateMarkers=function(){var t=this,e=t.nextButton,r=t.previousButton,n=t.nextButtonDisabled,o=t.previousButtonDisabled,i=t.activeStyle,a=t.inactiveStyle,s=t.highlightStyle,l=t.highlightActive,u=function(t,e){return e?a:t===l?s:i};this.updateMarker(e,u("next",n)),this.updateMarker(r,u("previous",o))},t.prototype.updateMarker=function(t,e){var r,n=this.marker.size;t.size=n,t.fill=e.fill,t.fillOpacity=null!==(r=e.fillOpacity)&&void 0!==r?r:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity},t.prototype.enableOrDisableButtons=function(){var t=this,e=t.currentPage,r=t.totalPages,n=0===r,o=e===r-1,i=0===e;this.nextButtonDisabled=o||n,this.previousButtonDisabled=i||n},t.prototype.nextButtonContainsPoint=function(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)},t.prototype.previousButtonContainsPoint=function(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)},t.prototype.onPaginationClick=function(t){var e=t.offsetX,r=t.offsetY;this.nextButtonContainsPoint(e,r)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,r)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())},t.prototype.onPaginationMouseMove=function(t){var e=t.offsetX,r=t.offsetY;this.nextButtonContainsPoint(e,r)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,r)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(ih.SCENE_RENDER)},t.prototype.onPaginationChanged=function(){this.pageUpdateCallback(this.currentPage)},t.prototype.incrementPage=function(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)},t.prototype.decrementPage=function(){this.currentPage=Math.max(this.currentPage-1,0)},t.prototype.onMarkerShapeChange=function(){var t=Zh(this.marker.shape||qh);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(ih.SCENE_RENDER)},t.prototype.attachPagination=function(t){t.append(this.group)},t.prototype.computeBBox=function(){return this.group.computeBBox()},t.className="Pagination",t}(),cf=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},pf=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},df=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},hf=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ff=["horizontal","vertical"],vf=hu((function(t,e){return fu(t,e,(function(t){return ff.includes(t)}))}),"expecting an orientation keyword such as 'horizontal' or 'vertical'"),yf=function(){function t(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}return cf([du(ju(0))],t.prototype,"maxLength",void 0),cf([du(Fu)],t.prototype,"color",void 0),cf([du(Yu)],t.prototype,"fontStyle",void 0),cf([du(Zu)],t.prototype,"fontWeight",void 0),cf([du(Gu(0))],t.prototype,"fontSize",void 0),cf([du(Tu)],t.prototype,"fontFamily",void 0),cf([du(xu)],t.prototype,"formatter",void 0),t}(),gf=function(){function t(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}return Object.defineProperty(t.prototype,"shape",{get:function(){return this._shape},set:function(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()},enumerable:!1,configurable:!0}),cf([du(Gu(0))],t.prototype,"size",void 0),cf([du(Gu(0))],t.prototype,"padding",void 0),cf([du(Gu(0))],t.prototype,"strokeWidth",void 0),t}(),mf=function(){function t(){this.marker=new gf,this.label=new yf,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}return cf([du(ju(0))],t.prototype,"maxWidth",void 0),cf([du(Gu(0))],t.prototype,"paddingX",void 0),cf([du(Gu(0))],t.prototype,"paddingY",void 0),cf([du(Ou)],t.prototype,"toggleSeriesVisible",void 0),t}(),bf=function(){function t(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}return cf([du(xu)],t.prototype,"legendItemClick",void 0),t}(),Cf=function(){function t(t){var e,r=this;this.ctx=t,this.id=Vs(this),this.group=new yl({name:"legend",layer:!0,zIndex:nc.LEGEND_ZINDEX}),this.itemSelection=hh.select(this.group,Nh),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new mf,this.listeners=new bf,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new uf((function(e){return t.updateService.update(e)}),(function(t){return r.updatePageNumber(t)}),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;var n=[t.interactionManager.addListener("click",(function(t){return r.checkLegendClick(t)})),t.interactionManager.addListener("dblclick",(function(t){return r.checkLegendDoubleClick(t)})),t.interactionManager.addListener("hover",(function(t){return r.handleLegendMouseMove(t)}))],o=[t.layoutService.addListener("start-layout",(function(t){return r.positionLegend(t.shrinkRect)}))];(e=this.destroyFns).push.apply(e,df(df(df([],pf(n.map((function(e){return function(){return t.interactionManager.removeListener(e)}})))),pf(o.map((function(e){return function(){return t.layoutService.removeListener(e)}})))),[function(){return r.detachLegend()}]))}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),t.prototype.getOrientation=function(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}},t.prototype.destroy=function(){this.destroyFns.forEach((function(t){return t()}))},t.prototype.onMarkerShapeChange=function(){this.itemSelection.clear(),this.group.markDirty(this.group,_s.MINOR)},t.prototype.getCharacterWidths=function(t){var e=this.characterWidths;if(e.has(t))return e.get(t);var r={"...":ks.getTextSize("...",t).width};return e.set(t,r),r},Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),t.prototype.updateGroupVisibility=function(){this.group.visible=this.enabled&&this.visible&&this.data.length>0},t.prototype.attachLegend=function(t){t.append(this.group)},t.prototype.detachLegend=function(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)},t.prototype.getItemLabel=function(t){var e=this.ctx.callbackCache,r=this.item.label.formatter;return r?e.call(r,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text},t.prototype.performLayout=function(t,e){var r=this,n=this.item,o=n.paddingX,i=n.paddingY,a=n.label,s=n.maxWidth,l=n.marker,u=l.size,c=l.padding,p=l.shape,d=n.label,h=d.maxLength,f=void 0===h?1/0:h,v=d.fontStyle,y=d.fontWeight,g=d.fontSize,m=d.fontFamily,b=df([],pf(this.data));this.reverseOrder&&b.reverse(),this.itemSelection.update(b);var C=[],S=Wl(a),w=.8,x=null!==s&&void 0!==s?s:t*w,O=u+c+o;if(this.itemSelection.each((function(t,e){var n,o=Zh(null!==p&&void 0!==p?p:e.marker.shape);t.marker&&t.marker instanceof o||(t.marker=new o),t.markerSize=u,t.spacing=c,t.fontStyle=v,t.fontWeight=y,t.fontSize=g,t.fontFamily=m;var i=null!==(n=e.itemId)&&void 0!==n?n:e.id,a=r.getItemLabel(e),s=(null!==a&&void 0!==a?a:"<unknown>").replace(/\r?\n/g," ");t.text=r.truncate(s,f,x,O,S,i),C.push(t.computeBBox())})),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;var E=this.size,T=this.oldSize;E[0]=t,E[1]=e,E[0]===T[0]&&E[1]===T[1]||(T[0]=E[0],T[1]=E[1]);var P=this.updatePagination(C,t,e),D=P.pages,A=P.maxPageHeight,M=P.maxPageWidth;this.pages=D,this.maxPageSize=[M-o,A-i];var R=this.pagination.currentPage,_=this.pages[R];this.pages.length<1||!_?this.visible=!1:(this.visible=!0,this.updatePositions(R),this.update())},t.prototype.truncate=function(t,e,r,n,o,i){var a,s,l="...",u=t.split(""),c=!1;t.length>e&&(t=""+t.substring(0,e),c=!0);var p=Math.floor(n+ks.getTextSize(t,o).width);if(p>r){var d="",h=this.getCharacterWidths(o),f=n+h[l];try{for(var v=hf(u),y=v.next();!y.done;y=v.next()){var g=y.value;if(h[g]||(h[g]=ks.getTextSize(g,o).width),f+=h[g],f>r)break;d+=g}}catch(m){a={error:m}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}t=d,c=!0}return c?(t+=l,this.truncatedItems.add(i)):this.truncatedItems.delete(i),t},t.prototype.updatePagination=function(t,e,r){var n=this.getOrientation(),o=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;var i=this.calculatePagination(t,e,r),a=i.pages,s=i.maxPageHeight,l=i.maxPageWidth,u=i.paginationBBox,c=i.paginationVertical,p=a.findIndex((function(t){return t.endIndex>=o}));this.pagination.currentPage=Math.min(Math.max(p,0),a.length-1);var d=this.item,h=d.paddingX,f=d.paddingY,v=8,y=l-h,g=s-f,m=0,b=-u.y-this.item.marker.size/2;return c?b+=g+v:(m+=-u.x+y+v,b+=(g-u.height)/2),this.pagination.translationX=m,this.pagination.translationY=b,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:s,maxPageWidth:l,pages:a}},t.prototype.calculatePagination=function(t,e,r){var n,o,i,a=this.item,s=a.paddingX,l=a.paddingY,u=this.getOrientation(),c=["left","right"].includes(this.position),p=this.pagination.computeBBox(),d=new Ls(0,0,0,0),h=[],f=0,v=0,y=0,g=function(t){var e=t.width,r=t.height;return e===p.width&&r===p.height},m=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(y++>10){ul.warn("unable to find stable legend layout.");break}p=d;var b=e-(c?0:p.width),C=r-(c?p.height:0),S=Qh({orientation:u,bboxes:t,maxHeight:C,maxWidth:b,itemPaddingY:l,itemPaddingX:s,forceResult:m});h=null!==(n=null===S||void 0===S?void 0:S.pages)&&void 0!==n?n:[],f=null!==(o=null===S||void 0===S?void 0:S.maxPageWidth)&&void 0!==o?o:0,v=null!==(i=null===S||void 0===S?void 0:S.maxPageHeight)&&void 0!==i?i:0;var w=h.length;if(this.pagination.visible=w>1,this.pagination.totalPages=w,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while(!g(d));return{maxPageWidth:f,maxPageHeight:v,pages:h,paginationBBox:p,paginationVertical:c}},t.prototype.updatePositions=function(t){void 0===t&&(t=0);var e=this,r=e.item.paddingY,n=e.itemSelection,o=e.pages;if(!(o.length<1)&&o[t]){var i=o[t],a=i.columns,s=i.startIndex,l=i.endIndex,u=0,c=0,p=a.length,d=a[0].indices.length,h="horizontal"===this.getOrientation(),f=a[0].bboxes[0].height+r,v=[];n.each((function(t,e,r){var n,o;if(r<s||r>l)t.visible=!1;else{var i=r-s,y=0,g=0;h?(y=i%p,g=Math.floor(i/p)):(y=Math.floor(i/d),g=i%d),t.visible=!0;var m=a[y];m&&(c=f*g,u=null!==(n=v[g])&&void 0!==n?n:0,v[g]=(null!==(o=v[g])&&void 0!==o?o:0)+m.columnWidth,t.translationX=Math.floor(u),t.translationY=Math.floor(c))}}))}},t.prototype.updatePageNumber=function(t){var e=this.pages,r=e[t],n=r.startIndex,o=r.endIndex;0===n?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=o:this.paginationTrackingIndex=Math.floor((n+o)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(ih.SCENE_RENDER)},t.prototype.update=function(){var t=this.item,e=t.marker.strokeWidth,r=t.label.color;this.itemSelection.each((function(t,n){var o=n.marker;t.markerFill=o.fill,t.markerStroke=o.stroke,t.markerStrokeWidth=e,t.markerFillOpacity=o.fillOpacity,t.markerStrokeOpacity=o.strokeOpacity,t.opacity=n.enabled?1:.5,t.color=r}))},t.prototype.getDatumForPoint=function(t,e){var r,n,o=[],i={dist:1/0,datum:void 0};try{for(var a=hf(this.group.children),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.visible&&l instanceof Nh){var u=l.computeBBox();if(u.grow(this.item.paddingX/2,"horizontal"),u.grow(this.item.paddingY/2,"vertical"),u.containsPoint(t,e))return l.datum;var c=t-u.x-this.item.paddingX/2,p=e-u.y-this.item.paddingY/2,d=Math.pow(c,2)+Math.pow(p,2),h=c>=0&&p>=0;h&&d<i.dist&&(i.dist=d,i.datum=l.datum),o.push(u)}}}catch(v){r={error:v}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}var f=Ls.merge(o);if(f.containsPoint(t,e))return i.datum},t.prototype.computeBBox=function(){return this.group.computeBBox()},t.prototype.computePagedBBox=function(){var t=this.group.computeBBox();if(this.pages.length<=1)return t;var e=pf(this.maxPageSize,2),r=e[0],n=e[1];return t.height=Math.max(n,t.height),t.width=Math.max(r,t.width),t},t.prototype.checkLegendClick=function(t){var e=this,r=e.listeners.legendItemClick,n=e.ctx,o=n.dataService,i=n.highlightManager,a=e.item.toggleSeriesVisible,s=t.offsetX,l=t.offsetY,u=this.computeBBox(),c=this.group.visible&&u.containsPoint(s,l),p=this.getDatumForPoint(s,l);if(c&&p){var d=p.id,h=p.itemId,f=p.enabled,v=o.getSeries(),y=v.find((function(t){return t.id===d}));if(y){t.consume();var g=f;a&&(g=!f,this.ctx.chartEventManager.legendItemClick(y,h,g,p.legendItemName)),g?i.updateHighlight(this.id,{series:y,itemId:h,datum:void 0}):i.updateHighlight(this.id),this.ctx.updateService.update(ih.PROCESS_DATA,{forceNodeDataRefresh:!0}),null===r||void 0===r||r({type:"click",enabled:g,itemId:h,seriesId:y.id})}}},t.prototype.checkLegendDoubleClick=function(t){var e,r=this,n=r.listeners.legendItemDoubleClick,o=r.ctx.dataService,i=r.item.toggleSeriesVisible,a=t.offsetX,s=t.offsetY;if("integrated"!==this.ctx.mode){var l=this.computeBBox(),u=this.group.visible&&l.containsPoint(a,s),c=this.getDatumForPoint(a,s);if(u&&c){var p=c.id,d=c.itemId,h=c.seriesId,f=o.getSeries(),v=f.find((function(t){return t.id===p}));if(v){if(t.consume(),i){var y=f.reduce((function(t,e){return df(df([],pf(t)),pf(e.getLegendData().filter((function(t){return"category"===t.legendType}))))}),[]),g={};y.forEach((function(t){var e,r;null!==(e=g[r=t.seriesId])&&void 0!==e||(g[r]=0),t.enabled&&g[t.seriesId]++}));var m=y.find((function(t){return t.itemId===d&&t.seriesId===h}));this.ctx.chartEventManager.legendItemDoubleClick(v,d,null!==(e=null===m||void 0===m?void 0:m.enabled)&&void 0!==e&&e,g,null===m||void 0===m?void 0:m.legendItemName)}this.ctx.updateService.update(ih.PROCESS_DATA,{forceNodeDataRefresh:!0}),null===n||void 0===n||n({type:"dblclick",enabled:!0,itemId:d,seriesId:v.id})}}}},t.prototype.handleLegendMouseMove=function(t){var e,r=this,n=r.enabled,o=r.item.toggleSeriesVisible,i=r.listeners;if(n){var a=this.computeBBox(),s=t.pageX,l=t.pageY,u=t.offsetX,c=t.offsetY,p=this.group.visible&&a.containsPoint(u,c);if(!p)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();var d=this.getDatumForPoint(u,c),h=p&&void 0!==d;if(!h)return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);var f=d?this.ctx.dataService.getSeries().find((function(t){return t.id===(null===d||void 0===d?void 0:d.id)})):void 0;if(d&&this.truncatedItems.has(null!==(e=d.itemId)&&void 0!==e?e:d.id)){var v=this.getItemLabel(d);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:s,pageY:l,offsetX:u,offsetY:c,event:t,showArrow:!1},Rc({content:v}))}else this.ctx.tooltipManager.removeTooltip(this.id);(o||null!=i.legendItemClick||null!=i.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null===d||void 0===d?void 0:d.enabled)&&f?this.ctx.highlightManager.updateHighlight(this.id,{series:f,itemId:null===d||void 0===d?void 0:d.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}},t.prototype.positionLegend=function(t){var e=this,r=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:r};var n=pf(this.calculateLegendDimensions(t),2),o=n[0],i=n[1];this.group.translationX=0,this.group.translationY=0,this.performLayout(o,i);var a=this.computePagedBBox(),s=function(){switch(e.position){case"top":return 0;case"bottom":return t.height-a.height;case"left":return 0;case"right":default:return t.width-a.width}};if(this.visible){var l=void 0,u=void 0;switch(this.position){case"top":case"bottom":l=(t.width-a.width)/2,u=s(),r.shrink(a.height,this.position);break;case"left":case"right":default:l=s(),u=(t.height-a.height)/2,r.shrink(a.width,this.position)}this.group.translationX=Math.floor(-a.x+t.x+l),this.group.translationY=Math.floor(-a.y+t.y+u)}if(this.visible&&this.enabled&&this.data.length){var c=this.spacing;r.shrink(c,this.position);var p=a.clone();p.x+=this.group.translationX,p.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,p)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:r}},t.prototype.calculateLegendDimensions=function(t){var e=t.width,r=t.height,n=e/r,o=.5,i=.2,a=.25,s=0,l=0;switch(this.position){case"top":case"bottom":var u=n<1?Math.min(o,i*(1/n)):i;s=this.maxWidth?Math.min(this.maxWidth,e):e,l=this.maxHeight?Math.min(this.maxHeight,r):Math.round(r*u);break;case"left":case"right":default:var c=n>1?Math.min(o,a*n):a;s=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*c),l=this.maxHeight?Math.min(this.maxHeight,r):r}return[s,l]},t.className="Legend",cf([du(Ou)],t.prototype,"_enabled",void 0),cf([du(ac)],t.prototype,"position",void 0),cf([du(ju(0))],t.prototype,"maxWidth",void 0),cf([du(ju(0))],t.prototype,"maxHeight",void 0),cf([du(Eu)],t.prototype,"reverseOrder",void 0),cf([du(vf)],t.prototype,"orientation",void 0),cf([du(Gu(0))],t.prototype,"spacing",void 0),t}(),Sf={category:Cf};function wf(t,e){if(Sf[t])throw new Error("AG Charts - already registered legend type: "+t);Sf[t]=e}function xf(t,e){if(Sf[t])return new Sf[t](e);throw new Error("AG Charts - unknown legend type: "+t)}var Of=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Ef=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Tf=function(){function t(){this.cache=new Map}return t.prototype.call=function(t){for(var e,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=this.cache.get(t),i=function(){try{var n=t.apply(void 0,Ef([],Of(r)));return o&&null!=e&&o.set(e,n),n}catch(i){return void ul.warnOnce("User callback errored, ignoring",i)}};try{e=JSON.stringify(r)}catch(a){return i()}return null==o&&(o=new Map,this.cache.set(t,o)),o.has(e)?o.get(e):i()},t.prototype.invalidateCache=function(){this.cache=new Map},t}(),Pf=function(){return Pf=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Pf.apply(this,arguments)},Df=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Af=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Mf=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rf=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},_f=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},kf=function(){function t(){this.requested=[],this.status="setup"}return t.prototype.request=function(t,e,r){return Df(this,void 0,void 0,(function(){var n=this;return Af(this,(function(o){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return[2,new Promise((function(o,i){n.requested.push({id:t,opts:r,data:e,resultCb:o,reject:i})}))]}))}))},t.prototype.execute=function(){return Df(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h;return Af(this,(function(f){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",t.DEBUG()&&ul.debug("DataController.execute() - requested",this.requested),e=this.mergeRequested(),t.DEBUG()&&ul.debug("DataController.execute() - merged",e),r=function(t,e,r,o,i){try{var a=new wc(t),s=a.processData(e);s&&0===s.partialValidDataCount?r.forEach((function(t){return t({dataModel:a,processedData:s})})):s?n.splitResult(a,s,i,r):o.forEach((function(t){return t(new Error("AG Charts - no processed data generated"))}))}catch(l){o.forEach((function(t){return t(l)}))}},n=this;try{for(o=Mf(e),i=o.next();!i.done;i=o.next())a=i.value,s=a.opts,l=a.data,u=a.resultCbs,c=a.rejects,p=a.ids,r(s,l,u,c,p)}catch(v){d={error:v}}finally{try{i&&!i.done&&(h=o.return)&&h.call(o)}finally{if(d)throw d.error}}return[2]}))}))},t.prototype.mergeRequested=function(){var t,e,r=[],n=function(t){return t.filter((function(t){return"key"===t.type})).map((function(t){return t.property})).join(";")},o=function(t){var e=t.opts,r=t.data;return function(t){return t[0].data===r&&t[0].opts.groupByKeys===e.groupByKeys&&t[0].opts.dataVisible===e.dataVisible&&t[0].opts.groupByFn===e.groupByFn&&n(t[0].opts.props)===n(e.props)}},i=function(t){return function(e){var r;if(e.type!==t.type)return!1;if(e.id!==t.id)return!1;var n=null!==(r=ed(e,t))&&void 0!==r?r:{};return delete n["scopes"],0===Object.keys(n).length}},a=function(t){return Pf(Pf({},t[0]),{props:t.reduce((function(t,e){var r,n,o,a,s,l;try{for(var u=Mf(e.props),c=u.next();!c.done;c=u.next()){var p=c.value,d=t.find(i(p));d?(null!==(a=d.scopes)&&void 0!==a||(d.scopes=[]),(o=d.scopes).push.apply(o,_f(_f([],Rf(null!==(s=p.scopes)&&void 0!==s?s:[])),Rf(null!==(l=e.scopes)&&void 0!==l?l:[])))):t.push(p)}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return t}),[])})},s=function(t){return{ids:t.map((function(t){var e=t.id;return e})),resultCbs:t.map((function(t){var e=t.resultCb;return e})),rejects:t.map((function(t){var e=t.reject;return e})),data:t[0].data,opts:a(t.map((function(t){var e=t.opts;return e})))}};try{for(var l=Mf(this.requested),u=l.next();!u.done;u=l.next()){var c=u.value,p=r.find(o(c));p?p.push(c):r.push([c])}}catch(d){t={error:d}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}return r.map(s)},t.prototype.splitResult=function(t,e,r,n){for(var o=function(o){var i=r[o],a=n[o];a({dataModel:t,processedData:Pf(Pf({},e),{data:e.data.filter((function(t){var e=t.validScopes;return null==e||e.some((function(t){return t===i}))}))})})},i=0;i<r.length;i++)o(i)},t.DEBUG=function(){var t;return null!==(t=[!0,"data-model"].includes(ml("agChartsDebug")))&&void 0!==t&&t},t}(),Ff=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},If=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Lf=function(){function t(){this.groups={}}return t.prototype.registerSeries=function(t){var e,r,n=t.id,o=t.seriesGrouping,i=t.visible,a=t.type;o&&(null!==(e=(r=this.groups)[a])&&void 0!==e||(r[a]={}),this.groups[a][n]={grouping:o,visible:i})},t.prototype.deregisterSeries=function(t){var e=t.id,r=t.type;this.groups[r]&&delete this.groups[r][e],this.groups[r]&&0===Object.keys(this.groups[r]).length&&delete this.groups[r]},t.prototype.getVisiblePeerGroupIndex=function(t){var e,r=t.type,n=t.seriesGrouping;if(!n)return{visibleGroupCount:1,index:0};var o=If([],Ff(Object.entries(null!==(e=this.groups[r])&&void 0!==e?e:{}).filter((function(t){var e=Ff(t,2);e[0];var r=e[1];return r.visible})).reduce((function(t,e){var r=Ff(e,2);r[0];var n=r[1];return n.visible&&t.add(n.grouping.groupIndex),t}),new Set).values()));return o.sort((function(t,e){return t-e})),{visibleGroupCount:o.length,index:o.indexOf(n.groupIndex)}},t}(),Nf=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gf=function(){function t(t){this.groups={},this.series={},this.rootGroup=t}return t.prototype.requestGroup=function(t){var e,r,n,o,i=t.id,a=t.type,s=t.rootGroup,l=t.seriesGrouping,u=(null!==l&&void 0!==l?l:{}).groupIndex,c=void 0===u?i:u;if(null!=this.series[i])throw new Error("AG Charts - series already has an allocated layer: "+this.series[i]);null!==(e=(n=this.groups)[a])&&void 0!==e||(n[a]={});var p=this.groups[a][c];return p||(p=null!==(r=(o=this.groups[a])[c])&&void 0!==r?r:o[c]={seriesIds:[],group:this.rootGroup.appendChild(new yl({name:a+"-content",layer:!0,zIndex:nc.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")}))}),this.series[i]={layerState:p,seriesConfig:t},p.seriesIds.push(i),p.group.appendChild(s),p.group},t.prototype.changeGroup=function(t){var e,r,n=t.id,o=t.seriesGrouping,i=t.type,a=t.rootGroup,s=t.oldGrouping,l=(null!==o&&void 0!==o?o:{}).groupIndex,u=void 0===l?n:l;(null===(r=null===(e=this.groups[i])||void 0===e?void 0:e[u])||void 0===r?void 0:r.seriesIds.includes(n))||(null!=this.series[n]&&this.releaseGroup({id:n,seriesGrouping:s,type:i,rootGroup:a}),this.requestGroup(t))},t.prototype.releaseGroup=function(t){var e,r,n,o,i,a=t.id,s=t.seriesGrouping,l=t.rootGroup,u=t.type,c=(null!==s&&void 0!==s?s:{}).groupIndex,p=void 0===c?a:c;if(null==this.series[a])throw new Error("AG Charts - series doesn't have an allocated layer: "+a);var d=null!==(r=null===(e=this.groups[u])||void 0===e?void 0:e[p])&&void 0!==r?r:null===(n=this.series[a])||void 0===n?void 0:n.layerState;if(d&&(d.seriesIds=d.seriesIds.filter((function(t){return t!==a})),d.group.removeChild(l)),0===(null===d||void 0===d?void 0:d.seriesIds.length))this.rootGroup.removeChild(d.group),delete this.groups[u][p],delete this.groups[u][a];else if((null===d||void 0===d?void 0:d.seriesIds.length)>0){var h=null===(i=this.series[null===(o=null===d||void 0===d?void 0:d.seriesIds)||void 0===o?void 0:o[0]])||void 0===i?void 0:i.seriesConfig;d.group.zIndexSubOrder=null===h||void 0===h?void 0:h.getGroupZIndexSubOrder("data")}delete this.series[a]},t.prototype.destroy=function(){var t,e,r,n;try{for(var o=Nf(Object.values(this.groups)),i=o.next();!i.done;i=o.next()){var a=i.value;try{for(var s=(r=void 0,Nf(Object.values(a))),l=s.next();!l.done;l=s.next()){var u=l.value;this.rootGroup.removeChild(u.group)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}}catch(p){t={error:p}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}this.groups={},this.series={}},t}(),jf=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bf=function(){return Bf=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Bf.apply(this,arguments)},Vf=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Hf=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},zf=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Uf=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Wf=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kf=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Xf=function(t){function e(e,r,n){var o;void 0===e&&(e=window.document);var i=t.call(this)||this;i.id=Vs(i),i.processedOptions={},i.userOptions={},i.queuedUserOptions=[],i.seriesRoot=new yl({name:i.id+"-Series-root"}),i.extraDebugStats={},i.container=void 0,i.data=[],i.padding=new kp(20),i.seriesAreaPadding=new kp(0),i.title=void 0,i.subtitle=void 0,i.footnote=void 0,i.mode="standalone",i._destroyed=!1,i.modules={},i.legendModules={},i._pendingFactoryUpdates=[],i._performUpdateNoRenderCount=0,i._performUpdateType=ih.NONE,i.seriesToUpdate=new Set,i.performUpdateTrigger=Wp((function(t){var e=t.count;return Hf(i,void 0,void 0,(function(){var t;return zf(this,(function(r){switch(r.label){case 0:if(this._destroyed)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.performUpdate(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),this._lastPerformUpdateError=t,ul.error("update error",t),[3,4];case 4:return[2]}}))}))})),i._axes=[],i._series=[],i.applyLegendOptions=void 0,i.lastInteractionEvent=void 0,i.pointerScheduler=Up((function(){i.lastInteractionEvent&&i.handlePointer(i.lastInteractionEvent),i.lastInteractionEvent=void 0})),i.onSeriesNodeClick=function(t){var e=Bf(Bf({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:function(){return t.series}}),i.fireEvent(e)},i.onSeriesNodeDoubleClick=function(t){var e=Bf(Bf({},t),{type:"seriesNodeDoubleClick"});i.fireEvent(e)};var a=null===n||void 0===n?void 0:n.scene,s=null!==(o=null===n||void 0===n?void 0:n.element)&&void 0!==o?o:e.createElement("div"),l=null===n||void 0===n?void 0:n.container,u=new yl({name:"root"});return u.visible=!1,u.append(i.seriesRoot),i.axisGroup=new yl({name:"Axes",layer:!0,zIndex:nc.AXIS_ZINDEX}),u.appendChild(i.axisGroup),i.element=s,s.classList.add("ag-chart-wrapper"),s.style.position="relative",i.scene=null!==a&&void 0!==a?a:new Tl({document:e,overrideDevicePixelRatio:r}),i.scene.debug.consoleLog=!1,i.scene.root=u,i.scene.container=s,i.autoSize=!0,i.chartEventManager=new kd,i.cursorManager=new Rd(s),i.highlightManager=new Nd,i.interactionManager=new Kd(s),i.zoomManager=new th,i.dataService=new sh((function(){return i.series})),i.layoutService=new ah,i.updateService=new lh((function(t,e){void 0===t&&(t=ih.FULL);var r=e.forceNodeDataRefresh;return i.update(t,{forceNodeDataRefresh:r})})),i.seriesStateManager=new Lf,i.seriesLayerManager=new Gf(i.seriesRoot),i.callbackCache=new Tf,i.animationManager=new Ad(i.interactionManager),i.animationManager.skipAnimations=!0,i.animationManager.play(),i.tooltip=new Ic(i.scene.canvas.element,e,e.body),i.tooltipManager=new qd(i.tooltip,i.interactionManager),i.overlays=new Zp(i.element),i.highlight=new ch,i.container=l,i.debug=!1,Ip.observe(i.element,(function(t){var e,r=t.width,n=t.height;if(i.autoSize&&(0!==r||0!==n)){var o=Uf(null!==(e=i._lastAutoSize)&&void 0!==e?e:[],2),a=o[0],s=void 0===a?0:a,l=o[1],u=void 0===l?0:l;s===r&&u===n||(i._lastAutoSize=[r,n],i.resize())}})),i.layoutService.addListener("start-layout",(function(t){return i.positionPadding(t.shrinkRect)})),i.layoutService.addListener("start-layout",(function(t){return i.positionCaptions(t.shrinkRect)})),i.interactionManager.addListener("click",(function(t){return i.onClick(t)})),i.interactionManager.addListener("dblclick",(function(t){return i.onDoubleClick(t)})),i.interactionManager.addListener("hover",(function(t){return i.onMouseMove(t)})),i.interactionManager.addListener("leave",(function(t){return i.onLeave(t)})),i.interactionManager.addListener("page-left",(function(){return i.destroy()})),i.interactionManager.addListener("wheel",(function(){return i.disablePointer()})),i.animationManager.addListener("animation-frame",(function(t){i.update(ih.SCENE_RENDER)})),i.highlightManager.addListener("highlight-change",(function(t){return i.changeHighlightDatum(t)})),i.zoomManager.addListener("zoom-change",(function(t){return i.update(ih.PROCESS_DATA,{forceNodeDataRefresh:!0})})),i.attachLegend("category"),i}return jf(e,t),e.prototype.getOptions=function(){var t,e=this.queuedUserOptions,r=null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions;return od([r])},e.prototype.autoSizeChanged=function(t){var e=this.element.style;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize()}else e.display="inline-block",e.width="auto",e.height="auto"},e.prototype.download=function(t,e){this.scene.download(t,e)},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype.addModule=function(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);var e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e},e.prototype.removeModule=function(t){var e,r;null===(r=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===r||r.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]},e.prototype.isModuleEnabled=function(t){return null!=this.modules[t.optionsKey]},e.prototype.getModuleContext=function(){var t=this,e=t.scene,r=t.animationManager,n=t.chartEventManager,o=t.cursorManager,i=t.highlightManager,a=t.interactionManager,s=t.tooltipManager,l=t.zoomManager,u=t.dataService,c=t.layoutService,p=t.updateService,d=t.seriesStateManager,h=t.seriesLayerManager,f=t.mode,v=t.callbackCache;return{scene:e,animationManager:r,chartEventManager:n,cursorManager:o,highlightManager:i,interactionManager:a,tooltipManager:s,zoomManager:l,dataService:u,layoutService:c,updateService:p,mode:f,seriesStateManager:d,seriesLayerManager:h,callbackCache:v}},e.prototype.destroy=function(t){var e,r,n;if(!this._destroyed){var o=null===t||void 0===t?void 0:t.keepTransferableResources,i=void 0;this._performUpdateType=ih.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),null===(n=this.legend)||void 0===n||n.destroy(),this.overlays.noData.hide(),Ip.unobserve(this.element);try{for(var a=Wf(Object.entries(this.modules)),s=a.next();!s.done;s=a.next()){var l=Uf(s.value,2),u=l[0],c=l[1];c.instance.destroy(),delete this.modules[u],delete this[u]}}catch(p){e={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return this.interactionManager.destroy(),this.animationManager.stop(),o?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach((function(t){return t.destroy()})),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,i}},e.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&ul.debug.apply(ul,Kf([],Uf(t)))},e.prototype.disablePointer=function(t){void 0===t&&(t=!1),t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)},e.prototype.requestFactoryUpdate=function(t){var e=this._pendingFactoryUpdates,r=e.length;0===r?(e.push(t),this._processCallbacks().catch((function(t){return ul.errorOnce(t)}))):e.splice(1,r-1,t)},e.prototype._processCallbacks=function(){return Hf(this,void 0,void 0,(function(){var t,e;return zf(this,(function(r){switch(r.label){case 0:t=this._pendingFactoryUpdates,r.label=1;case 1:return t.length>0?this.updatePending?[4,Xp(1)]:[3,3]:[3,7];case 2:return r.sent(),[3,1];case 3:return r.trys.push([3,5,,6]),[4,t[0]()];case 4:return r.sent(),this.callbackCache.invalidateCache(),[3,6];case 5:return e=r.sent(),ul.error("update error",e),[3,6];case 6:return t.shift(),[3,1];case 7:return[2]}}))}))},Object.defineProperty(e.prototype,"performUpdateType",{get:function(){return this._performUpdateType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updatePending",{get:function(){return this._performUpdateType!==ih.NONE||null!=this.lastInteractionEvent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastPerformUpdateError",{get:function(){return this._lastPerformUpdateError},enumerable:!1,configurable:!0}),e.prototype.awaitUpdateCompletion=function(){return Hf(this,void 0,void 0,(function(){return zf(this,(function(t){switch(t.label){case 0:return[4,this.performUpdateTrigger.await()];case 1:return t.sent(),[2]}}))}))},e.prototype.update=function(t,e){var r,n;void 0===t&&(t=ih.FULL);var o=null!==e&&void 0!==e?e:{},i=o.forceNodeDataRefresh,a=void 0!==i&&i,s=o.seriesToUpdate,l=void 0===s?this.series:s;a&&this.series.forEach((function(t){return t.markNodeDataDirty()}));try{for(var u=Wf(l),c=u.next();!c.done;c=u.next()){var p=c.value;this.seriesToUpdate.add(p)}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule())},e.prototype.performUpdate=function(t){var e;return Hf(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c;return zf(this,(function(p){switch(p.label){case 0:switch(r=this,n=r._performUpdateType,o=r.extraDebugStats,this.log("Chart.performUpdate() - start",ih[n]),i=[performance.now()],a=n,a){case ih.FULL:return[3,1];case ih.PROCESS_DATA:return[3,1];case ih.PERFORM_LAYOUT:return[3,3];case ih.SERIES_UPDATE:return[3,5];case ih.TOOLTIP_RECALCULATION:return[3,7];case ih.SCENE_RENDER:return[3,8];case ih.NONE:return[3,10]}return[3,11];case 1:return[4,this.processData()];case 2:p.sent(),this.disablePointer(!0),i.push(performance.now()),p.label=3;case 3:return this.checkFirstAutoSize()?[4,this.performLayout()]:[3,11];case 4:p.sent(),this.handleOverlays(),this.log("Chart.performUpdate() - seriesRect",this.seriesRect),i.push(performance.now()),p.label=5;case 5:return s=this.seriesRect,l=Kf([],Uf(this.seriesToUpdate)).map((function(t){return t.update({seriesRect:s})})),this.seriesToUpdate.clear(),[4,Promise.all(l)];case 6:p.sent(),i.push(performance.now()),p.label=7;case 7:u=this.tooltipManager.getTooltipMeta(this.id),n<ih.SERIES_UPDATE&&"hover"===(null===(e=null===u||void 0===u?void 0:u.event)||void 0===e?void 0:e.type)&&this.handlePointer(u.event),p.label=8;case 8:return[4,this.scene.render({debugSplitTimes:i,extraDebugStats:o})];case 9:p.sent(),this.extraDebugStats={},p.label=10;case 10:this._performUpdateType=ih.NONE,p.label=11;case 11:return c=performance.now(),this.log("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(c-i[0]))/100,count:t,performUpdateType:ih[n]}),[2]}}))}))},e.prototype.checkFirstAutoSize=function(){if(this.autoSize&&!this._lastAutoSize){var t=this._performUpdateNoRenderCount++,e=10*(2^t);if(t<5)return this._performUpdateType=ih.PERFORM_LAYOUT,this.performUpdateTrigger.schedule(e),this.log("Chart.checkFirstAutoSize() - backing off until first size update",e),!1;this.log("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0},Object.defineProperty(e.prototype,"axes",{get:function(){return this._axes},set:function(t){var e=this,r=new Set;this._axes.forEach((function(t){t.detachAxis(e.axisGroup),r.add(t)})),this._axes=t.filter((function(t){return!t.linkedTo})).concat(t.filter((function(t){return t.linkedTo}))),this._axes.forEach((function(t){t.attachAxis(e.axisGroup),r.delete(t)})),this.zoomManager.updateAxes(this._axes),r.forEach((function(t){return t.destroy()}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},set:function(t){var e=this;this.removeAllSeries(),t.forEach((function(t){return e.addSeries(t)}))},enumerable:!1,configurable:!0}),e.prototype.addSeries=function(t){var e=this.series,r=e.indexOf(t)<0;return!!r&&(e.push(t),null==t.rootGroup.parent&&this.seriesLayerManager.requestGroup(t),this.initSeries(t),!0)},e.prototype.initSeries=function(t){t.chart=this,t.data||(t.data=this.data),this.addSeriesListeners(t),t.addChartEventListeners()},e.prototype.removeAllSeries=function(){var t=this;this.series.forEach((function(e){e.removeEventListener("nodeClick",t.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",t.onSeriesNodeDoubleClick),e.destroy(),e.chart=void 0})),this._series=[]},e.prototype.addSeriesListeners=function(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)},e.prototype.updateAllSeriesListeners=function(){var t=this;this.series.forEach((function(e){e.removeEventListener("nodeClick",t.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",t.onSeriesNodeDoubleClick),t.addSeriesListeners(e)}))},e.prototype.assignSeriesToAxes=function(){var t=this;this.axes.forEach((function(e){e.boundSeries=t.series.filter((function(t){var r=t.axes[e.direction];return r===e}))}))},e.prototype.assignAxesToSeries=function(){var t=this,e={};this.axes.forEach((function(t){var r,n=t.direction,o=null!==(r=e[n])&&void 0!==r?r:e[n]=[];o.push(t)})),this.series.forEach((function(r){r.directions.forEach((function(n){var o=e[n];if(o){var i=r.getKeys(n),a=t.findMatchingAxis(o,r.getKeys(n));a?r.axes[n]=a:ul.warn("no matching axis for direction ["+n+"] and keys ["+i+"]; check series and axes configuration.")}else ul.warn("no available axis for direction ["+n+"]; check series and axes configuration.")}))}))},e.prototype.findMatchingAxis=function(t,e){var r,n,o,i;try{for(var a=Wf(t),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.keys;if(!u.length)return l;if(e)try{for(var c=(o=void 0,Wf(e)),p=c.next();!p.done;p=c.next()){var d=p.value;if(u.indexOf(d)>=0)return l}}catch(h){o={error:h}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}}}catch(f){r={error:f}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.resize=function(t,e){var r,n,o,i;null!==t&&void 0!==t||(t=null!==(r=this.width)&&void 0!==r?r:this.autoSize?null===(n=this._lastAutoSize)||void 0===n?void 0:n[0]:this.scene.canvas.width),null!==e&&void 0!==e||(e=null!==(o=this.height)&&void 0!==o?o:this.autoSize?null===(i=this._lastAutoSize)||void 0===i?void 0:i[1]:this.scene.canvas.height),this.log("Chart.resize()",{width:t,height:e}),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)&&(this.disablePointer(),this.update(ih.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))},e.prototype.processData=function(){return Hf(this,void 0,void 0,(function(){var t,e;return zf(this,(function(r){switch(r.label){case 0:return this.axes.length>0&&(this.assignAxesToSeries(),this.assignSeriesToAxes()),t=new kf,e=this.series.map((function(e){return e.processData(t)})),[4,t.execute()];case 1:return r.sent(),[4,Promise.all(e)];case 2:return r.sent(),[4,this.updateLegend()];case 3:return r.sent(),[2]}}))}))},e.prototype.placeLabels=function(){var t,e,r=[],n=[];try{for(var o=Wf(this.series),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.visible){var s=a.getLabelData();s&&jp(s[0])&&(n.push(s),r.push(a))}}}catch(c){t={error:c}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}var l=this.seriesRect,u=l&&n.length>0?Bp(n,{x:0,y:0,width:l.width,height:l.height}):[];return new Map(u.map((function(t,e){return[r[e],t]})))},e.prototype.attachLegend=function(t){var e;if(this.legendType===t&&this.legend)return this.legend;null===(e=this.legend)||void 0===e||e.destroy(),this.legend=void 0;var r=this.getModuleContext(),n=xf(t,r);return n.attachLegend(this.scene.root),this.legend=n,this.legendType=t,n},e.prototype.setLegendInit=function(t){this.applyLegendOptions=t},e.prototype.updateLegend=function(){var t;return Hf(this,void 0,void 0,(function(){var e,r,n;return zf(this,(function(o){return e=[],this.series.filter((function(t){return t.showInLegend})).forEach((function(t){var r=t.getLegendData();e.push.apply(e,Kf([],Uf(r)))})),r=e.length>0?e[0].legendType:"category",n=this.attachLegend(r),null===(t=this.applyLegendOptions)||void 0===t||t.call(this,n),"category"===r&&this.validateLegendData(e),n.data=e,[2]}))}))},e.prototype.validateLegendData=function(t){var e=this,r={};t.forEach((function(t){var n,o,i,a,s,l,u=null===(o=e.series.find((function(e){return e.id===t.seriesId})))||void 0===o?void 0:o.type;if(u){var c=t;null!==(i=r[u])&&void 0!==i||(r[u]=(n={},n[c.label.text]=new Set,n)),null!==(a=(s=r[u])[l=c.label.text])&&void 0!==a||(s[l]=new Set),null!=c.marker.fill&&r[u][c.label.text].add(c.marker.fill)}})),Object.keys(r).forEach((function(t){Object.keys(r[t]).forEach((function(e){var n=r[t][e];n.size>1&&ul.warnOnce("legend item '"+e+"' has multiple fill colors, this may cause unexpected behaviour.")}))}))},e.prototype.performLayout=function(){return Hf(this,void 0,void 0,(function(){var t,e,r,n;return zf(this,(function(o){return null!=this.scene.root&&(this.scene.root.visible=!0),t=this.scene,e=t.width,r=t.height,n=new Ls(0,0,e,r),n=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:n}).shrinkRect,n=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:n}).shrinkRect,[2,n]}))}))},e.prototype.positionPadding=function(t){var e=this.padding;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}},e.prototype.positionCaptions=function(t){var e,r=this,n=r.title,o=r.subtitle,i=r.footnote,a=t.clone(),s=function(e){var r,n=t.height/10,o=null!==(r=e.lineHeight)&&void 0!==r?r:e.fontSize*zl.defaultLineHeightRatio,i=t.width,a=Math.max(o,n);e.computeTextWrap(i,a)},l=function(t){var e,r=a.y;t.node.x=a.x+a.width/2,t.node.y=r,t.node.textBaseline="top",s(t);var n=t.node.computeBBox(),o=Math.ceil(n.y-r+n.height+(null!==(e=t.spacing)&&void 0!==e?e:0));a.shrink(o,"top")},u=function(t){var e,r=a.y+a.height;t.node.x=a.x+a.width/2,t.node.y=r,t.node.textBaseline="bottom",s(t);var n=t.node.computeBBox(),o=Math.ceil(r-n.y+(null!==(e=t.spacing)&&void 0!==e?e:0));a.shrink(o,"bottom")};return n&&(n.node.visible=n.enabled,n.node.visible&&l(n)),o&&(o.node.visible=null!==(e=(null===n||void 0===n?void 0:n.enabled)&&o.enabled)&&void 0!==e&&e,o.node.visible&&l(o)),i&&(i.node.visible=i.enabled,i.node.visible&&u(i)),{shrinkRect:a}},e.prototype.getSeriesRect=function(){return this.seriesRect},e.prototype.pickSeriesNode=function(t,e,r){var n,o,i,a,s=performance.now(),l=e?[sp.EXACT_SHAPE_MATCH]:void 0,u=Kf([],Uf(this.series)).reverse(),c=void 0;try{for(var p=Wf(u),d=p.next();!d.done;d=p.next()){var h=d.value;if(h.visible&&h.rootGroup.visible){var f=null!==(i=h.pickNode(t,l))&&void 0!==i?i:{},v=f.match,y=f.distance;if(v&&null!=y&&((!c||c.distance>y)&&y<=(null!==r&&void 0!==r?r:1/0)&&(c={series:h,distance:y,datum:v}),0===y))break}}}catch(g){n={error:g}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return this.extraDebugStats["pickSeriesNode"]=Math.round((null!==(a=this.extraDebugStats["pickSeriesNode"])&&void 0!==a?a:0)+(performance.now()-s)),c},e.prototype.onMouseMove=function(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats["mouseX"]=t.offsetX,this.extraDebugStats["mouseY"]=t.offsetY,this.update(ih.SCENE_RENDER)},e.prototype.onLeave=function(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()},e.prototype.handlePointer=function(t){var e=this,r=this,n=r.lastPick,o=r.hoverRect,i=t.offsetX,a=t.offsetY,s=function(t){void 0===t&&(t=!1),n&&e.disablePointer(t)};(null===o||void 0===o?void 0:o.containsPoint(i,a))?(this.handlePointerTooltip(t,s),this.handlePointerNode(t)):s()},e.prototype.handlePointerTooltip=function(t,e){var r,n,o,i=this,a=i.lastPick,s=i.tooltip,l=s.range,u=t.pageX,c=t.pageY,p=t.offsetX,d=t.offsetY;"number"===typeof l&&Number.isFinite(l)&&(o=l);var h=this.pickSeriesNode({x:p,y:d},"exact"===l,o);if(!h)return this.tooltipManager.updateTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));var f,v="node"===this.highlight.range||!a||a.datum!==h.datum;v?(f=h.series.getTooltipHtml(h.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,h.datum)):a&&(a.event=t.sourceEvent);var y=null!=o,g=this.tooltip.enabled&&h.series.tooltip.enabled,m="exact"===l&&0===h.distance,b="nearest"===l||y||m,C=g&&b&&(!v||void 0!==f),S={xOffset:h.datum.series.tooltip.position.xOffset,yOffset:h.datum.series.tooltip.position.yOffset},w=this.mergePointerDatum({pageX:u,pageY:c,offsetX:p,offsetY:d,event:t,showArrow:h.series.tooltip.showArrow,position:S},h.datum);w.enableInteraction=null!==(n=null===(r=h.series.tooltip.interaction)||void 0===r?void 0:r.enabled)&&void 0!==n&&n,C&&this.tooltipManager.updateTooltip(this.id,w,f)},e.prototype.handlePointerNode=function(t){var e=this,r=this.checkSeriesNodeRange(t,(function(t,r){(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&e.cursorManager.updateCursor("chart","pointer"),"node"===e.highlight.range&&e.highlightManager.updateHighlight(e.id,r)}));r||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))},e.prototype.onClick=function(t){this.checkSeriesNodeClick(t)?this.update(ih.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})},e.prototype.onDoubleClick=function(t){this.checkSeriesNodeDoubleClick(t)?this.update(ih.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})},e.prototype.checkSeriesNodeClick=function(t){return this.checkSeriesNodeRange(t,(function(e,r){return e.fireNodeClickEvent(t.sourceEvent,r)}))},e.prototype.checkSeriesNodeDoubleClick=function(t){return this.checkSeriesNodeRange(t,(function(e,r){return e.fireNodeDoubleClickEvent(t.sourceEvent,r)}))},e.prototype.checkSeriesNodeRange=function(t,e){var r,n=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),o=null===n||void 0===n?void 0:n.datum,i=null===o||void 0===o?void 0:o.series.nodeClickRange;if(o&&"nearest"===i)return e(o.series,o),!0;"number"===typeof i&&Number.isFinite(i)&&(r=i);var a=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},"exact"===i,r);if(!a)return!1;var s=null!=r,l="exact"===i&&0===a.distance;return!(!s&&!l)&&(e(a.series,a.datum),!0)},e.prototype.mergePointerDatum=function(t,e){var r=e.series.tooltip.position.type;if("node"===r&&e.nodeMidPoint){var n=e.nodeMidPoint,o=n.x,i=n.y,a=this.scene.canvas,s=e.series.contentGroup.inverseTransformPoint(o,i),l=a.element.getBoundingClientRect();return Bf(Bf({},t),{pageX:Math.round(l.left+window.scrollX+s.x),pageY:Math.round(l.top+window.scrollY+s.y),offsetX:Math.round(s.x),offsetY:Math.round(s.y)})}return t},e.prototype.changeHighlightDatum=function(t){var e,r,n=new Set,o=null!==(e=t.currentHighlight)&&void 0!==e?e:{},i=o.series,a=void 0===i?void 0:i,s=o.datum,l=null!==(r=t.previousHighlight)&&void 0!==r?r:{},u=l.series,c=void 0===u?void 0:u,p=l.datum;c&&n.add(c),a&&n.add(a),(null===c||void 0===c?void 0:c.cursor)&&p&&this.cursorManager.updateCursor(c.id),(null===a||void 0===a?void 0:a.cursor)&&s&&this.cursorManager.updateCursor(a.id,a.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0;var d=null==a||null==c;d?this.update(ih.SERIES_UPDATE):this.update(ih.SERIES_UPDATE,{seriesToUpdate:n})},e.prototype.waitForUpdate=function(t){return void 0===t&&(t=5e3),Hf(this,void 0,void 0,(function(){var e;return zf(this,(function(r){switch(r.label){case 0:e=performance.now(),r.label=1;case 1:if(!(this._pendingFactoryUpdates.length>0||this.updatePending))return[3,3];if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");return[4,Xp(5)];case 2:return r.sent(),[3,1];case 3:return[4,this.awaitUpdateCompletion()];case 4:return r.sent(),[2]}}))}))},e.prototype.handleOverlays=function(){this.handleNoDataOverlay()},e.prototype.handleNoDataOverlay=function(){var t=!this.series.some((function(t){return t.hasData()})),e=this.getSeriesRect();t&&e?this.overlays.noData.show(e):this.overlays.noData.hide()},Vf([ap({newValue:function(t){this.scene.debug.consoleLog=t,this.animationManager&&(this.animationManager.debug=t)}})],e.prototype,"debug",void 0),Vf([ap({newValue:function(t){this.destroyed||t.appendChild(this.element)},oldValue:function(t){t.removeChild(this.element)}})],e.prototype,"container",void 0),Vf([ap({newValue:function(t){var e;null===(e=this.series)||void 0===e||e.forEach((function(e){return e.data=t}))}})],e.prototype,"data",void 0),Vf([ap({newValue:function(t){this.resize(t)}})],e.prototype,"width",void 0),Vf([ap({newValue:function(t){this.resize(void 0,t)}})],e.prototype,"height",void 0),Vf([ap({changeValue:function(t){this.autoSizeChanged(t)}}),du(Ou)],e.prototype,"autoSize",void 0),Vf([ap({newValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],e.prototype,"title",void 0),Vf([ap({newValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],e.prototype,"subtitle",void 0),Vf([ap({newValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue:function(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],e.prototype,"footnote",void 0),Vf([du(Uu("standalone","integrated"))],e.prototype,"mode",void 0),e}(Jl),Yf=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a};function qf(t,e,r){return Math.max(e,Math.min(r,t))}var Zf=function(){function t(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}return t.prototype.didChange=function(){var t=this,e=this.cache,r=!e||this.cacheProps.some((function(r){return t[r]!==e[r]}));return!!r&&(this.cache={},this.cacheProps.forEach((function(e){return t.cache[e]=t[e]})),!0)},t.prototype.refresh=function(){this.didChange()&&this.update()},Object.defineProperty(t.prototype,"domain",{get:function(){return this._domain},set:function(t){var e=[];this.index=new Map;var r=this.index;t.forEach((function(t){void 0===r.get(t)&&r.set(t,e.push(t)-1)})),this._domain=e},enumerable:!1,configurable:!0}),t.prototype.ticks=function(){this.refresh();var t=this.interval,e=void 0===t?1:t,r=Math.abs(Math.round(e));return this._domain.filter((function(t,e){return e%r===0}))},t.prototype.convert=function(t){this.refresh();var e=this.index.get(t);if(void 0===e)return NaN;var r=this.ordinalRange[e];return void 0===r?NaN:r},t.prototype.invert=function(t){this.refresh();var e=this.ordinalRange.findIndex((function(e){return e===t}));return this.domain[e]},Object.defineProperty(t.prototype,"bandwidth",{get:function(){return this.refresh(),this._bandwidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawBandwidth",{get:function(){return this.refresh(),this._rawBandwidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._paddingInner},set:function(t){t=qf(t,0,1),this._paddingInner=t,this._paddingOuter=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingInner",{get:function(){return this._paddingInner},set:function(t){this._paddingInner=qf(t,0,1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingOuter",{get:function(){return this._paddingOuter},set:function(t){this._paddingOuter=qf(t,0,1)},enumerable:!1,configurable:!0}),t.prototype.update=function(){var t=this._domain.length;if(0!==t){for(var e=this.round,r=this._paddingInner,n=this._paddingOuter,o=Yf(this.range,2),i=o[0],a=o[1],s=a-i,l=s/Math.max(1,t+2*n-r),u=e?Math.floor(l):l,c=u*(t-r),p=i+(s-c)/2,d=e?Math.round(p):p,h=u*(1-r),f=e?Math.round(h):h,v=l*(1-r),y=[],g=0;g<t;g++)y.push(d+u*g);this._bandwidth=f,this._rawBandwidth=v,this.ordinalRange=y}},t}(),Jf=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qf=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},$f=function(t){function e(){var e=t.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.restoreOwnStyles(),e}return Jf(e,t),e.prototype.computeBBox=function(){return new Ls(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},e.prototype.isPointInPath=function(t,e){return!1},e.prototype.render=function(e){var r,n=e.ctx,o=e.forceRender,i=e.stats;if(this.dirty!==_s.NONE||o){this.computeTransformMatrix(),this.matrix.toContext(n);var a=this.x1,s=this.y1,l=this.x2,u=this.y2;if(a===l){var c=Math.round(a)+Math.floor(this.strokeWidth)%2/2;a=c,l=c}else if(s===u){var p=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=p,u=p}n.beginPath(),n.moveTo(a,s),n.lineTo(l,u),this.fillStroke(n),null===(r=this.fillShadow)||void 0===r||r.markClean(),t.prototype.render.call(this,e)}else i&&(i.nodesSkipped+=this.nodeCount.count)},e.className="Line",e.defaultStyles=Object.assign({},Nl.defaultStyles,{fill:void 0,strokeWidth:1}),Qf([Us({redraw:_s.MAJOR})],e.prototype,"x1",void 0),Qf([Us({redraw:_s.MAJOR})],e.prototype,"y1",void 0),Qf([Us({redraw:_s.MAJOR})],e.prototype,"x2",void 0),Qf([Us({redraw:_s.MAJOR})],e.prototype,"y2",void 0),e}(Nl),tv=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ev=function(){function t(){this.node=new zl,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=t.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";var e=this.node;e.textAlign="center",e.pointerEvents=Xs.None}return t.prototype.computeTextWrap=function(t,e){var r,n,o=this,i=o.text,a=o.wrapping,s=Math.min(null!==(r=this.maxWidth)&&void 0!==r?r:1/0,t),l=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(isFinite(s)||isFinite(l)){var u=zl.wrap(null!==i&&void 0!==i?i:"",s,l,this,a);this.node.text=u}else this.node.text=i},t.PADDING=10,tv([du(Ou)],t.prototype,"enabled",void 0),tv([du(Pu),ip("node")],t.prototype,"text",void 0),tv([du(Yu),ip("node")],t.prototype,"fontStyle",void 0),tv([du(Zu),ip("node")],t.prototype,"fontWeight",void 0),tv([du(Gu(0)),ip("node")],t.prototype,"fontSize",void 0),tv([du(Tu),ip("node")],t.prototype,"fontFamily",void 0),tv([du(Iu),ip("node","fill")],t.prototype,"color",void 0),tv([du(ju(0))],t.prototype,"spacing",void 0),tv([du(ju(0))],t.prototype,"lineHeight",void 0),tv([du(ju(0))],t.prototype,"maxWidth",void 0),tv([du(ju(0))],t.prototype,"maxHeight",void 0),tv([du(cc)],t.prototype,"wrapping",void 0),t}();function rv(t,e){return t.length===e.length&&t.every((function(t,r){return Number(t)===Number(e[r])}))}var nv=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},ov=function(){function t(e,r){this.domain=e,this.range=r,this.nice=!1,this.tickCount=t.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}return t.prototype.transform=function(t){return t},t.prototype.transformInvert=function(t){return t},t.prototype.fromDomain=function(t){return"number"===typeof t?t:t instanceof Date?t.getTime():NaN},t.prototype.getDomain=function(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain},t.prototype.convert=function(t,e){var r,n=this;if(!this.domain||this.domain.length<2)return NaN;this.refresh();var o=null!==(r=null===e||void 0===e?void 0:e.strict)&&void 0!==r?r:this.strictClampByDefault,i=this.getDomain().map((function(t){return n.transform(t)})),a=nv(i,2),s=a[0],l=a[1],u=this.range,c=nv(u,2),p=c[0],d=c[1];return t=this.transform(t),t<s?o?NaN:p:t>l?o?NaN:d:s===l?(p+d)/2:t===s?p:t===l?d:p+(this.fromDomain(t)-this.fromDomain(s))/(this.fromDomain(l)-this.fromDomain(s))*(d-p)},t.prototype.invert=function(t){var e=this;this.refresh();var r,n=this.getDomain().map((function(t){return e.transform(t)})),o=nv(n,2),i=o[0],a=o[1],s=this.range,l=nv(s,2),u=l[0],c=l[1],p=u>c,d=p?c:u,h=p?u:c;return t<d?p?a:i:t>h?p?i:a:(r=u===c?this.toDomain((this.fromDomain(i)+this.fromDomain(a))/2):this.toDomain(this.fromDomain(i)+(t-u)/(c-u)*(this.fromDomain(a)-this.fromDomain(i))),this.transformInvert(r))},t.prototype.didChange=function(){var t=this,e=this.cache,r=!e||this.cacheProps.some((function(r){return t[r]!==e[r]}));return!!r&&(this.cache={},this.cacheProps.forEach((function(e){return t.cache[e]=t[e]})),!0)},t.prototype.refresh=function(){this.didChange()&&this.update()},t.prototype.isDenseInterval=function(t){var e=t.start,r=t.stop,n=t.interval,o=t.count,i=this.range,a=r-e,s=Math.min(i[0],i[1]),l=Math.max(i[0],i[1]),u=l-s,c="number"===typeof n?n:1;return null!==o&&void 0!==o||(o=a/c),o>=u&&(ul.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)},t.defaultTickCount=5,t.defaultMaxTickCount=6,t}(),iv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function av(t,e,r,n,o){if(r<2)return pv(t,e,e-t);var i=lv(t,e,r,n,o);return isNaN(i)?new cv(0):(t=Math.ceil(t/i)*i,e=Math.floor(e/i)*i,pv(t,e,i))}var sv=[1,2,5,10];function lv(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=1/0);var i=(e-t)/r,a=Math.floor(Math.log10(i)),s=Math.pow(10,a),l=sv.map((function(i){var a=i*s,l=Math.ceil((e-t)/a),u=l>=n&&l<=o,c=Math.abs(l-r);return{multiplier:i,isWithinBounds:u,diffCount:c}})).sort((function(t,e){return t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount}))[0].multiplier;return!l||isNaN(l)?NaN:l*s}function uv(t,e){var r=Math.floor(Math.log10(e-t)),n=Math.pow(10,r);return sv.map((function(r){var o=r*n,i=Math.floor(t/o)*o,a=Math.ceil(e/o)*o,s=1-(e-t)/(a-i),l=[i,a];return{error:s,domain:l}})).sort((function(t,e){return t.error-e.error}))[0].domain}var cv=function(t){function e(e,r){var n=t.call(this)||this;if(r)for(var o=0,i=r.length;o<i;o++)n[o]=r[o];return n.fractionDigits=e,n}return iv(e,t),e}(Array);function pv(t,e,r){for(var n=function(t){var e,r,n=t.split("e");return Math.max((null!==(r=null===(e=n[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==r?r:0)-Number(n[1]),0)},o=n((r%1).toExponential()),i=Math.pow(10,o),a=Math.ceil((e-t)/r),s=new cv(o),l=0;l<=a;l++){var u=t+r*l;s.push(Math.round(u*i)/i)}return s}var dv={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function hv(t,e){void 0===e&&(e=new Date(t.getFullYear(),0,1));var r=t.getTimezoneOffset()-e.getTimezoneOffset(),n=t.getTime()-e.getTime()+6e4*r,o=864e5;return Math.floor(n/o)}function fv(t,e){var r=new Date(t.getFullYear(),0,1),n=r.getDay(),o=(e-n+7)%7,i=new Date(t.getFullYear(),0,o+1);return i<=t?Math.floor(hv(t,i)/7)+1:0}var vv=0,yv=1,gv=4;function mv(t,e){void 0===e&&(e=t.getFullYear());var r=new Date(e,0,1),n=r.getDay(),o=(gv-n+7)%7,i=new Date(e,0,o-(gv-yv)+1);return i<=t?Math.floor(hv(t,i)/7)+1:mv(t,e-1)}function bv(t){var e=t.getTimezoneOffset(),r=Math.abs(e),n=e>0?"-":"+";return""+n+wv(Math.floor(r/60),2,"0")+wv(Math.floor(r%60),2,"0")}var Cv={a:function(t){return dv.shortDays[t.getDay()]},A:function(t){return dv.days[t.getDay()]},b:function(t){return dv.shortMonths[t.getMonth()]},B:function(t){return dv.months[t.getMonth()]},c:"%x, %X",d:function(t,e){return wv(t.getDate(),2,null!==e&&void 0!==e?e:"0")},e:"%_d",f:function(t,e){return wv(1e3*t.getMilliseconds(),6,null!==e&&void 0!==e?e:"0")},H:function(t,e){return wv(t.getHours(),2,null!==e&&void 0!==e?e:"0")},I:function(t,e){var r=t.getHours()%12;return 0===r?"12":wv(r,2,null!==e&&void 0!==e?e:"0")},j:function(t,e){return wv(hv(t)+1,3,null!==e&&void 0!==e?e:"0")},m:function(t,e){return wv(t.getMonth()+1,2,null!==e&&void 0!==e?e:"0")},M:function(t,e){return wv(t.getMinutes(),2,null!==e&&void 0!==e?e:"0")},L:function(t,e){return wv(t.getMilliseconds(),3,null!==e&&void 0!==e?e:"0")},p:function(t){return t.getHours()<12?"AM":"PM"},Q:function(t){return String(t.getTime())},s:function(t){return String(Math.floor(t.getTime()/1e3))},S:function(t,e){return wv(t.getSeconds(),2,null!==e&&void 0!==e?e:"0")},u:function(t){var e=t.getDay();return e<1&&(e+=7),String(e%7)},U:function(t,e){return wv(fv(t,vv),2,null!==e&&void 0!==e?e:"0")},V:function(t,e){return wv(mv(t),2,null!==e&&void 0!==e?e:"0")},w:function(t,e){return wv(t.getDay(),2,null!==e&&void 0!==e?e:"0")},W:function(t,e){return wv(fv(t,yv),2,null!==e&&void 0!==e?e:"0")},x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:function(t,e){return wv(t.getFullYear()%100,2,null!==e&&void 0!==e?e:"0")},Y:function(t,e){return wv(t.getFullYear(),4,null!==e&&void 0!==e?e:"0")},Z:function(t){return bv(t)},"%":function(){return"%"}},Sv={_:" ",0:"0","-":""};function wv(t,e,r){var n=String(Math.floor(t));return n.length>=e?n:""+r.repeat(e-n.length)+n}function xv(t){var e=[];while(t.length>0){var r=t.indexOf("%");if(0!==r){var n=r>0?t.substring(0,r):t;e.push(n)}if(r<0)break;var o=t[r+1],i=Sv[o];null!=i&&r++;var a=t[r+1],s=Cv[a];if("function"===typeof s)e.push([s,i]);else if("string"===typeof s){var l=xv(s);e.push([l,i])}else e.push(""+(null!==i&&void 0!==i?i:"")+a);t=t.substring(r+2)}return function(t){var r="number"===typeof t?new Date(t):t;return e.map((function(t){return"string"===typeof t?t:t[0](r,t[1])})).join("")}}var Ov,Ev,Tv=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pv=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dv=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Av=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};(function(t){t[t["MILLISECOND"]=0]="MILLISECOND",t[t["SECOND"]=1]="SECOND",t[t["MINUTE"]=2]="MINUTE",t[t["HOUR"]=3]="HOUR",t[t["WEEK_DAY"]=4]="WEEK_DAY",t[t["SHORT_MONTH"]=5]="SHORT_MONTH",t[t["MONTH"]=6]="MONTH",t[t["SHORT_YEAR"]=7]="SHORT_YEAR",t[t["YEAR"]=8]="YEAR"})(Ev||(Ev={}));var Mv=(Ov={},Ov[Ev.MILLISECOND]=".%L",Ov[Ev.SECOND]=":%S",Ov[Ev.MINUTE]="%I:%M",Ov[Ev.HOUR]="%I %p",Ov[Ev.WEEK_DAY]="%a",Ov[Ev.SHORT_MONTH]="%b %d",Ov[Ev.MONTH]="%B",Ov[Ev.SHORT_YEAR]="%y",Ov[Ev.YEAR]="%Y",Ov);function Rv(t){return t instanceof Date?t.getTime():t}var _v,kv=function(t){function e(){var e=t.call(this,[new Date(2022,11,7),new Date(2022,11,8)],[0,1])||this;return e.type="time",e.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],e.year=bs,e.month=ys,e.week=hs,e.day=ps,e.hour=ls,e.minute=os,e.second=ts,e.millisecond=za,e.tickIntervals=[[e.second,1,Ua],[e.second,5,5*Ua],[e.second,15,15*Ua],[e.second,30,30*Ua],[e.minute,1,Wa],[e.minute,5,5*Wa],[e.minute,15,15*Wa],[e.minute,30,30*Wa],[e.hour,1,Ka],[e.hour,3,3*Ka],[e.hour,6,6*Ka],[e.hour,12,12*Ka],[e.day,1,Xa],[e.day,2,2*Xa],[e.week,1,Ya],[e.week,2,2*Ya],[e.week,3,3*Ya],[e.month,1,qa],[e.month,2,2*qa],[e.month,3,3*qa],[e.month,4,4*qa],[e.month,6,6*qa],[e.year,1,Za]],e}return Tv(e,t),e.prototype.toDomain=function(t){return new Date(t)},e.prototype.calculateDefaultTickFormat=function(t){var e,r;void 0===t&&(t=[]);var n=Ev.YEAR,o=function(t){t<n&&(n=t)};try{for(var i=Pv(t),a=i.next();!a.done;a=i.next()){var s=a.value,l=this.getLowestGranularityFormat(s);o(l)}}catch(f){e={error:f}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}var u=Rv(t[0]),c=Rv(t[t.length-1]),p=new Date(u).getFullYear(),d=new Date(c).getFullYear(),h=d-p>0;return this.buildFormatString(n,h)},e.prototype.buildFormatString=function(t,e){var r=[Mv[t]],n=0,o=this.getDomain(),i=Math.min.apply(Math,Av([],Dv(o.map(Rv)))),a=Math.max.apply(Math,Av([],Dv(o.map(Rv)))),s=a-i;switch(t){case Ev.SECOND:s/Wa>1&&r.push(Mv[Ev.MINUTE]);case Ev.MINUTE:s/Ka>1&&r.push(Mv[Ev.HOUR]);case Ev.HOUR:n=r.length,s/Xa>1&&r.push(Mv[Ev.WEEK_DAY]);case Ev.WEEK_DAY:if(s/Ya>1||e){var l=r.indexOf(Mv[Ev.WEEK_DAY]);l>-1&&r.splice(l,1,Mv[Ev.SHORT_MONTH])}case Ev.SHORT_MONTH:case Ev.MONTH:(s/Za>1||e)&&r.push(Mv[Ev.YEAR])}return n<r.length&&(r=Av(Av([],Dv(r.slice(0,n))),[r.slice(n).join(" ")])),n>0&&(r=Av(Av([],Dv(r.slice(0,n).reverse())),Dv(r.slice(n))),n<r.length&&r.splice(n,0," ")),r.join("")},e.prototype.getLowestGranularityFormat=function(t){return this.second.floor(t)<t?Ev.MILLISECOND:this.minute.floor(t)<t?Ev.SECOND:this.hour.floor(t)<t?Ev.MINUTE:this.day.floor(t)<t?Ev.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?Ev.WEEK_DAY:Ev.SHORT_MONTH:this.year.floor(t)<t?Ev.MONTH:Ev.YEAR},e.prototype.defaultTickFormat=function(t){var e=this.calculateDefaultTickFormat(t);return function(t){return xv(e)(t)}},e.prototype.getTickInterval=function(t){var e,r,n,o=t.start,i=t.stop,a=t.count,s=t.minCount,l=t.maxCount,u=this.tickIntervals,c=null!==a&&void 0!==a?a:ov.defaultTickCount,p=Math.abs(i-o)/Math.max(c,1),d=0;while(d<u.length&&p>u[d][2])d++;if(0===d)n=Math.max(lv(o,i,c,s,l),1),r=this.millisecond;else if(d===u.length){var h=o/Za,f=i/Za;n=lv(h,f,c,s,l),r=this.year}else{var v=p-u[d-1][2],y=u[d][2]-p,g=v<y?d-1:d;e=Dv(u[g],2),r=e[0],n=e[1]}return r.every(n)},e.prototype.invert=function(e){return new Date(t.prototype.invert.call(this,e))},e.prototype.ticks=function(){if(!this.domain||this.domain.length<2)return[];this.refresh();var t=Dv(this.getDomain().map(Rv),2),e=t[0],r=t[1];if(void 0!==this.interval)return this.getTicksForInterval({start:e,stop:r});if(this.nice){var n=this.tickCount;if(2===n)return this.niceDomain;if(1===n)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:e,stop:r})},e.prototype.getDefaultTicks=function(t){var e=t.start,r=t.stop,n=this.getTickInterval({start:e,stop:r,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return n?n.range(new Date(e),new Date(r)):[]},e.prototype.getTicksForInterval=function(t){var e=t.start,r=t.stop,n=this,o=n.interval,i=n.tickIntervals;if(!o)return[];if(o instanceof ja){var a=o.range(new Date(e),new Date(r));return this.isDenseInterval({start:e,stop:r,interval:o,count:a.length})?this.getDefaultTicks({start:e,stop:r}):a}var s=Math.abs(o);if(this.isDenseInterval({start:e,stop:r,interval:s}))return this.getDefaultTicks({start:e,stop:r});var l=Av([],Dv(i));l.reverse();var u=l.find((function(t){return s%t[2]===0}));if(u){var c=u[0].every(s/(u[2]/u[1]));return c.range(new Date(e),new Date(r))}var p=new Date(e),d=new Date(r),h=[];while(p<=d)h.push(p),p=new Date(p),p.setMilliseconds(p.getMilliseconds()+s);return h},e.prototype.tickFormat=function(t){var e=t.ticks,r=t.specifier;return void 0==r?this.defaultTickFormat(e):xv(r)},e.prototype.update=function(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()},e.prototype.updateNiceDomain=function(){for(var t=4,e=Dv(this.domain,2),r=e[0],n=e[1],o=0;o<t;o++){this.updateNiceDomainIteration(r,n);var i=Dv(this.niceDomain,2),a=i[0],s=i[1];if(Rv(r)===Rv(a)&&Rv(n)===Rv(s))break;r=a,n=s}},e.prototype.updateNiceDomainIteration=function(t,e){var r,n=Rv(t),o=Rv(e),i=this.interval;if(i instanceof ja)r=i;else{var a="number"===typeof i?(o-n)/Math.max(i,1):this.tickCount;r=this.getTickInterval({start:n,stop:o,count:a,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){var s=r.range(t,e,!0),l=s[0],u=s[s.length-1];this.niceDomain=[l,u]}},e}(ov),Fv=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Iv=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Lv=function(t){return"("+t+")"},Nv=function(t){return Lv(t)+"?"},Gv=function(t){return Nv("?:"+t)},jv=function(){var t=".",e="[<>=^]",r="[+\\-( ]",n="[$€£¥₣₹#]",o="0",i="\\d+",a=",",s="\\d+",l="~",u="[%a-z]";return new RegExp(["^",Gv(""+Nv(t)+Lv(e)),Nv(r),Nv(n),Nv(o),Nv(i),Nv(a),Gv("\\."+Lv(s)),Nv(l),Nv(u),"$"].join(""),"i")}(),Bv=function(){var t=".*?",e=".+?",r=".*?";return new RegExp(["^",Lv(t),"#\\{"+Lv(e)+"\\}",Lv(r),"$"].join(""))}();function Vv(t){var e,r,n,o=Bv.exec(t);o&&(e=Fv(o,4),r=e[1],t=e[2],n=e[3]);var i=jv.exec(t);if(!i)throw new Error("The number formatter is invalid: "+t);var a=Fv(i,11),s=a[1],l=a[2],u=a[3],c=a[4],p=a[5],d=a[6],h=a[7],f=a[8],v=a[9],y=a[10];return{fill:s,align:l,sign:u,symbol:c,zero:p,width:parseInt(d),comma:h,precision:parseInt(f),trim:Boolean(v),type:y,prefix:r,suffix:n}}function Hv(t){var e,r,n="string"===typeof t?Vv(t):t,o=n.fill,i=n.align,a=n.sign,s=void 0===a?"-":a,l=n.symbol,u=n.zero,c=n.width,p=n.comma,d=n.type,h=n.prefix,f=void 0===h?"":h,v=n.suffix,y=void 0===v?"":v,g=n.precision,m=n.trim,b=void 0===g||isNaN(g);if(d)if(d in Wv&&d in Uv)e=b?Uv[d]:Wv[d];else if(d in Wv)e=Wv[d];else{if(!(d in Uv))throw new Error("The number formatter type is invalid: "+d);e=Uv[d]}else e=Wv["g"],m=!0;return r=null==g||b?d?6:12:g,function(t){var n=e(t,r);return m&&(n=Kv(n)),p&&(n=Xv(n,p)),n=ty(t,n,s),l&&"#"!==l&&(n=""+l+n),"#"===l&&"x"===d&&(n="0x"+n),"s"===d&&(n=""+n+Yv(t)),"%"!==d&&"p"!==d||(n+="%"),null==c||isNaN(c)||(n=ey(n,c,null!==o&&void 0!==o?o:u,i)),n=""+f+n+y,n}}var zv=function(t){return Math.floor(Math.abs(t))},Uv={b:function(t){return zv(t).toString(2)},c:function(t){return String.fromCharCode(t)},d:function(t){return Math.round(Math.abs(t)).toFixed(0)},o:function(t){return zv(t).toString(8)},x:function(t){return zv(t).toString(16)},X:function(t){return Uv.x(t).toUpperCase()},n:function(t){return Uv.d(t)},"%":function(t){return""+zv(100*t).toFixed(0)}},Wv={e:function(t,e){return Math.abs(t).toExponential(e)},E:function(t,e){return Wv.e(t,e).toUpperCase()},f:function(t,e){return Math.abs(t).toFixed(e)},F:function(t,e){return Wv.f(t,e).toUpperCase()},g:function(t,e){if(0===t)return"0";var r=Math.abs(t),n=Math.floor(Math.log10(r));return n>=-4&&n<e?r.toFixed(e-1-n):r.toExponential(e-1)},G:function(t,e){return Wv.g(t,e).toUpperCase()},n:function(t,e){return Wv.g(t,e)},p:function(t,e){return Wv.r(100*t,e)},r:function(t,e){if(0===t)return"0";var r=Math.abs(t),n=Math.floor(Math.log10(r)),o=n-(e-1);if(o<=0)return r.toFixed(-o);var i=Math.pow(10,o);return(Math.round(r/i)*i).toFixed()},s:function(t,e){var r=qv(t);return Wv.r(t/Math.pow(10,r),e)},"%":function(t,e){return Wv.f(100*t,e)}};function Kv(t){return t.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function Xv(t,e){var r=t.indexOf(".");r<0&&(r=t.length);for(var n=t.substring(0,r).split(""),o=t.substring(r),i=n.length-3;i>0;i-=3)n.splice(i,0,e);return""+n.join("")+o}function Yv(t){return Qv[qv(t)]}function qv(t){var e=Math.log10(Math.abs(t)),r=3*Math.floor(e/3);return Math.max(Zv,Math.min(Jv,r))}var Zv=-24,Jv=24,Qv=(_v={},_v[Zv]="y",_v[-21]="z",_v[-18]="a",_v[-15]="f",_v[-12]="p",_v[-9]="n",_v[-6]="µ",_v[-3]="m",_v[0]="",_v[3]="k",_v[6]="M",_v[9]="G",_v[12]="T",_v[15]="P",_v[18]="E",_v[21]="Z",_v[Jv]="Y",_v),$v="−";function ty(t,e,r){if(void 0===r&&(r=""),"("===r)return t>=0?e:"("+e+")";var n="+"===r?"+":"";return""+(t>=0?n:$v)+e}function ey(t,e,r,n){void 0===r&&(r=" "),void 0===n&&(n=">");var o=t;if(">"!==n&&n){if("<"===n)o=o.padEnd(e,r);else if("^"===n){var i=Math.max(0,e-o.length),a=Math.ceil(i/2),s=Math.floor(i/2);o=o.padStart(a+o.length,r),o=o.padEnd(s+o.length,r)}}else o=o.padStart(e,r);return o}function ry(t,e){var r=Vv(null!==e&&void 0!==e?e:",f"),n=r.precision;(null==n||isNaN(n))&&("f"===r.type||"%"===r.type?r.precision=Math.max.apply(Math,Iv([],Fv(t.map((function(t){if("number"!==typeof t||0===t)return 0;var e=Math.floor(Math.log10(Math.abs(t))),n=r.type?6:12,o=t.toExponential(n-1).replace(/\.?0+e/,"e"),i=o.indexOf(".");if(i<0)return e>=0?0:-e;var a=o.indexOf("e")-i;return Math.max(0,a-e-1)}))))):r.type&&!(r.type in Wv)||(r.precision=Math.max.apply(Math,Iv([],Fv(t.map((function(t){if("number"!==typeof t)return 0;var e=t.toExponential((r.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length})))))));var o=Hv(r);return function(t){return o(Number(t))}}var ny=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oy=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},iy=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},ay=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},sy=function(t){return t},ly=function(t){function e(){var e=t.call(this,[1,10],[0,1])||this;return e.type="log",e.base=10,e.cacheProps=["domain","range","nice","tickCount","base"],e.baseLog=sy,e.basePow=sy,e.log=function(t){return e.domain[0]>=0?e.baseLog(t):-e.baseLog(-t)},e.pow=function(t){return e.domain[0]>=0?e.basePow(t):-e.basePow(-t)},e}return ny(e,t),e.prototype.toDomain=function(t){return t},e.prototype.transform=function(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)},e.prototype.transformInvert=function(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)},e.prototype.update=function(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())},e.prototype.updateLogFn=function(){var t,e=this.base;if(10===e)t=Math.log10;else if(e===Math.E)t=Math.log;else if(2===e)t=Math.log2;else{var r=Math.log(e);t=function(t){return Math.log(t)/r}}this.baseLog=t},e.prototype.updatePowFn=function(){var t,r=this.base;t=10===r?e.pow10:r===Math.E?Math.exp:function(t){return Math.pow(r,t)},this.basePow=t},e.prototype.updateNiceDomain=function(){var t=iy(this.domain,2),e=t[0],r=t[1],n=this.pow(Math.floor(this.log(e))),o=this.pow(Math.ceil(this.log(r)));this.niceDomain=[n,o]},e.pow10=function(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)},e.prototype.ticks=function(){var t,e=this,r=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||r<1)return[];this.refresh();var n=this.base,o=iy(this.getDomain(),2),i=o[0],a=o[1],s=this.log(i),l=this.log(a);if(this.interval){var u=Math.abs(this.interval),c=Math.abs(l-s),p=pv(s,l,Math.min(c,u)).map((function(t){return e.pow(t)})).filter((function(t){return t>=i&&t<=a}));if(!this.isDenseInterval({start:i,stop:a,interval:u,count:p.length}))return p}var d=n%1===0,h=l-s>=r;if(!d||h)return av(s,l,Math.min(l-s,r)).map((function(t){return e.pow(t)}));var f=[],v=i>0;s=Math.floor(s)-1,l=Math.round(l)+1;for(var y=Math.min.apply(Math,ay([],iy(this.range))),g=Math.max.apply(Math,ay([],iy(this.range))),m=(g-y)/r,b=1/0,C=s;C<=l;C++)for(var S=this.convert(this.pow(C+1)),w=1;w<n;w++){var x=v?w:n-w+1,O=this.pow(C)*x,E=this.convert(O),T=Math.abs(b-E),P=Math.abs(E-S),D=T>=m&&P>=m;O>=i&&O<=a&&(1===w||D)&&(f.push(O),b=E)}return f},e.prototype.tickFormat=function(t){var e=t.count,r=t.ticks,n=t.specifier,o=this.base;return null==n&&(n=10===o?".0e":","),"string"===typeof n&&(n=Hv(n)),e===1/0?n:(null==r&&this.ticks(),function(t){return n(t)})},oy([du(Gu(0))],e.prototype,"base",void 0),e}(ov);function uy(t){var e=t.length;if(0!==e){for(var r=1/0,n=-1/0,o=0;o<e;o++){var i=t[o];i instanceof Date&&(i=i.getTime()),"number"===typeof i&&(i<r&&(r=i),i>n&&(n=i))}var a=[r,n];if(!a.some((function(t){return!isFinite(t)})))return a}}function cy(t,e,r){var n;return t.length>2&&(t=null!==(n=uy(t))&&void 0!==n?n:[NaN,NaN]),isNaN(e)||(t=[e,t[1]]),isNaN(r)||(t=[t[0],r]),t[0]>t[1]&&(t=[]),t}var py=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},dy=function(){function t(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}return t.prototype.getFont=function(){return Wl(this)},py([du(Ou)],t.prototype,"enabled",void 0),py([du(Gu(0))],t.prototype,"fontSize",void 0),py([du(Tu)],t.prototype,"fontFamily",void 0),py([du(Yu)],t.prototype,"fontStyle",void 0),py([du(Zu)],t.prototype,"fontWeight",void 0),py([du(Fu)],t.prototype,"color",void 0),t}();function hy(t){var e=t.parallelFlipRotation,r=void 0===e?0:e,n=t.regularFlipRotation,o=void 0===n?0:n,i=t.rotation?Al(Rl(t.rotation)):0,a=!i&&r>=0&&r<=Math.PI?-1:1,s=!i&&o>=0&&o<=Math.PI?-1:1,l=0;return t.parallel?l=a*Math.PI/2:-1===s&&(l=Math.PI),{configuredRotation:i,defaultRotation:l,parallelFlipFlag:a,regularFlipFlag:s}}function fy(t,e){return isNaN(t)?e?0:10:t}function vy(t,e,r,n){return t&&!e?r*n===-1?"hanging":"bottom":"middle"}function yy(t,e,r,n,o){var i=e>0&&e<=Math.PI,a=r>0&&r<=Math.PI,s=i||a?-1:1;if(t){if(!e&&!r)return"center";if(n*s===-1)return"end"}else if(n*o===-1)return"end";return"start"}function gy(t,e,r,n,o){var i=e.width,a=e.height,s=new Ls(r,n,0,0);o.transformBBox(s,e);var l=e.x,u=void 0===l?0:l,c=e.y,p=void 0===c?0:c;return e.width=i,e.height=a,{point:{x:u,y:p,size:0},label:{width:i,height:a,text:t}}}function my(t,e){return void 0===e&&(e=[void 0]),pu((function(r,n,o){return e.includes(o)?t:o}))}var by,Cy,Sy=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},wy=function(){function t(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}return t.prototype.getSideFlag=function(){return this.mirrored?1:-1},t.prototype.getFont=function(){return Wl(this)},Sy([du(Ou)],t.prototype,"enabled",void 0),Sy([du(Eu)],t.prototype,"autoWrap",void 0),Sy([du(ju(0))],t.prototype,"maxWidth",void 0),Sy([du(ju(0))],t.prototype,"maxHeight",void 0),Sy([du(Yu)],t.prototype,"fontStyle",void 0),Sy([du(Zu)],t.prototype,"fontWeight",void 0),Sy([du(Gu(1))],t.prototype,"fontSize",void 0),Sy([du(Tu)],t.prototype,"fontFamily",void 0),Sy([du(Gu(0))],t.prototype,"padding",void 0),Sy([du(Bu()),my(NaN)],t.prototype,"minSpacing",void 0),Sy([du(Iu)],t.prototype,"color",void 0),Sy([du(ju(-360,360))],t.prototype,"rotation",void 0),Sy([du(Eu)],t.prototype,"autoRotate",void 0),Sy([du(Gu(-360,360))],t.prototype,"autoRotateAngle",void 0),Sy([du(Ou)],t.prototype,"avoidCollisions",void 0),Sy([du(Ou)],t.prototype,"mirrored",void 0),Sy([du(Ou)],t.prototype,"parallel",void 0),Sy([du(Pu)],t.prototype,"format",void 0),t}(),xy=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Oy=function(){function t(){this.width=1,this.color="rgba(195, 195, 195, 1)"}return xy([du(Gu(0))],t.prototype,"width",void 0),xy([du(Iu)],t.prototype,"color",void 0),t}(),Ey=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ty=hu((function(t,e){return Gu(0)(t,e)||t instanceof ja}),"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Py=hu((function(t,e){return fu(t,e,Ty)}),"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Dy=hu((function(t,e){return fu(t,e,(function(t,e){return 0!==t&&Gu(0)(t,e)||t instanceof ja}))}),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Ay=function(){function t(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}return Ey([du(Ou)],t.prototype,"enabled",void 0),Ey([du(Gu(0))],t.prototype,"width",void 0),Ey([du(Gu(0))],t.prototype,"size",void 0),Ey([du(Iu)],t.prototype,"color",void 0),Ey([du(Py),Ec("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],t.prototype,"count",void 0),Ey([du(Dy)],t.prototype,"interval",void 0),Ey([du(yu())],t.prototype,"values",void 0),Ey([du(gu(Bu(1),Cu("maxSpacing"))),my(NaN)],t.prototype,"minSpacing",void 0),t}(),My=function(){function t(e,r){this.state=e,this.states=r,t.DEBUG()&&ul.debug("%c"+this.constructor.name+" | init -> "+e,"color: green")}return t.prototype.transition=function(e,r){var n,o,i,a,s,l=this.states[this.state],u=null===(n=null===l||void 0===l?void 0:l.on)||void 0===n?void 0:n[e];if(u){var c=u.target,p=this.states[c];return t.DEBUG()&&ul.debug("%c"+this.constructor.name+" | "+this.state+" -> "+e+" -> "+c,"color: green"),u.action(r),null===(i=null===(o=null===l||void 0===l?void 0:l.actions)||void 0===o?void 0:o.onExit)||void 0===i||i.call(o),null===(s=null===(a=null===p||void 0===p?void 0:p.actions)||void 0===a?void 0:a.onEnter)||void 0===s||s.call(a),this.state=c,this.state}t.DEBUG()&&ul.debug("%c"+this.constructor.name+" | "+this.state+" -> "+e+" -> "+this.state,"color: grey")},t.DEBUG=function(){var t;return null!==(t=[!0,"animation"].includes(ml("agChartsDebug")))&&void 0!==t&&t},t}(),Ry=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_y=function(){return _y=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},_y.apply(this,arguments)},ky=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Fy=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},Iy=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ly=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Ny=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Gy=["stroke","lineDash"],jy=hu(vu(void 0,(function(t){for(var e in t)if(!Gy.includes(e))return!1;return!0})),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");(function(t){t[t["TickLine"]=0]="TickLine",t[t["TickLabel"]=1]="TickLabel",t[t["GridLine"]=2]="GridLine",t[t["GridArc"]=3]="GridArc",t[t["AxisLine"]=4]="AxisLine"})(by||(by={})),function(t){t[t["CREATE"]=0]="CREATE",t[t["CREATE_SECONDARY"]=1]="CREATE_SECONDARY",t[t["FILTER"]=2]="FILTER",t[t["VALUES"]=3]="VALUES"}(Cy||(Cy={}));var By=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ry(e,t),e}(My),Vy=function(){function t(t,e){var r=this;this.moduleCtx=t,this.id=Vs(this),this.nice=!0,this.dataDomain=[],this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new yl({name:this.id+"-axis",zIndex:nc.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new $f),this.tickLineGroup=this.axisGroup.appendChild(new yl({name:this.id+"-Axis-tick-lines",zIndex:nc.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new yl({name:this.id+"-Axis-tick-labels",zIndex:nc.AXIS_ZINDEX})),this.crossLineGroup=new yl({name:this.id+"-CrossLines"}),this.gridGroup=new yl({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new yl({name:this.id+"-gridLines",zIndex:nc.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=hh.select(this.tickLineGroup,$f,!1),this.tickLabelGroupSelection=hh.select(this.tickLabelGroup,zl,!1),this.gridLineGroupSelection=hh.select(this.gridLineGroup,$f,!1),this.line=new Oy,this.tick=this.createTick(),this.label=new wy,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.modules={},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new ev,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.maxThickness=1/0,this._scale=e,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node);var n=t.interactionManager.addListener("hover",(function(t){return r.checkAxisHover(t)}));this.destroyFns.push((function(){return t.interactionManager.removeListener(n)})),this.animationManager=t.animationManager,this.animationState=new By("empty",{empty:{on:{update:{target:"align",action:function(){return r.resetSelectionNodes()}}}},align:{on:{update:{target:"ready",action:function(){return r.resetSelectionNodes()}}}},ready:{on:{update:{target:"ready",action:function(t){return r.animateReadyUpdate(t)}}}}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines)}return Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"crossLines",{get:function(){return this._crossLines},set:function(t){var e,r,n=this;null===(e=this._crossLines)||void 0===e||e.forEach((function(t){return n.detachCrossLine(t)})),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(r=this._crossLines)||void 0===r||r.forEach((function(t){n.attachCrossLine(t),n.initCrossLine(t)}))},enumerable:!1,configurable:!0}),t.prototype.attachCrossLine=function(t){this.crossLineGroup.appendChild(t.group)},t.prototype.detachCrossLine=function(t){this.crossLineGroup.removeChild(t.group)},t.prototype.destroy=function(){var t,e;try{for(var r=Iy(Object.entries(this.modules)),n=r.next();!n.done;n=r.next()){var o=Ly(n.value,2),i=o[0],a=o[1];a.instance.destroy(),delete this.modules[i],delete this[i]}}catch(s){t={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.destroyFns.forEach((function(t){return t()}))},t.prototype.refreshScale=function(){var t,e=this;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach((function(t){e.initCrossLine(t)}))},t.prototype.updateRange=function(){var t,e=this,r=e.range,n=e.visibleRange,o=e.scale,i=(r[1]-r[0])/(n[1]-n[0]),a=i*n[0],s=r[0]-a;o.range=[s,s+i],null===(t=this.crossLines)||void 0===t||t.forEach((function(t){t.clippedRange=[r[0],r[1]]}))},t.prototype.setCrossLinesVisible=function(t){this.crossLineGroup.visible=t},t.prototype.attachAxis=function(t){t.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)},t.prototype.detachAxis=function(t){t.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)},t.prototype.inRange=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=0),0===this.inRangeEx(t,e,r)},t.prototype.inRangeEx=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0);var n=this.range,o=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return t+e<o-r?-1:t>i+r?1:0},t.prototype.onLabelFormatChange=function(t,e){var r=this,n=r.scale,o=r.fractionDigits,i=n instanceof ly,a=!i&&o>0?function(t){return"number"===typeof t?t.toFixed(o):String(t)}:function(t){return String(t)};if(e&&n&&n.tickFormat)try{this.labelFormatter=n.tickFormat({ticks:t,specifier:e})}catch(s){this.labelFormatter=a,ul.warnOnce("the axis label format string "+e+" is invalid. No formatting will be applied")}else this.labelFormatter=a},t.prototype.setDomain=function(){var t,e=this,r=e.scale,n=e.dataDomain,o=e.tick.values;if(o&&r instanceof ov){var i=Ly(null!==(t=uy(o))&&void 0!==t?t:[1/0,-1/0],2),a=i[0],s=i[1],l=Math.min(r.fromDomain(n[0]),a),u=Math.max(r.fromDomain(n[1]),s);r.domain=[r.toDomain(l),r.toDomain(u)]}else r.domain=n},t.prototype.setTickInterval=function(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t},t.prototype.setTickCount=function(t,e,r){var n=this.scale;if(t&&n instanceof ov)return"number"===typeof t?(n.tickCount=t,n.minTickCount=null!==e&&void 0!==e?e:0,void(n.maxTickCount=null!==r&&void 0!==r?r:1/0)):void(n instanceof kv&&this.setTickInterval(t))},Object.defineProperty(t.prototype,"gridLength",{get:function(){return this._gridLength},set:function(t){var e,r=this;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear()),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach((function(t){r.initCrossLine(t)}))},enumerable:!1,configurable:!0}),t.prototype.createTick=function(){return new Ay},t.prototype.checkAxisHover=function(t){var e=this.computeBBox(),r=e.containsPoint(t.offsetX,t.offsetY);r&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)},t.prototype.update=function(t){var e=this.tickLabelGroupSelection.nodes().map((function(t){return t.datum.tickId})),r=this.calculateRotations(),n=r.rotation,o=r.parallelFlipRotation,i=r.regularFlipRotation,a=this.label.getSideFlag(),s=a*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:n,sideFlag:a}),this.updateLine();var l=this.generateTicks({primaryTickCount:t,parallelFlipRotation:o,regularFlipRotation:i,labelX:s,sideFlag:a}),u=l.tickData,c=l.combinedRotation,p=l.textBaseline,d=l.textAlign,h=Fy(l,["tickData","combinedRotation","textBaseline","textAlign"]);if(this.updateSelections(u.ticks),this.animationManager.skipAnimations)this.resetSelectionNodes();else{var f=this.calculateUpdateDiff(e,u);this.animationState.transition("update",f)}return this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:c,textBaseline:p,textAlign:d,labelX:s}),this.updateVisibility(),this.updateGridLines(a),this.updateTickLines(a),this.updateTitle({anyTickVisible:u.ticks.length>0,sideFlag:a}),this.updateCrossLines({rotation:n,parallelFlipRotation:o,regularFlipRotation:i,sideFlag:a}),this.updateLayoutState(),t=h.primaryTickCount,t},t.prototype.updateLayoutState=function(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}},t.prototype.updateScale=function(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);var t=this,e=t.scale,r=t.nice;e instanceof ov&&(this.setTickCount(this.tick.count),e.nice=r,e.update())},t.prototype.calculateRotations=function(){var t=Rl(this.rotation),e=Al(t),r=Al(t-Math.PI/2);return{rotation:t,parallelFlipRotation:e,regularFlipRotation:r}},t.prototype.generateTicks=function(t){var e,r,n,o,i=t.primaryTickCount,a=t.parallelFlipRotation,s=t.regularFlipRotation,l=t.labelX,u=t.sideFlag,c=this,p=c.scale,d=c.tick,h=c.label,f=h.parallel,v=h.rotation,y=h.fontFamily,g=h.fontSize,m=h.fontStyle,b=h.fontWeight,C=void 0!==i,S=hy({rotation:v,parallel:f,regularFlipRotation:s,parallelFlipRotation:a}),w=S.defaultRotation,x=S.configuredRotation,O=S.parallelFlipFlag,E=S.regularFlipFlag,T=x+w,P=new js,D=this.estimateTickCount({minSpacing:d.minSpacing,maxSpacing:null!==(o=d.maxSpacing)&&void 0!==o?o:NaN}).maxTickCount,A=p instanceof ov,M=d.count||!A||isNaN(D)?10:D,R=yy(f,x,0,u,E),_=vy(f,x,u,O),k={fontFamily:y,fontSize:g,fontStyle:m,fontWeight:b,textBaseline:_,textAlign:R},F={rawTicks:[],ticks:[],labelCount:0},I=0,L=0,N=!0,G=!1;while(N&&I<=M){if(G)break;L=0,R=yy(f,x,0,u,E);var j=this.getTickStrategies({secondaryAxis:C,index:I});try{for(var B=(e=void 0,Iy(j)),V=B.next();!V.done;V=B.next()){var H=V.value;n=H({index:I,tickData:F,textProps:k,labelOverlap:N,terminate:G,primaryTickCount:i}),F=n.tickData,I=n.index,L=n.autoRotation,G=n.terminate;var z=F.ticks;R=yy(f,x,L,u,E);var U=0!==x||0!==L,W=T+L;N=this.checkLabelOverlap(W,U,P,z,l,_y(_y({},k),{textAlign:R}))}}catch(X){e={error:X}}finally{try{V&&!V.done&&(r=B.return)&&r.call(B)}finally{if(e)throw e.error}}}var K=w+x+L;return!C&&F.rawTicks.length>0&&(i=F.rawTicks.length),{tickData:F,primaryTickCount:i,combinedRotation:K,textBaseline:_,textAlign:R}},t.prototype.getTickStrategies=function(t){var e,r=this,n=t.index,o=t.secondaryAxis,i=this,a=i.scale,s=i.label,l=i.tick,u=a instanceof ov,c=s.enabled&&s.avoidCollisions,p=!(u&&void 0===this.tick.count)&&0!==n&&c,d=!0===s.autoRotate&&void 0===s.rotation,h=[];e=this.tick.values?Cy.VALUES:o?Cy.CREATE_SECONDARY:p?Cy.FILTER:Cy.CREATE;var f=function(t){var n=t.index,o=t.tickData,i=t.primaryTickCount,a=t.terminate;return r.createTickData(e,n,o,a,i)};if(h.push(f),!u&&!isNaN(l.minSpacing)){var v=function(t){var e=t.index,n=t.tickData,o=t.primaryTickCount,i=t.terminate;return r.createTickData(Cy.FILTER,e,n,i,o)};h.push(v)}if(!c)return h;if(s.autoWrap){var y=function(t){var e=t.index,n=t.tickData,o=t.textProps;return r.wrapLabels(n,e,o)};h.push(y)}else if(d){var g=function(t){var e=t.index,n=t.tickData,o=t.labelOverlap,i=t.terminate;return{index:e,tickData:n,autoRotation:r.getAutoRotation(o),terminate:i}};h.push(g)}return h},t.prototype.createTickData=function(t,e,r,n,o){var i,a,s,l=this,u=l.scale,c=l.tick,p=this.estimateTickCount({minSpacing:c.minSpacing,maxSpacing:null!==(i=c.maxSpacing)&&void 0!==i?i:NaN}),d=p.maxTickCount,h=p.minTickCount,f=p.defaultTickCount,v=u instanceof ov,y=c.count||!v||isNaN(d)?10:d,g=null!==(a=c.count)&&void 0!==a?a:v?Math.max(f-e,h):d,m=void 0===c.interval&&void 0===c.values&&void 0===c.count&&g>h&&(v||t===Cy.FILTER),b=!0;while(b&&e<=y){var C=r.rawTicks;g=null!==(s=c.count)&&void 0!==s?s:v?Math.max(f-e,h):d;var S=this.getTicks({tickGenerationType:t,previousTicks:C,tickCount:g,minTickCount:h,maxTickCount:d,primaryTickCount:o}),w=S.rawTicks,x=S.ticks,O=S.labelCount;r.rawTicks=w,r.ticks=x,r.labelCount=O,b=!!m&&rv(w,C),e++}var E=void 0!==c.interval||void 0!==c.values;return n||(n=E),{tickData:r,index:e,autoRotation:0,terminate:n}},t.prototype.checkLabelOverlap=function(t,e,r,n,o,i){js.updateTransformMatrix(r,1,1,t,0,0);var a=this.createLabelData(n,o,i,r),s=fy(this.label.minSpacing,e);return Vp(a,s)},t.prototype.createLabelData=function(t,e,r,n){var o,i,a=[];try{for(var s=Iy(t),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.tickLabel,p=u.translationY;if(""!==c&&void 0!=c){var d=Zl(c),h=Kl(d,e,p,r),f=h.width,v=h.height,y=new Ls(e,p,f,v),g=gy(c,y,e,p,n);a.push(g)}}}catch(m){o={error:m}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return a},t.prototype.getAutoRotation=function(t){return t?Al(Rl(this.label.autoRotateAngle)):0},t.prototype.getTicks=function(t){var e,r=t.tickGenerationType,n=t.previousTicks,o=t.tickCount,i=t.minTickCount,a=t.maxTickCount,s=t.primaryTickCount,l=this.scale,u=[];switch(r){case Cy.VALUES:u=this.tick.values;break;case Cy.CREATE_SECONDARY:u=this.updateSecondaryAxisTicks(s);break;case Cy.FILTER:u=this.filterTicks(n,o);break;default:u=this.createTicks(o,i,a);break}this.onLabelFormatChange(u,this.label.format),this.fractionDigits=u.fractionDigits>=0?u.fractionDigits:0;for(var c=(null!==(e=this.scale.bandwidth)&&void 0!==e?e:0)/2,p=[],d=0,h=new Map,f=0;f<u.length;f++){var v=u[f],y=l.convert(v)+c,g=this.formatTick(v,f),m=g;if(h.has(m)){var b=h.get(m);h.set(m,b+1),m=m+"_"+b}else h.set(m,1);p.push({tick:v,tickId:m,tickLabel:g,translationY:y}),""!==g&&void 0!=g&&d++}return{rawTicks:u,ticks:p,labelCount:d}},t.prototype.filterTicks=function(t,e){var r,n=!isNaN(this.tick.minSpacing)||!isNaN(null!==(r=this.tick.maxSpacing)&&void 0!==r?r:NaN),o=n?Math.ceil(t.length/e):2;return t.filter((function(t,e){return e%o===0}))},t.prototype.createTicks=function(t,e,r){var n,o,i;return this.setTickCount(t,e,r),null!==(i=null===(o=(n=this.scale).ticks)||void 0===o?void 0:o.call(n))&&void 0!==i?i:[]},t.prototype.estimateTickCount=function(e){var r=e.minSpacing,n=e.maxSpacing,o=this.calculateAvailableRange(),i=Math.max(t.defaultTickMinSpacing,o/ov.defaultMaxTickCount);isNaN(r)&&isNaN(n)?(r=i,n=o,r>n&&(n=r)):isNaN(r)?(r=i,r>n&&(r=n)):isNaN(n)&&(n=o,r>n&&(n=r));var a=Math.max(1,Math.floor(o/r)),s=Math.min(a,Math.ceil(o/n)),l=ov.defaultTickCount;return l>a?l=a:l<s&&(l=s),{minTickCount:s,maxTickCount:a,defaultTickCount:l}},t.prototype.updateVisibility=function(){var t=this.range,e=Math.min.apply(Math,Ny([],Ly(t))),r=Math.max.apply(Math,Ny([],Ly(t))),n=function(t){var n=Math.floor(e),o=Math.ceil(r);if(n!==o){t.translationY>=n-1&&t.translationY<n&&(t.translationY=n),t.translationY>o&&t.translationY<=o+1&&(t.translationY=o);var i=t.translationY>=n&&t.translationY<=o;t.visible=i}else t.visible=!1},o=this,i=o.gridLineGroupSelection,a=o.tickLineGroupSelection,s=o.tickLabelGroupSelection;i.each(n),a.each(n),s.each(n),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled},t.prototype.updateCrossLines=function(t){var e,r=this,n=t.rotation,o=t.parallelFlipRotation,i=t.regularFlipRotation,a=t.sideFlag,s=this.isAnySeriesActive();null===(e=this.crossLines)||void 0===e||e.forEach((function(t){var e;t.sideFlag=-a,t.direction=n===-Math.PI/2?oc.X:oc.Y,t.label.parallel=null!==(e=t.label.parallel)&&void 0!==e?e:r.label.parallel,t.parallelFlipRotation=o,t.regularFlipRotation=i,t.update(s)}))},t.prototype.updateTickLines=function(t){var e=this.tick;this.tickLineGroupSelection.each((function(r){r.strokeWidth=e.width,r.stroke=e.color,r.x1=t*e.size,r.x2=0,r.y1=0,r.y2=0}))},t.prototype.calculateAvailableRange=function(){var t=this.range,e=Math.min.apply(Math,Ny([],Ly(t))),r=Math.max.apply(Math,Ny([],Ly(t)));return r-e},t.prototype.calculateDomain=function(){var t,e,r,n=this,o=n.direction,i=n.boundSeries,a=n.includeInvisibleDomains;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{var s=[],l=i.filter((function(t){return a||t.isEnabled()}));try{for(var u=Iy(l),c=u.next();!c.done;c=u.next()){var p=c.value;s.push(p.getDomain(o))}}catch(h){t={error:h}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}var d=(r=new Array).concat.apply(r,Ny([],Ly(s)));this.dataDomain=this.normaliseDataDomain(d)}},t.prototype.updatePosition=function(t){var e=t.rotation,r=t.sideFlag,n=this,o=n.crossLineGroup,i=n.axisGroup,a=n.gridGroup,s=n.translation,l=n.gridLineGroupSelection,u=n.gridPadding,c=n.gridLength,p=Math.floor(s.x),d=Math.floor(s.y);o.translationX=p,o.translationY=d,o.rotation=e,i.translationX=p,i.translationY=d,i.rotation=e,a.translationX=p,a.translationY=d,a.rotation=e,l.each((function(t){t.x1=u,t.x2=-r*c+u,t.y1=0,t.y2=0}))},t.prototype.updateSecondaryAxisTicks=function(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")},t.prototype.updateSelections=function(t){var e=this.gridLength?t:[],r=this.gridLineGroupSelection.update(e,(function(t){var e=new $f;e.tag=by.GridLine,t.append(e)}),(function(t){return t.tickId})),n=this.tickLineGroupSelection.update(t,(function(t){var e=new $f;e.tag=by.TickLine,t.appendChild(e)}),(function(t){return t.tickId})),o=this.tickLabelGroupSelection.update(t,(function(t){var e=new zl;e.tag=by.TickLabel,t.appendChild(e)}),(function(t){return t.tickId}));this.tickLineGroupSelection=n,this.tickLabelGroupSelection=o,this.gridLineGroupSelection=r},t.prototype.updateGridLines=function(t){var e=this,r=e.gridStyle,n=e.tick,o=e.gridPadding,i=e.gridLength;if(0!==i&&0!==r.length){var a=r.length;this.gridLineGroupSelection.each((function(e,s,l){var u=r[l%a];e.x1=o,e.x2=-t*i+o,e.y1=0,e.y2=0,e.stroke=u.stroke,e.strokeWidth=n.width,e.lineDash=u.lineDash,e.fill=void 0}))}},t.prototype.updateLabels=function(t){var e=t.tickLabelGroupSelection,r=t.combinedRotation,n=t.textBaseline,o=t.textAlign,i=t.labelX,a=this,s=a.label,l=a.label.enabled;l&&e.each((function(t,e){var a=e.tickLabel;t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.fontSize=s.fontSize,t.fontFamily=s.fontFamily,t.fill=s.color,t.text=a;var l=""===t.text||void 0==t.text;l?t.visible=!1:(t.textBaseline=n,t.textAlign=o,t.x=i,t.rotationCenterX=i,t.rotation=r,t.visible=!0)}))},t.prototype.wrapLabels=function(t,e,r){var n=this.label,o=n.parallel,i=n.maxWidth,a=n.maxHeight,s=o?Math.round(this.calculateAvailableRange()/t.labelCount):this.maxThickness,l=null!==i&&void 0!==i?i:s,u=o?this.maxThickness:Math.round(this.calculateAvailableRange()/t.labelCount),c=null!==a&&void 0!==a?a:u;return t.ticks.forEach((function(t){var e=t.tickLabel,n="hyphenate",o=zl.wrap(e,l,c,r,n);t.tickLabel=o})),{tickData:t,index:e,autoRotation:0,terminate:!0}},t.prototype.updateLine=function(){var t=this,e=t.lineNode,r=t.range;e.x1=0,e.x2=0,e.y1=r[0],e.y2=r[1],e.strokeWidth=this.line.width,e.stroke=this.line.color,e.visible=!0},t.prototype.updateTitle=function(t){var e,r=t.anyTickVisible,n=t.sideFlag,o=function(t){return t.defaultValue},i=this,a=i.rotation,s=i.title,l=i._titleCaption,u=i.lineNode,c=i.range,p=i.tickLineGroup,d=i.tickLabelGroup,h=i.moduleCtx.callbackCache,f=(null!==(e=this.title)&&void 0!==e?e:{}).formatter,v=void 0===f?o:f;if(s){l.enabled=s.enabled,l.fontFamily=s.fontFamily,l.fontSize=s.fontSize,l.fontStyle=s.fontStyle,l.fontWeight=s.fontWeight,l.color=s.color,l.wrapping=s.wrapping;var y=!1,g=l.node;if(s.enabled&&u.visible){y=!0;var m=Al(a),b=ev.PADDING,C=-1===n&&m>Math.PI&&m<2*Math.PI?-1:1;g.rotation=C*n*Math.PI/2,g.x=Math.floor(C*n*(c[0]+c[1])/2);var S=0;if(r){var w=yl.computeBBox([p,d]),x=0===a?w.width:w.height;Math.abs(x)<1/0&&(S+=x)}g.y=-1===n?Math.floor(C*(-b-S)):Math.floor(-b-S),g.textBaseline=1===C?"bottom":"top",g.text=h.call(v,this.getTitleFormatterParams())}g.visible=y}else l.enabled=!1},t.prototype.formatTick=function(t,e){var r,n,o=this,i=o.label,a=o.labelFormatter,s=o.fractionDigits,l=o.moduleCtx.callbackCache;if(i.formatter){var u=s>0?t:String(t);return null!==(r=l.call(i.formatter,{value:u,index:e,fractionDigits:s,formatter:a}))&&void 0!==r?r:u}return a&&null!==(n=l.call(a,t))&&void 0!==n?n:String(t)},t.prototype.formatDatum=function(t){return String(t)},t.prototype.computeBBox=function(){return this.axisGroup.computeBBox()},t.prototype.initCrossLine=function(t){t.scale=this.scale,t.gridLength=this.gridLength},t.prototype.isAnySeriesActive=function(){var t=this;return this.boundSeries.some((function(e){return t.includeInvisibleDomains||e.isEnabled()}))},t.prototype.clipTickLines=function(t,e,r,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new Ls(t,e,r,n))},t.prototype.clipGrid=function(t,e,r,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new Ls(t,e,r,n))},t.prototype.calculatePadding=function(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]},t.prototype.getTitleFormatterParams=function(){var t,e=this,r=this.boundSeries.reduce((function(t,r){for(var n=r.getKeys(e.direction),o=r.getNames(e.direction),i=0;i<n.length;i++)t.push({key:n[i],name:o[i]});return t}),[]);return{direction:this.direction,boundSeries:r,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}},t.prototype.normaliseDataDomain=function(t){return t},t.prototype.getLayoutState=function(){return _y({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)},t.prototype.createAxisContext=function(){var t=this,e=function(){return t.boundSeries.map((function(e){return e.getKeys(t.direction)})).reduce((function(t,e){return t.push.apply(t,Ny([],Ly(e))),t}),[])};return{axisId:this.id,direction:this.direction,continuous:this.scale instanceof ov,keys:e,scaleValueFormatter:function(e){var r,n,o;return null!==(o=null===(n=(r=t.scale).tickFormat)||void 0===n?void 0:n.call(r,{specifier:e}))&&void 0!==o?o:void 0},scaleBandwidth:function(){var e;return null!==(e=t.scale.bandwidth)&&void 0!==e?e:0},scaleConvert:function(e){return t.scale.convert(e)},scaleInvert:function(e){var r,n,o;return null!==(o=null===(n=(r=t.scale).invert)||void 0===n?void 0:n.call(r,e))&&void 0!==o?o:void 0}}},t.prototype.addModule=function(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);null==this.axisContext&&(this.axisContext=this.createAxisContext());var e=new t.instanceConstructor(_y(_y({},this.moduleCtx),{parent:this.axisContext}));this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e},t.prototype.removeModule=function(t){var e,r;null===(r=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===r||r.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]},t.prototype.isModuleEnabled=function(t){return null!=this.modules[t.optionsKey]},t.prototype.animateReadyUpdate=function(t){var e,r,n=this;if(t.changed){var o=this,i=o.gridLineGroupSelection,a=o.tickLineGroupSelection,s=o.tickLabelGroupSelection,l=Object.keys(t.added).length,u=Object.keys(t.removed).length;if(u!==t.tickCount){var c=null!==(r=null===(e=this.animationManager)||void 0===e?void 0:e.defaultOptions.duration)&&void 0!==r?r:1e3,p=Math.floor(c/2);l>0&&u>0&&(p=Math.floor(c/3));var d={delay:u>0?p:0,duration:p},h=this.id+"_"+Math.random();s.each((function(e,r){n.animateSelectionNode(s,t,d,e,r,h)})),i.each((function(e,r){n.animateSelectionNode(i,t,d,e,r,h)})),a.each((function(e,r){n.animateSelectionNode(a,t,d,e,r,h)}))}else this.resetSelectionNodes()}else this.resetSelectionNodes()},t.prototype.animateSelectionNode=function(t,e,r,n,o,i){var a=Math.round(o.translationY),s={from:n.translationY,to:a},l={from:1,to:1},u=r.duration,c=r.delay,p=o.tickLabel;e.added[p]?(s={from:a,to:a},l={from:0,to:1},c+=u):e.removed[p]&&(l={from:1,to:0},c=0);var d=[s,l];this.animationManager.animateManyWithThrottle(this.id+"_ready-update_"+n.id,d,{disableInteractions:!1,delay:c,duration:u,ease:Cd,throttleId:this.id,throttleGroup:i,onUpdate:function(t){var e=Ly(t,2),r=e[0],o=e[1];n.translationY=r,n.opacity=o},onComplete:function(){t.cleanup()}})},t.prototype.resetSelectionNodes=function(){var t=this,e=t.gridLineGroupSelection,r=t.tickLineGroupSelection,n=t.tickLabelGroupSelection;e.cleanup(),r.cleanup(),n.cleanup();var o=function(t){t.translationY=Math.round(t.datum.translationY),t.opacity=1};e.each(o),r.each(o),n.each(o)},t.prototype.calculateUpdateDiff=function(t,e){for(var r,n=new Set,o=new Set,i=Math.max(t.length,e.ticks.length),a=0;a<i;a++){var s=t[a],l=null===(r=e.ticks[a])||void 0===r?void 0:r.tickId;s!==l&&(o.has(l)?o.delete(l):l&&n.add(l),n.has(s)?n.delete(s):s&&o.add(s))}var u={},c={};return n.forEach((function(t){u[t]=!0})),o.forEach((function(t){c[t]=!0})),{changed:n.size>0||o.size>0,tickCount:i,added:u,removed:c}},t.defaultTickMinSpacing=50,ky([du(Ou)],t.prototype,"nice",void 0),ky([du(zu)],t.prototype,"keys",void 0),ky([du(jy)],t.prototype,"gridStyle",void 0),t}(),Hy=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},zy=function(){function t(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}return Hy([du(Ou)],t.prototype,"enabled",void 0),Hy([du(Pu)],t.prototype,"text",void 0),Hy([du(Yu)],t.prototype,"fontStyle",void 0),Hy([du(Zu)],t.prototype,"fontWeight",void 0),Hy([du(Gu(0))],t.prototype,"fontSize",void 0),Hy([du(Tu)],t.prototype,"fontFamily",void 0),Hy([du(Iu)],t.prototype,"color",void 0),Hy([du(cc)],t.prototype,"wrapping",void 0),Hy([du(xu)],t.prototype,"formatter",void 0),t}(),Uy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wy=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Ky=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e.color="rgba(0, 0, 0, 0.5)",e.xOffset=0,e.yOffset=0,e.blur=5,e}return Uy(e,t),Wy([du(Ou),Us({redraw:_s.MAJOR})],e.prototype,"enabled",void 0),Wy([du(Fu),Us({redraw:_s.MAJOR})],e.prototype,"color",void 0),Wy([du(Gu()),Us({redraw:_s.MAJOR})],e.prototype,"xOffset",void 0),Wy([du(Gu()),Us({redraw:_s.MAJOR})],e.prototype,"yOffset",void 0),Wy([du(Gu(0)),Us({redraw:_s.MAJOR})],e.prototype,"blur",void 0),e}(Ys),Xy=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yy=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},qy=function(t){function e(){var e=t.call(this,[0,1],[0,1])||this;return e.type="linear",e}return Xy(e,t),e.prototype.toDomain=function(t){return t},e.prototype.ticks=function(){var t,e=null!==(t=this.tickCount)&&void 0!==t?t:ov.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some((function(t){return!isFinite(t)})))return[];this.refresh();var r=Yy(this.getDomain(),2),n=r[0],o=r[1],i=this.interval;if(i){var a=Math.abs(i);if(!this.isDenseInterval({start:n,stop:o,interval:a}))return pv(n,o,a)}return av(n,o,e,this.minTickCount,this.maxTickCount)},e.prototype.update=function(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()},e.prototype.updateNiceDomain=function(){var t,e,r=null!==(t=this.tickCount)&&void 0!==t?t:ov.defaultTickCount,n=Yy(this.domain,2),o=n[0],i=n[1];if(r<1)this.niceDomain=[o,i];else if(1!==r){for(var a=4,s=o,l=i,u=0;u<a;u++){var c=null!==(e=this.interval)&&void 0!==e?e:lv(o,i,r,this.minTickCount,this.maxTickCount),p=Yy(this.domain,2),d=p[0],h=p[1];if(c>=1)o=Math.floor(d/c)*c,i=Math.ceil(h/c)*c;else{var f=1/c;o=Math.floor(d*f)/f,i=Math.ceil(h*f)/f}if(o===s&&i===l)break;s=o,l=i}this.niceDomain=[o,i]}else this.niceDomain=uv(o,i)},e.prototype.tickFormat=function(t){var e=t.ticks,r=t.specifier;return ry(null!==e&&void 0!==e?e:this.ticks(),r)},e}(ov);function Zy(t,e,r){return void 0===r&&(r=1e-10),Math.abs(t-e)<r}function Jy(t,e){void 0===e&&(e=2);var r=Math.floor(Math.log(Math.abs(t))/Math.LN10);return r>=0||!isFinite(r)?t.toFixed(e):t.toFixed(Math.abs(r)-1+e)}function Qy(t,e){return t>=0?Math.floor(t%e):Math.floor(t%e+e)}function $y(t,e,r){var n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),o=r.innerRadius,i=r.outerRadius;if(n<Math.min(o,i)||n>Math.max(o,i))return!1;var a=Math.atan2(e,t);a<-Math.PI/2&&(a+=2*Math.PI);var s=r.startAngle,l=r.endAngle;return l===-Math.PI/2?a<s:s===3*Math.PI/2?a>l:a<=l&&a>=s}function tg(t,e){var r=e.startAngle,n=e.endAngle,o=e.innerRadius,i=e.outerRadius,a={x:i*Math.cos(r),y:i*Math.sin(r)},s={x:i*Math.cos(n),y:i*Math.sin(n)},l=0===o?{x:0,y:0}:{x:o*Math.cos(r),y:o*Math.sin(r)},u=0===o?{x:0,y:0}:{x:o*Math.cos(n),y:o*Math.sin(n)};return null!=mh(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,l.x,l.y)||null!=mh(t.start.x,t.start.y,t.end.x,t.end.y,s.x,s.y,u.x,u.y)||Sh(0,0,i,r,n,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}function eg(t,e){var r={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},o={x:t.x,y:t.y+t.height},i={x:t.x+t.width,y:t.y+t.height};return tg({start:r,end:n},e)||tg({start:o,end:i},e)}var rg,ng=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),og=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ig=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.centerX=0,e.centerY=0,e.innerRadius=10,e.outerRadius=20,e.startAngle=0,e.endAngle=2*Math.PI,e.angleOffset=0,e}return ng(e,t),e.prototype.computeBBox=function(){var t=this.outerRadius;return new Ls(this.centerX-t,this.centerY-t,2*t,2*t)},e.prototype.updatePath=function(){var t=this.path,e=this.angleOffset,r=this.startAngle+e,n=this.endAngle+e,o=Math.min(this.innerRadius,this.outerRadius),i=Math.max(this.innerRadius,this.outerRadius),a=Zy(Al(this.startAngle),Al(this.endAngle)),s=this.centerX,l=this.centerY;t.clear(),a?(t.arc(s,l,i,r,n),o>0&&(t.moveTo(s+o*Math.cos(n),l+o*Math.sin(n)),t.arc(s,l,o,n,r,!0))):(t.moveTo(s+o*Math.cos(r),l+o*Math.sin(r)),t.arc(s,l,i,r,n),o>0?t.arc(s,l,o,n,r,!0):t.lineTo(s,l)),t.closePath(),this.dirtyPath=!1},e.prototype.isPointInPath=function(t,e){var r=this.angleOffset,n=this.startAngle+r,o=this.endAngle+r,i=Math.min(this.innerRadius,this.outerRadius),a=Math.max(this.innerRadius,this.outerRadius),s=this.transformPoint(t,e);return $y(s.x,s.y,{startAngle:n,endAngle:o,innerRadius:i,outerRadius:a})},e.className="Sector",og([Ph()],e.prototype,"centerX",void 0),og([Ph()],e.prototype,"centerY",void 0),og([Ph()],e.prototype,"innerRadius",void 0),og([Ph()],e.prototype,"outerRadius",void 0),og([Ph()],e.prototype,"startAngle",void 0),og([Ph()],e.prototype,"endAngle",void 0),og([Ph()],e.prototype,"angleOffset",void 0),e}(Dh),ag=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sg=function(t){function e(e){var r,n,o=e.moduleCtx,i=e.useLabelLayer,a=void 0!==i&&i,s=e.pickModes,l=void 0===s?[sp.EXACT_SHAPE_MATCH]:s,u=t.call(this,{moduleCtx:o,useLabelLayer:a,pickModes:l,contentGroupVirtual:!1,directionKeys:(r={},r[oc.X]=["angleKey"],r[oc.Y]=["radiusKey"],r),directionNames:(n={},n[oc.X]=["angleName"],n[oc.Y]=["radiusName"],n)})||this;return u.centerX=0,u.centerY=0,u.radius=0,u}return ag(e,t),e.prototype.getLabelData=function(){return[]},e.prototype.computeLabelsBBox=function(t,e){return null},e}(Rp),lg=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ug=function(){return ug=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ug.apply(this,arguments)},cg=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},pg=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},dg=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},hg=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},fg=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},vg=function(t){function e(e,r,n,o,i,a,s){var l=t.call(this,i,a,s)||this;return l.angleKey=e,l.calloutLabelKey=r,l.sectorLabelKey=n,l.radiusKey=o,l}return lg(e,t),e}(wp),yg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeClick",e}return lg(e,t),e}(vg),gg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return lg(e,t),e}(vg);(function(t){t[t["Sector"]=0]="Sector",t[t["Callout"]=1]="Callout",t[t["Label"]=2]="Label"})(rg||(rg={}));var mg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offset=3,e.minAngle=0,e.formatter=void 0,e.minSpacing=4,e.maxCollisionOffset=50,e.avoidCollisions=!0,e}return lg(e,t),cg([du(Gu(0))],e.prototype,"offset",void 0),cg([du(Gu(0))],e.prototype,"minAngle",void 0),cg([du(xu)],e.prototype,"formatter",void 0),cg([du(Gu(0))],e.prototype,"minSpacing",void 0),cg([du(Gu(0))],e.prototype,"maxCollisionOffset",void 0),cg([du(Ou)],e.prototype,"avoidCollisions",void 0),e}(dy),bg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.positionOffset=0,e.positionRatio=.5,e.formatter=void 0,e}return lg(e,t),cg([du(Gu())],e.prototype,"positionOffset",void 0),cg([du(Gu(0,1))],e.prototype,"positionRatio",void 0),cg([du(xu)],e.prototype,"formatter",void 0),e}(dy),Cg=function(){function t(){this.colors=void 0,this.length=10,this.strokeWidth=1}return cg([du(Nu)],t.prototype,"colors",void 0),cg([du(Gu(0))],t.prototype,"length",void 0),cg([du(Gu(0))],t.prototype,"strokeWidth",void 0),t}(),Sg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return lg(e,t),cg([du(xu)],e.prototype,"renderer",void 0),e}(Ap),wg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showInLegend=!1,e}return lg(e,t),cg([du(Ou)],e.prototype,"showInLegend",void 0),e}(ev),xg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="",e.margin=2,e}return lg(e,t),cg([du(Tu)],e.prototype,"text",void 0),cg([du(Gu())],e.prototype,"margin",void 0),e}(dy),Og=function(){function t(){this.fill="transparent",this.fillOpacity=1}return cg([du(Fu)],t.prototype,"fill",void 0),cg([du(ju(0,1))],t.prototype,"fillOpacity",void 0),t}(),Eg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lg(e,t),e}(My),Tg=function(t){function e(e){var r,n,o,i=t.call(this,{moduleCtx:e,useLabelLayer:!0})||this;i.radiusScale=new qy,i.groupSelection=hh.select(i.contentGroup,yl),i.highlightSelection=hh.select(i.highlightGroup,yl),i.nodeData=[],i.seriesItemEnabled=[],i.title=void 0,i.calloutLabel=new mg,i.sectorLabel=new bg,i.calloutLine=new Cg,i.tooltip=new Sg,i.angleKey="",i.angleName="",i.innerLabels=[],i.innerCircle=void 0,i.radiusKey=void 0,i.radiusName=void 0,i.radiusMin=void 0,i.radiusMax=void 0,i.calloutLabelKey=void 0,i.calloutLabelName=void 0,i.sectorLabelKey=void 0,i.sectorLabelName=void 0,i.legendItemKey=void 0,i.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],i.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],i.fillOpacity=1,i.strokeOpacity=1,i.lineDash=[0],i.lineDashOffset=0,i.formatter=void 0,i.rotation=0,i.outerRadiusOffset=0,i.outerRadiusRatio=1,i.innerRadiusOffset=0,i.innerRadiusRatio=1,i.strokeWidth=1,i.shadow=void 0,i.highlightStyle=new Dp,i.surroundingRadius=void 0,i.angleScale=new qy,i.angleScale.domain=[0,1],i.angleScale.range=[-Math.PI,Math.PI].map((function(t){return t+Math.PI/2})),i.backgroundGroup=i.rootGroup.appendChild(new yl({name:i.id+"-background",layer:!0,zIndex:nc.SERIES_BACKGROUND_ZINDEX}));var a=new yl({name:"pieCalloutLabels"}),s=new yl({name:"pieSectorLabels"}),l=new yl({name:"innerLabels"});return null===(r=i.labelGroup)||void 0===r||r.append(a),null===(n=i.labelGroup)||void 0===n||n.append(s),null===(o=i.labelGroup)||void 0===o||o.append(l),i.calloutLabelSelection=hh.select(a,yl),i.sectorLabelSelection=hh.select(s,zl),i.innerLabelsSelection=hh.select(l,zl),i.animationState=new Eg("empty",{empty:{on:{update:{target:"ready",action:function(){return i.animateEmptyUpdateReady()}}}},ready:{on:{update:{target:"ready",action:function(){return i.animateReadyUpdateReady()}}}}}),i}return lg(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.processSeriesItemEnabled()},enumerable:!1,configurable:!0}),e.prototype.addChartEventListeners=function(){var t,e=this;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",(function(t){return e.onLegendItemClick(t)}))},e.prototype.visibleChanged=function(){this.processSeriesItemEnabled()},e.prototype.processSeriesItemEnabled=function(){var t,e=this,r=e.data,n=e.visible;this.seriesItemEnabled=null!==(t=null===r||void 0===r?void 0:r.map((function(){return n})))&&void 0!==t?t:[]},e.prototype.getDomain=function(t){return t===oc.X?this.angleScale.domain:this.radiusScale.domain},e.prototype.processData=function(t){var e,r;return pg(this,void 0,void 0,(function(){var n,o,i,a,s,l,u,c,p,d,h,f,v;return dg(this,(function(y){switch(y.label){case 0:return n=this.data,o=void 0===n?[]:n,i=this,a=i.angleKey,s=i.radiusKey,l=i.calloutLabelKey,u=i.sectorLabelKey,c=i.legendItemKey,p=i.seriesItemEnabled,a?(d=[],s&&(d.push(bp(this,s,{id:"radiusValue",min:null!==(e=this.radiusMin)&&void 0!==e?e:0,max:this.radiusMax}),mp(this,s,!0,{id:"radiusRaw"}),$c(this,{id:"radiusValue"},[0,1],null!==(r=this.radiusMin)&&void 0!==r?r:0,this.radiusMax)),d.push()),l&&d.push(mp(this,l,!1,{id:"calloutLabelValue"})),u&&d.push(mp(this,u,!1,{id:"sectorLabelValue"})),c&&d.push(mp(this,c,!1,{id:"legendItemValue"})),o=o.map((function(t,e){var r;return p[e]?t:ug(ug({},t),(r={},r[a]=0,r))})),[4,t.request(this.id,o,{props:fg([Cp(this,a,!0,{id:"angleValue"}),mp(this,a,!0,{id:"angleRaw"}),$c(this,{id:"angleValue"},[0,1],0)],hg(d))})]):[2];case 1:return h=y.sent(),f=h.dataModel,v=h.processedData,this.dataModel=f,this.processedData=v,[2]}}))}))},e.prototype.maybeRefreshNodeData=function(){if(this.nodeDataRefresh){var t=hg(this._createNodeData(),1),e=t[0],r=void 0===e?{}:e,n=r.nodeData,o=void 0===n?[]:n;this.nodeData=o,this.nodeDataRefresh=!1}},e.prototype.createNodeData=function(){return pg(this,void 0,void 0,(function(){return dg(this,(function(t){return[2,this._createNodeData()]}))}))},e.prototype.getProcessedDataIndexes=function(t){var e=t.resolveProcessedDataIndexById(this,"angleValue").index,r=this.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,n=this.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,o=this.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,i=this.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1;return{angleIdx:e,radiusIdx:r,calloutLabelIdx:n,sectorLabelIdx:o,legendItemIdx:i}},e.prototype._createNodeData=function(){var t=this,e=this,r=e.id,n=e.processedData,o=e.dataModel,i=e.rotation,a=e.angleScale;if(!n||!o||"ungrouped"!==n.type)return[];var s=this.getProcessedDataIndexes(o),l=s.angleIdx,u=s.radiusIdx,c=s.calloutLabelIdx,p=s.sectorLabelIdx,d=s.legendItemIdx,h=0,f=n.data.map((function(e,r){var n,o=e.datum,s=e.values,f=s[l],v=a.convert(h)+Rl(i);h=f;var y=a.convert(h)+Rl(i),g=Math.abs(y-v),m=v+g/2,b=s[l+1],C=u>=0&&null!==(n=s[u])&&void 0!==n?n:1,S=u>=0?s[u+1]:void 0,w=d>=0?s[d]:void 0,x=t.getLabels(o,m,g,!0,f,S,s[c],s[p],w),O=t.getSectorFormat(o,r,r,!1);return ug({itemId:r,series:t,datum:o,index:r,angleValue:b,midAngle:m,midCos:Math.cos(m),midSin:Math.sin(m),startAngle:v,endAngle:y,sectorFormat:O,radius:C,radiusValue:S,legendItemValue:w},x)}));return[{itemId:r,nodeData:f,labelData:f}]},e.prototype.getLabels=function(t,e,r,n,o,i,a,s,l){var u=this,c=u.calloutLabel,p=u.sectorLabel,d=u.legendItemKey,h=u.ctx.callbackCache,f=!n||c.enabled?this.calloutLabelKey:void 0,v=!n||p.enabled?this.sectorLabelKey:void 0;if(!f&&!v&&!d)return{};var y,g,m=this.getLabelFormatterParams(t,o,i,a,s);if(f){var b=Rl(c.minAngle),C=r>b;y=C?c.formatter?h.call(c.formatter,m):String(a):void 0}return v&&(g=p.formatter?h.call(p.formatter,m):String(s)),ug(ug(ug({},null!=y?{calloutLabel:ug(ug({},this.getTextAlignment(e)),{text:y,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),null!=g?{sectorLabel:{text:g}}:{}),null!=d&&null!=l?{legendItem:{key:d,text:l}}:{})},e.prototype.getLabelFormatterParams=function(t,e,r,n,o){var i=this,a=i.id,s=i.radiusKey,l=i.radiusName,u=i.angleKey,c=i.angleName,p=i.calloutLabelKey,d=i.calloutLabelName,h=i.sectorLabelKey,f=i.sectorLabelName;return{datum:t,angleKey:u,angleValue:e,angleName:c,radiusKey:s,radiusValue:r,radiusName:l,calloutLabelKey:p,calloutLabelValue:n,calloutLabelName:d,sectorLabelKey:h,sectorLabelValue:o,sectorLabelName:f,seriesId:a}},e.prototype.getTextAlignment=function(t){var e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],r=Ml(t),n=-3*Math.PI/4,o=r-n,i=Math.floor(o/(Math.PI/2)),a=Qy(i,e.length);return e[a]},e.prototype.getSectorFormat=function(t,e,r,n){var o,i,a,s,l,u,c,p,d,h=this,f=h.angleKey,v=h.radiusKey,y=h.fills,g=h.strokes,m=h.fillOpacity,b=h.formatter,C=h.id,S=h.ctx,w=S.callbackCache,x=S.highlightManager,O=null===x||void 0===x?void 0:x.getActiveHighlight(),E=n&&(null===O||void 0===O?void 0:O.series)===this&&e===O.itemId,T=E?this.highlightStyle.item:null,P=null!==(o=null===T||void 0===T?void 0:T.fill)&&void 0!==o?o:y[r%y.length],D=null!==(i=null===T||void 0===T?void 0:T.fillOpacity)&&void 0!==i?i:m,A=null!==(a=null===T||void 0===T?void 0:T.stroke)&&void 0!==a?a:g[r%g.length],M=null!==(s=null===T||void 0===T?void 0:T.strokeWidth)&&void 0!==s?s:this.getStrokeWidth(this.strokeWidth);return b&&(d=w.call(b,{datum:t,angleKey:f,radiusKey:v,fill:P,stroke:A,strokeWidth:M,highlighted:E,seriesId:C})),{fill:null!==(l=null===d||void 0===d?void 0:d.fill)&&void 0!==l?l:P,fillOpacity:null!==(u=null===d||void 0===d?void 0:d.fillOpacity)&&void 0!==u?u:D,stroke:null!==(c=null===d||void 0===d?void 0:d.stroke)&&void 0!==c?c:A,strokeWidth:null!==(p=null===d||void 0===d?void 0:d.strokeWidth)&&void 0!==p?p:M}},e.prototype.getInnerRadius=function(){var t=this,e=t.radius,r=t.innerRadiusRatio,n=t.innerRadiusOffset,o=e*(null!==r&&void 0!==r?r:1)+(n||0);return o===e||o<0?0:o},e.prototype.getOuterRadius=function(){var t=this,e=t.radius,r=t.outerRadiusRatio,n=t.outerRadiusOffset,o=e*(null!==r&&void 0!==r?r:1)+(n||0);return o<0?0:o},e.prototype.updateRadiusScale=function(){var t=this.getInnerRadius(),e=this.getOuterRadius();this.radiusScale.range=[t,e]},e.prototype.getTitleTranslationY=function(){var t,e,r=Math.max(0,this.radiusScale.range[1]);if(0===r)return NaN;var n=null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0,o=2+n,i=Math.max(0,-r);return-r-o-i},e.prototype.update=function(t){var e=t.seriesRect;return pg(this,void 0,void 0,(function(){var t,r,n;return dg(this,(function(o){switch(o.label){case 0:return t=this.title,this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t&&(r=this.getTitleTranslationY(),n=t.node.computeBBox(),t.node.visible=t.enabled&&isFinite(r)&&!this.bboxIntersectsSurroundingSeries(n,0,r),t.node.translationY=isFinite(r)?r:0),this.updateNodeMidPoint(),[4,this.updateSelections()];case 1:return o.sent(),[4,this.updateNodes(e)];case 2:return o.sent(),[2]}}))}))},e.prototype.updateTitleNodes=function(){var t,e,r=this,n=r.title,o=r.oldTitle;o!==n&&(o&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(o.node)),n&&(n.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(n.node)),this.oldTitle=n)},e.prototype.updateInnerCircleNodes=function(){var t,e=this,r=e.innerCircle,n=e.oldInnerCircle,o=e.innerCircleNode;if(n!==r){var i=void 0;o&&this.backgroundGroup.removeChild(o),r&&(i=new jh,i.fill=r.fill,i.fillOpacity=null!==(t=r.fillOpacity)&&void 0!==t?t:1,this.backgroundGroup.appendChild(i)),this.oldInnerCircle=r,this.innerCircleNode=i}},e.prototype.updateNodeMidPoint=function(){var t=this;this.nodeData.forEach((function(e){var r=t.radiusScale.convert(e.radius);e.nodeMidPoint={x:e.midCos*Math.max(0,r/2),y:e.midSin*Math.max(0,r/2)}}))},e.prototype.updateSelections=function(){return pg(this,void 0,void 0,(function(){return dg(this,(function(t){switch(t.label){case 0:return[4,this.updateGroupSelection()];case 1:return t.sent(),[2]}}))}))},e.prototype.updateGroupSelection=function(){return pg(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s=this;return dg(this,(function(l){return t=this,e=t.groupSelection,r=t.highlightSelection,n=t.calloutLabelSelection,o=t.sectorLabelSelection,i=t.innerLabelsSelection,a=function(t){return t.update(s.nodeData,(function(t){var e=new ig;e.tag=rg.Sector,t.appendChild(e)}))},this.groupSelection=a(e),this.highlightSelection=a(r),n.update(this.nodeData,(function(t){var e=new $f;e.tag=rg.Callout,e.pointerEvents=Xs.None,t.appendChild(e);var r=new zl;r.tag=rg.Label,r.pointerEvents=Xs.None,t.appendChild(r)})),o.update(this.nodeData,(function(t){t.pointerEvents=Xs.None})),i.update(this.innerLabels,(function(t){t.pointerEvents=Xs.None})),[2]}))}))},e.prototype.updateNodes=function(t){var e;return pg(this,void 0,void 0,(function(){var r,n,o,i,a,s=this;return dg(this,(function(l){return r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=this.seriesItemEnabled.indexOf(!0)>=0,this.rootGroup.visible=n,this.backgroundGroup.visible=n,this.contentGroup.visible=n,this.highlightGroup.visible=n&&(null===r||void 0===r?void 0:r.series)===this,this.labelGroup&&(this.labelGroup.visible=n),this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle(),o=this.radiusScale,i=o.convert(0),a=function(t,e,r,n){var a=o.convert(e.radius),l=t.parent,u=null===l||void 0===l?void 0:l.parent;n&&l&&u&&(u.removeChild(l),u.appendChild(l)),t.innerRadius=Math.max(0,i),t.outerRadius=Math.max(0,a),n&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle);var c=s.getSectorFormat(e.datum,e.itemId,r,n);t.fill=c.fill,t.stroke=c.stroke,t.strokeWidth=c.strokeWidth,t.fillOpacity=c.fillOpacity,t.strokeOpacity=s.strokeOpacity,t.lineDash=s.lineDash,t.lineDashOffset=s.lineDashOffset,t.fillShadow=s.shadow,t.lineJoin="round",t.visible=s.seriesItemEnabled[r]},this.groupSelection.selectByTag(rg.Sector).forEach((function(t,e){return a(t,t.datum,e,!1)})),this.highlightSelection.selectByTag(rg.Sector).forEach((function(t,e){var n=(null===r||void 0===r?void 0:r.series)===s&&t.datum.itemId===r.itemId;n?a(t,t.datum,e,n):t.visible=!1})),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),[2]}))}))},e.prototype.updateCalloutLineNodes=function(){var t,e=this,r=e.radiusScale,n=e.calloutLine,o=n.length,i=n.strokeWidth,a=null!==(t=n.colors)&&void 0!==t?t:this.strokes,s=this.calloutLabel.offset;this.calloutLabelSelection.selectByTag(rg.Callout).forEach((function(t,e){var n=t.datum,l=r.convert(n.radius),u=Math.max(0,l),c=n.calloutLabel;if((null===c||void 0===c?void 0:c.text)&&!c.hidden&&0!==u){t.visible=!0,t.strokeWidth=i,t.stroke=a[e%a.length],t.fill=void 0;var p=n.midCos*u,d=n.midSin*u,h=n.midCos*(u+o),f=n.midSin*(u+o),v=c.collisionTextAlign||0!==c.collisionOffsetY;if(v&&null!=c.box){var y=c.box,g=h,m=f;h<y.x?g=y.x:h>y.x+y.width&&(g=y.x+y.width),f<y.y?m=y.y:f>y.y+y.height&&(m=y.y+y.height);var b=g-h,C=m-f,S=Math.sqrt(Math.pow(b,2)+Math.pow(C,2)),w=S-s;w>0&&(h+=b*w/S,f+=C*w/S)}t.x1=p,t.y1=d,t.x2=h,t.y2=f}else t.visible=!1}))},e.prototype.getLabelOverflow=function(t,e,r){var n=r.x-this.centerX,o=r.x+r.width-this.centerX,i=r.y-this.centerY,a=r.y+r.height-this.centerY,s=1,l=1;e.x+s<n?l=(e.x+e.width-n)/e.width:e.x+e.width-s>o&&(l=(o-e.x)/e.width);var u=e.y+s<i||e.y+e.height-s>a,c=1===l?t.length:Math.floor(t.length*l)-1,p=this.bboxIntersectsSurroundingSeries(e);return{textLength:c,hasVerticalOverflow:u,hasSurroundingSeriesOverflow:p}},e.prototype.bboxIntersectsSurroundingSeries=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0);var n=this.surroundingRadius;if(null==n)return!1;var o=[{x:t.x+e,y:t.y+r},{x:t.x+t.width+e,y:t.y+r},{x:t.x+t.width+e,y:t.y+t.height+r},{x:t.x+e,y:t.y+t.height+r}],i=Math.pow(n,2);return o.some((function(t){return Math.pow(t.x,2)+Math.pow(t.y,2)>i}))},e.prototype.computeCalloutLabelCollisionOffsets=function(){var t=this,e=this,r=e.radiusScale,n=e.calloutLabel,o=e.calloutLine,i=n.offset,a=n.minSpacing,s=r.convert(0),l=function(t){var e=t.calloutLabel,n=r.convert(t.radius),o=Math.max(0,n);return!e||0===o},u=this.nodeData,c=this.nodeData.filter((function(t){return!l(t)}));if(c.forEach((function(t){var e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),!(c.length<=1)){var p=c.filter((function(t){return t.midCos<0})).sort((function(t,e){return t.midSin-e.midSin})),d=c.filter((function(t){return t.midCos>=0})).sort((function(t,e){return t.midSin-e.midSin})),h=c.filter((function(t){var e;return t.midSin<0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)})).sort((function(t,e){return t.midCos-e.midCos})),f=c.filter((function(t){var e;return t.midSin>=0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)})).sort((function(t,e){return t.midCos-e.midCos})),v=new zl,y=function(e){var n,a=e.calloutLabel;if(null==a)return new Ls(0,0,0,0);var s=r.convert(e.radius),l=Math.max(0,s),u=l+o.length+i,c=e.midCos*u,p=e.midSin*u+a.collisionOffsetY;return v.text=a.text,v.x=c,v.y=p,v.setFont(t.calloutLabel),v.setAlign({textAlign:null!==(n=a.collisionTextAlign)&&void 0!==n?n:a.textAlign,textBaseline:a.textBaseline}),v.computeBBox()},g=function(t,e,r){var n=y(t).grow(a/2),o=y(e).grow(a/2),i=n.x<o.x+o.width&&n.x+n.width>o.x&&("to-top"===r?n.y<o.y+o.height:n.y+n.height>o.y);if(i){var s="to-top"===r?n.y-o.y-o.height:n.y+n.height-o.y;e.calloutLabel.collisionOffsetY=s}},m=function(t){for(var e=t.slice().sort((function(t,e){return Math.abs(t.midSin)-Math.abs(e.midSin)}))[0],r=t.indexOf(e),n=r-1;n>=0;n--){var o=t[n+1],i=t[n];g(o,i,"to-top")}for(n=r+1;n<t.length;n++){o=t[n-1],i=t[n];g(o,i,"to-bottom")}},b=function(t){for(var e=c.some((function(t){return 0!==t.calloutLabel.collisionOffsetY})),n=t.map((function(t){return y(t)})),o=n.map((function(t){return t.clone().grow(a/2)})),i=!1,l=0;l<o.length&&!i;l++)for(var p=o[l],d=l+1;d<t.length;d++){var h=o[d];if(p.collidesBBox(h)){i=!0;break}}var f=u.map((function(t){var e=t.startAngle,n=t.endAngle,o=r.convert(t.radius),i=Math.max(0,o);return{startAngle:e,endAngle:n,innerRadius:s,outerRadius:i}})),v=n.some((function(t){return f.some((function(e){return eg(t,e)}))}));(i||e||v)&&t.filter((function(t){return"center"===t.calloutLabel.textAlign})).forEach((function(t){var e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};m(p),m(d),b(h),b(f)}},e.prototype.updateCalloutLabelNodes=function(t){var e=this,r=this,n=r.radiusScale,o=r.calloutLabel,i=r.calloutLine,a=i.length,s=o.offset,l=o.color,u=new zl;this.calloutLabelSelection.selectByTag(rg.Label).forEach((function(r){var i,c=r.datum,p=c.calloutLabel,d=n.convert(c.radius),h=Math.max(0,d);if((null===p||void 0===p?void 0:p.text)&&0!==h&&!p.hidden){var f=h+a+s,v=c.midCos*f,y=c.midSin*f+p.collisionOffsetY,g={textAlign:null!==(i=p.collisionTextAlign)&&void 0!==i?i:p.textAlign,textBaseline:p.textBaseline};u.text=p.text,u.x=v,u.y=y,u.setFont(e.calloutLabel),u.setAlign(g);var m=u.computeBBox(),b=p.text,C=!0;if(o.avoidCollisions){var S=e.getLabelOverflow(p.text,m,t),w=S.textLength,x=S.hasVerticalOverflow;b=p.text.length===w?p.text:p.text.substring(0,w)+"…",C=!x}r.text=b,r.x=v,r.y=y,r.setFont(e.calloutLabel),r.setAlign(g),r.fill=l,r.visible=C}else r.visible=!1}))},e.prototype.computeLabelsBBox=function(t,e){var r,n=this,o=this,i=o.radiusScale,a=o.calloutLabel,s=o.calloutLine,l=s.length,u=a.offset,c=a.maxCollisionOffset,p=a.minSpacing;if(!a.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();var d,h=[],f=new zl;if((null===(r=this.title)||void 0===r?void 0:r.text)&&this.title.enabled){var v=this.getTitleTranslationY();isFinite(v)&&(f.text=this.title.text,f.x=0,f.y=v,f.setFont(this.title),f.setAlign({textBaseline:"bottom",textAlign:"center"}),d=f.computeBBox(),h.push(d))}return this.nodeData.forEach((function(r){var o,a=r.calloutLabel,s=i.convert(r.radius),v=Math.max(0,s);if(!a||0===v)return null;var y=v+l+u,g=r.midCos*y,m=r.midSin*y+a.collisionOffsetY;f.text=a.text,f.x=g,f.y=m,f.setFont(n.calloutLabel),f.setAlign({textAlign:null!==(o=a.collisionTextAlign)&&void 0!==o?o:a.textAlign,textBaseline:a.textBaseline});var b=f.computeBBox();if(a.box=b,Math.abs(a.collisionOffsetY)>c)a.hidden=!0;else{if(d){var C=e.y-n.centerY,S=new Ls(d.x-p,C,d.width+2*p,d.y+d.height+p-C);if(b.collidesBBox(S))return void(a.hidden=!0)}if(t.hideWhenNecessary){var w=n.getLabelOverflow(a.text,b,e),x=w.textLength,O=w.hasVerticalOverflow,E=w.hasSurroundingSeriesOverflow,T=a.text.length>2&&x<2;if(O||T||E)return void(a.hidden=!0)}a.hidden=!1,h.push(b)}})),0===h.length?null:Ls.merge(h)},e.prototype.updateSectorLabelNodes=function(){var t=this.radiusScale,e=t.convert(0),r=this.sectorLabel,n=r.fontSize,o=r.fontStyle,i=r.fontWeight,a=r.fontFamily,s=r.positionOffset,l=r.positionRatio,u=r.color,c=e>0,p=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((function(r,d){var h=d.sectorLabel,f=t.convert(d.radius),v=Math.max(0,f),y=!1;if(h&&0!==v){var g=e*(1-l)+f*l+s;r.fill=u,r.fontStyle=o,r.fontWeight=i,r.fontSize=n,r.fontFamily=a,r.text=h.text;var m=!c&&p;m?(r.x=0,r.y=0):(r.x=d.midCos*g,r.y=d.midSin*g),r.textAlign="center",r.textBaseline="middle";var b=r.computeBBox(),C=[[b.x,b.y],[b.x+b.width,b.y],[b.x+b.width,b.y+b.height],[b.x,b.y+b.height]],S=d.startAngle,w=d.endAngle,x={startAngle:S,endAngle:w,innerRadius:e,outerRadius:v};C.every((function(t){var e=hg(t,2),r=e[0],n=e[1];return $y(r,n,x)}))&&(y=!0)}r.visible=y}))},e.prototype.updateInnerCircle=function(){var t=this.innerCircleNode;if(t){var e=this.getInnerRadius();if(0===e)t.size=0;else{var r=Math.min(e,this.getOuterRadius()),n=1;t.size=Math.ceil(2*r+n)}}},e.prototype.updateInnerLabelNodes=function(){var t=[],e=[];this.innerLabelsSelection.each((function(r,n){var o=n.fontStyle,i=n.fontWeight,a=n.fontSize,s=n.fontFamily,l=n.color;r.fontStyle=o,r.fontWeight=i,r.fontSize=a,r.fontFamily=s,r.text=n.text,r.x=0,r.y=0,r.fill=l,r.textAlign="center",r.textBaseline="alphabetic",t.push(r.computeBBox()),e.push(n.margin)}));for(var r=function(t){return 0===t?0:e[t]},n=function(t){return t===e.length-1?0:e[t]},o=t.reduce((function(t,e,o){return t+e.height+r(o)+n(o)}),0),i=Math.max.apply(Math,fg([],hg(t.map((function(t){return t.width}))))),a=this.getInnerRadius(),s=Math.sqrt(Math.pow(i/2,2)+Math.pow(o/2,2)),l=s<=(a>0?a:this.getOuterRadius()),u=[],c=0,p=-o/2;c<t.length;c++){var d=t[c],h=d.height+p+r(c);u.push(h),p=h+n(c)}this.innerLabelsSelection.each((function(t,e,r){t.y=u[r],t.visible=l}))},e.prototype.getNodeClickEvent=function(t,e){return new yg(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){return new gg(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)},e.prototype.getTooltipHtml=function(t){var e,r=this.angleKey;if(!r)return"";var n=this,o=n.tooltip,i=n.angleName,a=n.radiusKey,s=n.radiusName,l=n.calloutLabelKey,u=n.sectorLabelKey,c=n.calloutLabelName,p=n.sectorLabelName,d=n.id,h=o.renderer,f=t.datum,v=t.angleValue,y=t.radiusValue,g=t.sectorFormat.fill,m=t.calloutLabel,b=void 0===m?{}:m,C=b.text,S=void 0===C?"":C,w="number"===typeof v?Jy(v):String(v),x=null===(e=this.title)||void 0===e?void 0:e.text,O=(S?S+": ":"")+w,E={title:x,backgroundColor:g,content:O};return h?Rc(h({datum:f,angleKey:r,angleValue:v,angleName:i,radiusKey:a,radiusValue:y,radiusName:s,calloutLabelKey:l,calloutLabelName:c,sectorLabelKey:u,sectorLabelName:p,title:x,color:g,seriesId:d}),E):Rc(E)},e.prototype.getLegendData=function(){var t,e,r,n=this,o=n.processedData,i=n.calloutLabelKey,a=n.legendItemKey,s=n.id,l=n.dataModel;if(!l||!o||0===o.data.length)return[];if(!a&&!i)return[];for(var u=this.getProcessedDataIndexes(l),c=u.angleIdx,p=u.radiusIdx,d=u.calloutLabelIdx,h=u.sectorLabelIdx,f=u.legendItemIdx,v=(null===(t=this.title)||void 0===t?void 0:t.showInLegend)&&this.title.text,y=[],g=0;g<o.data.length;g++){var m=o.data[g],b=m.datum,C=m.values,S=[];v&&S.push(v);var w=this.getLabels(b,2*Math.PI,2*Math.PI,!1,C[c],C[p],C[d],C[h],C[f]);if(a&&void 0!==w.legendItem?S.push(w.legendItem.text):i&&void 0!==(null===(e=w.calloutLabel)||void 0===e?void 0:e.text)&&S.push(null===(r=w.calloutLabel)||void 0===r?void 0:r.text),0!==S.length){var x=this.getSectorFormat(b,g,g,!1);y.push({legendType:"category",id:s,itemId:g,seriesId:s,enabled:this.seriesItemEnabled[g],label:{text:S.join(" - ")},marker:{fill:x.fill,stroke:x.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}}return y},e.prototype.onLegendItemClick=function(t){var e=t.enabled,r=t.itemId,n=t.series;n.id===this.id?this.toggleSeriesItem(r,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,r,e)},e.prototype.toggleSeriesItem=function(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0},e.prototype.toggleOtherSeriesItems=function(t,e,r){var n,o,i=this,a=this,s=a.legendItemKey,l=a.dataModel;if(s&&l){var u=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((function(t,r){return r===e}))[t.legendItemKey]);if(u){var c=l.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(o=this.processedData)||void 0===o||o.data.forEach((function(t,e){var n=t.values;n[c]===u&&i.toggleSeriesItem(e,r)}))}}},e.prototype.animateEmptyUpdateReady=function(){var t,e,r=this,n=null!==(e=null===(t=this.ctx.animationManager)||void 0===t?void 0:t.defaultOptions.duration)&&void 0!==e?e:1e3,o=200,i=Math.PI/-2+Rl(this.rotation);this.groupSelection.selectByTag(rg.Sector).forEach((function(t){var e,o=t.datum;null===(e=r.ctx.animationManager)||void 0===e||e.animateMany(r.id+"_empty-update-ready_"+t.id,[{from:i,to:o.startAngle},{from:i,to:o.endAngle}],{duration:n,ease:Cd,onUpdate:function(e){var r=hg(e,2),n=r[0],o=r[1];t.startAngle=n,t.endAngle=o}})}));var a={from:0,to:1,delay:n,duration:o};this.calloutLabelSelection.each((function(t){var e;null===(e=r.ctx.animationManager)||void 0===e||e.animate(r.id+"_empty-update-ready_"+t.id,ug(ug({},a),{onUpdate:function(e){t.opacity=e}}))})),this.sectorLabelSelection.each((function(t){var e;null===(e=r.ctx.animationManager)||void 0===e||e.animate(r.id+"_empty-update-ready_"+t.id,ug(ug({},a),{onUpdate:function(e){t.opacity=e}}))})),this.innerLabelsSelection.each((function(t){var e;null===(e=r.ctx.animationManager)||void 0===e||e.animate(r.id+"_empty-update-ready_"+t.id,ug(ug({},a),{onUpdate:function(e){t.opacity=e}}))}))},e.prototype.animateReadyUpdateReady=function(){this.groupSelection.selectByTag(rg.Sector).forEach((function(t){var e=t.datum;t.startAngle=e.startAngle,t.endAngle=e.endAngle}))},e.className="PieSeries",e.type="pie",cg([du(Tu)],e.prototype,"angleKey",void 0),cg([du(Tu)],e.prototype,"angleName",void 0),cg([du(Pu)],e.prototype,"radiusKey",void 0),cg([du(Pu)],e.prototype,"radiusName",void 0),cg([du(ju(0))],e.prototype,"radiusMin",void 0),cg([du(ju(0))],e.prototype,"radiusMax",void 0),cg([du(Pu)],e.prototype,"calloutLabelKey",void 0),cg([du(Pu)],e.prototype,"calloutLabelName",void 0),cg([du(Pu)],e.prototype,"sectorLabelKey",void 0),cg([du(Pu)],e.prototype,"sectorLabelName",void 0),cg([du(Pu)],e.prototype,"legendItemKey",void 0),cg([du(Lu)],e.prototype,"fills",void 0),cg([du(Lu)],e.prototype,"strokes",void 0),cg([du(Gu(0,1))],e.prototype,"fillOpacity",void 0),cg([du(Gu(0,1))],e.prototype,"strokeOpacity",void 0),cg([du(Qu)],e.prototype,"lineDash",void 0),cg([du(Gu(0))],e.prototype,"lineDashOffset",void 0),cg([du(xu)],e.prototype,"formatter",void 0),cg([du(Gu(-360,360))],e.prototype,"rotation",void 0),cg([du(Gu())],e.prototype,"outerRadiusOffset",void 0),cg([du(Gu(0))],e.prototype,"outerRadiusRatio",void 0),cg([du(Gu())],e.prototype,"innerRadiusOffset",void 0),cg([du(Gu(0))],e.prototype,"innerRadiusRatio",void 0),cg([du(Gu(0))],e.prototype,"strokeWidth",void 0),e}(sg),Pg=function(){return Pg=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Pg.apply(this,arguments)},Dg={constructors:{},constructedArrays:new WeakMap};function Ag(t,e){var r;null===(r=Dg.constructedArrays)||void 0===r||r.set(t,e)}var Mg={constructors:{title:ev,subtitle:ev,footnote:ev,shadow:Ky,innerCircle:Og,"axes[].title":zy,"series[].innerLabels[]":xg},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function Rg(){return{constructors:Pg(Pg({},Mg.constructors),Dg.constructors),constructedArrays:Dg.constructedArrays,allowedTypes:Pg({},Mg.allowedTypes)}}var _g={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},kg={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function Fg(t){var e=t.yDirection,r=t.padding,n=void 0===r?0:r,o=t.position,i=void 0===o?"top":o,a=t.bbox,s=e?_g:kg,l=s[i],u=l.xTranslationDirection,c=l.yTranslationDirection,p=e?a.width:a.height,d=e?a.height:a.width,h=u*(n+p/2),f=c*(n+d/2),v={xTranslation:h,yTranslation:f};return v}function Ig(t){var e=t.yDirection,r=t.bbox,n=t.padding,o=void 0===n?0:n,i=t.position,a=void 0===i?"top":i,s={};return a.startsWith("inside")||("top"!==a||e?"bottom"!==a||e?"left"===a&&e?s.left=o+r.width:"right"===a&&e&&(s.right=o+r.width):s.bottom=o+r.height:s.top=o+r.height),s}var Lg=function(t){var e=t.yDirection,r=t.xEnd,n=t.yStart,o=t.yEnd;return e?{x:r/2,y:n}:{x:r,y:isNaN(o)?n:(n+o)/2}},Ng=function(t){var e=t.yDirection,r=t.xStart,n=t.xEnd,o=t.yStart,i=t.yEnd;return e?{x:r,y:isNaN(i)?o:(o+i)/2}:{x:n/2,y:o}},Gg=function(t){var e=t.yDirection,r=t.xEnd,n=t.yStart,o=t.yEnd;return e?{x:r,y:isNaN(o)?n:(n+o)/2}:{x:r/2,y:isNaN(o)?n:o}},jg=function(t){var e=t.yDirection,r=t.xStart,n=t.xEnd,o=t.yStart,i=t.yEnd;return e?{x:n/2,y:isNaN(i)?o:i}:{x:r,y:isNaN(i)?o:(o+i)/2}},Bg=function(t){var e=t.xEnd,r=t.yStart,n=t.yEnd;return{x:e/2,y:isNaN(n)?r:(r+n)/2}},Vg=function(t){var e=t.yDirection,r=t.xStart,n=t.xEnd,o=t.yStart;return e?{x:r/2,y:o}:{x:n,y:o}},Hg=function(t){var e=t.yDirection,r=t.xStart,n=t.yStart,o=t.yEnd;return e?{x:r,y:isNaN(o)?n:o}:{x:r,y:n}},zg=function(t){var e=t.yDirection,r=t.xEnd,n=t.yStart,o=t.yEnd;return e?{x:r,y:n}:{x:r,y:isNaN(o)?n:o}},Ug=function(t){var e=t.yDirection,r=t.xStart,n=t.xEnd,o=t.yStart,i=t.yEnd;return e?{x:n,y:isNaN(i)?o:i}:{x:r,y:isNaN(i)?o:i}},Wg={top:{c:Lg},bottom:{c:jg},left:{c:Ng},right:{c:Gg},topLeft:{c:Vg},topRight:{c:zg},bottomLeft:{c:Hg},bottomRight:{c:Ug},inside:{c:Bg},insideLeft:{c:Ng},insideRight:{c:Gg},insideTop:{c:Lg},insideBottom:{c:jg},insideTopLeft:{c:Vg},insideBottomLeft:{c:Hg},insideTopRight:{c:zg},insideBottomRight:{c:Ug}},Kg=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xg=function(){return Xg=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Xg.apply(this,arguments)},Yg=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},qg=function(t){function e(){var e=t.call(this)||this;return e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.startLine=!1,e.endLine=!1,e.isRange=!1,e.restoreOwnStyles(),e}return Kg(e,t),e.prototype.computeBBox=function(){return new Ls(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)},e.prototype.isPointInPath=function(t,e){return!1},e.prototype.render=function(e){var r,n=e.ctx,o=e.forceRender,i=e.stats;if(this.dirty!==_s.NONE||o){this.computeTransformMatrix(),this.matrix.toContext(n);var a=this,s=a.x1,l=a.y1,u=a.x2,c=a.y2;s=this.align(s),l=this.align(l),u=this.align(u),c=this.align(c);var p=this,d=p.fill,h=p.opacity,f=p.isRange,v=!(!f||!d);if(v){var y=this.fillOpacity;n.fillStyle=d,n.globalAlpha=h*y,n.beginPath(),n.moveTo(s,l),n.lineTo(u,l),n.lineTo(u,c),n.lineTo(s,c),n.closePath(),n.fill()}var g=this,m=g.stroke,b=g.strokeWidth,C=g.startLine,S=g.endLine,w=!(!C&&!S||!m||!b);if(w){var x=this,O=x.strokeOpacity,E=x.lineDash,T=x.lineDashOffset,P=x.lineCap,D=x.lineJoin;n.strokeStyle=m,n.globalAlpha=h*O,n.lineWidth=b,E&&n.setLineDash(E),T&&(n.lineDashOffset=T),P&&(n.lineCap=P),D&&(n.lineJoin=D),n.beginPath(),C&&(n.moveTo(s,l),n.lineTo(u,l)),S&&(n.moveTo(u,c),n.lineTo(s,c)),n.stroke()}null===(r=this.fillShadow)||void 0===r||r.markClean(),t.prototype.render.call(this,e)}else i&&(i.nodesSkipped+=this.nodeCount.count)},e.className="Range",e.defaultStyles=Xg(Xg({},Nl.defaultStyles),{strokeWidth:1}),Yg([Us({redraw:_s.MINOR})],e.prototype,"x1",void 0),Yg([Us({redraw:_s.MINOR})],e.prototype,"y1",void 0),Yg([Us({redraw:_s.MINOR})],e.prototype,"x2",void 0),Yg([Us({redraw:_s.MINOR})],e.prototype,"y2",void 0),Yg([Us({redraw:_s.MINOR})],e.prototype,"startLine",void 0),Yg([Us({redraw:_s.MINOR})],e.prototype,"endLine",void 0),Yg([Us({redraw:_s.MINOR})],e.prototype,"isRange",void 0),e}(Nl),Zg=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Jg=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Qg=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},$g=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],tm=hu((function(t,e){return fu(t,e,(function(t){return $g.includes(t)}))}),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),em=hu((function(t,e){return fu(t,e,(function(t){return"range"===t||"line"===t}))}),"expecting a crossLine type keyword such as 'range' or 'line'"),rm=function(){function t(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}return Zg([du(Eu)],t.prototype,"enabled",void 0),Zg([du(Pu)],t.prototype,"text",void 0),Zg([du(Yu)],t.prototype,"fontStyle",void 0),Zg([du(Zu)],t.prototype,"fontWeight",void 0),Zg([du(Gu(0))],t.prototype,"fontSize",void 0),Zg([du(Tu)],t.prototype,"fontFamily",void 0),Zg([du(Gu(0))],t.prototype,"padding",void 0),Zg([du(Iu)],t.prototype,"color",void 0),Zg([du(tm)],t.prototype,"position",void 0),Zg([du(ju(-360,360))],t.prototype,"rotation",void 0),Zg([du(Eu)],t.prototype,"parallel",void 0),t}(),nm=function(){function t(){this.id=Vs(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new rm,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=oc.X,this.group=new yl({name:""+this.id,layer:!0,zIndex:t.LINE_LAYER_ZINDEX}),this.crossLineRange=new qg,this.crossLineLabel=new zl,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;var e=this,r=e.group,n=e.crossLineRange,o=e.crossLineLabel;r.append([n,o]),n.pointerEvents=Xs.None}return t.prototype.update=function(t){if(this.enabled&&(this.group.visible=t,t)){var e=this.createNodeData();e?(this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)):this.group.visible=!1}},t.prototype.updateNodes=function(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())},t.prototype.createNodeData=function(){var t,e,r,n,o,i=this,a=i.scale,s=i.gridLength,l=i.sideFlag,u=i.direction,c=i.label.position,p=void 0===c?"top":c,d=i.clippedRange,h=i.strokeWidth,f=void 0===h?0:h;if(!a)return!1;var v=null!==(n=a.bandwidth)&&void 0!==n?n:0,y=function(t){return Math.max(Math.min.apply(Math,Qg([],Jg(d))),Math.min(Math.max.apply(Math,Qg([],Jg(d))),t))},g=Jg([0,l*s],2),m=g[0],b=g[1],C=Jg(this.getRange(),2),S=C[0],w=C[1],x=Jg([Number(a.convert(S,{strict:!1})),a.convert(w,{strict:!1})+v],2),O=x[0],E=x[1];O=y(O),E=y(E),t=Jg([Number(a.convert(S)),a.convert(w)+v],2),S=t[0],w=t[1];var T=!isNaN(O)&&!isNaN(E)&&(S===O||w===E||O!==E)&&Math.abs(E-O)>0;if(T){var P=O!==Math.min(O,E);P&&(e=Jg([Math.min(O,E),Math.max(O,E)],2),O=e[0],E=e[1],r=Jg([w,S],2),S=r[0],w=r[1])}if(this.isRange=T,this.startLine=!isNaN(S)&&f>0&&S===O,this.endLine=!isNaN(w)&&f>0&&w===E,!T&&!this.startLine&&!this.endLine)return!1;if(this.data=[O,E],this.label.enabled){var D=u===oc.Y,A=(null!==(o=Wg[p])&&void 0!==o?o:{}).c,M=void 0===A?Lg:A,R=M({yDirection:D,xStart:m,xEnd:b,yStart:O,yEnd:E}),_=R.x,k=R.y;this.labelPoint={x:_,y:k}}return!0},t.prototype.updateRangeNode=function(){var t,e=this,r=e.crossLineRange,n=e.sideFlag,o=e.gridLength,i=e.data,a=e.startLine,s=e.endLine,l=e.isRange,u=e.fill,c=e.fillOpacity,p=e.stroke,d=e.strokeWidth,h=e.lineDash;r.x1=0,r.x2=n*o,r.y1=i[0],r.y2=i[1],r.startLine=a,r.endLine=s,r.isRange=l,r.fill=u,r.fillOpacity=null!==c&&void 0!==c?c:1,r.stroke=p,r.strokeWidth=null!==d&&void 0!==d?d:1,r.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,r.lineDash=h},t.prototype.updateLabel=function(){var t=this,e=t.crossLineLabel,r=t.label;r.text&&(e.fontStyle=r.fontStyle,e.fontWeight=r.fontWeight,e.fontSize=r.fontSize,e.fontFamily=r.fontFamily,e.fill=r.color,e.text=r.text)},t.prototype.positionLabel=function(){var t=this,e=t.crossLineLabel,r=t.labelPoint,n=void 0===r?{}:r,o=n.x,i=void 0===o?void 0:o,a=n.y,s=void 0===a?void 0:a,l=t.label,u=l.parallel,c=l.rotation,p=l.position,d=void 0===p?"top":p,h=l.padding,f=void 0===h?0:h,v=t.direction,y=t.parallelFlipRotation,g=t.regularFlipRotation;if(void 0!==i&&void 0!==s){var m=hy({rotation:c,parallel:u,regularFlipRotation:g,parallelFlipRotation:y}),b=m.defaultRotation,C=m.configuredRotation;e.rotation=b+C,e.textBaseline="middle",e.textAlign="center";var S=this.computeLabelBBox();if(S){var w=v===oc.Y,x=Fg({yDirection:w,padding:f,position:d,bbox:S}),O=x.xTranslation,E=x.yTranslation;e.translationX=i+O,e.translationY=s+E}}},t.prototype.getZIndex=function(e){return void 0===e&&(e=!1),e?t.RANGE_LAYER_ZINDEX:t.LINE_LAYER_ZINDEX},t.prototype.getRange=function(){var t=this,e=t.value,r=t.range,n=t.scale,o=n instanceof ov,i=Jg(null!==r&&void 0!==r?r:[e,void 0],2),a=i[0],s=i[1];return o||void 0!==s||(s=a),a=null!=nu(a,o)?a:void 0,s=null!=nu(s,o)?s:void 0,o&&a===s&&(s=void 0),void 0===a&&void 0!==s&&(a=s,s=void 0),[a,s]},t.prototype.computeLabelBBox=function(){return this.crossLineLabel.computeTransformedBBox()},t.prototype.calculatePadding=function(t){var e,r,n,o,i,a,s,l,u=this,c=u.isRange,p=u.startLine,d=u.endLine,h=u.direction,f=u.label,v=f.padding,y=void 0===v?0:v,g=f.position,m=void 0===g?"top":g;if(c||p||d){var b=this.computeLabelBBox(),C=null===b||void 0===b?void 0:b.x,S=null===b||void 0===b?void 0:b.y;if(b&&void 0!=C&&void 0!=S){var w=Ig({yDirection:h===oc.Y,padding:y,position:m,bbox:b});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(r=w.left)&&void 0!==r?r:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(o=w.right)&&void 0!==o?o:0),t.top=Math.max(null!==(i=t.top)&&void 0!==i?i:0,null!==(a=w.top)&&void 0!==a?a:0),t.bottom=Math.max(null!==(s=t.bottom)&&void 0!==s?s:0,null!==(l=w.bottom)&&void 0!==l?l:0)}}},t.LINE_LAYER_ZINDEX=nc.SERIES_CROSSLINE_LINE_ZINDEX,t.RANGE_LAYER_ZINDEX=nc.SERIES_CROSSLINE_RANGE_ZINDEX,t.className="CrossLine",Zg([du(Eu)],t.prototype,"enabled",void 0),Zg([du(em)],t.prototype,"type",void 0),Zg([du(yu(2))],t.prototype,"range",void 0),Zg([du(Iu)],t.prototype,"fill",void 0),Zg([du(ju(0,1))],t.prototype,"fillOpacity",void 0),Zg([du(Iu)],t.prototype,"stroke",void 0),Zg([du(ju())],t.prototype,"strokeWidth",void 0),Zg([du(ju(0,1))],t.prototype,"strokeOpacity",void 0),Zg([du(Qu)],t.prototype,"lineDash",void 0),t}(),om=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),im=function(){return im=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},im.apply(this,arguments)},am=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.thickness=0,e.position="left",e}return om(e,t),Object.defineProperty(e.prototype,"direction",{get:function(){return["top","bottom"].includes(this.position)?oc.X:oc.Y},enumerable:!1,configurable:!0}),e.prototype.updateDirection=function(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)},e.prototype.update=function(e){return this.updateDirection(),t.prototype.update.call(this,e)},e.prototype.createAxisContext=function(){return im(im({},t.prototype.createAxisContext.call(this)),{position:this.position})},e.prototype.assignCrossLineArrayConstructor=function(t){Ag(t,nm)},am([du(Gu(0))],e.prototype,"thickness",void 0),am([du(ac)],e.prototype,"position",void 0),e}(Vy),lm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),um=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},cm=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pm=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},dm=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},hm=function(t){function e(e){var r=t.call(this,e,new Zf)||this;return r._paddingOverrideEnabled=!1,r.groupPaddingInner=.1,r.includeInvisibleDomains=!0,r}return lm(e,t),Object.defineProperty(e.prototype,"paddingInner",{get:function(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner},set:function(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paddingOuter",{get:function(){return this.scale.paddingOuter},set:function(t){this.scale.paddingOuter=t},enumerable:!1,configurable:!0}),e.prototype.normaliseDataDomain=function(t){var e,r,n,o,i={};try{for(var a=cm(t),s=a.next();!s.done;s=a.next()){var l=s.value;null!==(n=i[o=String(l)])&&void 0!==n||(i[o]=l)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return Object.values(i)},e.prototype.calculateDomain=function(){if(!this._paddingOverrideEnabled){var e=this.boundSeries,r=e.map((function(t){var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)})).filter((function(t){return null!=t}));r.length>0&&(this.scale.paddingInner=Math.min.apply(Math,dm([],pm(r.map((function(t){return t.inner}))))),this.scale.paddingOuter=Math.max.apply(Math,dm([],pm(r.map((function(t){return t.outer}))))))}return t.prototype.calculateDomain.call(this)},e.className="CategoryAxis",e.type="category",um([du(Gu(0,1))],e.prototype,"groupPaddingInner",void 0),e}(sm),fm=function(){function t(t,e,r){void 0===t&&(t=""),void 0===r&&(r=0),this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=r}return t.prototype.getLeftSibling=function(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0},t.prototype.getLeftmostSibling=function(){return this.number>0&&this.parent?this.parent.children[0]:void 0},t.prototype.nextLeft=function(){return this.children?this.children[0]:this.thread},t.prototype.nextRight=function(){return this.children?this.children[this.children.length-1]:this.thread},t.prototype.getSiblings=function(){var t=this;return this.parent?this.parent.children.filter((function(e,r){return r!==t.number})):[]},t}();function vm(t,e){void 0===e&&(e=!0);var r=new fm,n=0;return e&&t.forEach((function(t){return n=Math.max(n,t.labels.length)})),t.forEach((function(t){if(e)while(t.labels.length<n)t.labels.unshift("");ym(r,t)})),r}function ym(t,e){var r=e.labels.slice().reverse(),n=r.length-1;r.forEach((function(e,r){var o=t.children,i=o.find((function(t){return t.label===e})),a=r!==n;if(i&&a)t=i;else{var s=new fm(e,t);s.number=o.length,o.push(s),a&&(t=s)}}))}function gm(t,e,r){var n=e.number-t.number,o=r/n;e.change-=o,e.shift+=r,t.change+=o,e.prelim+=r,e.mod+=r}function mm(t,e,r){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:r}function bm(t){var e=t.children;if(e)for(var r=0,n=0,o=e.length-1;o>=0;o--){var i=e[o];i.prelim+=r,i.mod+=r,n+=i.change,r+=i.shift+n}}function Cm(t,e,r){var n=t.getLeftSibling();if(n){var o=t,i=t,a=n,s=i.getLeftmostSibling(),l=i.mod,u=o.mod,c=a.mod,p=s.mod;while(a.nextRight()&&i.nextLeft()){a=a.nextRight(),i=i.nextLeft(),s=s.nextLeft(),o=o.nextRight(),o.ancestor=t;var d=a.prelim+c-(i.prelim+l)+r;d>0&&(gm(mm(a,t,e),t,d),l+=d,u+=d),c+=a.mod,l+=i.mod,p+=s.mod,u+=o.mod}a.nextRight()&&!o.nextRight()?(o.thread=a.nextRight(),o.mod+=c-u):(i.nextLeft()&&!s.nextLeft()&&(s.thread=i.nextLeft(),s.mod+=l-p),e=t)}return e}function Sm(t,e){var r=t.children;if(r.length){var n=r[0];r.forEach((function(t){Sm(t,e),n=Cm(t,n,e)})),bm(t);var o=(r[0].prelim+r[r.length-1].prelim)/2,i=t.getLeftSibling();i?(t.prelim=i.prelim+e,t.mod=t.prelim-o):t.prelim=o}else{i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}var wm=function(){function t(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}return t.prototype.update=function(t,e){var r=e(t),n=r.x,o=r.y;n>this.right&&(this.right=n),n<this.left&&(this.left=n),o>this.bottom&&(this.bottom=o),o<this.top&&(this.top=o)},t}();function xm(t,e,r){t.x=t.prelim+e,t.y=t.depth,r.update(t),t.children.forEach((function(n){return xm(n,e+t.mod,r)}))}function Om(t){var e=t.children,r=0;e.forEach((function(t){Om(t),t.children.length?r+=t.leafCount:r++})),t.leafCount=r,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[t.children.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function Em(t){var e=new Tm;return Sm(t,1),xm(t,-t.prelim,e),Om(t),e}var Tm=function(){function t(){this.dimensions=new wm,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}return t.prototype.update=function(t){this.dimensions.update(t,(function(t){return{x:t.x,y:t.y}})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)},t.prototype.resize=function(t,e,r,n,o){void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=!1);var i=this.leafCount-1,a=this.depth,s=this.dimensions,l=1,u=1;if(t>0&&i){var c=(s.right-s.left)/i,p=t/i;l=p/c,o&&(l=-l)}if(e>0&&a){var d=(s.bottom-s.top)/a,h=e/a;u=h/d}var f=new wm;this.nodes.forEach((function(t){t.screenX=t.x*l,t.screenY=t.y*u,f.update(t,(function(t){return{x:t.screenX,y:t.screenY}}))}));var v=-f.left,y=-f.top;this.nodes.forEach((function(t){t.screenX+=v+r,t.screenY+=y+n}))},t}(),Pm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dm=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Am=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Mm=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Rm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.grid=!1,e}return Pm(e,t),Dm([du(Ou)],e.prototype,"grid",void 0),e}(wy),_m=function(t){function e(e){var r=t.call(this,e,new Zf)||this;r.tickScale=new Zf,r.translation={x:0,y:0},r.line=new Oy,r.label=new Rm,r.labelColor="rgba(87, 87, 87, 1)",r.includeInvisibleDomains=!0;var n=r,o=n.tickLineGroup,i=n.tickLabelGroup,a=n.gridLineGroup,s=n.tickScale,l=n.scale;return l.paddingOuter=.1,l.paddingInner=2*l.paddingOuter,r.range=l.range.slice(),r.refreshScale(),s.paddingInner=1,s.paddingOuter=0,r.gridLineSelection=hh.select(a,$f),r.axisLineSelection=hh.select(o,$f),r.separatorSelection=hh.select(o,$f),r.labelSelection=hh.select(i,zl),r}return Pm(e,t),e.prototype.updateRange=function(){var t=this,e=t.range,r=t.visibleRange,n=t.scale,o=(e[1]-e[0])/(r[1]-r[0]),i=o*r[0],a=e[0]-i;this.tickScale.range=n.range=[a,a+o],this.resizeTickTree()},e.prototype.resizeTickTree=function(){var t,e=this.scale,r=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,o=this.lineHeight;n&&n.resize(Math.abs(r[1]-r[0]),n.depth*o,(Math.min(r[0],r[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*o,r[1]-r[0]<0)},Object.defineProperty(e.prototype,"lineHeight",{get:function(){return 1.5*this.label.fontSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gridLength",{get:function(){return this._gridLength},set:function(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t},enumerable:!1,configurable:!0}),e.prototype.calculateDomain=function(){var t,e,r=this,n=r.direction,o=r.boundSeries,i=[],a=void 0;o.filter((function(t){return t.visible})).forEach((function(t){if(n===oc.X)if(void 0===a){var e=t.getDomain(n);i.push(e),a="number"===typeof e[0]}else a&&i.push(t.getDomain(n));else i.push(t.getDomain(n))}));var s=(t=new Array).concat.apply(t,Mm([],Am(i))),l=null!==(e=uy(s))&&void 0!==e?e:s;this.dataDomain=this.normaliseDataDomain(l),this.scale.domain=this.dataDomain},e.prototype.normaliseDataDomain=function(t){var e=t.filter((function(t,e,r){return r.indexOf(t)===e})),r=vm(e);this.tickTreeLayout=Em(r);var n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),e},e.prototype.update=function(t){var e=this;this.updateDirection(),this.calculateDomain(),this.updateRange();var r=this,n=r.scale,o=r.label,i=r.label.parallel,a=r.moduleCtx.callbackCache,s=r.tickScale,l=r.range,u=r.title,c=r.title,p=void 0===c?{}:c,d=p.formatter,h=void 0===d?function(t){return t.defaultValue}:d,f=r._titleCaption,v=n.range[0],y=n.range[1],g=Math.abs(y-v),m=g/n.domain.length||0,b=Rl(this.rotation),C=Math.abs(Math.cos(b))<1e-8,S=o.getSideFlag();this.updatePosition({rotation:b,sideFlag:S}),f.node.visible=!1;var w=this.lineHeight,x=this.tickTreeLayout,O=n.ticks(),E=x?x.nodes:[],T=!!x&&x.depth>1,P=s.ticks(),D=hy({rotation:o.rotation,parallel:i,regularFlipRotation:Al(b-Math.PI/2),parallelFlipRotation:Al(b)}),A=D.defaultRotation,M=D.configuredRotation,R=D.parallelFlipFlag,_=this.gridLineSelection.update(this.gridLength?P:[]),k=this.labelSelection.update(E),F=o.formatter,I=new Map,L=0;k.each((function(t,r,n){var i;t.fontStyle=o.fontStyle,t.fontWeight=o.fontWeight,t.fontSize=o.fontSize,t.fontFamily=o.fontFamily,t.fill=o.color,t.textBaseline=-1===R?"bottom":"hanging",t.textAlign="center",t.translationX=r.screenY-.25*o.fontSize,t.translationY=r.screenX,0===n?(null===u||void 0===u?void 0:u.enabled)&&O.length>0?(t.visible=!0,t.text=a.call(h,e.getTitleFormatterParams()),t.fontSize=u.fontSize,t.fontStyle=u.fontStyle,t.fontWeight=u.fontWeight,t.fontFamily=u.fontFamily,t.textBaseline="hanging"):t.visible=!1:F?(t.text=null!==(i=a.call(F,{value:String(r.label),index:n}))&&void 0!==i?i:String(r.label),t.visible=r.screenX>=l[0]&&r.screenX<=l[1]):(t.text=String(r.label),t.visible=r.screenX>=l[0]&&r.screenX<=l[1]);var s=t.computeBBox();I.set(t.id,s),s.width>L&&(L=s.width)}));var N=S*o.padding,G=this.label.grid,j=[];k.each((function(t,r,n){if(t.x=N,t.rotationCenterX=N,r.children.length){t.translationX-=L-w+e.label.padding;var o=r.leafCount*m;i=I.get(t.id);i&&i.width>o?t.visible=!1:t.rotation=C?A:-Math.PI/2}else{t.rotation=M,t.textAlign="end",t.textBaseline="middle";var i=I.get(t.id);i&&i.height>m&&(t.visible=!1)}if(r.parent&&T){var a=r.children.length?r.screenX-r.leafCount*m/2:r.screenX-m/2;if(r.children.length){var s=-L-2*e.label.padding+r.screenY;j.push({y:a,x1:s+w,x2:s,toString:function(){return String(n)}})}else(r.number!==r.children.length-1||G)&&j.push({y:a,x1:0,x2:-L-2*e.label.padding,toString:function(){return String(n)}})}}));var B=0;j.forEach((function(t){return B=Math.min(B,t.x2)})),j.push({y:Math.max(v,y),x1:0,x2:B,toString:function(){return String(j.length)}});var V=this.separatorSelection.update(j),H=1e-7;V.each((function(t,r){t.x1=r.x1,t.x2=r.x2,t.y1=r.y,t.y2=r.y,t.visible=r.y>=l[0]-H&&r.y<=l[1]+H,t.stroke=e.tick.color,t.fill=void 0,t.strokeWidth=1})),this.gridLineSelection=_,this.labelSelection=k;for(var z=x?x.depth+1:1,U=[],W=0;W<z;W++)U.push(W);var K=this.axisLineSelection.update(U);if(K.each((function(t,r,n){var o=n>0?-L-2*e.label.padding-(n-1)*w:0;t.x1=o,t.x2=o,t.y1=l[0],t.y2=l[1],t.strokeWidth=e.line.width,t.stroke=e.line.color,t.visible=O.length>0&&(0===n||G&&T)})),this.gridLength){var X=this.gridStyle,Y=X.length;_.each((function(t,r,n){var o=Math.round(s.convert(r));t.x1=0,t.x2=-S*e.gridLength,t.y1=o,t.y2=o,t.visible=o>=l[0]&&o<=l[1];var i=X[n%Y];t.stroke=i.stroke,t.strokeWidth=e.tick.width,t.lineDash=i.lineDash,t.fill=void 0}))}return t},e.className="GroupedCategoryAxis",e.type="groupedCategory",Dm([du(Iu)],e.prototype,"labelColor",void 0),e}(sm),km=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fm=function(){return Fm=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Fm.apply(this,arguments)},Im=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Lm=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Nm=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gm=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},jm=["top","right","bottom","left"],Bm=function(t){function e(e,r,n){void 0===e&&(e=window.document);var o=t.call(this,e,r,n)||this;return o.paired=!0,o._lastAxisWidths={top:0,bottom:0,left:0,right:0},o._lastVisibility={crossLines:!0,series:!0},o}return km(e,t),e.prototype.performLayout=function(){return Im(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p;return Lm(this,(function(d){switch(d.label){case 0:return[4,t.prototype.performLayout.call(this)];case 1:return e=d.sent(),r=this.updateAxes(e),n=r.seriesRect,o=r.visibility,i=r.clipSeries,this.seriesRoot.visible=o.series,this.seriesRect=n,this.seriesRoot.translationX=Math.floor(n.x),this.seriesRoot.translationY=Math.floor(n.y),a=this,s=a.seriesRoot,l=a.seriesAreaPadding,u=n.clone().grow({top:l.top,right:l.right,bottom:l.bottom,left:l.left}),c=20,p=u.clone().grow(c),this.hoverRect=p,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:u,hoverRect:p,visible:o.series},axes:this.axes.map((function(t){return Fm({id:t.id},t.getLayoutState())}))}),i?s.setClipRectInGroupCoordinateSpace(n):s.setClipRectInGroupCoordinateSpace(),[2,e]}}))}))},e.prototype.updateAxes=function(t){var e,r,n,o=Fm({},this._lastAxisWidths),i=Fm({},this._lastVisibility),a=new Set(this._axes.map((function(t){return t.position})));try{for(var s=Nm(Object.keys(o)),l=s.next();!l.done;l=s.next()){var u=l.value;a.has(u)||delete o[u]}}catch(b){e={error:b}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}var c=function(t,e){return!Object.keys(t).some((function(t){return null==o[t]}))&&(i.crossLines===e.crossLines&&i.series===e.series&&Object.entries(o).every((function(e){var r=Gm(e,2),n=r[0],o=r[1],i=t[n];return null==o&&null==i||o===i})))},p=function(t){return Object.entries(t).reduce((function(t,e){var r=Gm(e,2),n=r[0],o=r[1];return o&&Math.abs(o)===1/0&&(o=0),t[n]=null!=o?Math.ceil(o):o,t}),{})},d={},h={},f=!1,v=null===(n=this.seriesRect)||void 0===n?void 0:n.clone(),y=0;do{Object.assign(o,d),Object.assign(i,h);var g=this.updateAxesPass(o,t.clone(),v);if(d=p(g.axisWidths),h=g.visibility,f=g.clipSeries,v=g.seriesRect,y++>10){ul.warn("unable to find stable axis layout.");break}}while(!c(d,h));var m=5;return this.axes.forEach((function(e){if(e.setCrossLinesVisible(i.crossLines),v)switch(e.clipGrid(v.x,v.y,v.width+m,v.height+m),e.position){case"left":case"right":e.clipTickLines(t.x,v.y,t.width+m,v.height+m);break;case"top":case"bottom":e.clipTickLines(v.x,t.y,v.width+m,t.height+m);break}})),this._lastAxisWidths=o,this._lastVisibility=i,{seriesRect:v,visibility:i,clipSeries:f}},e.prototype.updateAxesPass=function(t,e,r){var n=this,o=this.axes,i={},a={},s={series:!0,crossLines:!0},l=!1,u={},c=this.applySeriesPadding(e),p=r?this.buildCrossLinePadding(t):{},d=this.buildAxisBound(c,t,p,s),h=this.buildSeriesRect(d,t);return o.forEach((function(e){var r,o,s=e.position,p=void 0===s?"left":s,f=n.calculateAxisDimensions({axis:e,seriesRect:h,paddedBounds:c,axisWidths:t,newAxisWidths:a,primaryTickCounts:u,clipSeries:l,addInterAxisPadding:(null!==(r=i[p])&&void 0!==r?r:0)>0}),v=f.clipSeries,y=f.axisThickness,g=f.axisOffset;i[p]=(null!==(o=i[p])&&void 0!==o?o:0)+1,l=l||v,n.positionAxis({axis:e,axisBound:d,axisOffset:g,axisThickness:y,axisWidths:t,primaryTickCounts:u,seriesRect:h})})),{clipSeries:l,seriesRect:h,axisWidths:a,visibility:s}},e.prototype.buildCrossLinePadding=function(t){var e,r,n,o={};this.axes.forEach((function(t){t.crossLines&&t.crossLines.forEach((function(t){t.calculatePadding(o)}))}));try{for(var i=Nm(Object.entries(o)),a=i.next();!a.done;a=i.next()){var s=Gm(a.value,2),l=s[0],u=s[1],c=void 0===u?0:u;o[l]=Math.max(c-(null!==(n=t[l])&&void 0!==n?n:0),0)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return o},e.prototype.applySeriesPadding=function(t){var e=this,r=t.clone(),n=this.axes.slice().reverse();return jm.forEach((function(t){var o=e.seriesAreaPadding[t],i=n.find((function(e){return e.position===t}));i?i.seriesAreaPadding=o:r.shrink(o,t)})),r},e.prototype.buildAxisBound=function(t,e,r,n){var o,i,a,s,l=t.clone(),u=r.top,c=void 0===u?0:u,p=r.right,d=void 0===p?0:p,h=r.bottom,f=void 0===h?0:h,v=r.left,y=void 0===v?0:v,g=y+d,m=c+f,b=(null!==(o=e.left)&&void 0!==o?o:0)+(null!==(i=e.right)&&void 0!==i?i:0)+g,C=(null!==(a=e.top)&&void 0!==a?a:0)+(null!==(s=e.bottom)&&void 0!==s?s:0)+m;return l.width<=b||l.height<=C?(n.crossLines=!1,n.series=!1,l):(l.x+=y,l.y+=c,l.width-=g,l.height-=m,l)},e.prototype.buildSeriesRect=function(t,e){var r=t.clone(),n=e.top,o=e.bottom,i=e.left,a=e.right;return r.x+=null!==i&&void 0!==i?i:0,r.y+=null!==n&&void 0!==n?n:0,r.width-=(null!==i&&void 0!==i?i:0)+(null!==a&&void 0!==a?a:0),r.height-=(null!==n&&void 0!==n?n:0)+(null!==o&&void 0!==o?o:0),r.width=Math.max(0,r.width),r.height=Math.max(0,r.height),r},e.prototype.clampToOutsideSeriesRect=function(t,e,r,n){var o=t.x,i=t.y,a=t.width,s=t.height,l=[o,i,o+a,i+s],u=1===n?Math.min:Math.max,c=l[("x"===r?0:1)+(1===n?0:2)];return u(e,c)},e.prototype.calculateAxisDimensions=function(t){var e,r,n,o,i,a=t.axis,s=t.seriesRect,l=t.paddedBounds,u=t.axisWidths,c=t.newAxisWidths,p=t.primaryTickCounts,d=t.addInterAxisPadding,h=t.clipSeries,f=a.position,v=void 0===f?"left":f,y=a.direction,g=function(t){return t instanceof hm||t instanceof _m?[0,s.height]:[s.height,0]},m=null!==(e=c[v])&&void 0!==e?e:0;switch(v){case"top":case"bottom":a.range=[0,s.width],a.gridLength=s.height;break;case"right":case"left":a.range=g(a),a.gridLength=s.width;break}var b=this.zoomManager.getAxisZoom(a.id),C=null!==b&&void 0!==b?b:{},S=C.min,w=void 0===S?0:S,x=C.max,O=void 0===x?1:x;a.visibleRange=[w,O],!h&&(a.visibleRange[0]>0||a.visibleRange[1]<1)&&(h=!0);var E=a.nice?p[y]:void 0,T=.3;null!=a.thickness&&a.thickness>0?a.maxThickness=a.thickness:y===oc.Y?a.maxThickness=l.width*T:a.maxThickness=l.height*T,E=a.update(E),p[y]=null!==(r=p[y])&&void 0!==r?r:E;var P=0;if(null!=a.thickness&&a.thickness>0)P=a.thickness;else{var D=a.computeBBox();P=y===oc.X?D.height:D.width}var A=15;return d&&(P+=A),P=Math.ceil(P),c[v]=(null!==(n=c[v])&&void 0!==n?n:0)+P,a.gridPadding=(null!==(o=u[v])&&void 0!==o?o:0)-(null!==(i=c[v])&&void 0!==i?i:0),{clipSeries:h,axisThickness:P,axisOffset:m}},e.prototype.positionAxis=function(t){var e,r,n,o,i=t.axis,a=t.axisBound,s=t.axisWidths,l=t.seriesRect,u=t.axisOffset,c=t.axisThickness,p=i.position;switch(p){case"top":i.translation.x=a.x+(null!==(e=s.left)&&void 0!==e?e:0),i.translation.y=this.clampToOutsideSeriesRect(l,a.y+1+u+c,"y",1);break;case"bottom":i.translation.x=a.x+(null!==(r=s.left)&&void 0!==r?r:0),i.translation.y=this.clampToOutsideSeriesRect(l,a.y+a.height+1-c-u,"y",-1);break;case"left":i.translation.y=a.y+(null!==(n=s.top)&&void 0!==n?n:0),i.translation.x=this.clampToOutsideSeriesRect(l,a.x+u+c,"x",1);break;case"right":i.translation.y=a.y+(null!==(o=s.top)&&void 0!==o?o:0),i.translation.x=this.clampToOutsideSeriesRect(l,a.x+a.width-c-u,"x",-1);break}i.updatePosition({rotation:Rl(i.rotation),sideFlag:i.label.getSideFlag()})},e.className="CartesianChart",e.type="cartesian",e}(Xf),Vm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shape="polygon",e}return Vm(e,t),e.prototype.computeLabelsBBox=function(t,e){return null},e}(Vy),zm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Um=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Wm=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Km=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Xm=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},Ym=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qm=function(t){function e(e,r,n){void 0===e&&(e=window.document);var o=t.call(this,e,r,n)||this;return o.padding=new kp(40),o}return zm(e,t),e.prototype.performLayout=function(){return Um(this,void 0,void 0,(function(){var e,r,n,o;return Wm(this,(function(i){switch(i.label){case 0:return[4,t.prototype.performLayout.call(this)];case 1:return e=i.sent(),r=e.clone(),this.computeSeriesRect(e),this.computeCircle(e),this.axes.forEach((function(t){return t.update()})),n=20,o=e.clone().grow(n),this.hoverRect=o,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:r,paddedRect:e,hoverRect:o,visible:!0},axes:[]}),[2,e]}}))}))},e.prototype.updateAxes=function(t,e,r){var n;this.axes.forEach((function(n){var o;if(n.direction===oc.X){var i=Rl(null!==(o=n.rotation)&&void 0!==o?o:0);n.range=[-Math.PI/2+i,3*Math.PI/2+i],n.gridLength=r,n.translation.x=t,n.translation.y=e}else n.direction===oc.Y&&(n.range=[r,0],n.translation.x=t,n.translation.y=e-r);n.updateScale()}));var o=this.axes.find((function(t){return t.direction===oc.X})),i=null===o||void 0===o?void 0:o.scale,a=null===(n=null===i||void 0===i?void 0:i.ticks)||void 0===n?void 0:n.call(i).map((function(t){return i.convert(t)}));this.axes.filter((function(t){return t instanceof Hm})).forEach((function(t){return t.gridAngles=a}))},e.prototype.computeSeriesRect=function(t){var e=this.seriesAreaPadding;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t},e.prototype.computeCircle=function(t){var e=this,r=this.series.filter((function(t){return t instanceof sg})),n=this.axes.filter((function(t){return t instanceof Hm})),o=function(t,n,o){e.updateAxes(t,n,o),r.forEach((function(e){e.centerX=t,e.centerY=n,e.radius=o}));var i=r.filter((function(t){return t instanceof Tg}));if(i.length>1){var a=i.map((function(t){var e=t.getInnerRadius();return{series:t,innerRadius:e}})).sort((function(t,e){return t.innerRadius-e.innerRadius}));a[a.length-1].series.surroundingRadius=void 0;for(var s=0;s<a.length-1;s++)a[s].series.surroundingRadius=a[s+1].innerRadius}},i=t.x+t.width/2,a=t.y+t.height/2,s=Math.max(0,Math.min(t.width,t.height)/2),l=s;o(i,a,l);var u=function(u){var c,p,d=void 0===u?{}:u,h=d.hideWhenNecessary,f=void 0!==h&&h,v=[];try{for(var y=Ym(Xm(Xm([],Km(n)),Km(r))),g=y.next();!g.done;g=y.next()){var m=g.value,b=m.computeLabelsBBox({hideWhenNecessary:f},t);b&&v.push(b)}}catch(w){c={error:w}}finally{try{g&&!g.done&&(p=y.return)&&p.call(y)}finally{if(c)throw c.error}}if(0!==v.length){var C=Ls.merge(v),S=e.refineCircle(C,l,t);o(S.centerX,S.centerY,S.radius),S.radius!==l&&(l=S.radius)}else o(i,a,s)};return u(),u(),u(),u({hideWhenNecessary:!0}),u({hideWhenNecessary:!0}),{radius:l,centerX:i,centerY:a}},e.prototype.refineCircle=function(t,e,r){var n=.5,o=-e,i=-e,a=e,s=e,l=Math.max(0,o-t.x),u=Math.max(0,i-t.y),c=Math.max(0,t.x+t.width-a),p=Math.max(0,t.y+t.height-s),d=r.width-l-c,h=r.height-u-p,f=Math.min(d,h)/2,v=n*r.width/2,y=n*r.height/2,g=Math.min(v,y);if(f<g){f=g;var m=l+c,b=u+p;if(2*f+b>r.height){var C=r.height-2*f;2*Math.min(u,p)>C?(u=C/2,p=C/2):u>p?u=C-p:p=C-u}if(2*f+m>r.width){var S=r.width-2*f;2*Math.min(l,c)>S?(l=S/2,c=S/2):l>c?l=S-c:c=S-l}}var w=l+2*f+c,x=u+2*f+p;return{centerX:r.x+(r.width-w)/2+l+f,centerY:r.y+(r.height-x)/2+u+f,radius:f}},e.className="PolarChart",e.type="polar",e}(Xf),Zm=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jm=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Qm=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},$m=function(t){function e(e,r,n){void 0===e&&(e=window.document);var o=t.call(this,e,r,n)||this;return o._data={},o}return Zm(e,t),e.prototype.performLayout=function(){return Jm(this,void 0,void 0,(function(){var e,r,n,o,i,a,s=this;return Qm(this,(function(l){switch(l.label){case 0:return[4,t.prototype.performLayout.call(this)];case 1:return e=l.sent(),r=this.seriesAreaPadding,n=e.clone(),e.shrink(r.left,"left"),e.shrink(r.top,"top"),e.shrink(r.right,"right"),e.shrink(r.bottom,"bottom"),this.seriesRect=e,o=20,i=e.clone().grow(o),this.hoverRect=i,this.seriesRoot.translationX=Math.floor(e.x),this.seriesRoot.translationY=Math.floor(e.y),[4,Promise.all(this.series.map((function(t){return Jm(s,void 0,void 0,(function(){return Qm(this,(function(r){switch(r.label){case 0:return[4,t.update({seriesRect:e})];case 1:return r.sent(),[2]}}))}))})))];case 2:return l.sent(),a=this.seriesRoot,a.setClipRectInGroupCoordinateSpace(new Ls(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:e,hoverRect:i,visible:!0},axes:[]}),[2,e]}}))}))},e.className="HierarchyChart",e.type="hierarchy",e}(Xf);function tb(t,e){var r=Math.floor(t[0]),n=t[1];r=eb(r,n,e);var o=nb(r,n,e),i=e-1;n=r+i*o;var a=[r,n],s=rb(r,o,e);return[a,s]}function eb(t,e,r){var n=Math.abs(e-t)/(r-1),o=Math.floor(Math.log10(n)),i=Math.pow(10,o);return Math.floor(t/i)*i}function rb(t,e,r){for(var n=Math.floor(Math.log10(e)),o=e>0&&e<1?Math.abs(n):0,i=Math.pow(10,o),a=new cv(o),s=0;s<r;s++){var l=t+e*s;a[s]=Math.round(l*i)/i}return a}function nb(t,e,r){var n=r-1,o=(e-t)/n;return ob(o)}function ob(t){var e=Math.floor(Math.log10(t)),r=Math.pow(10,e),n=t/r*10;return n>0&&n<=1?r/10:n>1&&n<=2?2*r/10:n>1&&n<=5?5*r/10:n>5&&n<=10?10*r/10:n>10&&n<=20?20*r/10:n>20&&n<=40?40*r/10:n>40&&n<=50?50*r/10:n>50&&n<=100?100*r/10:n}var ib=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ab=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sb=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},lb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxSpacing=NaN,e}return ib(e,t),ab([du(gu(Bu(1),Su("minSpacing"))),my(NaN)],e.prototype,"maxSpacing",void 0),e}(Ay),ub=function(t){function e(e,r){void 0===r&&(r=new qy);var n=t.call(this,e,r)||this;return n.min=NaN,n.max=NaN,r.strictClampByDefault=!0,n}return ib(e,t),e.prototype.normaliseDataDomain=function(t){var e=this,r=e.min,n=e.max;return cy(t,r,n)},e.prototype.formatDatum=function(t){return"number"===typeof t?t.toFixed(2):(ul.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))},e.prototype.createTick=function(){return new lb},e.prototype.updateSecondaryAxisTicks=function(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");var e=sb(tb(this.dataDomain,null!==t&&void 0!==t?t:0),2),r=e[0],n=e[1];return this.scale.nice=!1,this.scale.domain=r,this.scale.update(),n},e.className="NumberAxis",e.type="number",ab([du(gu(Bu(),Cu("max"))),my(NaN)],e.prototype,"min",void 0),ab([du(gu(Bu(),Su("min"))),my(NaN)],e.prototype,"max",void 0),e}(sm),cb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pb=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};function db(){var t="expecting a non-zero Number";return hu((function(t){return"number"===typeof t&&0!==t}),t)}var hb,fb=function(t){function e(e){var r=t.call(this,e,new ly)||this;return r.min=NaN,r.max=NaN,r.scale.strictClampByDefault=!0,r}return cb(e,t),e.prototype.normaliseDataDomain=function(t){var e,r=this,n=r.min,o=r.max;t.length>2&&(t=null!==(e=uy(t))&&void 0!==e?e:[NaN,NaN]),isNaN(n)||(t=[n,t[1]]),isNaN(o)||(t=[t[0],o]);var i=t[0]>t[1],a=t[0]<0&&t[1]>0,s=0===t[0]&&0===t[1],l=i||a||s;return l&&(t=[],a?ul.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):s&&ul.warn("the data domain has 0 extent, no data is rendered.")),0===t[0]&&(t[0]=1),0===t[1]&&(t[1]=-1),t},Object.defineProperty(e.prototype,"base",{get:function(){return this.scale.base},set:function(t){this.scale.base=t},enumerable:!1,configurable:!0}),e.className="LogAxis",e.type="log",pb([du(gu(Bu(),Cu("max"),db())),my(NaN)],e.prototype,"min",void 0),pb([du(gu(Bu(),Su("min"),db())),my(NaN)],e.prototype,"max",void 0),e}(ub),vb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yb=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},gb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxSpacing=NaN,e}return vb(e,t),yb([du(gu(Bu(1),Su("minSpacing"))),my(NaN)],e.prototype,"maxSpacing",void 0),e}(Ay),mb=function(t){function e(e){var r=t.call(this,e,new kv)||this;r.datumFormat="%m/%d/%y, %H:%M:%S",r.min=void 0,r.max=void 0;var n=r.scale;return n.strictClampByDefault=!0,r.refreshScale(),r.datumFormatter=n.tickFormat({specifier:r.datumFormat}),r}return vb(e,t),e.prototype.normaliseDataDomain=function(t){var e,r=this,n=r.min,o=r.max;return"number"===typeof n&&(n=new Date(n)),"number"===typeof o&&(o=new Date(o)),t.length>2&&(t=(null!==(e=uy(t))&&void 0!==e?e:[0,1e3]).map((function(t){return new Date(t)}))),n instanceof Date&&(t=[n,t[1]]),o instanceof Date&&(t=[t[0],o]),t[0]>t[1]&&(t=[]),t},e.prototype.createTick=function(){return new gb},e.prototype.onLabelFormatChange=function(e,r){r?t.prototype.onLabelFormatChange.call(this,e,r):this.labelFormatter=this.scale.tickFormat({ticks:e})},e.prototype.formatDatum=function(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)},e.prototype.calculatePadding=function(t,e){return[0,1]},e.className="TimeAxis",e.type="time",yb([du(gu(_u,Cu("max")))],e.prototype,"min",void 0),yb([du(gu(_u,Su("min")))],e.prototype,"max",void 0),e}(sm),bb=(hb={},hb[ub.type]=ub,hb[hm.type]=hm,hb[mb.type]=mb,hb[_m.type]=_m,hb[fb.type]=fb,hb);function Cb(t,e){bb[t]=e}function Sb(t,e){var r=bb[t];if(r)return new r(e);throw new Error("AG Charts - unknown axis type: "+t)}var wb={has:function(t){return Object.prototype.hasOwnProperty.call(bb,t)},get axesTypes(){return Object.keys(bb)}},xb={};function Ob(t,e){xb[t]=e}function Eb(t){var e;return null!==(e=xb[t])&&void 0!==e?e:{}}var Tb,Pb,Db=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ab=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Mb=["circle","cross","diamond","heart","plus","square","triangle"],Rb=hu((function(t){return Mb.includes(t)||Object.getPrototypeOf(t)===_h}),"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),_b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e.shape=jh,e.size=6,e.maxSize=30,e.domain=void 0,e.fill=void 0,e.stroke=void 0,e.strokeWidth=1,e.fillOpacity=void 0,e.strokeOpacity=void 0,e}return Db(e,t),Ab([du(Ou),Us({redraw:_s.MAJOR})],e.prototype,"enabled",void 0),Ab([du(Rb),Us({redraw:_s.MAJOR})],e.prototype,"shape",void 0),Ab([du(Gu(0)),Us({redraw:_s.MAJOR})],e.prototype,"size",void 0),Ab([du(Gu(0)),Us({redraw:_s.MAJOR})],e.prototype,"maxSize",void 0),Ab([du(Hu),Us({redraw:_s.MAJOR})],e.prototype,"domain",void 0),Ab([du(Iu),Us({redraw:_s.MAJOR})],e.prototype,"fill",void 0),Ab([du(Iu),Us({redraw:_s.MAJOR})],e.prototype,"stroke",void 0),Ab([du(ju(0)),Us({redraw:_s.MAJOR})],e.prototype,"strokeWidth",void 0),Ab([du(ju(0,1)),Us({redraw:_s.MAJOR})],e.prototype,"fillOpacity",void 0),Ab([du(ju(0,1)),Us({redraw:_s.MAJOR})],e.prototype,"strokeOpacity",void 0),e}(Ys),kb=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fb=function(){return Fb=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Fb.apply(this,arguments)},Ib=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Lb=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},Nb=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Gb=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jb=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},Bb=(Tb={},Tb[oc.X]=["xKey"],Tb[oc.Y]=["yKey"],Tb),Vb=(Pb={},Pb[oc.X]=["xName"],Pb[oc.Y]=["yName"],Pb),Hb=function(t){function e(e,r,n,o,i){var a=t.call(this,n,o,i)||this;return a.xKey=e,a.yKey=r,a}return kb(e,t),e}(wp),zb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeClick",e}return kb(e,t),e}(Hb),Ub=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return kb(e,t),e}(Hb),Wb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kb(e,t),e}(My),Kb=function(t){function e(e){var r=t.call(this,Fb(Fb({},e),{useSeriesGroupLayer:!0,directionKeys:Bb,directionNames:Vb}))||this;r.legendItemName=void 0,r._contextNodeData=[],r.nodeDataDependencies={},r.highlightSelection=hh.select(r.highlightNode,(function(){return r.opts.hasMarkers?r.markerFactory():r.nodeFactory()})),r.highlightLabelSelection=hh.select(r.highlightLabel,zl),r.subGroups=[],r.subGroupId=0,r.datumSelectionGarbageCollection=!0;var n=e.pathsPerSeries,o=void 0===n?1:n,i=e.hasMarkers,a=void 0!==i&&i,s=e.hasHighlightedLabels,l=void 0!==s&&s,u=e.pathsZIndexSubOrderOffset,c=void 0===u?[]:u;return r.opts={pathsPerSeries:o,hasMarkers:a,hasHighlightedLabels:l,pathsZIndexSubOrderOffset:c},r.animationState=new Wb("empty",{empty:{on:{update:{target:"ready",action:function(t){return r.animateEmptyUpdateReady(t)}}}},ready:{on:{updateData:{target:"waiting",action:function(){}},update:{target:"ready",action:function(t){return r.animateReadyUpdate(t)}},highlight:{target:"ready",action:function(t){return r.animateReadyHighlight(t)}},highlightMarkers:{target:"ready",action:function(t){return r.animateReadyHighlightMarkers(t)}},resize:{target:"ready",action:function(t){return r.animateReadyResize(t)}}}},waiting:{on:{update:{target:"ready",action:function(t){return r.animateWaitingUpdateReady(t)}}}}}),r}return kb(e,t),Object.defineProperty(e.prototype,"contextNodeData",{get:function(){var t;return null===(t=this._contextNodeData)||void 0===t?void 0:t.slice()},enumerable:!1,configurable:!0}),e.prototype.addChartEventListeners=function(){var t,e,r=this;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",(function(t){return r.onLegendItemClick(t)})),null===(e=this.ctx.chartEventManager)||void 0===e||e.addListener("legend-item-double-click",(function(t){return r.onLegendItemDoubleClick(t)}))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)},e.prototype.checkDomainXY=function(t,e,r,n){var o=(r&&ru(t)||!r&&eu(t))&&(n&&ru(e)||!n&&eu(e));return o?[t,e]:void 0},e.prototype.checkRangeXY=function(t,e,r,n){return!isNaN(t)&&!isNaN(e)&&r.inRange(t)&&n.inRange(e)},e.prototype.update=function(t){var e,r,n=t.seriesRect;return Lb(this,void 0,void 0,(function(){var t,o,i,a,s;return Nb(this,(function(l){switch(l.label){case 0:return t=this.visible,o=(null!==(r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==r?r:{}).series,i=o?o===this:void 0,a={seriesRectWidth:null===n||void 0===n?void 0:n.width,seriesRectHeight:null===n||void 0===n?void 0:n.height},s=null!=ed(this.nodeDataDependencies,a),s&&(this.nodeDataDependencies=a,this.markNodeDataDirty()),[4,this.updateSelections(i,t)];case 1:return l.sent(),[4,this.updateNodes(i,t)];case 2:return l.sent(),s&&this.animationState.transition("resize",{datumSelections:this.subGroups.map((function(t){var e=t.datumSelection;return e})),markerSelections:this.subGroups.map((function(t){var e=t.markerSelection;return e})),contextData:this._contextNodeData,paths:this.subGroups.map((function(t){var e=t.paths;return e}))}),this.animationState.transition("update",{datumSelections:this.subGroups.map((function(t){var e=t.datumSelection;return e})),markerSelections:this.subGroups.map((function(t){var e=t.markerSelection;return e})),labelSelections:this.subGroups.map((function(t){var e=t.labelSelection;return e})),contextData:this._contextNodeData,paths:this.subGroups.map((function(t){var e=t.paths;return e})),seriesRect:n}),[2]}}))}))},e.prototype.updateSelections=function(t,e){var r;return Lb(this,void 0,void 0,(function(){var n,o=this;return Nb(this,(function(i){switch(i.label){case 0:return[4,this.updateHighlightSelection(t)];case 1:return i.sent(),e?this.nodeDataRefresh||this.isPathOrSelectionDirty()?this.nodeDataRefresh?(this.nodeDataRefresh=!1,(null===(r=this.chart)||void 0===r?void 0:r.debug)&&ul.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),n=this,[4,this.createNodeData()]):[3,4]:[2]:[2];case 2:return n._contextNodeData=i.sent(),[4,this.updateSeriesGroups()];case 3:i.sent(),i.label=4;case 4:return[4,Promise.all(this.subGroups.map((function(t,e){return o.updateSeriesGroupSelections(t,e)})))];case 5:return i.sent(),[2]}}))}))},e.prototype.updateSeriesGroupSelections=function(t,e){return Lb(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c;return Nb(this,(function(p){switch(p.label){case 0:return r=t.datumSelection,n=t.labelSelection,o=t.markerSelection,i=this._contextNodeData[e],a=i.nodeData,s=i.labelData,l=t,[4,this.updateDatumSelection({nodeData:a,datumSelection:r,seriesIdx:e})];case 1:return l.datumSelection=p.sent(),u=t,[4,this.updateLabelSelection({labelData:s,labelSelection:n,seriesIdx:e})];case 2:return u.labelSelection=p.sent(),o?(c=t,[4,this.updateMarkerSelection({nodeData:a,markerSelection:o,seriesIdx:e})]):[3,4];case 3:c.markerSelection=p.sent(),p.label=4;case 4:return[2]}}))}))},e.prototype.nodeFactory=function(){return new yl},e.prototype.markerFactory=function(){var t=Zh();return new t},e.prototype.updateSeriesGroups=function(){return Lb(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,u,c,p,d,h,f,v=this;return Nb(this,(function(y){if(t=this,e=t._contextNodeData,r=t.contentGroup,n=t.subGroups,o=t.opts,i=o.pathsPerSeries,a=o.hasMarkers,e.length===n.length)return[2];e.length<n.length&&n.splice(e.length).forEach((function(t){var e,n,o=t.dataNodeGroup,i=t.markerGroup,a=t.labelGroup,s=t.paths;r.removeChild(o),i&&r.removeChild(i),a&&r.removeChild(a);try{for(var l=Gb(s),u=l.next();!u.done;u=l.next()){var c=u.value;r.removeChild(c)}}catch(p){e={error:p}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}})),s=e.length;while(s>n.length){for(l=!1,u=this.subGroupId++,c=new yl({name:this.id+"-series-sub"+u+"-dataNodes",layer:l,zIndex:nc.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",u)}),p=a?new yl({name:this.id+"-series-sub"+this.subGroupId+++"-markers",layer:l,zIndex:nc.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",u)}):void 0,d=new yl({name:this.id+"-series-sub"+this.subGroupId+++"-labels",layer:l,zIndex:nc.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",u)}),r.appendChild(c),r.appendChild(d),p&&r.appendChild(p),h=[],f=0;f<i;f++)h[f]=new Dh,h[f].zIndex=nc.SERIES_LAYER_ZINDEX,h[f].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",f),r.appendChild(h[f]);n.push({paths:h,dataNodeGroup:c,markerGroup:p,labelGroup:d,labelSelection:hh.select(d,zl),datumSelection:hh.select(c,(function(){return v.nodeFactory()}),this.datumSelectionGarbageCollection),markerSelection:p?hh.select(p,(function(){return v.markerFactory()})):void 0})}return[2]}))}))},e.prototype.getGroupZIndexSubOrder=function(e,r){var n;void 0===r&&(r=0);var o=t.prototype.getGroupZIndexSubOrder.call(this,e,r);if("paths"===e){var i=null!==(n=this.opts.pathsZIndexSubOrderOffset[r])&&void 0!==n?n:0,a=o[0];o[0]="function"===typeof a?function(){return+a()+i}:+a+i}return o},e.prototype.updateNodes=function(t,e){var r;return Lb(this,void 0,void 0,(function(){var n,o,i,a,s,l,u,c,p,d=this;return Nb(this,(function(h){switch(h.label){case 0:return n=this,o=n.highlightSelection,i=n.highlightLabelSelection,a=n._contextNodeData,s=n.opts,l=s.hasMarkers,u=s.hasHighlightedLabels,c=this.visible&&(null===(r=this._contextNodeData)||void 0===r?void 0:r.length)>0&&e,this.rootGroup.visible=c,this.contentGroup.visible=c,this.highlightGroup.visible=c&&!!t,p=this.subGroups.map((function(t,e){var r=a[e].itemId;return d.getOpacity({itemId:r})})),l?[4,this.updateMarkerNodes({markerSelection:o,isHighlight:!0,seriesIdx:-1})]:[3,2];case 1:return h.sent(),this.animationState.transition("highlightMarkers",o),[3,4];case 2:return[4,this.updateDatumNodes({datumSelection:o,isHighlight:!0,seriesIdx:-1})];case 3:h.sent(),this.animationState.transition("highlight",o),h.label=4;case 4:return u?[4,this.updateLabelNodes({labelSelection:i,seriesIdx:-1})]:[3,6];case 5:h.sent(),h.label=6;case 6:return[4,Promise.all(this.subGroups.map((function(t,e){return Lb(d,void 0,void 0,(function(){var r,n,o,i,a,s,u,d,h,f,v,y,g,m;return Nb(this,(function(b){switch(b.label){case 0:r=t.dataNodeGroup,n=t.markerGroup,o=t.datumSelection,i=t.labelSelection,a=t.markerSelection,s=t.paths,u=t.labelGroup,d=c,h=p[e],r.opacity=h,r.visible=d,u.visible=d,n&&(n.opacity=h,n.zIndex=r.zIndex>=nc.SERIES_LAYER_ZINDEX?r.zIndex:r.zIndex+1,n.visible=d),u&&(u.opacity=h);try{for(f=Gb(s),v=f.next();!v.done;v=f.next())y=v.value,y.opacity=h,y.visible=d}catch(C){g={error:C}}finally{try{v&&!v.done&&(m=f.return)&&m.call(f)}finally{if(g)throw g.error}}return r.visible?[4,this.updateDatumNodes({datumSelection:o,isHighlight:!1,seriesIdx:e})]:[2];case 1:return b.sent(),[4,this.updateLabelNodes({labelSelection:i,seriesIdx:e})];case 2:return b.sent(),l&&a?[4,this.updateMarkerNodes({markerSelection:a,isHighlight:!1,seriesIdx:e})]:[3,4];case 3:b.sent(),b.label=4;case 4:return[2]}}))}))})))];case 7:return h.sent(),[2]}}))}))},e.prototype.updateHighlightSelection=function(t){var e;return Lb(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g;return Nb(this,(function(m){switch(m.label){case 0:return r=this,n=r.highlightSelection,o=r.highlightLabelSelection,i=r._contextNodeData,a=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),s=t&&(null===a||void 0===a?void 0:a.datum)?a:void 0,l=this,[4,this.updateHighlightSelectionItem({item:s,highlightSelection:n})];case 1:if(l.highlightSelection=m.sent(),this.isLabelEnabled()&&null!=s){c=s.itemId,p=void 0===c?void 0:c;try{for(d=Gb(i),h=d.next();!h.done;h=d.next())if(f=h.value.labelData,u=f.find((function(t){return t.datum===s.datum&&t.itemId===p})),null!=u)break}catch(b){y={error:b}}finally{try{h&&!h.done&&(g=d.return)&&g.call(d)}finally{if(y)throw y.error}}}return v=this,[4,this.updateHighlightSelectionLabel({item:u,highlightLabelSelection:o})];case 2:return v.highlightLabelSelection=m.sent(),[2]}}))}))},e.prototype.pickNodeExactShape=function(e){var r,n,o=t.prototype.pickNodeExactShape.call(this,e);if(o)return o;var i=e.x,a=e.y,s=this.opts.hasMarkers;try{for(var l=Gb(this.subGroups),u=l.next();!u.done;u=l.next()){var c=u.value,p=c.dataNodeGroup,d=c.markerGroup,h=p.pickNode(i,a);if(!h&&s&&(h=null===d||void 0===d?void 0:d.pickNode(i,a)),h)return{datum:h.datum,distance:0}}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}},e.prototype.pickNodeClosestDatum=function(t){var e,r,n,o,i,a,s,l=t.x,u=t.y,c=this,p=c.axes,d=c.rootGroup,h=c._contextNodeData,f=p[oc.X],v=p[oc.Y],y=d.transformPoint(l,u),g=1/0;try{for(var m=Gb(h),b=m.next();!b.done;b=m.next()){var C=b.value;try{for(var S=(n=void 0,Gb(C.nodeData)),w=S.next();!w.done;w=S.next()){var x=w.value,O=x.point,E=void 0===O?{}:O,T=E.x,P=void 0===T?NaN:T,D=E.y,A=void 0===D?NaN:D;if(!isNaN(P)&&!isNaN(A)){var M=(null===f||void 0===f?void 0:f.inRange(P))&&(null===v||void 0===v?void 0:v.inRange(A));if(M){var R=Math.max(Math.pow(y.x-P,2)+Math.pow(y.y-A,2),0);R<g&&(g=R,s=x)}}}}catch(_){n={error:_}}finally{try{w&&!w.done&&(o=S.return)&&o.call(S)}finally{if(n)throw n.error}}}}catch(k){e={error:k}}finally{try{b&&!b.done&&(r=m.return)&&r.call(m)}finally{if(e)throw e.error}}if(s){R=Math.max(Math.sqrt(g)-(null!==(a=null===(i=s.point)||void 0===i?void 0:i.size)&&void 0!==a?a:0),0);return{datum:s,distance:R}}},e.prototype.pickNodeMainAxisFirst=function(t,e){var r,n,o,i,a,s,l=t.x,u=t.y,c=this,p=c.axes,d=c.rootGroup,h=c._contextNodeData,f=p[oc.X],v=p[oc.Y],y=[f,v].filter((function(t){return t instanceof hm})).map((function(t){return t.direction}));if(!e||0!==y.length){var g=jb(y,1),m=g[0],b=void 0===m?oc.X:m,C=d.transformPoint(l,u),S=b===oc.X?[C.x,C.y]:[C.y,C.x],w=[1/0,1/0],x=void 0;try{for(var O=Gb(h),E=O.next();!E.done;E=O.next()){var T=E.value;try{for(var P=(o=void 0,Gb(T.nodeData)),D=P.next();!D.done;D=P.next()){var A=D.value,M=A.point,R=void 0===M?{}:M,_=R.x,k=void 0===_?NaN:_,F=R.y,I=void 0===F?NaN:F;if(!isNaN(k)&&!isNaN(I)){var L=(null===f||void 0===f?void 0:f.inRange(k))&&(null===v||void 0===v?void 0:v.inRange(I));if(L){for(var N=b===oc.X?[k,I]:[I,k],G=!0,j=0;j<N.length;j++){var B=Math.abs(N[j]-S[j]);if(B>w[j]){G=!1;break}B<w[j]&&(w[j]=B,w.fill(1/0,j+1,w.length))}G&&(x=A)}}}}catch(H){o={error:H}}finally{try{D&&!D.done&&(i=P.return)&&i.call(P)}finally{if(o)throw o.error}}}}catch(z){r={error:z}}finally{try{E&&!E.done&&(n=O.return)&&n.call(O)}finally{if(r)throw r.error}}if(x){var V=Math.max(Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2))-(null!==(s=null===(a=x.point)||void 0===a?void 0:a.size)&&void 0!==s?s:0),0);return{datum:x,distance:V}}}},e.prototype.onLegendItemClick=function(t){var e=t.enabled,r=t.itemId,n=t.series,o=t.legendItemName,i=null!=this.legendItemName&&this.legendItemName===o;(n.id===this.id||i)&&this.toggleSeriesItem(r,e)},e.prototype.onLegendItemDoubleClick=function(t){var e=t.enabled,r=t.itemId,n=t.series,o=t.numVisibleItems,i=t.legendItemName,a=Object.values(o).reduce((function(t,e){return t+e}),0),s=null!=this.legendItemName&&this.legendItemName===i;n.id===this.id||s||e&&1===a?this.toggleSeriesItem(r,!0):this.toggleSeriesItem(r,!1)},e.prototype.isPathOrSelectionDirty=function(){return!1},e.prototype.getLabelData=function(){return[]},e.prototype.updateHighlightSelectionItem=function(t){return Lb(this,void 0,void 0,(function(){var e,r,n,o,i;return Nb(this,(function(a){return e=this.opts.hasMarkers,r=t.item,n=t.highlightSelection,o=r?[r]:[],e?(i=n,[2,this.updateMarkerSelection({nodeData:o,markerSelection:i,seriesIdx:-1})]):[2,this.updateDatumSelection({nodeData:o,datumSelection:n,seriesIdx:-1})]}))}))},e.prototype.updateHighlightSelectionLabel=function(t){return Lb(this,void 0,void 0,(function(){var e,r,n;return Nb(this,(function(o){return e=t.item,r=t.highlightLabelSelection,n=e?[e]:[],[2,this.updateLabelSelection({labelData:n,labelSelection:r,seriesIdx:-1})]}))}))},e.prototype.updateDatumSelection=function(t){return Lb(this,void 0,void 0,(function(){return Nb(this,(function(e){return[2,t.datumSelection]}))}))},e.prototype.updateDatumNodes=function(t){return Lb(this,void 0,void 0,(function(){return Nb(this,(function(t){return[2]}))}))},e.prototype.updateMarkerSelection=function(t){return Lb(this,void 0,void 0,(function(){return Nb(this,(function(e){return[2,t.markerSelection]}))}))},e.prototype.updateMarkerNodes=function(t){return Lb(this,void 0,void 0,(function(){return Nb(this,(function(t){return[2]}))}))},e.prototype.animateEmptyUpdateReady=function(t){},e.prototype.animateReadyUpdate=function(t){},e.prototype.animateWaitingUpdateReady=function(t){},e.prototype.animateReadyHighlight=function(t){},e.prototype.animateReadyHighlightMarkers=function(t){},e.prototype.animateReadyResize=function(t){},Ib([du(Pu)],e.prototype,"legendItemName",void 0),e}(Rp),Xb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return kb(e,t),Ib([du(xu),Us({redraw:_s.MAJOR})],e.prototype,"formatter",void 0),e}(_b),Yb=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},qb=/(#\{(.*?)\})/g;function Zb(t,e,r){return t.replace(qb,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=t[2],i=Yb(o.split(":"),2),a=i[0],s=i[1],l=e[a];if("number"===typeof l){var u=s&&r&&r[s];if(u){var c=u,p=c.locales,d=c.options;return l.toLocaleString(p,d)}return String(l)}if(l instanceof Date){u=s&&r&&r[s];if("string"===typeof u){var h=xv(u);return h(l)}return l.toDateString()}return"string"===typeof l||(null===l||void 0===l?void 0:l.toString)?String(l):""}))}var Jb=null;function Qb(t){return Jb=null!==Jb&&void 0!==Jb?Jb:document.createElement("div"),t?(Jb.textContent=t,Jb.innerHTML):""}var $b,tC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eC=function(){return eC=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},eC.apply(this,arguments)},rC=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},nC=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},oC=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},iC=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},aC=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},sC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return tC(e,t),rC([du(xu)],e.prototype,"formatter",void 0),e}(dy),lC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return tC(e,t),rC([du(xu)],e.prototype,"renderer",void 0),rC([du(Pu)],e.prototype,"format",void 0),e}(Ap);(function(t){t[t["Fill"]=0]="Fill",t[t["Stroke"]=1]="Stroke",t[t["Marker"]=2]="Marker",t[t["Label"]=3]="Label"})($b||($b={}));var uC=function(t){function e(e){var r=t.call(this,{moduleCtx:e,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0})||this;r.tooltip=new lC,r.marker=new Xb,r.label=new sC,r.fill="#c16068",r.stroke="#874349",r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.xKey=void 0,r.xName=void 0,r.strokeWidth=2,r.shadow=void 0;var n=r,o=n.marker,i=n.label;return o.enabled=!1,i.enabled=!1,r}return tC(e,t),e.prototype.processData=function(t){return nC(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S;return oC(this,(function(w){switch(w.label){case 0:return e=this,r=e.xKey,n=e.yKey,o=e.axes,i=e.normalizedTo,a=e.data,s=e.visible,l=e.seriesGrouping,u=void 0===l?{}:l,c=u.groupIndex,p=void 0===c?this.id:c,r&&n&&a?(d=o[oc.X],h=o[oc.Y],f=(null===d||void 0===d?void 0:d.scale)instanceof ov,v=(null===h||void 0===h?void 0:h.scale)instanceof ov,y=["area-stack-"+p+"-yValues","area-stack-"+p+"-yValues-trailing","area-stack-"+p+"-yValues-prev","area-stack-"+p+"-yValues-trailing-prev","area-stack-"+p+"-yValues-marker"],g=[],m=i&&isFinite(i)?i:void 0,m&&(g.push(Jc(this,[y[0],y[1],y[4]],m,"range")),g.push(Jc(this,[y[2],y[3]],m,"range"))),[4,t.request(this.id,a,{props:aC(aC(aC(aC(aC(aC([gp(this,r,f,{id:"xValue"}),mp(this,n,v,{id:"yValue-raw",invalidValue:null})],iC(Sp(this,n,v,"window","current",{id:"yValue-end",invalidValue:null,groupId:y[0]}))),iC(Sp(this,n,v,"window-trailing","current",{id:"yValue-start",invalidValue:null,groupId:y[1]}))),iC(Sp(this,n,v,"window","last",{id:"yValue-previous-end",invalidValue:null,groupId:y[2]}))),iC(Sp(this,n,v,"window-trailing","last",{id:"yValue-previous-start",invalidValue:null,groupId:y[3]}))),iC(Sp(this,n,v,"normal","current",{id:"yValue-cumulative",invalidValue:null,groupId:y[4]}))),iC(g)),groupByKeys:!0,dataVisible:s})]):[2];case 1:return b=w.sent(),C=b.dataModel,S=b.processedData,this.dataModel=C,this.processedData=S,[2]}}))}))},e.prototype.getDomain=function(t){var e=this,r=e.processedData,n=e.dataModel,o=e.axes;if(!r||!n)return[];var i=o[oc.X],a=o[oc.Y],s=n.resolveProcessedDataDefById(this,"xValue"),l=n.getDomain(this,"xValue","key",r),u=n.getDomain(this,/yValue-(previous-)?end/,"value",r);if(t===oc.X)return"key"===(null===s||void 0===s?void 0:s.def.type)&&"category"===s.def.valueType?l:this.fixNumericExtent(uy(l),i);if(a instanceof fb||a instanceof mb)return this.fixNumericExtent(u,a);var c=[u[0]>0?0:u[0],u[1]<0?0:u[1]];return this.fixNumericExtent(c,a)},e.prototype.createNodeData=function(){var t;return nC(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D,A,M,R,_,k,F,I,L,N,G,j,B,V,H,z,U,W=this;return oC(this,(function(K){if(e=this,r=e.axes,n=e.data,o=e.processedData,i=void 0===o?{}:o,a=i.data,s=e.dataModel,l=e.ctx.callbackCache,u=r[oc.X],c=r[oc.Y],!u||!c||!n||!s)return[2,[]];for(p=this,d=p.yKey,h=void 0===d?"":d,f=p.xKey,v=void 0===f?"":f,y=p.marker,g=p.label,m=p.fill,b=p.stroke,C=p.id,S=u.scale,w=c.scale,x=w instanceof ov,O=(null!==(t=S.bandwidth)&&void 0!==t?t:0)/2,E=s.resolveProcessedDataIndexById(this,"yValue-start").index,T=s.resolveProcessedDataIndexById(this,"yValue-end").index,P=s.resolveProcessedDataIndexById(this,"yValue-raw").index,D=s.resolveProcessedDataIndexById(this,"yValue-previous-start").index,A=s.resolveProcessedDataIndexById(this,"yValue-previous-end").index,M=s.resolveProcessedDataIndexById(this,"yValue-cumulative").index,R=function(t,e,r){var n=S.convert(t)+O,o=w.convert(e,{strict:!1}),i=w.convert(r,{strict:!1});return[{x:n,y:i,size:y.size},{x:n,y:o,size:y.size}]},_=function(t,e,r){var n,o=W.normalizedTo&&isFinite(W.normalizedTo),i=o&&x&&ru(r),a=!o&&!isNaN(r)||i;a&&(n=e);var s=S.convert(t)+O,l=w.convert(n,{strict:!1});return{x:s,y:l,size:y.size}},k=[],F=[],I={itemId:h,points:[],yValues:[]},L={itemId:h,points:[]},N={itemId:h,fillSelectionData:L,labelData:k,nodeData:F,strokeSelectionData:I},G=L.points,j=[],B=I.points,V=I.yValues,H=-1,null===a||void 0===a||a.forEach((function(t){var e=iC(t.keys,1),r=e[0],n=t.datum,o=t.values;o.forEach((function(t,e){var o;H++;var i=n[e],a=t[P],s=t[E],u=t[T],c=t[D],p=t[A],d=t[M],f=null!=a,S=_(r,+d,a);if(f&&y&&F.push({index:H,series:W,itemId:h,datum:i,nodeMidPoint:{x:S.x,y:S.y},cumulativeValue:u,yValue:a,xValue:r,yKey:h,xKey:v,point:S,fill:m,stroke:b}),f&&g){var w=void 0;w=g.formatter?null!==(o=l.call(g.formatter,{value:a,seriesId:C}))&&void 0!==o?o:"":ou(a)?Number(a).toFixed(2):String(a),k.push({index:H,itemId:h,point:S,label:w?{text:w,fontStyle:g.fontStyle,fontWeight:g.fontWeight,fontSize:g.fontSize,fontFamily:g.fontFamily,textAlign:"center",textBaseline:"bottom",fill:g.color}:void 0})}var x=[z,r],O=[c,s],I=[p,u];if(x.some((function(t){return void 0==t})))z=r;else{O.some((function(t){return void 0==t}))&&(O[0]=0,O[1]=0),I.some((function(t){return void 0==t}))&&(I[0]=0,I[1]=0);var L=R(z,+O[0],+I[0]);G.push(L[0]),j.push(L[1]);var N=R(r,+O[1],+I[1]);G.push(N[0]),j.push(N[1]),B.push({x:NaN,y:NaN}),V.push(void 0),null!=p&&(B.push(L[0]),V.push(p)),void 0!=u&&(B.push(N[0]),V.push(u)),z=r}}))})),U=j.length-1;U>=0;U--)G.push(j[U]);return[2,[N]]}))}))},e.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},e.prototype.markerFactory=function(){var t=this.marker.shape,e=Zh(t);return new e},e.prototype.updateMarkerSelection=function(t){return nC(this,void 0,void 0,(function(){var e,r,n,o;return oC(this,(function(i){return e=t.nodeData,r=t.markerSelection,n=this.marker.enabled,o=n&&e?e:[],this.marker.isDirty()&&r.clear(),[2,r.update(o,(function(t){t.tag=$b.Marker}))]}))}))},e.prototype.updateMarkerNodes=function(t){var e;return nC(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T;return oC(this,(function(P){return r=t.markerSelection,n=t.isHighlight,o=this,i=o.id,a=o.xKey,s=void 0===a?"":a,l=o.marker,u=o.fill,c=o.stroke,p=o.fillOpacity,d=o.marker.fillOpacity,h=void 0===d?p:d,f=o.strokeOpacity,v=o.highlightStyle.item,y=v.fill,g=v.fillOpacity,m=void 0===g?h:g,b=v.stroke,C=v.strokeWidth,S=o.visible,w=o.ctx.callbackCache,x=l.size,O=l.formatter,E=null!==(e=l.strokeWidth)&&void 0!==e?e:this.strokeWidth,T="function"===typeof l.shape,r.each((function(t,e){var r,o,a,p,d,v,g,P,D=n&&void 0!==y?y:null!==(r=l.fill)&&void 0!==r?r:u,A=n?m:h,M=n&&void 0!==b?b:null!==(o=l.stroke)&&void 0!==o?o:c,R=n&&void 0!==C?C:E,_=void 0;O&&(_=w.call(O,{datum:e.datum,xKey:s,yKey:e.yKey,fill:D,stroke:M,strokeWidth:R,size:x,highlighted:n,seriesId:i})),t.fill=null!==(a=null===_||void 0===_?void 0:_.fill)&&void 0!==a?a:D,t.stroke=null!==(p=null===_||void 0===_?void 0:_.stroke)&&void 0!==p?p:M,t.strokeWidth=null!==(d=null===_||void 0===_?void 0:_.strokeWidth)&&void 0!==d?d:R,t.fillOpacity=null!==A&&void 0!==A?A:1,t.strokeOpacity=null!==(g=null!==(v=l.strokeOpacity)&&void 0!==v?v:f)&&void 0!==g?g:1,t.size=null!==(P=null===_||void 0===_?void 0:_.size)&&void 0!==P?P:x,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&S&&!isNaN(e.point.x)&&!isNaN(e.point.y),T&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())})),n||this.marker.markClean(),[2]}))}))},e.prototype.updateLabelSelection=function(t){return nC(this,void 0,void 0,(function(){var e,r;return oC(this,(function(n){return e=t.labelData,r=t.labelSelection,[2,r.update(e,(function(t){t.tag=$b.Label}))]}))}))},e.prototype.updateLabelNodes=function(t){return nC(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l;return oC(this,(function(u){return e=t.labelSelection,r=this.label,n=r.enabled,o=r.fontStyle,i=r.fontWeight,a=r.fontSize,s=r.fontFamily,l=r.color,e.each((function(t,e){var r=e.point,u=e.label;u&&n?(t.fontStyle=o,t.fontWeight=i,t.fontSize=a,t.fontFamily=s,t.textAlign=u.textAlign,t.textBaseline=u.textBaseline,t.text=u.text,t.x=r.x,t.y=r.y-10,t.fill=l,t.visible=!0):t.visible=!1})),[2]}))}))},e.prototype.getNodeClickEvent=function(t,e){var r;return new zb(null!==(r=this.xKey)&&void 0!==r?r:"",e.yKey,t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r;return new Ub(null!==(r=this.xKey)&&void 0!==r?r:"",e.yKey,t,e,this)},e.prototype.getTooltipHtml=function(t){var e,r,n,o=this,i=o.xKey,a=o.id,s=o.axes,l=o.xName,u=o.yName,c=o.fill,p=o.stroke,d=o.tooltip,h=o.marker,f=o.dataModel,v=t.yKey,y=t.xValue,g=t.yValue,m=t.datum,b=s[oc.X],C=s[oc.Y];if(!i||!v||!(b&&C&&ou(g))||!f)return"";var S=f.resolveProcessedDataIndexById(this,"yValue-raw").index,w=h.size,x=h.formatter,O=h.strokeWidth,E=h.fill,T=h.stroke,P=b.formatDatum(y),D=C.formatDatum(g),A=null===(r=null===(e=this.processedData)||void 0===e?void 0:e.data[t.index])||void 0===r?void 0:r.values[0][S],M=Qb(u),R=Qb(P+": "+D),_=null!==O&&void 0!==O?O:this.strokeWidth,k=null!==E&&void 0!==E?E:c,F=null!==T&&void 0!==T?T:p,I=void 0;x&&(I=x({datum:m,xKey:i,yKey:v,fill:k,stroke:F,strokeWidth:_,size:w,highlighted:!1,seriesId:a}));var L=null!==(n=null===I||void 0===I?void 0:I.fill)&&void 0!==n?n:k,N={title:M,backgroundColor:L,content:R},G=d.renderer,j=d.format;if(j||G){var B={datum:m,xKey:i,xName:l,xValue:y,yKey:v,yValue:g,processedYValue:A,yName:u,color:L,title:M,seriesId:a};if(j)return Rc({content:Zb(j,B)},N);if(G)return Rc(G(B),N)}return Rc(N)},e.prototype.getLegendData=function(){var t,e,r,n,o=this,i=o.data,a=o.id,s=o.xKey,l=o.yKey,u=o.yName,c=o.marker,p=o.fill,d=o.stroke,h=o.fillOpacity,f=o.strokeOpacity,v=o.visible;return(null===i||void 0===i?void 0:i.length)&&s&&l?[{legendType:"category",id:a,itemId:l,seriesId:a,enabled:v,label:{text:null!==u&&void 0!==u?u:l},marker:{shape:c.shape,fill:null!==(t=c.fill)&&void 0!==t?t:p,stroke:null!==(e=c.stroke)&&void 0!==e?e:d,fillOpacity:null!==(r=c.fillOpacity)&&void 0!==r?r:h,strokeOpacity:null!==(n=c.strokeOpacity)&&void 0!==n?n:f}}]:[]},e.prototype.animateEmptyUpdateReady=function(t){var e=this,r=t.markerSelections,n=t.labelSelections,o=t.contextData,i=t.paths,a=t.seriesRect,s=this,l=s.stroke,u=s.fill,c=s.fillOpacity,p=s.lineDash,d=s.lineDashOffset,h=s.strokeOpacity,f=s.strokeWidth,v=s.shadow;o.forEach((function(t,o){var s,y,g,m,b,C=t.fillSelectionData,S=t.strokeSelectionData,w=t.itemId,x=iC(i[o],2),O=x[0],E=x[1],T=null!==(y=null===(s=e.ctx.animationManager)||void 0===s?void 0:s.defaultOptions.duration)&&void 0!==y?y:1e3,P=200,D={from:0,to:null!==(g=null===a||void 0===a?void 0:a.width)&&void 0!==g?g:0,duration:T},A=S.points,M=S.yValues;E.tag=$b.Stroke,E.fill=void 0,E.lineJoin=E.lineCap="round",E.pointerEvents=Xs.None,E.stroke=l,E.strokeWidth=e.getStrokeWidth(e.strokeWidth,{itemId:w}),E.strokeOpacity=h,E.lineDash=p,E.lineDashOffset=d,null===(m=e.ctx.animationManager)||void 0===m||m.animate(e.id+"_empty-update-ready_stroke_"+o,eC(eC({},D),{onUpdate:function(t){E.path.clear({trackChanges:!0});var e=!0;A.forEach((function(r,n){if(void 0===M[n]||isNaN(r.x)||isNaN(r.y))e=!0;else if(r.x<=t)e?(E.path.moveTo(r.x,r.y),e=!1):E.path.lineTo(r.x,r.y);else if(n>0&&void 0!==M[n]&&void 0!==M[n-1]&&A[n-1].x<=t){var o=A[n-1],i=r,a=t,s=o.y+(a-o.x)*(i.y-o.y)/(i.x-o.x);E.path.lineTo(a,s)}})),E.checkPathDirty()}}));var R=C.points,_=R.slice(0,R.length/2),k=R.slice(R.length/2);O.tag=$b.Fill,O.stroke=void 0,O.lineJoin="round",O.pointerEvents=Xs.None,O.fill=u,O.fillOpacity=c,O.strokeOpacity=h,O.strokeWidth=f,O.lineDash=p,O.lineDashOffset=d,O.fillShadow=v,null===(b=e.ctx.animationManager)||void 0===b||b.animate(e.id+"_empty-update-ready_fill_"+o,eC(eC({},D),{onUpdate:function(t){O.path.clear({trackChanges:!0});var e=0,r=0;_.forEach((function(n,o){if(n.x<=t)e=n.x,r=n.y,O.path.lineTo(n.x,n.y);else if(o>0&&_[o-1].x<t){var i=_[o-1],a=n;e=t,r=i.y+(e-i.x)*(a.y-i.y)/(a.x-i.x),O.path.lineTo(e,r)}})),k.forEach((function(r,n){var o=k.length-n-1;if(r.x<=t)O.path.lineTo(r.x,r.y);else if(o>0&&_[o-1].x<t){var i=r,a=k[n+1],s=i.y+(e-i.x)*(a.y-i.y)/(a.x-i.x);O.path.lineTo(e,s)}})),k.length>0&&O.path.lineTo(k[k.length-1].x,k[k.length-1].y),O.path.closePath(),O.checkPathDirty()}})),r[o].each((function(t,r){var n,o,i,s,l=(null===a||void 0===a?void 0:a.width)?r.point.x/a.width*T:0,u=e.animateFormatter(r),c=null!==(o=null===(n=r.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0;null===(i=e.ctx.animationManager)||void 0===i||i.animate(e.id+"_empty-update-ready_"+t.id,eC(eC({},D),{to:null!==(s=null===u||void 0===u?void 0:u.size)&&void 0!==s?s:c,delay:l,duration:P,onUpdate:function(e){t.size=e}}))})),n[o].each((function(t,r){var n,o=(null===a||void 0===a?void 0:a.width)?r.point.x/a.width*T:0;null===(n=e.ctx.animationManager)||void 0===n||n.animate(e.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:o,duration:P,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyUpdate=function(t){var e=this,r=t.contextData,n=t.paths,o=this,i=o.stroke,a=o.fill,s=o.fillOpacity,l=o.lineDash,u=o.lineDashOffset,c=o.strokeOpacity,p=o.strokeWidth,d=o.shadow;r.forEach((function(t,r){var o=t.strokeSelectionData,h=t.fillSelectionData,f=t.itemId,v=iC(n[r],2),y=v[0],g=v[1];g.stroke=i,g.strokeWidth=e.getStrokeWidth(e.strokeWidth,{itemId:f}),g.strokeOpacity=c,g.lineDash=l,g.lineDashOffset=u,g.path.clear({trackChanges:!0});var m=!0;o.points.forEach((function(t,e){void 0===o.yValues[e]||isNaN(t.x)||isNaN(t.y)?m=!0:m?(g.path.moveTo(t.x,t.y),m=!1):g.path.lineTo(t.x,t.y)})),g.checkPathDirty(),y.fill=a,y.fillOpacity=s,y.strokeOpacity=c,y.strokeWidth=p,y.lineDash=l,y.lineDashOffset=u,y.fillShadow=d,y.path.clear({trackChanges:!0}),h.points.forEach((function(t){y.path.lineTo(t.x,t.y)})),y.path.closePath(),y.checkPathDirty()}))},e.prototype.animateFormatter=function(t){var e,r,n,o=this,i=o.marker,a=o.fill,s=o.stroke,l=o.xKey,u=void 0===l?"":l,c=o.id,p=o.ctx.callbackCache,d=i.size,h=i.formatter,f=null!==(e=i.fill)&&void 0!==e?e:a,v=null!==(r=i.stroke)&&void 0!==r?r:s,y=null!==(n=i.strokeWidth)&&void 0!==n?n:this.strokeWidth,g=void 0;return h&&(g=p.call(h,{datum:t.datum,xKey:u,yKey:t.yKey,fill:f,stroke:v,strokeWidth:y,size:d,highlighted:!1,seriesId:c})),g},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.className="AreaSeries",e.type="area",rC([du(Fu)],e.prototype,"fill",void 0),rC([du(Fu)],e.prototype,"stroke",void 0),rC([du(Gu(0,1))],e.prototype,"fillOpacity",void 0),rC([du(Gu(0,1))],e.prototype,"strokeOpacity",void 0),rC([du(Qu)],e.prototype,"lineDash",void 0),rC([du(Gu(0))],e.prototype,"lineDashOffset",void 0),rC([du(Pu)],e.prototype,"xKey",void 0),rC([du(Pu)],e.prototype,"xName",void 0),rC([du(Pu)],e.prototype,"yKey",void 0),rC([du(Pu)],e.prototype,"yName",void 0),rC([du(ju(0))],e.prototype,"normalizedTo",void 0),rC([du(Gu(0))],e.prototype,"strokeWidth",void 0),e}(Kb),cC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pC=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},dC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.borderPath=new Oh,e.x=0,e.y=0,e.width=10,e.height=10,e.radius=0,e.crisp=!1,e.lastUpdatePathStrokeWidth=Nl.defaultStyles.strokeWidth,e.effectiveStrokeWidth=Nl.defaultStyles.strokeWidth,e.microPixelEffectOpacity=1,e}return cC(e,t),e.prototype.isDirtyPath=function(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))},e.prototype.updatePath=function(){var t,e,r,n=this,o=n.path,i=n.borderPath,a=n.crisp,s=this,l=s.x,u=s.y,c=s.width,p=s.height,d=s.strokeWidth,h=null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1,f=1/h,v=1;if(o.clear({trackChanges:!0}),i.clear({trackChanges:!0}),a&&(c<=f&&(v*=c/f),p<=f&&(v*=p/f),c=this.align(l,c),p=this.align(u,p),l=this.align(l),u=this.align(u)),d)if(c<f){var y=l+f/2;i.moveTo(y,u),i.lineTo(y,u+p),d=f,this.borderClipPath=void 0}else if(p<f){var g=u+f/2;i.moveTo(l,g),i.lineTo(l+c,g),d=f,this.borderClipPath=void 0}else if(d<c&&d<p){var m=d/2;l+=m,u+=m,c-=d,p-=d,this.borderClipPath=void 0,o.rect(l,u,c,p),i.rect(l,u,c,p)}else this.borderClipPath=null!==(r=this.borderClipPath)&&void 0!==r?r:new Oh,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(l,u,c,p),i.rect(l,u,c,p);else this.borderClipPath=void 0,o.rect(l,u,c,p);this.effectiveStrokeWidth=d,this.lastUpdatePathStrokeWidth=d,this.microPixelEffectOpacity=v},e.prototype.computeBBox=function(){var t=this,e=t.x,r=t.y,n=t.width,o=t.height;return new Ls(e,r,n,o)},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e),n=this.computeBBox();return n.containsPoint(r.x,r.y)},e.prototype.applyFillAlpha=function(t){var e=this,r=e.fillOpacity,n=e.microPixelEffectOpacity,o=e.opacity,i=t.globalAlpha;t.globalAlpha=i*o*r*n},e.prototype.renderStroke=function(t){var e=this,r=e.stroke,n=e.effectiveStrokeWidth,o=e.borderPath,i=e.borderClipPath,a=e.opacity,s=e.microPixelEffectOpacity,l=!!r&&!!n;if(l){var u=this,c=u.strokeOpacity,p=u.lineDash,d=u.lineDashOffset,h=u.lineCap,f=u.lineJoin;i&&(i.draw(t),t.clip()),o.draw(t);var v=t.globalAlpha;t.strokeStyle=r,t.globalAlpha=v*a*c*s,t.lineWidth=n,p&&t.setLineDash(p),d&&(t.lineDashOffset=d),h&&(t.lineCap=h),f&&(t.lineJoin=f),t.stroke(),t.globalAlpha=v}},e.className="Rect",pC([Ph()],e.prototype,"x",void 0),pC([Ph()],e.prototype,"y",void 0),pC([Ph()],e.prototype,"width",void 0),pC([Ph()],e.prototype,"height",void 0),pC([Ph()],e.prototype,"radius",void 0),pC([Ph()],e.prototype,"crisp",void 0),e}(Dh),hC=function(){return hC=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},hC.apply(this,arguments)},fC=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},vC=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a};function yC(t){var e,r=t.value,n=t.rect,o=t.placement,i=t.seriesId,a=t.padding,s=void 0===a?0:a,l=t.formatter,u=t.barAlongX,c=t.ctx.callbackCache;l&&(e=c.call(l,{value:ou(r)?r:void 0,seriesId:i})),void 0===e&&(e=ou(r)?r.toFixed(2):"");var p=n.x+n.width/2,d=n.y+n.height/2,h="center",f="middle",v=r>=0;switch(o){case"start":u?(p=v?n.x-s:n.x+n.width+s,h=v?"start":"end"):(d=v?n.y+n.height+s:n.y-s,f=v?"top":"bottom");break;case"outside":case"end":u?(p=v?n.x+n.width+s:n.x-s,h=v?"start":"end"):(d=v?n.y-s:n.y+n.height+s,f=v?"bottom":"top");break;case"inside":default:f="middle";break}return{text:e,textAlign:h,textBaseline:f,x:p,y:d}}function gC(t){var e=t.rect,r=t.config,n=r.crisp,o=void 0===n||n,i=r.fill,a=r.stroke,s=r.strokeWidth,l=r.fillOpacity,u=r.strokeOpacity,c=r.lineDash,p=r.lineDashOffset,d=r.fillShadow,h=r.visible,f=void 0===h||h;e.crisp=o,e.fill=i,e.stroke=a,e.strokeWidth=s,e.fillOpacity=l,e.strokeOpacity=u,e.lineDash=c,e.lineDashOffset=p,e.fillShadow=d,e.visible=f}function mC(t){var e,r,n,o,i,a,s,l=t.datum,u=t.isHighlighted,c=t.style,p=t.highlightStyle,d=t.formatter,h=t.seriesId,f=t.stackGroup,v=t.ctx.callbackCache,y=fC(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]),g=u&&null!==(e=p.fill)&&void 0!==e?e:c.fill,m=u&&null!==(r=p.stroke)&&void 0!==r?r:c.stroke,b=u&&null!==(n=p.strokeWidth)&&void 0!==n?n:c.strokeWidth,C=u&&null!==(o=p.fillOpacity)&&void 0!==o?o:c.fillOpacity,S=c.strokeOpacity,w=c.fillShadow,x=c.lineDash,O=c.lineDashOffset,E=void 0;return d&&(E=v.call(d,hC({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:g,stroke:m,strokeWidth:b,highlighted:u,seriesId:h,stackGroup:f},y))),{fill:null!==(i=null===E||void 0===E?void 0:E.fill)&&void 0!==i?i:g,stroke:null!==(a=null===E||void 0===E?void 0:E.stroke)&&void 0!==a?a:m,strokeWidth:null!==(s=null===E||void 0===E?void 0:E.strokeWidth)&&void 0!==s?s:b,fillOpacity:C,strokeOpacity:S,lineDash:x,lineDashOffset:O,fillShadow:w}}function bC(t){void 0===t&&(t=[]);var e=vC(t,2),r=e[0],n=e[1],o=0!==r||1!==n,i=!o;return i}function CC(t){var e=t.labelNode,r=t.labelDatum,n=t.config,o=t.visible;if(r&&n&&n.enabled){var i=r.x,a=r.y,s=r.text,l=r.textAlign,u=r.textBaseline,c=n.fontStyle,p=n.fontWeight,d=n.fontSize,h=n.fontFamily,f=n.color;e.fontStyle=c,e.fontWeight=p,e.fontSize=d,e.fontFamily=h,e.textAlign=l,e.textBaseline=u,e.text=s,e.x=i,e.y=a,e.fill=f,e.visible=o}else e.visible=!1}var SC,wC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xC=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},OC=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},EC=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},TC=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},PC=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},DC=["inside","outside"],AC=function(t,e){return fu(t,e,(function(t){return DC.includes(t)}))};(function(t){t[t["Bar"]=0]="Bar",t[t["Label"]=1]="Label"})(SC||(SC={}));var MC,RC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e.placement="inside",e}return wC(e,t),xC([du(xu)],e.prototype,"formatter",void 0),xC([du(AC)],e.prototype,"placement",void 0),e}(dy),_C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return wC(e,t),xC([du(xu)],e.prototype,"renderer",void 0),e}(Ap),kC=function(t){function e(e){var r=t.call(this,{moduleCtx:e,pickModes:[sp.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0})||this;return r.label=new RC,r.tooltip=new _C,r.fill="#c16068",r.stroke="#874349",r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.formatter=void 0,r.xKey=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0,r.groupScale=new Zf,r.stackGroup=void 0,r.strokeWidth=1,r.shadow=void 0,r.smallestDataInterval=void 0,r.datumSelectionGarbageCollection=!1,r.label.enabled=!1,r}return wC(e,t),e.prototype.resolveKeyDirection=function(t){return this.getBarDirection()===oc.X?t===oc.X?oc.Y:oc.X:t},e.prototype.processData=function(t){var e,r,n,o,i;return OC(this,void 0,void 0,(function(){var a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E;return EC(this,(function(T){switch(T.label){case 0:return a=this,s=a.xKey,l=a.yKey,u=a.normalizedTo,c=a.seriesGrouping,p=void 0===c?{}:c,d=p.groupIndex,h=void 0===d?this.id:d,f=a.data,v=void 0===f?[]:f,y=Math.abs(null!==u&&void 0!==u?u:NaN),g=(null===(e=this.getCategoryAxis())||void 0===e?void 0:e.scale)instanceof ov,m=(null===(r=this.getValueAxis())||void 0===r?void 0:r.scale)instanceof ov,b="bar-stack-"+h+"-yValues",C=b+"-trailing",S=y&&isFinite(y)?y:void 0,w=[],S&&w.push(Jc(this,[b,C],S,"range")),!(null===(n=this.ctx.animationManager)||void 0===n?void 0:n.skipAnimations)&&this.processedData&&w.push(np(this.processedData)),[4,t.request(this.id,v,{props:PC(PC(PC(PC([gp(this,s,g,{id:"xValue"}),mp(this,l,m,{id:"yValue-raw",invalidValue:null})],TC(Sp(this,l,m,"normal","current",{id:"yValue-end",invalidValue:null,groupId:b}))),TC(Sp(this,l,m,"trailing","current",{id:"yValue-start",invalidValue:null,groupId:C}))),TC(g?[Yc]:[])),TC(w)),groupByKeys:!0,dataVisible:this.visible})];case 1:return x=T.sent(),O=x.dataModel,E=x.processedData,this.dataModel=O,this.processedData=E,this.smallestDataInterval={x:null!==(i=null===(o=E.reduced)||void 0===o?void 0:o[Yc.property])&&void 0!==i?i:1/0,y:1/0},this.animationState.transition("updateData"),[2]}}))}))},e.prototype.getDomain=function(t){var e,r=this,n=r.processedData,o=r.dataModel;if(!n||!o)return[];var i=n,a=i.reduced,s=void 0===a?{}:a,l=Yc.property,u=s[l],c=this.getCategoryAxis(),p=this.getValueAxis(),d=o.resolveProcessedDataDefById(this,"xValue"),h=o.getDomain(this,"xValue","key",n),f=o.getDomain(this,"yValue-end","value",n);if(t===this.getCategoryDirection()){if("key"===(null===d||void 0===d?void 0:d.def.type)&&"category"===(null===d||void 0===d?void 0:d.def.valueType))return h;var v=isFinite(u)?u:0,y=null!==(e=uy(h))&&void 0!==e?e:[NaN,NaN];return t===oc.Y?this.fixNumericExtent([y[0]+-v,y[1]],c):this.fixNumericExtent([y[0],y[1]+v],c)}if(this.getValueAxis()instanceof fb)return this.fixNumericExtent(f,p);var g=[f[0]>0?0:f[0],f[1]<0?0:f[1]];return this.fixNumericExtent(g,p)},e.prototype.getNodeClickEvent=function(t,e){var r;return new zb(null!==(r=this.xKey)&&void 0!==r?r:"",e.yKey,t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r;return new Ub(null!==(r=this.xKey)&&void 0!==r?r:"",e.yKey,t,e,this)},e.prototype.getCategoryAxis=function(){var t=this.getCategoryDirection();return this.axes[t]},e.prototype.getValueAxis=function(){var t=this.getBarDirection();return this.axes[t]},e.prototype.calculateStep=function(t){var e,r=this.smallestDataInterval,n=this.getCategoryAxis();if(n){var o=n.dataDomain[1]-n.dataDomain[0],i=o/(null!==(e=null===r||void 0===r?void 0:r.x)&&void 0!==e?e:1)+1,a=Math.floor(t),s=Math.min(i,a),l=t/Math.max(1,s);return l}},e.prototype.createNodeData=function(){return OC(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D,A,M,R,_,k,F,I=this;return EC(this,(function(L){if(t=this,e=t.visible,r=t.dataModel,n=this.getCategoryAxis(),o=this.getValueAxis(),!(r&&e&&n&&o))return[2,[]];for(i=n.scale,a=o.scale,s=this,l=s.groupScale,u=s.yKey,c=void 0===u?"":u,p=s.xKey,d=void 0===p?"":p,h=s.fill,f=s.stroke,v=s.strokeWidth,y=s.label,g=s.id,m=s.processedData,b=s.ctx,C=s.ctx.seriesStateManager,S=i.bandwidth,i instanceof ov&&(w=Math.max(n.range[0],n.range[1]),x=this.calculateStep(w),S=x),O=[],E=C.getVisiblePeerGroupIndex(this),T=E.index,P=E.visibleGroupCount,D=0;D<P;D++)O.push(String(D));return l.domain=O,l.range=[0,null!==S&&void 0!==S?S:0],l.padding=n instanceof hm?n.groupPaddingInner:n instanceof _m?.1:0,0===l.padding?l.round=!1:l.round=!0,A=l.bandwidth>=1?l.bandwidth:l.rawBandwidth,M=r.resolveProcessedDataIndexById(this,"xValue","key").index,R=r.resolveProcessedDataIndexById(this,"yValue-raw").index,_=r.resolveProcessedDataIndexById(this,"yValue-start").index,k=r.resolveProcessedDataIndexById(this,"yValue-end").index,F={itemId:c,nodeData:[],labelData:[]},null===m||void 0===m||m.data.forEach((function(t,e){var r=t.keys,o=t.datum,s=t.values,u=r[M],p=i.convert(u),m=+s[0][k],C=+s[0][_],S=s[0][R],w=p+l.convert(String(T));if(n.inRange(w,A)&&!isNaN(m)){var x=a.convert(m,{strict:!1}),O=a.convert(C,{strict:!1}),E=I.getBarDirection()===oc.X,P={x:E?Math.min(x,O):w,y:E?w:Math.min(x,O),width:E?Math.abs(O-x):A,height:E?A:Math.abs(O-x)},D={x:P.x+P.width/2,y:P.y+P.height/2},L=y.fontStyle,N=y.fontWeight,G=y.fontSize,j=y.fontFamily,B=y.color,V=y.formatter,H=y.placement,z=yC({value:S,rect:P,formatter:V,placement:H,seriesId:g,barAlongX:E,ctx:b}),U=z.text,W=z.textAlign,K=z.textBaseline,X=z.x,Y=z.y,q={index:e,series:I,itemId:c,datum:o[0],cumulativeValue:C+m,xValue:u,yValue:S,yKey:c,xKey:d,x:P.x,y:P.y,width:P.width,height:P.height,nodeMidPoint:D,fill:h,stroke:f,strokeWidth:v,label:U?{text:U,fontStyle:L,fontWeight:N,fontSize:G,fontFamily:j,textAlign:W,textBaseline:K,fill:B,x:X,y:Y}:void 0};F.nodeData.push(q),F.labelData.push(q)}})),[2,[F]]}))}))},e.prototype.nodeFactory=function(){return new dC},e.prototype.updateDatumSelection=function(t){return OC(this,void 0,void 0,(function(){var e,r,n;return EC(this,(function(o){return e=t.nodeData,r=t.datumSelection,n=function(t){return t.xValue},[2,r.update(e,(function(t){return t.tag=SC.Bar}),n)]}))}))},e.prototype.updateDatumNodes=function(t){return OC(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b=this;return EC(this,(function(C){return e=t.datumSelection,r=t.isHighlight,n=this,o=n.fill,i=n.stroke,a=n.fillOpacity,s=n.strokeOpacity,l=n.lineDash,u=n.lineDashOffset,c=n.shadow,p=n.formatter,d=n.id,h=n.highlightStyle.item,f=n.ctx,v=n.stackGroup,y=this.axes[oc.X],g=bC(null===y||void 0===y?void 0:y.visibleRange),m=this.getCategoryDirection()===oc.X,e.each((function(t,e){var n={fill:o,stroke:i,fillOpacity:a,strokeOpacity:s,lineDash:l,lineDashOffset:u,fillShadow:c,strokeWidth:b.getStrokeWidth(b.strokeWidth,e)},y=m?e.width>0:e.height>0,C=mC({datum:e,isHighlighted:r,style:n,highlightStyle:h,formatter:p,seriesId:d,stackGroup:v,ctx:f});C.crisp=g,C.visible=y,gC({rect:t,config:C})})),[2]}))}))},e.prototype.updateLabelSelection=function(t){return OC(this,void 0,void 0,(function(){var e,r,n,o;return EC(this,(function(i){return e=t.labelData,r=t.labelSelection,n=this.label.enabled,o=n?e:[],[2,r.update(o,(function(t){t.tag=SC.Label,t.pointerEvents=Xs.None}))]}))}))},e.prototype.updateLabelNodes=function(t){return OC(this,void 0,void 0,(function(){var e,r=this;return EC(this,(function(n){return e=t.labelSelection,e.each((function(t,e){var n=e.label;CC({labelNode:t,labelDatum:n,config:r.label,visible:!0})})),[2]}))}))},e.prototype.getTooltipHtml=function(t){var e,r=this,n=r.xKey,o=r.yKey,i=r.processedData,a=r.ctx.callbackCache,s=this.getCategoryAxis(),l=this.getValueAxis(),u=t.xValue,c=t.yValue,p=t.datum;if(!i||!n||!o||!s||!l)return"";var d=this,h=d.xName,f=d.yName,v=d.fill,y=d.stroke,g=d.tooltip,m=d.formatter,b=d.id,C=d.stackGroup,S=g.renderer,w=this.getStrokeWidth(this.strokeWidth),x=Qb(s.formatDatum(u)),O=Qb(l.formatDatum(c)),E=Qb(f),T=x+": "+O,P=void 0;m&&(P=a.call(m,{datum:p,fill:v,stroke:y,strokeWidth:w,highlighted:!1,xKey:n,yKey:o,seriesId:b,stackGroup:C}));var D=null!==(e=null===P||void 0===P?void 0:P.fill)&&void 0!==e?e:v,A={title:E,backgroundColor:D,content:T};return S?Rc(S({datum:p,xKey:n,xValue:u,xName:h,yKey:o,yValue:c,yName:f,color:D,title:E,seriesId:b,stackGroup:C}),A):Rc(A)},e.prototype.getLegendData=function(){var t,e=this,r=e.id,n=e.data,o=e.xKey,i=e.yKey,a=e.yName,s=e.legendItemName,l=e.fill,u=e.stroke,c=e.fillOpacity,p=e.strokeOpacity,d=e.visible,h=e.showInLegend;if(!h||!(null===n||void 0===n?void 0:n.length)||!o||!i)return[];var f=[];return f.push({legendType:"category",id:r,itemId:i,seriesId:r,enabled:d,label:{text:null!==(t=null!==s&&void 0!==s?s:a)&&void 0!==t?t:i},legendItemName:s,marker:{fill:l,stroke:u,fillOpacity:c,strokeOpacity:p}}),f},e.prototype.animateEmptyUpdateReady=function(t){var e,r,n=this,o=t.datumSelections,i=t.labelSelections,a=null!==(r=null===(e=this.ctx.animationManager)||void 0===e?void 0:e.defaultOptions.duration)&&void 0!==r?r:1e3,s=200,l=this.getDirectionStartingValues(o),u=l.startingX,c=l.startingY;o.forEach((function(t){t.each((function(t,e){var r,o=u,i=0,s=e.y,l=e.height;n.getBarDirection()===oc.Y&&(o=e.x,i=e.width,s=c,l=0);var p=[{from:o,to:e.x},{from:i,to:e.width},{from:s,to:e.y},{from:l,to:e.height}];null===(r=n.ctx.animationManager)||void 0===r||r.animateMany(n.id+"_empty-update-ready_"+t.id,p,{duration:a,ease:Cd,onUpdate:function(e){var r=TC(e,4),n=r[0],o=r[1],i=r[2],a=r[3];t.x=n,t.width=o,t.y=i,t.height=a}})}))})),i.forEach((function(t){t.each((function(t){var e;null===(e=n.ctx.animationManager)||void 0===e||e.animate(n.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:a,duration:s,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyHighlight=function(t){this.resetSelectionRects(t)},e.prototype.animateReadyResize=function(t){var e,r=this,n=t.datumSelections;null===(e=this.ctx.animationManager)||void 0===e||e.reset(),n.forEach((function(t){r.resetSelectionRects(t)}))},e.prototype.animateWaitingUpdateReady=function(t){var e,r,n,o,i,a=this,s=t.datumSelections,l=t.labelSelections,u=this.processedData,c=null===(e=null===u||void 0===u?void 0:u.reduced)||void 0===e?void 0:e.diff;if(null===c||void 0===c?void 0:c.changed){var p=null!==(n=null===(r=this.ctx.animationManager)||void 0===r?void 0:r.defaultOptions.duration)&&void 0!==n?n:1e3,d=200,h=p;(c.added.length>0||c.removed.length>0)&&(h=Math.floor(p/2));var f=this.getDirectionStartingValues(s),v=f.startingX,y=f.startingY,g=null===(i=null===(o=this.processedData)||void 0===o?void 0:o.defs.keys)||void 0===i?void 0:i[0],m={};c.added.forEach((function(t){m[t[0]]=!0}));var b={};c.removed.forEach((function(t){b[t[0]]=!0}));var C=this.id+"_"+Math.random(),S=this.id+"_"+Math.random();s.forEach((function(t){t.each((function(e,r){var n,o=[{from:e.x,to:r.x},{from:e.width,to:r.width},{from:e.y,to:r.y},{from:e.height,to:r.height}],i=c.removed.length>0?h:0,s=h,l=!1,u=g?r.xValue:"",p=v,d=0,f=r.y,S=r.height;a.getBarDirection()===oc.Y&&(p=r.x,d=r.width,f=y,S=0);var w=void 0!==u&&void 0!==m[u],x=void 0!==u&&void 0!==b[u];w?(o=[{from:p,to:r.x},{from:d,to:r.width},{from:f,to:r.y},{from:S,to:r.height}],s=h):x&&(o=[{from:r.x,to:p},{from:r.width,to:d},{from:r.y,to:f},{from:r.height,to:S}],i=0,s=h,l=!0),null===(n=a.ctx.animationManager)||void 0===n||n.animateManyWithThrottle(a.id+"_waiting-update-ready_"+e.id,o,{delay:i,duration:s,ease:Cd,throttleId:a.id+"_rects",throttleGroup:C,onUpdate:function(t){var r=TC(t,4),n=r[0],o=r[1],i=r[2],a=r[3];e.x=n,e.width=o,e.y=i,e.height=a},onComplete:function(){l&&t.cleanup()}})}))})),l.forEach((function(t){t.each((function(t){var e;t.opacity=0,null===(e=a.ctx.animationManager)||void 0===e||e.animateWithThrottle(a.id+"_waiting-update-ready_"+t.id,{from:0,to:1,delay:p,duration:d,throttleId:a.id+"_labels",throttleGroup:S,onUpdate:function(e){t.opacity=e}})}))}))}else s.forEach((function(t){a.resetSelectionRects(t)}))},e.prototype.resetSelectionRects=function(t){t.each((function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})),t.cleanup()},e.prototype.getDirectionStartingValues=function(t){var e=this.getBarDirection()===oc.Y,r=this.axes[oc.X],n=this.axes[oc.Y],o=(null===r||void 0===r?void 0:r.scale)instanceof ov,i=(null===n||void 0===n?void 0:n.scale)instanceof ov,a=1/0,s=0;return n&&e&&(i?s=n.scale.convert(0):t.forEach((function(t){return t.each((function(t,e){e.yValue>=0&&(s=Math.max(s,e.height+e.y))}))}))),r&&!e&&(o?a=r.scale.convert(0):t.forEach((function(t){return t.each((function(t,e){e.yValue>=0&&(a=Math.min(a,e.x))}))}))),{startingX:a,startingY:s}},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.prototype.getBandScalePadding=function(){return{inner:.2,outer:.3}},e.prototype.getBarDirection=function(){return oc.X},e.prototype.getCategoryDirection=function(){return oc.Y},e.className="BarSeries",e.type="bar",xC([du(Iu)],e.prototype,"fill",void 0),xC([du(Iu)],e.prototype,"stroke",void 0),xC([du(Gu(0,1))],e.prototype,"fillOpacity",void 0),xC([du(Gu(0,1))],e.prototype,"strokeOpacity",void 0),xC([du(Qu)],e.prototype,"lineDash",void 0),xC([du(Gu(0))],e.prototype,"lineDashOffset",void 0),xC([du(xu)],e.prototype,"formatter",void 0),xC([du(Pu)],e.prototype,"xKey",void 0),xC([du(Pu)],e.prototype,"xName",void 0),xC([du(Pu)],e.prototype,"yKey",void 0),xC([du(Pu)],e.prototype,"yName",void 0),xC([du(Pu)],e.prototype,"stackGroup",void 0),xC([du(ju())],e.prototype,"normalizedTo",void 0),xC([du(Gu(0))],e.prototype,"strokeWidth",void 0),e}(Kb),FC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wC(e,t),e.prototype.getBarDirection=function(){return oc.Y},e.prototype.getCategoryDirection=function(){return oc.X},e.type="column",e.className="ColumnSeries",e}(kC),IC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LC=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},NC=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},GC=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},jC=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},BC=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},VC=["count","sum","mean"],HC=hu((function(t){return VC.includes(t)}),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");(function(t){t[t["Bin"]=0]="Bin",t[t["Label"]=1]="Label"})(MC||(MC={}));var zC,UC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return IC(e,t),LC([du(xu)],e.prototype,"formatter",void 0),e}(dy),WC=10,KC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return IC(e,t),LC([du(xu)],e.prototype,"renderer",void 0),e}(Ap),XC=function(t){function e(e){var r=t.call(this,{moduleCtx:e,pickModes:[sp.EXACT_SHAPE_MATCH]})||this;return r.label=new UC,r.tooltip=new KC,r.fill=void 0,r.stroke=void 0,r.fillOpacity=1,r.strokeOpacity=1,r.lineDash=[0],r.lineDashOffset=0,r.xKey=void 0,r.areaPlot=!1,r.bins=void 0,r.aggregation="count",r.binCount=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0,r.strokeWidth=1,r.shadow=void 0,r.calculatedBins=[],r.datumSelectionGarbageCollection=!1,r.label.enabled=!1,r}return IC(e,t),e.prototype.deriveBins=function(t){if(void 0===this.binCount){var e=av(t[0],t[1],WC),r=lv(t[0],t[1],WC),n=e[0],o=function(t){return[t,t+r]};return BC([[n-r,n]],jC(e.map(o)))}return this.calculateNiceBins(t,this.binCount)},e.prototype.calculateNiceBins=function(t,e){var r=Math.floor(t[0]),n=t[1],o=e||1,i=this.calculateNiceStart(r,n,o),a=i.start,s=i.binSize;return this.getBins(a,n,s,o)},e.prototype.getBins=function(t,e,r,n){for(var o=[],i=0;i<n;i++){var a=Math.round(10*(t+i*r))/10,s=Math.round(10*(t+(i+1)*r))/10;i===n-1&&(s=Math.max(s,e)),o[i]=[a,s]}return o},e.prototype.calculateNiceStart=function(t,e,r){var n=Math.abs(e-t)/r,o=Math.floor(Math.log10(n)),i=Math.pow(10,o),a=Math.floor(t/i)*i;return{start:a,binSize:n}},e.prototype.processData=function(t){var e;return NC(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f=this;return GC(this,(function(v){switch(v.label){case 0:return r=this,n=r.xKey,o=r.yKey,i=r.data,a=r.areaPlot,s=r.aggregation,l=[gp(this,n,!0),qc],o?(u=jc(this,"groupCount"),"count"===s||("sum"===s?u=Gc(this,"groupAgg"):"mean"===s&&(u=Bc(this,"groupAgg"))),a&&(u=Vc(this,"groupAgg",u)),l.push(mp(this,o,!0,{invalidValue:void 0}),u)):(u=jc(this,"groupAgg"),a&&(u=Vc(this,"groupAgg",u)),l.push(u)),c=function(t){var e,r=Cc(t.domain.keys[0]);if(0===r.length)return t.domain.groups=[],function(){return[]};var n=null!==(e=f.bins)&&void 0!==e?e:f.deriveBins(r),o=n.length;return f.calculatedBins=BC([],jC(n)),function(t){for(var e=t.keys[0],r=0;r<o;r++){var i=n[r];if(e>=i[0]&&e<i[1])return i;if(r===o-1&&e<=i[1])return i}return[]}},!(null===(e=this.ctx.animationManager)||void 0===e?void 0:e.skipAnimations)&&this.processedData&&l.push(np(this.processedData,!1)),[4,t.request(this.id,null!==i&&void 0!==i?i:[],{props:l,dataVisible:this.visible,groupByFn:c})];case 1:return p=v.sent(),d=p.dataModel,h=p.processedData,this.dataModel=d,this.processedData=h,this.animationState.transition("updateData"),[2]}}))}))},e.prototype.getDomain=function(t){var e,r,n,o,i=this,a=i.processedData,s=i.dataModel;if(!a||!s)return[];var l=s.getDomain(this,"groupAgg","aggregate",a),u=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],c=null===(r=this.calculatedBins)||void 0===r?void 0:r[(null!==(o=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==o?o:0)-1][1];return t===oc.X?Cc([u,c]):Cc(l)},e.prototype.getNodeClickEvent=function(t,e){var r,n;return new zb(null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r,n;return new Ub(null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.createNodeData=function(){var t;return NC(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D=this;return GC(this,(function(A){return e=this,r=e.axes,n=e.processedData,o=e.ctx.callbackCache,i=r[oc.X],a=r[oc.Y],this.visible&&i&&a&&n&&"grouped"===n.type?(s=i.scale,l=a.scale,u=this,c=u.fill,p=u.stroke,d=u.strokeWidth,h=u.id,f=u.yKey,v=void 0===f?"":f,y=u.xKey,g=void 0===y?"":y,m=[],b=function(t){return String(t.value)},C=this.label,S=C.formatter,w=void 0===S?b:S,x=C.fontStyle,O=C.fontWeight,E=C.fontSize,T=C.fontFamily,P=C.color,n.data.forEach((function(t){var e,r=t.aggValues,n=void 0===r?[[0,0]]:r,i=jC(n,1),a=jC(i[0],2),u=a[0],f=a[1],y=t.datum,b=t.datum.length,C=t.keys,S=jC(t.keys,2),A=S[0],M=S[1],R=s.convert(A),_=s.convert(M),k=u+f,F=l.convert(0),I=l.convert(k),L=_-R,N=Math.abs(I-F),G=0!==k?{text:null!==(e=o.call(w,{value:k,seriesId:h}))&&void 0!==e?e:String(k),fontStyle:x,fontWeight:O,fontSize:E,fontFamily:T,fill:P,x:R+L/2,y:I+N/2}:void 0,j={x:R+L/2,y:I+N/2};m.push({series:D,datum:y,aggregatedValue:k,frequency:b,domain:C,yKey:v,xKey:g,x:R,y:I,xValue:R,yValue:I,width:L,height:N,nodeMidPoint:j,fill:c,stroke:p,strokeWidth:d,label:G})})),[2,[{itemId:null!==(t=this.yKey)&&void 0!==t?t:this.id,nodeData:m,labelData:m}]]):[2,[]]}))}))},e.prototype.nodeFactory=function(){return new dC},e.prototype.updateDatumSelection=function(t){return NC(this,void 0,void 0,(function(){var e,r;return GC(this,(function(n){return e=t.nodeData,r=t.datumSelection,[2,r.update(e,(function(t){t.tag=MC.Bin,t.crisp=!0}),(function(t){return t.domain.join("_")}))]}))}))},e.prototype.updateDatumNodes=function(t){return NC(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h=this;return GC(this,(function(f){return e=t.datumSelection,r=t.isHighlight,n=this,o=n.fillOpacity,i=n.strokeOpacity,a=n.shadow,s=n.highlightStyle.item,l=s.fill,u=s.fillOpacity,c=void 0===u?o:u,p=s.stroke,d=s.strokeWidth,e.each((function(t,e,n){var s,u,f=r&&void 0!==d?d:e.strokeWidth,v=r?c:o;t.fill=null!==(s=r?l:void 0)&&void 0!==s?s:e.fill,t.stroke=null!==(u=r?p:void 0)&&void 0!==u?u:e.stroke,t.fillOpacity=v,t.strokeOpacity=i,t.strokeWidth=f,t.lineDash=h.lineDash,t.lineDashOffset=h.lineDashOffset,t.fillShadow=a,t.zIndex=r?Rp.highlightedZIndex:n,t.visible=e.height>0})),[2]}))}))},e.prototype.updateLabelSelection=function(t){return NC(this,void 0,void 0,(function(){var e,r;return GC(this,(function(n){return e=t.labelData,r=t.labelSelection,[2,r.update(e,(function(t){t.tag=MC.Label,t.pointerEvents=Xs.None,t.textAlign="center",t.textBaseline="middle"}))]}))}))},e.prototype.updateLabelNodes=function(t){return NC(this,void 0,void 0,(function(){var e,r;return GC(this,(function(n){return e=t.labelSelection,r=this.label.enabled,e.each((function(t,e){var n=e.label;n&&r?(t.text=n.text,t.x=n.x,t.y=n.y,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.fill,t.visible=!0):t.visible=!1})),[2]}))}))},e.prototype.getTooltipHtml=function(t){var e=this,r=e.xKey,n=e.yKey,o=void 0===n?"":n,i=e.axes,a=i[oc.X],s=i[oc.Y];if(!r||!a||!s)return"";var l=this,u=l.xName,c=l.yName,p=l.fill,d=l.tooltip,h=l.aggregation,f=l.id,v=d.renderer,y=t.aggregatedValue,g=t.frequency,m=t.domain,b=jC(t.domain,2),C=b[0],S=b[1],w=Qb(null!==u&&void 0!==u?u:r)+": "+a.formatDatum(C)+" - "+a.formatDatum(S),x=o?"<b>"+Qb(null!==c&&void 0!==c?c:o)+" ("+h+")</b>: "+s.formatDatum(y)+"<br>":"";x+="<b>Frequency</b>: "+g;var O={title:w,backgroundColor:p,content:x};return v?Rc(v({datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:r,xValue:m,xName:u,yKey:o,yValue:y,yName:c,color:p,title:w,seriesId:f}),O):Rc(O)},e.prototype.getLegendData=function(){var t,e=this,r=e.id,n=e.data,o=e.xKey,i=e.yName,a=e.visible,s=e.fill,l=e.stroke,u=e.fillOpacity,c=e.strokeOpacity;if(!n||0===n.length)return[];var p=[{legendType:"category",id:r,itemId:o,seriesId:r,enabled:a,label:{text:null!==(t=null!==i&&void 0!==i?i:o)&&void 0!==t?t:"Frequency"},marker:{fill:null!==s&&void 0!==s?s:"rgba(0, 0, 0, 0)",stroke:null!==l&&void 0!==l?l:"rgba(0, 0, 0, 0)",fillOpacity:u,strokeOpacity:c}}];return p},e.prototype.animateEmptyUpdateReady=function(t){var e,r,n=this,o=t.datumSelections,i=t.labelSelections,a=null!==(r=null===(e=this.ctx.animationManager)||void 0===e?void 0:e.defaultOptions.duration)&&void 0!==r?r:1e3,s=200,l=0;o.forEach((function(t){return t.each((function(t,e){l=Math.max(l,e.height+e.y)}))})),o.forEach((function(t){t.each((function(t,e){var r;null===(r=n.ctx.animationManager)||void 0===r||r.animateMany(n.id+"_empty-update-ready_"+t.id,[{from:l,to:e.y},{from:0,to:e.height}],{duration:a,ease:Cd,onUpdate:function(r){var n=jC(r,2),o=n[0],i=n[1];t.y=o,t.height=i,t.x=e.x,t.width=e.width}})}))})),i.forEach((function(t){t.each((function(t){var e;null===(e=n.ctx.animationManager)||void 0===e||e.animate(n.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:a,duration:s,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyUpdate=function(t){var e=this,r=t.datumSelections;r.forEach((function(t){e.resetSelectionRects(t)}))},e.prototype.animateReadyHighlight=function(t){this.resetSelectionRects(t)},e.prototype.animateReadyResize=function(t){var e,r=this,n=t.datumSelections;null===(e=this.ctx.animationManager)||void 0===e||e.reset(),n.forEach((function(t){r.resetSelectionRects(t)}))},e.prototype.animateWaitingUpdateReady=function(t){var e,r,n,o=this,i=t.datumSelections,a=t.labelSelections,s=this.processedData,l=null===(e=null===s||void 0===s?void 0:s.reduced)||void 0===e?void 0:e.diff;if(null===l||void 0===l?void 0:l.changed){var u=null!==(n=null===(r=this.ctx.animationManager)||void 0===r?void 0:r.defaultOptions.duration)&&void 0!==n?n:1e3,c=200,p=u;l.added.length>0&&l.removed.length>0?p=Math.floor(u/3):(l.added.length>0||l.removed.length>0)&&(p=Math.floor(u/2));var d=0;i.forEach((function(t){return t.each((function(t,e){d=Math.max(d,e.height+e.y)}))}));var h={};l.added.forEach((function(t){h[t.join("_")]=!0}));var f={};l.removed.forEach((function(t){f[t.join("_")]=!0})),i.forEach((function(t){t.each((function(e,r){var n,i=[{from:e.x,to:r.x},{from:e.width,to:r.width},{from:e.y,to:r.y},{from:e.height,to:r.height}],a=l.removed.length>0?p:0,s=!1,u=r.domain.join("_"),c=d,v=0;void 0!==u&&void 0!==h[u]?(i=[{from:r.x,to:r.x},{from:r.width,to:r.width},{from:c,to:r.y},{from:v,to:r.height}],a+=p):void 0!==u&&void 0!==f[u]&&(i=[{from:e.x,to:r.x},{from:e.width,to:r.width},{from:r.y,to:c},{from:r.height,to:v}],a=0,s=!0),null===(n=o.ctx.animationManager)||void 0===n||n.animateMany(o.id+"_waiting-update-ready_"+e.id,i,{disableInteractions:!0,delay:a,duration:p,ease:Cd,repeat:0,onUpdate:function(t){var r=jC(t,4),n=r[0],o=r[1],i=r[2],a=r[3];e.x=n,e.width=o,e.y=i,e.height=a},onComplete:function(){s&&t.cleanup()}})}))})),a.forEach((function(t){t.each((function(t){var e;t.opacity=0,null===(e=o.ctx.animationManager)||void 0===e||e.animate(o.id+"_waiting-update-ready_"+t.id,{from:0,to:1,delay:u,duration:c,ease:md,repeat:0,onUpdate:function(e){t.opacity=e}})}))}))}else i.forEach((function(t){o.resetSelectionRects(t)}))},e.prototype.resetSelectionRects=function(t){t.each((function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height}))},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.className="HistogramSeries",e.type="histogram",LC([du(Iu)],e.prototype,"fill",void 0),LC([du(Iu)],e.prototype,"stroke",void 0),LC([du(Gu(0,1))],e.prototype,"fillOpacity",void 0),LC([du(Gu(0,1))],e.prototype,"strokeOpacity",void 0),LC([du(Qu)],e.prototype,"lineDash",void 0),LC([du(Gu(0))],e.prototype,"lineDashOffset",void 0),LC([du(Pu)],e.prototype,"xKey",void 0),LC([du(Ou)],e.prototype,"areaPlot",void 0),LC([du(yu())],e.prototype,"bins",void 0),LC([du(HC)],e.prototype,"aggregation",void 0),LC([du(ju(0))],e.prototype,"binCount",void 0),LC([du(Pu)],e.prototype,"xName",void 0),LC([du(Pu)],e.prototype,"yKey",void 0),LC([du(Pu)],e.prototype,"yName",void 0),LC([du(Gu(0))],e.prototype,"strokeWidth",void 0),e}(Kb),YC=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qC=function(){return qC=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},qC.apply(this,arguments)},ZC=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},JC=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},QC=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},$C=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},tS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return YC(e,t),ZC([du(xu)],e.prototype,"formatter",void 0),e}(dy),eS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e.format=void 0,e}return YC(e,t),ZC([du(xu)],e.prototype,"renderer",void 0),ZC([du(Pu)],e.prototype,"format",void 0),e}(Ap),rS=function(t){function e(e){var r=t.call(this,{moduleCtx:e,hasMarkers:!0,pickModes:[sp.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,sp.NEAREST_NODE,sp.EXACT_SHAPE_MATCH]})||this;r.marker=new Xb,r.label=new tS,r.title=void 0,r.stroke="#874349",r.lineDash=[0],r.lineDashOffset=0,r.strokeWidth=2,r.strokeOpacity=1,r.tooltip=new eS,r.xKey=void 0,r.xName=void 0,r.yKey=void 0,r.yName=void 0;var n=r,o=n.marker,i=n.label;return o.fill="#c16068",o.stroke="#874349",i.enabled=!1,r}return YC(e,t),e.prototype.processData=function(t){return JC(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f;return QC(this,(function(v){switch(v.label){case 0:return e=this,r=e.axes,n=e.xKey,o=void 0===n?"":n,i=e.yKey,a=void 0===i?"":i,s=o&&a&&this.data?this.data:[],l=r[oc.X],u=r[oc.Y],c=(null===l||void 0===l?void 0:l.scale)instanceof ov,p=(null===u||void 0===u?void 0:u.scale)instanceof ov,[4,t.request(this.id,null!==s&&void 0!==s?s:[],{props:[mp(this,o,c,{id:"xValue"}),mp(this,a,p,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible})];case 1:return d=v.sent(),h=d.dataModel,f=d.processedData,this.dataModel=h,this.processedData=f,[2]}}))}))},e.prototype.getDomain=function(t){var e=this,r=e.axes,n=e.dataModel,o=e.processedData;if(!o||!n)return[];var i=r[oc.X],a=r[oc.Y],s=n.resolveProcessedDataDefById(this,"xValue");if(t===oc.X){var l=n.getDomain(this,"xValue","value",o);return"value"===(null===s||void 0===s?void 0:s.def.type)&&"category"===s.def.valueType?l:this.fixNumericExtent(uy(l),i)}l=n.getDomain(this,"yValue","value",o);return this.fixNumericExtent(l,a)},e.prototype.createNodeData=function(){var t,e,r,n,o;return JC(this,void 0,void 0,(function(){var i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D,A,M,R,_,k,F,I,L,N,G,j,B,V,H,z,U,W,K,X;return QC(this,(function(Y){if(i=this,a=i.processedData,s=i.dataModel,l=i.axes,u=i.marker,c=u.enabled,p=u.size,d=u.strokeWidth,h=i.ctx.callbackCache,f=l[oc.X],v=l[oc.Y],!a||!s||!f||!v)return[2,[]];for(y=this,g=y.label,m=y.yKey,b=void 0===m?"":m,C=y.xKey,S=void 0===C?"":C,w=y.id,x=f.scale,O=v.scale,E=(null!==(t=x.bandwidth)&&void 0!==t?t:0)/2,T=(null!==(e=O.bandwidth)&&void 0!==e?e:0)/2,P=new Array(a.data.length),D=c?p:0,A=s.resolveProcessedDataIndexById(this,"xValue").index,M=s.resolveProcessedDataIndexById(this,"yValue").index,R=!0,_=void 0,k=void 0,F=0,I=0;I<a.data.length;I++)if(L=null!==k&&void 0!==k?k:a.data[I],N=L.datum,G=L.values,j=G[A],B=G[M],void 0===B)_=void 0,R=!0;else{if(V=x.convert(j)+E,isNaN(V)){_=void 0,R=!0,k=void 0;continue}if(H=(null!==(r=x.bandwidth)&&void 0!==r?r:.5*p+(null!==d&&void 0!==d?d:0))+1,k=void 0===(null===(n=a.data[I+1])||void 0===n?void 0:n.values[M])?void 0:a.data[I+1],z=null===(o=a.data[I+1])||void 0===o?void 0:o.values[A],U=f.inRangeEx(V,0,H),W=k&&f.inRangeEx(x.convert(z)+E,0,H),-1===U&&-1===W){R=!0;continue}if(1===U&&1===_){R=!0;continue}_=U,K=O.convert(B)+T,X=void 0,g.formatter&&(X=h.call(g.formatter,{value:B,seriesId:w})),void 0!==X||("number"===typeof B&&isFinite(B)?X=B.toFixed(2):B&&(X=String(B))),P[F++]={series:this,datum:N,yKey:b,xKey:S,point:{x:V,y:K,moveTo:R,size:D},nodeMidPoint:{x:V,y:K},yValue:B,xValue:j,label:X?{text:X,fontStyle:g.fontStyle,fontWeight:g.fontWeight,fontSize:g.fontSize,fontFamily:g.fontFamily,textAlign:"center",textBaseline:"bottom",fill:g.color}:void 0},R=!1}return P.length=F,[2,[{itemId:b,nodeData:P,labelData:P}]]}))}))},e.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},e.prototype.markerFactory=function(){var t=this.marker.shape,e=Zh(t);return new e},e.prototype.updateMarkerSelection=function(t){return JC(this,void 0,void 0,(function(){var e,r,n,o,i;return QC(this,(function(a){return e=t.nodeData,r=t.markerSelection,n=this.marker,o=n.shape,i=n.enabled,e=o&&i?e:[],this.marker.isDirty()&&r.clear(),[2,r.update(e)]}))}))},e.prototype.updateMarkerNodes=function(t){var e;return JC(this,void 0,void 0,(function(){var r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O;return QC(this,(function(E){return r=t.markerSelection,n=t.isHighlight,o=this,i=o.marker,a=o.marker.fillOpacity,s=o.xKey,l=void 0===s?"":s,u=o.yKey,c=void 0===u?"":u,p=o.stroke,d=o.strokeOpacity,h=o.highlightStyle.item,f=h.fill,v=h.fillOpacity,y=void 0===v?a:v,g=h.stroke,m=h.strokeWidth,b=o.id,C=o.ctx.callbackCache,S=i.size,w=i.formatter,x=null!==(e=i.strokeWidth)&&void 0!==e?e:this.strokeWidth,O="function"===typeof i.shape,r.each((function(t,e){var r,o,s,u,h,v,E,T=n&&void 0!==f?f:i.fill,P=n?y:a,D=n&&void 0!==g?g:null!==(r=i.stroke)&&void 0!==r?r:p,A=n&&void 0!==m?m:x,M=void 0;w&&(M=C.call(w,{datum:e.datum,xKey:l,yKey:c,fill:T,stroke:D,strokeWidth:A,size:S,highlighted:n,seriesId:b})),t.fill=null!==(o=null===M||void 0===M?void 0:M.fill)&&void 0!==o?o:T,t.stroke=null!==(s=null===M||void 0===M?void 0:M.stroke)&&void 0!==s?s:D,t.strokeWidth=null!==(u=null===M||void 0===M?void 0:M.strokeWidth)&&void 0!==u?u:A,t.fillOpacity=null!==P&&void 0!==P?P:1,t.strokeOpacity=null!==(v=null!==(h=i.strokeOpacity)&&void 0!==h?h:d)&&void 0!==v?v:1,t.size=null!==(E=null===M||void 0===M?void 0:M.size)&&void 0!==E?E:S,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!isNaN(e.point.x)&&!isNaN(e.point.y),O&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())})),n||this.marker.markClean(),[2]}))}))},e.prototype.updateLabelSelection=function(t){return JC(this,void 0,void 0,(function(){var e,r,n,o,i;return QC(this,(function(a){return e=t.labelData,r=t.labelSelection,n=this.marker,o=n.shape,i=n.enabled,e=o&&i?e:[],[2,r.update(e)]}))}))},e.prototype.updateLabelNodes=function(t){return JC(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l;return QC(this,(function(u){return e=t.labelSelection,r=this.label,n=r.enabled,o=r.fontStyle,i=r.fontWeight,a=r.fontSize,s=r.fontFamily,l=r.color,e.each((function(t,e){var r=e.point,u=e.label;e&&u&&n?(t.fontStyle=o,t.fontWeight=i,t.fontSize=a,t.fontFamily=s,t.textAlign=u.textAlign,t.textBaseline=u.textBaseline,t.text=u.text,t.x=r.x,t.y=r.y-10,t.fill=l,t.visible=!0):t.visible=!1})),[2]}))}))},e.prototype.getNodeClickEvent=function(t,e){var r,n;return new zb(null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r,n;return new Ub(null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.getTooltipHtml=function(t){var e,r,n=this,o=n.xKey,i=n.yKey,a=n.axes,s=a[oc.X],l=a[oc.Y];if(!o||!i||!s||!l)return"";var u=this,c=u.xName,p=u.yName,d=u.tooltip,h=u.marker,f=u.id,v=d.renderer,y=d.format,g=t.datum,m=t.xValue,b=t.yValue,C=s.formatDatum(m),S=l.formatDatum(b),w=Qb(null!==(e=this.title)&&void 0!==e?e:p),x=Qb(C+": "+S),O=h.formatter,E=h.fill,T=h.stroke,P=h.strokeWidth,D=h.size,A=null!==P&&void 0!==P?P:this.strokeWidth,M=void 0;O&&(M=O({datum:g,xKey:o,yKey:i,fill:E,stroke:T,strokeWidth:A,size:D,highlighted:!1,seriesId:f}));var R=null!==(r=null===M||void 0===M?void 0:M.fill)&&void 0!==r?r:E,_={title:w,backgroundColor:R,content:x};if(y||v){var k={datum:g,xKey:o,xValue:m,xName:c,yKey:i,yValue:b,yName:p,title:w,color:R,seriesId:f};if(y)return Rc({content:Zb(y,k)},_);if(v)return Rc(v(k),_)}return Rc(_)},e.prototype.getLegendData=function(){var t,e,r,n,o,i,a,s=this,l=s.id,u=s.data,c=s.xKey,p=s.yKey,d=s.yName,h=s.visible,f=s.title,v=s.marker,y=s.stroke,g=s.strokeOpacity;if(!((null===u||void 0===u?void 0:u.length)&&c&&p))return[];var m=[{legendType:"category",id:l,itemId:p,seriesId:l,enabled:h,label:{text:null!==(t=null!==f&&void 0!==f?f:d)&&void 0!==t?t:p},marker:{shape:v.shape,fill:null!==(e=v.fill)&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(r=v.stroke)&&void 0!==r?r:y)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(o=v.fillOpacity)&&void 0!==o?o:1,strokeOpacity:null!==(a=null!==(i=v.strokeOpacity)&&void 0!==i?i:g)&&void 0!==a?a:1}}];return m},e.prototype.animateEmptyUpdateReady=function(t){var e=this,r=t.markerSelections,n=t.labelSelections,o=t.contextData,i=t.paths;o.forEach((function(t,o){var a,s,l,u=t.nodeData,c=$C(i[o],1),p=c[0],d=p.path,h=[0],f=u.reduce((function(t,e,r){if(0===r)return t;var n=u[r-1];if(isNaN(e.point.x)||isNaN(e.point.y)||isNaN(n.point.x)||isNaN(n.point.y))return h.push(t),t;var o=Math.sqrt(Math.pow(e.point.x-n.point.x,2)+Math.pow(e.point.y-n.point.y,2));return h.push(t+o),t+o}),0);p.fill=void 0,p.lineJoin="round",p.pointerEvents=Xs.None,p.stroke=e.stroke,p.strokeWidth=e.getStrokeWidth(e.strokeWidth),p.strokeOpacity=e.strokeOpacity,p.lineDash=e.lineDash,p.lineDashOffset=e.lineDashOffset;var v=null!==(s=null===(a=e.ctx.animationManager)||void 0===a?void 0:a.defaultOptions.duration)&&void 0!==s?s:1e3,y=200,g={from:0,to:f};null===(l=e.ctx.animationManager)||void 0===l||l.animate(e.id+"_empty-update-ready",qC(qC({},g),{duration:v,onUpdate:function(t){d.clear({trackChanges:!0}),u.forEach((function(e,r){if(h[r]<=t)e.point.moveTo?d.moveTo(e.point.x,e.point.y):d.lineTo(e.point.x,e.point.y);else if(r>0&&h[r-1]<t){var n=u[r-1].point,o=e.point,i=h[r]-h[r-1],a=h[r]-t,s=(i-a)/i,l=(1-s)*n.x+s*o.x,c=(1-s)*n.y+s*o.y;e.point.moveTo?d.moveTo(l,c):d.lineTo(l,c)}})),p.checkPathDirty()}})),r[o].each((function(t,r,n){var o,i,a,s,l=f>0?h[n]/f*v:0,u=e.animateFormatter(r),c=null!==(i=null===(o=r.point)||void 0===o?void 0:o.size)&&void 0!==i?i:0;null===(a=e.ctx.animationManager)||void 0===a||a.animate(e.id+"_empty-update-ready_"+t.id,qC(qC({},g),{to:null!==(s=null===u||void 0===u?void 0:u.size)&&void 0!==s?s:c,delay:l,duration:y,onUpdate:function(e){t.size=e}}))})),n[o].each((function(t,r,n){var o,i=h[n]/f*v;null===(o=e.ctx.animationManager)||void 0===o||o.animate(e.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:i,duration:y,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyUpdate=function(t){this.resetMarkersAndPaths(t)},e.prototype.animateReadyResize=function(t){var e;null===(e=this.ctx.animationManager)||void 0===e||e.reset(),this.resetMarkersAndPaths(t)},e.prototype.resetMarkersAndPaths=function(t){var e=this,r=t.markerSelections,n=t.contextData,o=t.paths;n.forEach((function(t,n){var i=t.nodeData,a=$C(o[n],1),s=a[0],l=s.path;s.stroke=e.stroke,s.strokeWidth=e.getStrokeWidth(e.strokeWidth),s.strokeOpacity=e.strokeOpacity,s.lineDash=e.lineDash,s.lineDashOffset=e.lineDashOffset,l.clear({trackChanges:!0}),i.forEach((function(t){t.point.moveTo?l.moveTo(t.point.x,t.point.y):l.lineTo(t.point.x,t.point.y)})),s.checkPathDirty(),r[n].each((function(t,r){var n,o,i,a=e.animateFormatter(r),s=null!==(o=null===(n=r.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0;t.size=null!==(i=null===a||void 0===a?void 0:a.size)&&void 0!==i?i:s}))}))},e.prototype.animateFormatter=function(t){var e,r,n=this,o=n.marker,i=n.xKey,a=void 0===i?"":i,s=n.yKey,l=void 0===s?"":s,u=n.stroke,c=n.id,p=n.ctx.callbackCache,d=o.size,h=o.formatter,f=o.fill,v=null!==(e=o.stroke)&&void 0!==e?e:u,y=null!==(r=o.strokeWidth)&&void 0!==r?r:this.strokeWidth,g=void 0;return h&&(g=p.call(h,{datum:t.datum,xKey:a,yKey:l,fill:f,stroke:v,strokeWidth:y,size:d,highlighted:!1,seriesId:c})),g},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.className="LineSeries",e.type="line",ZC([du(Pu)],e.prototype,"title",void 0),ZC([du(Iu)],e.prototype,"stroke",void 0),ZC([du(Qu)],e.prototype,"lineDash",void 0),ZC([du(Gu(0))],e.prototype,"lineDashOffset",void 0),ZC([du(Gu(0))],e.prototype,"strokeWidth",void 0),ZC([du(Gu(0,1))],e.prototype,"strokeOpacity",void 0),ZC([du(Pu)],e.prototype,"xKey",void 0),ZC([du(Pu)],e.prototype,"xName",void 0),ZC([du(Pu)],e.prototype,"yKey",void 0),ZC([du(Pu)],e.prototype,"yName",void 0),e}(Kb),nS=function(){function t(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map((function(t){return au.fromString(t)}))}return t.prototype.update=function(){var t=this,e=t.domain,r=t.range;e.length<2&&(ul.warnOnce("`colorDomain` should have at least 2 values."),0===e.length?e.push(0,1):1===e.length&&e.push(e[0]+1));for(var n=1;n<e.length;n++){var o=e[n-1],i=e[n];if(o>=i){ul.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((function(t,e){return t-e}));break}}var a=r.length<e.length;if(a||e.length>2&&r.length>e.length)if(ul.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),a)for(n=r.length;n<e.length;n++)r.push("black");else r.splice(e.length);this.parsedRange=this.range.map((function(t){return au.fromString(t)}))},t.prototype.convert=function(t){var e,r,n=this,o=n.domain,i=n.range,a=n.parsedRange,s=o[0],l=o[o.length-1],u=i[0],c=i[i.length-1];if(t<=s)return u;if(t>=l)return c;if(2===o.length){var p=(t-s)/(l-s),d=1/(i.length-1);e=i.length<=2?0:Math.min(Math.floor(p*(i.length-1)),i.length-2),r=(p-e*d)/d}else{for(e=0;e<o.length-2;e++)if(t<o[e+1])break;var h=o[e],f=o[e+1];r=(t-h)/(f-h)}var v=a[e],y=a[e+1];return vd(v,y)(r)},t}(),oS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iS=function(){return iS=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},iS.apply(this,arguments)},aS=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sS=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},lS=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},uS=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},cS=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},pS=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e}return oS(e,t),aS([du(xu)],e.prototype,"formatter",void 0),e}(dy),hS=function(t){function e(e,r,n,o,i,a){var s=t.call(this,r,n,o,i,a)||this;return s.sizeKey=e,s}return oS(e,t),e}(Hb),fS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeClick",e}return oS(e,t),e}(hS),vS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return oS(e,t),e}(hS),yS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return oS(e,t),aS([du(xu)],e.prototype,"renderer",void 0),e}(Ap),gS=function(t){function e(e){var r=t.call(this,{moduleCtx:e,pickModes:[sp.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,sp.NEAREST_NODE,sp.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0})||this;r.sizeScale=new qy,r.marker=new Xb,r.label=new dS,r.title=void 0,r.labelKey=void 0,r.xName=void 0,r.yName=void 0,r.sizeName="Size",r.labelName="Label",r.xKey=void 0,r.yKey=void 0,r.sizeKey=void 0,r.colorKey=void 0,r.colorName="Color",r.colorDomain=void 0,r.colorRange=["#ffff00","#00ff00","#0000ff"],r.colorScale=new nS,r.tooltip=new yS;var n=r.label;return n.enabled=!1,r}return oS(e,t),e.prototype.processData=function(t){var e,r;return sS(this,void 0,void 0,(function(){var n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P;return lS(this,(function(D){switch(D.label){case 0:return n=this,o=n.xKey,i=void 0===o?"":o,a=n.yKey,s=void 0===a?"":a,l=n.sizeKey,u=n.labelKey,c=n.axes,p=n.marker,d=n.data,h=c[oc.X],f=c[oc.Y],v=(null===h||void 0===h?void 0:h.scale)instanceof ov,y=(null===f||void 0===f?void 0:f.scale)instanceof ov,g=this,m=g.colorScale,b=g.colorDomain,C=g.colorRange,S=g.colorKey,[4,t.request(this.id,null!==d&&void 0!==d?d:[],{props:cS(cS(cS([mp(this,i,v,{id:"xValue"}),mp(this,s,y,{id:"yValue"})],uS(l?[mp(this,l,!0,{id:"sizeValue"})]:[])),uS(S?[mp(this,S,!0,{id:"colorValue"})]:[])),uS(u?[mp(this,u,!1,{id:"labelValue"})]:[])),dataVisible:this.visible})];case 1:return w=D.sent(),x=w.dataModel,O=w.processedData,this.dataModel=x,this.processedData=O,l&&(E=x.resolveProcessedDataIndexById(this,"sizeValue").index,T=null!==(e=O.domain.values[E])&&void 0!==e?e:[],this.sizeScale.domain=p.domain?p.domain:T),S&&(P=x.resolveProcessedDataIndexById(this,"colorValue").index,m.domain=null!==(r=null!==b&&void 0!==b?b:O.domain.values[P])&&void 0!==r?r:[],m.range=C,m.update()),[2]}}))}))},e.prototype.getDomain=function(t){var e=this,r=e.dataModel,n=e.processedData;if(!n||!r)return[];var o=t===oc.X?"xValue":"yValue",i=r.resolveProcessedDataDefById(this,o,"value"),a=r.getDomain(this,o,"value",n);if("value"===(null===i||void 0===i?void 0:i.def.type)&&"category"===(null===i||void 0===i?void 0:i.def.valueType))return a;var s=this.axes[t];return this.fixNumericExtent(uy(a),s)},e.prototype.getNodeClickEvent=function(t,e){var r,n;return new fS(this.sizeKey,null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){var r,n;return new vS(this.sizeKey,null!==(r=this.xKey)&&void 0!==r?r:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)},e.prototype.createNodeData=function(){var t,e,r,n,o,i;return sS(this,void 0,void 0,(function(){var a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x,O,E,T,P,D,A,M,R,_,k,F,I,L,N,G,j,B,V,H,z,U,W,K,X,Y,q,Z,J,Q,$,tt;return lS(this,(function(et){if(a=this,s=a.visible,l=a.axes,u=a.yKey,c=void 0===u?"":u,p=a.xKey,d=void 0===p?"":p,h=a.label,f=a.labelKey,v=a.ctx.callbackCache,y=a.dataModel,g=a.processedData,m=l[oc.X],b=l[oc.Y],!(y&&g&&s&&m&&b))return[2,[]];C=y.resolveProcessedDataIndexById(this,"xValue").index,S=y.resolveProcessedDataIndexById(this,"yValue").index,w=this.sizeKey?y.resolveProcessedDataIndexById(this,"sizeValue").index:-1,x=this.colorKey?y.resolveProcessedDataIndexById(this,"colorValue").index:-1,O=this.labelKey?y.resolveProcessedDataIndexById(this,"labelValue").index:-1,E=this,T=E.colorScale,P=E.sizeKey,D=E.colorKey,A=E.id,M=m.scale,R=b.scale,_=(null!==(t=M.bandwidth)&&void 0!==t?t:0)/2,k=(null!==(e=R.bandwidth)&&void 0!==e?e:0)/2,F=this,I=F.sizeScale,L=F.marker,N=new Array(null!==(n=null===(r=this.processedData)||void 0===r?void 0:r.data.length)&&void 0!==n?n:0),I.range=[L.size,L.maxSize],G=h.getFont(),j=0;try{for(B=pS(null!==(o=g.data)&&void 0!==o?o:[]),V=B.next();!V.done;V=B.next())H=V.value,z=H.values,U=H.datum,W=z[C],K=z[S],X=M.convert(W)+_,Y=R.convert(K)+k,this.checkRangeXY(X,Y,m,b)&&(q=void 0,h.formatter&&(q=v.call(h.formatter,{value:K,seriesId:A,datum:U})),void 0===q&&(q=f?String(z[O]):""),Z=ks.getTextSize(q,G),J=P?I.convert(z[w]):L.size,Q=D?T.convert(z[x]):void 0,N[j++]={series:this,itemId:c,yKey:c,xKey:d,datum:U,xValue:W,yValue:K,sizeValue:z[w],point:{x:X,y:Y,size:J},nodeMidPoint:{x:X,y:Y},fill:Q,label:iS({text:q},Z)})}catch(rt){$={error:rt}}finally{try{V&&!V.done&&(tt=B.return)&&tt.call(B)}finally{if($)throw $.error}}return N.length=j,[2,[{itemId:null!==(i=this.yKey)&&void 0!==i?i:this.id,nodeData:N,labelData:N}]]}))}))},e.prototype.isPathOrSelectionDirty=function(){return this.marker.isDirty()},e.prototype.getLabelData=function(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((function(t,e){return t.concat(e.labelData)}),[])},e.prototype.markerFactory=function(){var t=this.marker.shape,e=Zh(t);return new e},e.prototype.updateMarkerSelection=function(t){return sS(this,void 0,void 0,(function(){var e,r,n,o;return lS(this,(function(i){return e=t.nodeData,r=t.markerSelection,n=this.marker.enabled,this.marker.isDirty()&&r.clear(),o=n?e:[],[2,r.update(o)]}))}))},e.prototype.updateMarkerNodes=function(t){return sS(this,void 0,void 0,(function(){var e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w,x;return lS(this,(function(O){return e=t.markerSelection,r=t.isHighlight,n=this,o=n.marker,i=n.xKey,a=void 0===i?"":i,s=n.yKey,l=void 0===s?"":s,u=n.sizeScale,c=n.marker,p=c.fillOpacity,d=c.strokeOpacity,h=c.strokeWidth,f=n.highlightStyle.item,v=f.fill,y=f.fillOpacity,g=void 0===y?p:y,m=f.stroke,b=f.strokeWidth,C=n.id,S=n.ctx.callbackCache,w=o.formatter,u.range=[o.size,o.maxSize],x="function"===typeof o.shape,e.each((function(t,e){var n,i,s,u,c,f,y,O,E,T,P=r&&void 0!==v?v:null!==(n=e.fill)&&void 0!==n?n:o.fill,D=r?g:p,A=r&&void 0!==m?m:o.stroke,M=d,R=r&&void 0!==b?b:null!==h&&void 0!==h?h:1,_=null!==(s=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==s?s:0,k=void 0;w&&(k=S.call(w,{datum:e.datum,xKey:a,yKey:l,fill:P,stroke:A,strokeWidth:R,size:_,highlighted:r,seriesId:C})),t.fill=null!==(u=null===k||void 0===k?void 0:k.fill)&&void 0!==u?u:P,t.stroke=null!==(c=null===k||void 0===k?void 0:k.stroke)&&void 0!==c?c:A,t.strokeWidth=null!==(f=null===k||void 0===k?void 0:k.strokeWidth)&&void 0!==f?f:R,t.fillOpacity=null!==D&&void 0!==D?D:1,t.strokeOpacity=null!==M&&void 0!==M?M:1,t.translationX=null!==(O=null===(y=e.point)||void 0===y?void 0:y.x)&&void 0!==O?O:0,t.translationY=null!==(T=null===(E=e.point)||void 0===E?void 0:E.y)&&void 0!==T?T:0,t.visible=t.size>0,x&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())})),r||this.marker.markClean(),[2]}))}))},e.prototype.updateLabelSelection=function(t){var e,r;return sS(this,void 0,void 0,(function(){var n,o,i,a;return lS(this,(function(s){return n=t.labelSelection,o=this.label.enabled,i=o&&null!==(r=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==r?r:[],a=i.map((function(t){return iS(iS({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}})})),[2,n.update(a)]}))}))},e.prototype.updateLabelNodes=function(t){return sS(this,void 0,void 0,(function(){var e,r;return lS(this,(function(n){return e=t.labelSelection,r=this.label,e.each((function(t,e){var n,o,i,a;t.text=e.label.text,t.fill=r.color,t.x=null!==(o=null===(n=e.point)||void 0===n?void 0:n.x)&&void 0!==o?o:0,t.y=null!==(a=null===(i=e.point)||void 0===i?void 0:i.y)&&void 0!==a?a:0,t.fontStyle=r.fontStyle,t.fontWeight=r.fontWeight,t.fontSize=r.fontSize,t.fontFamily=r.fontFamily,t.textAlign="left",t.textBaseline="top"})),[2]}))}))},e.prototype.getTooltipHtml=function(t){var e,r,n,o,i,a,s,l=this,u=l.xKey,c=l.yKey,p=l.axes,d=p[oc.X],h=p[oc.Y];if(!u||!c||!d||!h)return"";var f=this,v=f.marker,y=f.tooltip,g=f.xName,m=f.yName,b=f.sizeKey,C=f.sizeName,S=f.labelKey,w=f.labelName,x=f.id,O=f.ctx.callbackCache,E=v.stroke,T=null!==(e=t.fill)&&void 0!==e?e:v.fill,P=this.getStrokeWidth(null!==(r=v.strokeWidth)&&void 0!==r?r:1),D=this.marker.formatter,A=void 0;D&&(A=O.call(D,{datum:t,xKey:u,yKey:c,fill:T,stroke:E,strokeWidth:P,size:null!==(o=null===(n=t.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0,highlighted:!1,seriesId:x}));var M=null!==(a=null!==(i=null===A||void 0===A?void 0:A.fill)&&void 0!==i?i:T)&&void 0!==a?a:"gray",R=null!==(s=this.title)&&void 0!==s?s:m,_=t.datum,k=t.xValue,F=t.yValue,I=t.sizeValue,L=t.label.text,N=Qb(d.formatDatum(k)),G=Qb(h.formatDatum(F)),j="<b>"+Qb(null!==g&&void 0!==g?g:u)+"</b>: "+N+"<br><b>"+Qb(null!==m&&void 0!==m?m:c)+"</b>: "+G;b&&(j+="<br><b>"+Qb(null!==C&&void 0!==C?C:b)+"</b>: "+Qb(I)),S&&(j="<b>"+Qb(null!==w&&void 0!==w?w:S)+"</b>: "+Qb(L)+"<br>"+j);var B={title:R,backgroundColor:M,content:j},V=y.renderer;return V?Rc(V({datum:_,xKey:u,xValue:k,xName:g,yKey:c,yValue:F,yName:m,sizeKey:b,sizeName:C,labelKey:S,labelName:w,title:R,color:M,seriesId:x}),B):Rc(B)},e.prototype.getLegendData=function(){var t,e,r,n,o,i=this,a=i.id,s=i.data,l=i.xKey,u=i.yKey,c=i.yName,p=i.title,d=i.visible,h=i.marker,f=h.fill,v=h.stroke,y=h.fillOpacity,g=h.strokeOpacity;if(!((null===s||void 0===s?void 0:s.length)&&l&&u))return[];var m=[{legendType:"category",id:a,itemId:u,seriesId:a,enabled:d,label:{text:null!==(t=null!==p&&void 0!==p?p:c)&&void 0!==t?t:u},marker:{shape:h.shape,fill:null!==(r=null!==(e=h.fill)&&void 0!==e?e:f)&&void 0!==r?r:"rgba(0, 0, 0, 0)",stroke:null!==(o=null!==(n=h.stroke)&&void 0!==n?n:v)&&void 0!==o?o:"rgba(0, 0, 0, 0)",fillOpacity:null!==y&&void 0!==y?y:1,strokeOpacity:null!==g&&void 0!==g?g:1}}];return m},e.prototype.animateEmptyUpdateReady=function(t){var e,r,n=this,o=t.markerSelections,i=t.labelSelections,a=null!==(r=null===(e=this.ctx.animationManager)||void 0===e?void 0:e.defaultOptions.duration)&&void 0!==r?r:1e3,s=200;o.forEach((function(t){t.each((function(t,e){var r,o,i,s,l=n.animateFormatter(t,e),u=null!==(o=null===(r=e.point)||void 0===r?void 0:r.size)&&void 0!==o?o:0,c=null!==(i=null===l||void 0===l?void 0:l.size)&&void 0!==i?i:u;null===(s=n.ctx.animationManager)||void 0===s||s.animate(n.id+"_empty-update-ready_"+t.id,{from:0,to:c,duration:a,onUpdate:function(e){t.size=e}})}))})),i.forEach((function(t){t.each((function(t){var e;null===(e=n.ctx.animationManager)||void 0===e||e.animate(n.id+"_empty-update-ready_"+t.id,{from:0,to:1,delay:a,duration:s,onUpdate:function(e){t.opacity=e}})}))}))},e.prototype.animateReadyUpdate=function(t){var e=this,r=t.markerSelections;r.forEach((function(t){e.resetMarkers(t)}))},e.prototype.animateReadyHighlightMarkers=function(t){this.resetMarkers(t)},e.prototype.resetMarkers=function(t){var e=this;t.each((function(t,r){var n,o,i,a=e.animateFormatter(t,r),s=null!==(o=null===(n=r.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0;t.size=null!==(i=null===a||void 0===a?void 0:a.size)&&void 0!==i?i:s}))},e.prototype.animateFormatter=function(t,e){var r,n,o,i=this,a=i.xKey,s=void 0===a?"":a,l=i.yKey,u=void 0===l?"":l,c=i.marker.strokeWidth,p=i.id,d=i.ctx.callbackCache,h=this.marker.formatter,f=null!==(r=e.fill)&&void 0!==r?r:t.fill,v=t.stroke,y=null!==c&&void 0!==c?c:1,g=null!==(o=null===(n=e.point)||void 0===n?void 0:n.size)&&void 0!==o?o:0,m=void 0;return h&&(m=d.call(h,{datum:e.datum,xKey:s,yKey:u,fill:f,stroke:v,strokeWidth:y,size:g,highlighted:!1,seriesId:p})),m},e.prototype.isLabelEnabled=function(){return this.label.enabled},e.className="ScatterSeries",e.type="scatter",aS([du(Pu)],e.prototype,"title",void 0),aS([du(Pu)],e.prototype,"labelKey",void 0),aS([du(Pu)],e.prototype,"xName",void 0),aS([du(Pu)],e.prototype,"yName",void 0),aS([du(Pu)],e.prototype,"sizeName",void 0),aS([du(Pu)],e.prototype,"labelName",void 0),aS([du(Pu)],e.prototype,"xKey",void 0),aS([du(Pu)],e.prototype,"yKey",void 0),aS([du(Pu)],e.prototype,"sizeKey",void 0),aS([du(Pu)],e.prototype,"colorKey",void 0),aS([du(Pu)],e.prototype,"colorName",void 0),aS([du(Hu)],e.prototype,"colorDomain",void 0),aS([du(Lu)],e.prototype,"colorRange",void 0),e}(Kb),mS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bS=function(t){function e(e){return t.call(this,{moduleCtx:e,pickModes:[sp.EXACT_SHAPE_MATCH]})||this}return mS(e,t),e.prototype.getLabelData=function(){return[]},e}(Rp),CS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SS=function(){return SS=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},SS.apply(this,arguments)},wS=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},xS=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},OS=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ES=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderer=void 0,e}return CS(e,t),wS([du(xu)],e.prototype,"renderer",void 0),e}(Ap),PS=function(t){function e(e,r,n,o,i,a){var s=t.call(this,o,i,a)||this;return s.labelKey=e,s.sizeKey=r,s.colorKey=n,s}return CS(e,t),e}(wp),DS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeClick",e}return CS(e,t),e}(PS),AS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="nodeDoubleClick",e}return CS(e,t),e}(PS),MS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=10,e}return CS(e,t),wS([du(Gu(0))],e.prototype,"padding",void 0),e}(dy),RS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wrapping="on-space",e}return CS(e,t),wS([du(cc)],e.prototype,"wrapping",void 0),e}(dy),_S=function(){function t(){this.style=function(){var t=new dy;return t.color="white",t}()}return wS([du(Pu)],t.prototype,"key",void 0),wS([du(Pu)],t.prototype,"name",void 0),wS([du(xu)],t.prototype,"formatter",void 0),t}();(function(t){t[t["Name"]=0]="Name",t[t["Value"]=1]="Value"})(zC||(zC={}));var kS=new zl;function FS(t,e){var r=e.fontStyle,n=e.fontWeight,o=e.fontSize,i=e.fontFamily;kS.fontStyle=r,kS.fontWeight=n,kS.fontSize=o,kS.fontFamily=i,kS.text=t,kS.x=0,kS.y=0,kS.textAlign="left",kS.textBaseline="top";var a=kS.computeBBox(),s=a.width,l=a.height;return{width:s,height:l}}function IS(t){if("string"===typeof t&&!au.validColorString(t)){var e="black";return ul.warnOnce('invalid Treemap tile colour string "'+t+'". Affected treemap tiles will be coloured '+e+"."),"black"}return t}var LS=function(){function t(){this.color="black"}return wS([du(Iu)],t.prototype,"color",void 0),t}(),NS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=new LS,e}return CS(e,t),e}(Dp),GS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.groupSelection=hh.select(e.contentGroup,yl),e.highlightSelection=hh.select(e.highlightGroup,yl),e.title=function(){var t=new MS;return t.color="white",t.fontWeight="bold",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.padding=15,t}(),e.subtitle=function(){var t=new MS;return t.color="white",t.fontSize=9,t.fontFamily="Verdana, sans-serif",t.padding=13,t}(),e.labels={large:function(){var t=new RS;return t.color="white",t.fontWeight="bold",t.fontSize=18,t}(),medium:function(){var t=new RS;return t.color="white",t.fontWeight="bold",t.fontSize=14,t}(),small:function(){var t=new RS;return t.color="white",t.fontWeight="bold",t.fontSize=10,t}(),formatter:void 0,value:new _S},e.nodePadding=2,e.nodeGap=0,e.labelKey="label",e.sizeKey="size",e.colorKey="color",e.colorDomain=[-5,5],e.colorRange=["#cb4b3f","#6acb64"],e.groupFill="#272931",e.groupStroke="black",e.groupStrokeWidth=1,e.tileStroke="black",e.tileStrokeWidth=1,e.gradient=!0,e.formatter=void 0,e.colorName="Change",e.rootName="Root",e.highlightGroups=!0,e.tileShadow=new Ky,e.labelShadow=new Ky,e.tooltip=new TS,e.highlightStyle=new NS,e}return CS(e,t),e.prototype.getNodePaddingTop=function(t,e){var r,n=this,o=n.title,i=n.subtitle,a=n.nodePadding,s=t.label;if(t.isLeaf||!s||0===t.depth)return a;var l=t.depth>1?i:o,u=FS(s,l),c=3;return l.fontSize>e.width/c||l.fontSize>e.height/c||u.height>=e.height?a:u.height+a+(null!==(r=l.padding)&&void 0!==r?r:0)},e.prototype.getNodePadding=function(t,e){var r=this.nodePadding,n=this.getNodePaddingTop(t,e);return{top:n,right:r,bottom:r,left:r}},e.prototype.squarify=function(t,e,r){if(void 0===r&&(r=new Map),e.width<=0||e.height<=0)return r;r.set(t,e);var n=1,o=this.getNodePadding(t,e),i=e.width-o.left-o.right,a=e.height-o.top-o.bottom;if(i<=0||a<=0||t.value<=0)return r;for(var s=0,l=0,u=1/0,c=t.value,p=t.children,d=new Ls(e.x+o.left,e.y+o.top,i,a),h=d.clone(),f=0;f<p.length;f++){var v=p[f].value,y=p[l].value,g=h.width<h.height;s+=v;var m=g?h.height:h.width,b=g?h.width:h.height,C=b*y/s,S=m*s/c,w=Math.max(C,S)/Math.min(C,S),x=Math.abs(n-w);if(x<u)u=x;else{s-=v,S=m*s/c;for(var O=g?h.x:h.y,E=l;E<f;E++){var T=p[E],P=g?O:h.x,D=g?h.y:O,A=b*T.value/s,M=g?A:S,R=g?S:A,_=new Ls(P,D,M,R);this.applyGap(d,_),this.squarify(T,_,r),c-=T.value,O+=A}g?(h.y+=S,h.height-=S):(h.x+=S,h.width-=S),l=f,s=0,u=1/0,f--}}var k=h.width<h.height,F=k?h.x:h.y;for(f=l;f<p.length;f++){P=k?F:h.x,D=k?h.y:F;var I=p[f].value/c,L=h.width*(k?I:1),N=h.height*(k?1:I);_=new Ls(P,D,L,N);this.applyGap(d,_),this.squarify(p[f],_,r),F+=k?L:N}return r},e.prototype.applyGap=function(t,e){var r=this.nodeGap/2,n=function(t){return{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}},o=n(t),i=n(e),a=Object.keys(o);a.forEach((function(t){Zy(o[t],i[t])||e.shrink(r,t)}))},e.prototype.processData=function(){return xS(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,u,c,p=this;return OS(this,(function(d){return this.data?(t=this,e=t.data,r=t.sizeKey,n=t.labelKey,o=t.colorKey,i=t.colorDomain,a=t.colorRange,s=t.groupFill,l=this.labels.formatter,u=new nS,u.domain=i,u.range=a,u.update(),c=function(t,e,i){var a,d,h,f,v;void 0===e&&(e=0),l&&(v=p.ctx.callbackCache.call(l,{datum:t})),void 0!==v||(v=n&&null!==(a=t[n])&&void 0!==a?a:"");var y=o&&null!==(d=t[o])&&void 0!==d?d:e;y=IS(y);var g=!t.children,m=s;"string"===typeof y?m=y:!g&&s||(m=u.convert(y));var b={datum:t,depth:e,parent:i,value:0,label:v,fill:m,series:p,isLeaf:g,children:[]};return g?b.value=r&&null!==(h=t[r])&&void 0!==h?h:1:(null===(f=t.children)||void 0===f||f.forEach((function(t){var r=c(t,e+1,b),n=r.value;!isNaN(n)&&isFinite(n)&&0!==n&&(b.value+=n,b.children.push(r))})),b.children.sort((function(t,e){return e.value-t.value}))),b},this.dataRoot=c(e),[2]):[2]}))}))},e.prototype.createNodeData=function(){return xS(this,void 0,void 0,(function(){return OS(this,(function(t){return[2,[]]}))}))},e.prototype.update=function(){return xS(this,void 0,void 0,(function(){return OS(this,(function(t){switch(t.label){case 0:return[4,this.updateSelections()];case 1:return t.sent(),[4,this.updateNodes()];case 2:return t.sent(),[2]}}))}))},e.prototype.updateSelections=function(){return xS(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,u;return OS(this,(function(c){return this.nodeDataRefresh?(this.nodeDataRefresh=!1,t=this,e=t.chart,r=t.dataRoot,e&&r?(n=e.getSeriesRect(),n?(o=[],i=function(t){var e;o.push(t),null===(e=t.children)||void 0===e||e.forEach(i)},i(r),a=this,s=a.groupSelection,l=a.highlightSelection,u=function(t){return t.update(o,(function(t){var e=new dC,r=new zl;r.tag=zC.Name;var n=new zl;n.tag=zC.Value,t.append([e,r,n])}))},this.groupSelection=u(s),this.highlightSelection=u(l),[2]):[2]):[2]):[2]}))}))},e.prototype.isDatumHighlighted=function(t){var e,r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight();return t===r&&(t.isLeaf||this.highlightGroups)},e.prototype.getTileFormat=function(t,e){var r,n=this,o=n.formatter,i=n.ctx.callbackCache;if(!o)return{};var a=this,s=a.gradient,l=a.colorKey,u=a.labelKey,c=a.sizeKey,p=a.tileStroke,d=a.tileStrokeWidth,h=a.groupStroke,f=a.groupStrokeWidth,v=t.isLeaf?p:h,y=t.isLeaf?d:f,g=i.call(o,{seriesId:this.id,datum:t.datum,depth:t.depth,parent:null===(r=t.parent)||void 0===r?void 0:r.datum,colorKey:l,sizeKey:c,labelKey:u,fill:t.fill,stroke:v,strokeWidth:y,gradient:s,highlighted:e});return null!==g&&void 0!==g?g:{}},e.prototype.updateNodes=function(){return xS(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,s,l,u,c,p,d,h,f,v,y,g,m,b,C,S,w=this;return OS(this,(function(x){return this.chart?(t=this,e=t.gradient,r=t.highlightStyle,n=r.item,o=n.fill,i=n.fillOpacity,a=n.stroke,s=n.strokeWidth,l=r.text.color,u=t.tileStroke,c=t.tileStrokeWidth,p=t.groupStroke,d=t.groupStrokeWidth,h=t.tileShadow,f=t.labelShadow,v=t.dataRoot,v?(y=this.chart.getSeriesRect(),g=this.squarify(v,new Ls(0,0,y.width,y.height)),m=this.buildLabelMeta(g),b=this.getHighlightedSubtree(v),this.updateNodeMidPoint(g),C=function(t,r,n){var l,f,v,y,m,b,C=g.get(r);if(C){var S=n&&void 0!==o?o:r.fill,x=null!==(l=n?i:1)&&void 0!==l?l:1,O=p;n&&void 0!==a?O=a:r.isLeaf&&(O=u);var E=d;n&&void 0!==s?E=s:r.isLeaf&&(E=c);var T=w.getTileFormat(r,n),P=IS(null!==(f=null===T||void 0===T?void 0:T.fill)&&void 0!==f?f:S);if(null!==(v=null===T||void 0===T?void 0:T.gradient)&&void 0!==v?v:e){var D=au.tryParseFromString(S).brighter().toString(),A=au.tryParseFromString(S).darker().toString();t.fill="linear-gradient(180deg, "+D+", "+A+")"}else t.fill=P;t.fillOpacity=null!==(y=null===T||void 0===T?void 0:T.fillOpacity)&&void 0!==y?y:x,t.stroke=IS(null!==(m=null===T||void 0===T?void 0:T.stroke)&&void 0!==m?m:O),t.strokeWidth=null!==(b=null===T||void 0===T?void 0:T.strokeWidth)&&void 0!==b?b:E,t.fillShadow=h,t.crisp=!0,t.x=C.x,t.y=C.y,t.width=C.width,t.height=C.height,t.visible=!0}else t.visible=!1},this.groupSelection.selectByClass(dC).forEach((function(t){return C(t,t.datum,!1)})),this.highlightSelection.selectByClass(dC).forEach((function(t){var e=w.isDatumHighlighted(t.datum);t.visible=e||b.has(t.datum),t.visible&&C(t,t.datum,e)})),S=function(t,e,r,n){var o=m.get(e),i=null===o||void 0===o?void 0:o[n];i?(t.text=i.text,t.fontFamily=i.style.fontFamily,t.fontSize=i.style.fontSize,t.fontWeight=i.style.fontWeight,t.fill=r&&null!==l&&void 0!==l?l:i.style.color,t.fillShadow=r?void 0:f,t.textAlign=i.hAlign,t.textBaseline=i.vAlign,t.x=i.x,t.y=i.y,t.visible=!0):t.visible=!1},this.groupSelection.selectByTag(zC.Name).forEach((function(t){return S(t,t.datum,!1,"label")})),this.highlightSelection.selectByTag(zC.Name).forEach((function(t){var e=w.isDatumHighlighted(t.datum);t.visible=e||b.has(t.datum),t.visible&&S(t,t.datum,e,"label")})),this.groupSelection.selectByTag(zC.Value).forEach((function(t){return S(t,t.datum,!1,"value")})),this.highlightSelection.selectByTag(zC.Value).forEach((function(t){var e=w.isDatumHighlighted(t.datum);t.visible=e||b.has(t.datum),t.visible&&S(t,t.datum,e,"value")})),[2]):[2]):[2]}))}))},e.prototype.updateNodeMidPoint=function(t){t.forEach((function(t,e){e.nodeMidPoint={x:t.x+t.width/2,y:t.y}}))},e.prototype.getHighlightedSubtree=function(t){var e=this,r=new Set,n=function(t){var o;(e.isDatumHighlighted(t)||t.parent&&r.has(t.parent))&&r.add(t),null===(o=t.children)||void 0===o||o.forEach(n)};return n(t),r},e.prototype.buildLabelMeta=function(t){var e=this,r=e.labels,n=e.title,o=e.subtitle,i=e.nodePadding,a=e.labelKey,s=e.ctx.callbackCache,l=/-$/m,u=new Map;return t.forEach((function(t,e){var c,p,d;if(a&&0!==e.depth){var h=t.width-2*i,f=t.height-2*i,v=function(e){var r=3;return e.fontSize>t.width/r||e.fontSize>t.height/r},y=e.isLeaf?e.label:e.label.toUpperCase(),g="",m=r.value,b=m.style,C=Math.ceil(2*b.fontSize*(zl.defaultLineHeightRatio-1));e.isLeaf&&(m.formatter?g=null!==(c=s.call(m.formatter,{datum:e.datum}))&&void 0!==c?c:"":m.key&&(g=e.datum[m.key]));var S,w=FS(g,b);g&&w.width>h&&(g="");var x="";if(e.isLeaf){var O=function(){var t,e,n=f-(g?b.fontSize+C:0),o=[r.large,r.medium,r.small];try{for(var i=ES(o),a=i.next();!a.done;a=i.next()){var s=a.value,u=FS(y,s),c=u.width,p=u.height;if(!(p>n||v(s))){if(c<=h)return{style:s,wrappedText:void 0};var d=zl.wrap(y,h,n,s,s.wrapping);if(d&&"…"!==d&&(s===r.small||!l.exec(d)&&!d.endsWith("…")))return{style:s,wrappedText:d}}}}catch(S){t={error:S}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}var m=FS(y,r.small);return m.height<=n&&!v(r.small)?{style:r.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}},E=O();!E.style&&g&&(g="",E=O()),S=null!==(p=E.style)&&void 0!==p?p:r.small,x=null!==(d=E.wrappedText)&&void 0!==d?d:""}else S=1===e.depth?n:o;var T=FS(x||y,S);if(!v(S)){if(T.width>h){var P=Math.floor(y.length*h/T.width)-1;y=y.substring(0,P).trim()+"…"}w=FS(g,b);var D=g&&w.width<h&&w.height+T.height+C<f;u.set(e,{label:SS({text:x||y,style:S},e.isLeaf?{hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2-(D?w.height/2+C/2:0)}:{hAlign:"left",vAlign:"top",x:t.x+i,y:t.y+i}),value:D?{text:g,style:b,hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2+T.height/2+C/2}:void 0})}}})),u},e.prototype.getDomain=function(t){return[0,1]},e.prototype.getNodeClickEvent=function(t,e){return new DS(this.labelKey,this.sizeKey,this.colorKey,t,e,this)},e.prototype.getNodeDoubleClickEvent=function(t,e){return new AS(this.labelKey,this.sizeKey,this.colorKey,t,e,this)},e.prototype.getTooltipHtml=function(t){var e,r,n,o;if(!this.highlightGroups&&!t.isLeaf)return"";var i=this,a=i.tooltip,s=i.sizeKey,l=i.labelKey,u=i.colorKey,c=i.rootName,p=i.id,d=i.labels,h=i.ctx.callbackCache,f=t.datum,v=a.renderer,y=t.depth?f[l]:null!==(e=f[l])&&void 0!==e?e:c,g="",m=this.getTileFormat(t,!1),b=null!==(n=null!==(r=null===m||void 0===m?void 0:m.fill)&&void 0!==r?r:t.fill)&&void 0!==n?n:"gray",C=d.value.key,S=d.value.formatter;if(C||S){var w="";if(S)w=h.call(S,{datum:f});else if(null!=C){var x=f[C];"number"===typeof x&&isFinite(x)&&(w=Jy(x))}w&&(d.value.name&&(g+="<b>"+d.value.name+":</b> "),g+=w)}var O={title:y,backgroundColor:b,content:g};return v?Rc(v({datum:t.datum,parent:null===(o=t.parent)||void 0===o?void 0:o.datum,depth:t.depth,sizeKey:s,labelKey:l,colorKey:u,title:y,color:b,seriesId:p}),O):y||g?Rc(O):""},e.prototype.getLegendData=function(){return[]},e.className="TreemapSeries",e.type="treemap",wS([du(Gu(0))],e.prototype,"nodePadding",void 0),wS([du(Gu(0))],e.prototype,"nodeGap",void 0),wS([du(Tu)],e.prototype,"labelKey",void 0),wS([du(Pu)],e.prototype,"sizeKey",void 0),wS([du(Pu)],e.prototype,"colorKey",void 0),wS([du(Vu)],e.prototype,"colorDomain",void 0),wS([du(Lu)],e.prototype,"colorRange",void 0),wS([du(Pu)],e.prototype,"groupFill",void 0),wS([du(Iu)],e.prototype,"groupStroke",void 0),wS([du(ju(0))],e.prototype,"groupStrokeWidth",void 0),wS([du(Iu)],e.prototype,"tileStroke",void 0),wS([du(ju(0))],e.prototype,"tileStrokeWidth",void 0),wS([du(Ou)],e.prototype,"gradient",void 0),wS([du(xu)],e.prototype,"formatter",void 0),wS([du(Tu)],e.prototype,"colorName",void 0),wS([du(Tu)],e.prototype,"rootName",void 0),wS([du(Eu)],e.prototype,"highlightGroups",void 0),e}(bS),jS={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},BS={},VS={has:function(t){return Object.prototype.hasOwnProperty.call(jS,t)},isCartesian:function(t){return"cartesian"===jS[t]},isPolar:function(t){return"polar"===jS[t]},isHierarchy:function(t){return"hierarchy"===jS[t]},get seriesTypes(){return Object.keys(jS)},get cartesianTypes(){var t=this;return this.seriesTypes.filter((function(e){return t.isCartesian(e)}))},get polarTypes(){var t=this;return this.seriesTypes.filter((function(e){return t.isPolar(e)}))},get hierarchyTypes(){var t=this;return this.seriesTypes.filter((function(e){return t.isHierarchy(e)}))}};function HS(t,e){jS[t]=e}function zS(t,e){var r;BS[t]=od([null!==(r=BS[t])&&void 0!==r?r:{},e])}function US(t){var e;return null!==(e=BS[t])&&void 0!==e?e:{}}var WS={area:uC,bar:kC,column:FC,histogram:XC,line:rS,pie:Tg,scatter:gS,treemap:GS},KS={},XS={},YS={},qS={};function ZS(t,e,r,n,o,i){KS[t]=r,XS[t]=n,YS[t]=o,i&&tw(t,i),HS(t,e)}function JS(t,e){var r,n=null!==(r=KS[t])&&void 0!==r?r:WS[t];if(n)return new n(e);throw new Error("AG Charts - unknown series type: "+t)}function QS(t){return XS[t]}function $S(t){return YS[t]}function tw(t,e){qS[t]=e}function ew(t){return qS[t]}var rw={axes:[{type:ub.type,position:"left"},{type:hm.type,position:"bottom"}]},nw={axes:[{type:"number",position:"bottom"},{type:"category",position:"left"}]},ow={axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]};function iw(t,e){if(sw(t)&&sw(e)){var r={};return Object.keys(t).forEach((function(n){r[n]=n in e?iw(t[n],e[n]):t[n]})),Object.keys(e).forEach((function(n){n in t||(r[n]=e[n])})),r}return Array.isArray(t)&&!Array.isArray(e)||aw(t)&&!aw(e)?t:e}function aw(t){return t&&"object"===typeof t}function sw(t){return aw(t)&&t.constructor===Object}var lw=function(){return lw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},lw.apply(this,arguments)},uw=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},cw=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pw={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},dw=Symbol("extends-axes-defaults"),hw=Symbol("extends-axes-label-defaults"),fw=Symbol("extends-axes-line-defaults"),vw=Symbol("extends-series-defaults"),yw=Symbol("override-series-label-defaults"),gw=Symbol("default-font"),mw="bold",bw="inside",Cw="bottom",Sw=function(){function t(t){t=iw({},null!==t&&void 0!==t?t:{});var e=t.overrides,r=void 0===e?null:e,n=t.palette,o=void 0===n?null:n,i=this.createChartConfigPerChartType(this.getDefaults());if(r){var a=r.common,s=r.cartesian,l=r.polar,u=r.hierarchy,c=function(t,e,r){r&&(i[t]=iw(i[t],r),e.forEach((function(t){var e=t;i[e]=iw(i[e],r)})))};c("common",Object.keys(i),a),c("cartesian",VS.cartesianTypes,s),c("polar",VS.polarTypes,l),c("hierarchy",VS.hierarchyTypes,u),VS.seriesTypes.forEach((function(t){var e,n=t,o=r[n];o&&(o.series&&(o.series=(e={},e[n]=o.series,e)),i[n]=iw(i[n],o))}))}this.palette=null!==o&&void 0!==o?o:this.getPalette(),this.config=Object.freeze(i)}return t.prototype.getPalette=function(){return pw},t.getAxisDefaults=function(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:mw,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}},t.getSeriesDefaults=function(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}},t.getBarSeriesDefaults=function(){return lw(lw({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:bw},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})},t.getLineSeriesDefaults=function(){var t=this.getSeriesDefaults();return lw(lw({},t),{tooltip:lw(lw({},t.tooltip),{format:void 0,position:{type:"node"}})})},t.getAreaSeriesDefaults=function(){var t=this.getSeriesDefaults();return lw(lw({},t),{nodeClickRange:"nearest",tooltip:lw(lw({},t.tooltip),{position:{type:"node"}})})},t.getScatterSeriesDefaults=function(){var t=this.getSeriesDefaults();return lw(lw({},t),{tooltip:lw(lw({},t.tooltip),{position:{type:"node"}})})},t.getCartesianSeriesMarkerDefaults=function(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}},t.getCaptionWrappingDefaults=function(){return"hyphenate"},t.getChartDefaults=function(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:mw,fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:t.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:t.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:t.getCaptionWrappingDefaults()},legend:{position:Cw,spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}},t.prototype.createChartConfigPerChartType=function(t){var e=this,r={cartesian:VS.cartesianTypes,polar:VS.polarTypes,hierarchy:VS.hierarchyTypes,groupedCategory:[]};return Object.entries(r).forEach((function(r){var n=uw(r,2),o=n[0],i=n[1],a=o,s=e.templateTheme(US(a));i.forEach((function(e){var r=e;t[r]||(t[r]=iw({},t[a]),iw(t[r],s))}))})),t},t.prototype.getDefaults=function(){var e=this,r=iw({},t.defaults),n=function(t,r){var n=e.templateTheme(US(t));return n.series=r.reduce((function(t,r){var n=$S(r);return n&&(t[r]=e.templateTheme(n)),t}),{}),"cartesian"!==t&&"polar"!==t||(n.axes=wb.axesTypes.reduce((function(t,r){var n=Eb(r);return n&&(t[r]=e.templateTheme(n)),t}),{})),n},o={cartesian:n("cartesian",VS.cartesianTypes),groupedCategory:n("cartesian",VS.cartesianTypes),polar:n("polar",VS.polarTypes),hierarchy:n("hierarchy",VS.hierarchyTypes)};return iw(r,o)},t.prototype.templateTheme=function(t){var e=od([t]),r=this.getTemplateParameters(),n=r.extensions,o=r.properties;return ad(e,(function(t,e){var r,i;if(e["__extends__"]){var a=e["__extends__"],s=n.get(a);if(null==s)throw new Error("AG Charts - no template variable provided for: "+a);Object.keys(s).forEach((function(t){t in e||(e[t]=s[t])})),delete e["__extends__"]}if(e["__overrides__"]){a=e["__overrides__"];var l=n.get(a);if(null==l)throw new Error("AG Charts - no template variable provided for: "+a);Object.assign(e,l),delete e["__overrides__"]}try{for(var u=cw(Object.entries(e)),c=u.next();!c.done;c=u.next()){var p=uw(c.value,2),d=p[0],h=p[1];o.has(h)&&(e[d]=o.get(h))}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}),{}),e},t.prototype.getTemplateParameters=function(){var e=new Map;e.set(dw,t.getAxisDefaults()),e.set(hw,t.getAxisDefaults().label),e.set(fw,t.getAxisDefaults().line),e.set(vw,t.getSeriesDefaults()),e.set(yw,{});var r=new Map;return r.set(gw,t.fontFamily),{extensions:e,properties:r}},t.prototype.mergeWithParentDefaults=function(t,e){return iw(t,e)},t.fontFamily="Verdana, sans-serif",t.cartesianDefaults=lw(lw({},t.getChartDefaults()),{axes:{number:lw({},t.getAxisDefaults()),log:lw(lw({},t.getAxisDefaults()),{base:10}),category:lw(lw({},t.getAxisDefaults()),{groupPaddingInner:.1,label:lw(lw({},t.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:lw({},t.getAxisDefaults()),time:lw({},t.getAxisDefaults())},series:{column:lw({},t.getBarSeriesDefaults()),bar:lw({},t.getBarSeriesDefaults()),line:lw(lw({},t.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:lw(lw({},t.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:lw(lw({},t.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:lw({},t.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)"}}),area:lw(lw({},t.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:lw(lw({},t.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:lw(lw({},t.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}}),t.polarDefaults=lw(lw({},t.getChartDefaults()),{series:{pie:lw(lw({},t.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:t.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),t.hierarchyDefaults=lw(lw({},t.getChartDefaults()),{series:{treemap:lw(lw({},t.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}}),t.defaults={cartesian:t.cartesianDefaults,groupedCategory:t.cartesianDefaults,polar:t.polarDefaults,hierarchy:t.hierarchyDefaults},t}(),ww=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xw=function(){return xw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},xw.apply(this,arguments)},Ow=function(t){function e(e){return t.call(this,e)||this}return ww(e,t),e.prototype.getDefaults=function(){var r=this,n=e.fontColor,o=e.mutedFontColor,i={title:{color:n},label:{color:n},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},a={label:{color:n}},s={axes:{number:xw({},i),category:xw({},i),time:xw({},i)}},l={background:{fill:"rgb(34, 38, 41)"},title:{color:n},subtitle:{color:o},legend:{item:{label:{color:n}},pagination:{activeStyle:{fill:n},inactiveStyle:{fill:o},highlightStyle:{fill:n},label:{color:n}}}},u=function(t){return t.reduce((function(t,e){var n=$S(e);return n&&(t[e]=r.templateTheme(n)),t}),{})};return this.mergeWithParentDefaults(t.prototype.getDefaults.call(this),{cartesian:xw(xw(xw({},l),s),{series:xw({line:xw({},a),bar:xw({},a),column:xw({},a),histogram:xw({},a)},u(VS.cartesianTypes))}),groupedCategory:xw(xw(xw({},l),s),{series:xw({bar:xw({},a),column:xw({},a),histogram:xw({},a)},u(VS.cartesianTypes))}),polar:xw(xw({},l),{series:xw({pie:{calloutLabel:{color:n},sectorLabel:{color:n},title:{color:n},innerLabels:{color:n}}},u(VS.polarTypes))}),hierarchy:xw(xw({},l),{series:xw({treemap:{tileStroke:"white",groupStroke:"white",title:{color:n},subtitle:{color:o},labels:{large:{color:n},medium:{color:n},small:{color:n},value:{style:{color:n}}}}},u(VS.hierarchyTypes))})})},e.prototype.getTemplateParameters=function(){var r=t.prototype.getTemplateParameters.call(this);return r.extensions.set(yw,e.seriesLabelDefaults.label),r},e.fontColor="rgb(200, 200, 200)",e.mutedFontColor="rgb(150, 150, 150)",e.seriesLabelDefaults={label:{color:e.fontColor}},e}(Sw),Ew=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tw={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},Pw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ew(e,t),e.prototype.getPalette=function(){return Tw},e}(Sw),Dw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Aw={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]},Mw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dw(e,t),e.prototype.getPalette=function(){return Aw},e}(Ow),Rw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_w={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},kw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Rw(e,t),e.prototype.getPalette=function(){return _w},e}(Sw),Fw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Iw={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]},Lw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fw(e,t),e.prototype.getPalette=function(){return Iw},e}(Ow),Nw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gw={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},jw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nw(e,t),e.prototype.getPalette=function(){return Gw},e}(Sw),Bw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vw={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]},Hw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bw(e,t),e.prototype.getPalette=function(){return Vw},e}(Ow),zw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uw={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},Ww=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zw(e,t),e.prototype.getPalette=function(){return Uw},e}(Sw),Kw=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xw={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]},Yw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Kw(e,t),e.prototype.getPalette=function(){return Xw},e}(Ow),qw=function(){return qw=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},qw.apply(this,arguments)},Zw=function(){return new Sw},Jw=function(){return new Ow},Qw={undefined:Zw,null:Zw,"ag-default":Zw,"ag-material":function(){return new Pw},"ag-pastel":function(){return new kw},"ag-solar":function(){return new jw},"ag-vivid":function(){return new Ww}},$w={undefined:Jw,null:Jw,"ag-default-dark":Jw,"ag-material-dark":function(){return new Mw},"ag-pastel-dark":function(){return new Lw},"ag-solar-dark":function(){return new Hw},"ag-vivid-dark":function(){return new Yw}},tx=qw(qw({},$w),Qw);function ex(t){var e;if(t instanceof Sw)return t;var r=tx[t];if(r)return r();t=t;var n,o=[];while("object"===typeof t)o.push(null!==(e=t.overrides)&&void 0!==e?e:{}),t.palette&&null==n&&(n=t.palette),t=t.baseTheme;o.reverse();var i=qw({baseTheme:t,overrides:od(o)},n?{palette:n}:{});if(i.baseTheme||i.overrides){var a=ex(i.baseTheme);return new a.constructor(i)}return Zw()}var rx=function(){return rx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},rx.apply(this,arguments)},nx=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ox=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},ix=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},ax=["bar","column","area"],sx=["bar","column"];function lx(t){var e,r,n,o,i,a,s,l,u,c,p={},d={},h={},f="default-ag-charts-group",v=[];try{for(var y=nx(t),g=y.next();!g.done;g=y.next()){var m=g.value,b=null!==(i=m.type)&&void 0!==i?i:"line",C=ax.includes(b),S=sx.includes(b);if(C||S){var w=m,x=w.stacked,O=w.stackGroup,E=w.grouped,T=void 0===E?void 0:E,P=w.xKey,D=null!=O||!0===x;null!==(a=h[b])&&void 0!==a||(h[b]=!1),h[b]||(h[b]=D);var A=!0===T,M=[null!==O&&void 0!==O?O:!0===x?"stacked":void 0,A?"grouped":void 0].filter((function(t){return null!=t})).join("-");M||(M=f);var R=b+"-"+P+"-"+M;if(D&&C){var _=null!==(s=d[R])&&void 0!==s?s:d[R]={type:"stack",opts:[]};0===_.opts.length&&v.push(_),_.opts.push(m)}else if(A&&S){_=null!==(l=p[R])&&void 0!==l?l:p[R]={type:"group",opts:[]};0===_.opts.length&&v.push(_),_.opts.push(m)}else v.push({type:"ungrouped",opts:[m]})}else v.push({type:"ungrouped",opts:[m]})}}catch(N){e={error:N}}finally{try{g&&!g.done&&(r=y.return)&&r.call(y)}finally{if(e)throw e.error}}if(!Object.values(h).some((function(t){return t})))return v;try{for(var k=nx(Object.entries(p)),F=k.next();!F.done;F=k.next()){var I=ox(F.value,2),L=I[1];b=null!==(c=null===(u=L.opts[0])||void 0===u?void 0:u.type)&&void 0!==c?c:"line";!0===h[b]&&(L.type="stack")}}catch(G){n={error:G}}finally{try{F&&!F.done&&(o=k.return)&&o.call(k)}finally{if(n)throw n.error}}return v}var ux=function(){return[!0,"opts"].includes(ml("agChartsDebug"))};function cx(t,e){var r,n,o=[],i=e.map((function(t){var e;return"bar"!==t.type&&"column"!==t.type||null==t.yKey||t.stacked?t:rx(rx({},t),{grouped:null===(e=t.grouped)||void 0===e||e})})),a=lx(i),s=a.reduce((function(t,e){var r,n;if("ungrouped"===e.type)return t;var o=null!==(r=e.opts[0].type)&&void 0!==r?r:"line";return null!==(n=t[o])&&void 0!==n||(t[o]=0),t[o]+="stack"===e.type?1:e.opts.length,t}),{}),l={},u=function(t){var e,r,n,o,i,a,u,c,p=0,d=null!==(u=t.opts[0].type)&&void 0!==u?u:"line";if(null!==(c=l[d])&&void 0!==c||(l[d]=0),"stack"===t.type){try{for(var h=nx(t.opts),f=h.next();!f.done;f=h.next()){var v=f.value;v.seriesGrouping={groupIndex:l[d],groupCount:s[d],stackIndex:p++,stackCount:t.opts.length}}}catch(C){e={error:C}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}l[d]++}else if("group"===t.type)try{for(var y=nx(t.opts),g=y.next();!g.done;g=y.next()){v=g.value;v.seriesGrouping={groupIndex:l[d],groupCount:s[d],stackIndex:0,stackCount:0},l[d]++}}catch(S){n={error:S}}finally{try{g&&!g.done&&(o=y.return)&&o.call(y)}finally{if(n)throw n.error}}else try{for(var m=nx(t.opts),b=m.next();!b.done;b=m.next()){v=b.value;v.seriesGrouping=void 0}}catch(w){i={error:w}}finally{try{b&&!b.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}return t.opts};ux()&&ul.debug("processSeriesOptions() - series grouping: ",a);try{for(var c=nx(a),p=c.next();!p.done;p=c.next()){var d=p.value;switch(d.opts[0].type){case"column":case"bar":case"area":o.push.apply(o,ix([],ox(u(d))));break;case"line":default:d.opts.length>1&&ul.warn("unexpected grouping of series type: "+d.opts[0].type),o.push.apply(o,ix([],ox(d.opts)));break}}}catch(h){r={error:h}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return o}var px=function(){return px=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},px.apply(this,arguments)},dx=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hx=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},fx=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};function vx(t){var e,r,n,o;return null!==(o=null!==(e=t.type)&&void 0!==e?e:null===(n=null===(r=t.series)||void 0===r?void 0:r[0])||void 0===n?void 0:n.type)&&void 0!==o?o:"line"}function yx(t){var e=vx(t);return null==e||("cartesian"===e?(ul.warnOnce("type '"+e+"' is deprecated, use a series type instead"),!0):VS.isCartesian(e))}function gx(t){var e=vx(t);return null!=e&&("hierarchy"===e?(ul.warnOnce("type '"+e+"' is deprecated, use a series type instead"),!0):VS.isHierarchy(e))}function mx(t){var e=vx(t);return null!=e&&("polar"===e?(ul.warnOnce("type '"+e+"' is deprecated, use a series type instead"),!0):VS.isPolar(e))}function bx(t){return null!=t&&VS.has(t)}function Cx(t){return null!=t&&wb.has(t)}function Sx(t){var e,r,n=0;try{for(var o=dx(t),i=o.next();!i.done;i=o.next()){var a=i.value;a instanceof Array&&(n+=Sx(a)),null!=a&&n++}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n}function wx(t,e,r){for(var n=[],o=0;o<r;o++)n.push(e[(o+t.colourIndex)%e.length]);return n}var xx={avoidDeepClone:["data"]};function Ox(t,e){var r,n,o,i,a,s,l,u,c,p,d=od([e,t],xx);Ex(d);var h=d.type,f=vx(d),v=null!==(s=null===(a=d.tooltip)||void 0===a?void 0:a.position)&&void 0!==s?s:{},y=function(t){if(null!=t&&!bx(t)&&!QS(t))throw new Error("AG Charts - unknown series type: "+t+"; expected one of: "+VS.seriesTypes)};y(f);try{for(var g=dx(null!==(l=d.series)&&void 0!==l?l:[]),m=g.next();!m.done;m=g.next()){var b=m.value.type;null!=b&&y(b)}}catch(k){r={error:k}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}d=px(px({},d),{type:f});var C="line";yx(d)?C="line":gx(d)?C="treemap":mx(d)&&(C="pie");var S={},w=QS(f);w?S=w:"bar"===f?S=nw:"scatter"===f||"histogram"===f?S=ow:yx(d)&&(S=rw),kx(d);var x=Px(S,d),O=x.context,E=x.mergedOptions,T=x.axesThemes,P=x.seriesThemes;E.series=cx(E,(null!==(u=E.series)&&void 0!==u?u:[]).map((function(t){var e=C;t.type?e=t.type:bx(h)&&(e=h);var r=Tx(t,e,P,v);return"pie"===e&&Lx(P.pie,t,r),r}))).map((function(t){return Ax(O,t)}));var D=function(t){var e=Cx(t);return e||ul.warnOnce("AG Charts - unknown axis type: "+t+"; expected one of: "+wb.axesTypes+", ignoring."),e};if("axes"in E){var A=!0;try{for(var M=dx(null!==(c=E.axes)&&void 0!==c?c:[]),R=M.next();!R.done;R=M.next()){var _=R.value.type;D(_)||(A=!1)}}catch(F){o={error:F}}finally{try{R&&!R.done&&(i=M.return)&&i.call(M)}finally{if(o)throw o.error}}E.axes=A?null===(p=E.axes)||void 0===p?void 0:p.map((function(t){var e,r,n=t.type,o=od([T[n],null!==(r=T[n][null!==(e=t.position)&&void 0!==e?e:"unknown"])&&void 0!==r?r:{}]);return _x(t,o)})):S.axes,Fx(d,E)}return Ix(d,E),E}function Ex(t){var e={yKeys:"yKey",yNames:"yName"};Object.entries(e).forEach((function(e){var r,n=hx(e,2),o=n[0],i=n[1];(null===(r=t.series)||void 0===r?void 0:r.some((function(t){return null!=t[o]})))&&ul.warnOnce("property [series."+o+"] is deprecated, please use [series."+i+"] and multiple series instead.")}))}function Tx(t,e,r,n){var o,i,a=od([px({},n),null===(o=t.tooltip)||void 0===o?void 0:o.position],xx),s=od([null!==(i=r[e])&&void 0!==i?i:{},px(px({},t),{type:e,tooltip:px(px({},t.tooltip),{position:a})})],xx);return s}function Px(t,e){var r=Dx(e),n=r.theme,o=r.cleanedTheme,i=r.axesThemes,a=r.seriesThemes,s={colourIndex:0,palette:n.palette},l=od([t,o,e],xx);return{context:s,mergedOptions:l,axesThemes:i,seriesThemes:a}}function Dx(t){var e,r,n=ex(t.theme),o=n.config[null!==(e=vx(t))&&void 0!==e?e:"cartesian"],i=Object.entries(n.config).reduce((function(t,e){var r=hx(e,2),n=r[0],o=r[1].series;return t[n]=null===o||void 0===o?void 0:o[n],t}),{});return{theme:n,axesThemes:null!==(r=o["axes"])&&void 0!==r?r:{},seriesThemes:i,cleanedTheme:od([o,{axes:rd,series:rd}])}}function Ax(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=Rx(t,e),i={stacked:rd,grouped:rd};return od(fx(fx([],hx(r)),[o,e,i]),xx)}tw("pie",(function(t){var e=t.takeColors,r=t.colorsCount;return e(r)}));var Mx=function(t){var e=t.takeColors,r=e(1),n=hx(r.fills,1),o=n[0],i=hx(r.strokes,1),a=i[0];return{fill:o,stroke:a}};function Rx(t,e){var r,n=ew(e.type);if(!n)return{};var o=t.palette,i=o.fills,a=o.strokes,s=e,l=Sx(null!==(r=s["yKeys"])&&void 0!==r?r:[])||1,u=Math.max(i.length,a.length);return n({seriesCount:l,colorsCount:u,takeColors:function(e){var r={fills:wx(t,i,e),strokes:wx(t,a,e)};return t.colourIndex+=e,r}})}function _x(t,e){var r={top:rd,bottom:rd,left:rd,right:rd};if(t.crossLines){Array.isArray(t.crossLines)||(ul.warn("axis[].crossLines should be an array."),t.crossLines=[]);var n=e.crossLines;t.crossLines=t.crossLines.map((function(t){return od([n,t])}))}var o={crossLines:rd};return od([e,o,t,r],xx)}function kx(t){ad(t,(function(t,e){"enabled"in e&&!1===e.enabled&&Object.entries(e).forEach((function(t){var r=hx(t,1),n=r[0];"enabled"!==n&&delete e[n]}))}),{skip:["data","theme"]})}function Fx(t,e){var r,n,o,i;void 0===(null===(r=t.legend)||void 0===r?void 0:r.enabled)&&void 0===(null===(n=e.legend)||void 0===n?void 0:n.enabled)&&(null!==(o=e.legend)&&void 0!==o||(e.legend={}),(null!==(i=t.series)&&void 0!==i?i:[]).length>1?e.legend.enabled=!0:e.legend.enabled=!1)}function Ix(t,e){ad(t,(function(t,e,r){if(r){var n=r._enabledFromTheme;null!=n&&delete r._enabledFromTheme,"enabled"in r&&(n||null==e.enabled&&(r.enabled=!0))}}),{skip:["data","theme"]},e),ad(e,(function(t,e){null!=e._enabledFromTheme&&delete e._enabledFromTheme}),{skip:["data","theme"]})}function Lx(t,e,r){Array.isArray(e.innerLabels)?r.innerLabels=e.innerLabels.map((function(e){return od([t.innerLabels,e])})):r.innerLabels=rd}tw("area",Mx),tw("bar",Mx),tw("column",Mx),tw("histogram",Mx),tw("scatter",(function(t){var e=Mx(t),r=e.fill,n=e.stroke;return{marker:{fill:r,stroke:n}}})),tw("line",(function(t){var e=Mx(t),r=e.fill,n=e.stroke;return{stroke:r,marker:{fill:r,stroke:n}}}));var Nx=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gx=function(){function t(){this.destroyFns=[]}return t.prototype.destroy=function(){var t,e;try{for(var r=Nx(this.destroyFns),n=r.next();!n.done;n=r.next()){var o=n.value;o()}}catch(i){t={error:i}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t}(),jx=[];function Bx(t){var e=jx.find((function(e){return t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier}));if(e){if("enterprise"===t.packageType&&"community"===e.packageType){var r=jx.indexOf(e);jx.splice(r,1,t)}}else jx.push(t)}var Vx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},zx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fill="#f2f2f2",e._stroke="#999999",e._strokeWidth=1,e._lineCap="square",e._centerX=0,e._centerY=0,e._width=8,e._gripLineGap=2,e._gripLineLength=8,e._height=16,e}return Vx(e,t),Object.defineProperty(e.prototype,"centerX",{get:function(){return this._centerX},set:function(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this._centerY},set:function(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gripLineGap",{get:function(){return this._gripLineGap},set:function(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gripLineLength",{get:function(){return this._gripLineLength},set:function(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(){var t=this,e=t.centerX,r=t.centerY,n=t.width,o=t.height,i=e-n/2,a=r-o/2;return new Ls(i,a,n,o)},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e),n=this.computeBBox();return n.containsPoint(r.x,r.y)},e.prototype.updatePath=function(){var t=this,e=t.path,r=t.centerX,n=t.centerY,o=t.width,i=t.height;e.clear();var a=r-o/2,s=n-i/2,l=this.align(a),u=this.align(s),c=l+this.align(a,o),p=u+this.align(s,i);e.moveTo(l,u),e.lineTo(c,u),e.lineTo(c,p),e.lineTo(l,p),e.lineTo(l,u);var d=this.gripLineGap/2,h=this.gripLineLength/2;e.moveTo(this.align(r-d),this.align(n-h)),e.lineTo(this.align(r-d),this.align(n+h)),e.moveTo(this.align(r+d),this.align(n-h)),e.lineTo(this.align(r+d),this.align(n+h))},e.className="RangeHandle",Hx([du(Fu)],e.prototype,"_fill",void 0),Hx([du(Fu)],e.prototype,"_stroke",void 0),Hx([du(Gu(0))],e.prototype,"_strokeWidth",void 0),Hx([du(tc)],e.prototype,"_lineCap",void 0),Hx([du(Gu(0))],e.prototype,"_width",void 0),Hx([du(Gu(0))],e.prototype,"_gripLineGap",void 0),Hx([du(Gu(0))],e.prototype,"_gripLineLength",void 0),Hx([du(Gu(0))],e.prototype,"_height",void 0),e}(Dh),Ux=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wx=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Kx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._stroke="#999999",e._strokeWidth=1,e._fill="#999999",e._fillOpacity=.2,e._lineCap="square",e._x=0,e._y=0,e._width=200,e._height=30,e.minRange=.05,e._min=0,e._max=1,e}return Ux(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){var e;t=Math.min(Math.max(t,0),this.max-this.minRange),isNaN(t)||this._min!==t&&(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){var e;t=Math.max(Math.min(t,1),this.min+this.minRange),isNaN(t)||this._max!==t&&(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(){var t=this,e=t.x,r=t.y,n=t.width,o=t.height;return new Ls(e,r,n,o)},e.prototype.computeVisibleRangeBBox=function(){var t=this,e=t.x,r=t.y,n=t.width,o=t.height,i=t.min,a=t.max,s=e+n*i,l=e+n*a;return new Ls(s,r,l-s,o)},e.prototype.updatePath=function(){var t=this,e=t.path,r=t.x,n=t.y,o=t.width,i=t.height,a=t.min,s=t.max;e.clear();var l=this.align(r),u=this.align(n),c=l+this.align(r,o),p=u+this.align(n,i);e.moveTo(l,u),e.lineTo(c,u),e.lineTo(c,p),e.lineTo(l,p),e.lineTo(l,u);var d=this.align(r+o*a),h=this.align(r+o*s);e.moveTo(d,u),e.lineTo(d,p),e.lineTo(h,p),e.lineTo(h,u),e.lineTo(d,u)},e.className="RangeMask",Wx([du(Fu)],e.prototype,"_stroke",void 0),Wx([du(Gu(0))],e.prototype,"_strokeWidth",void 0),Wx([du(Fu)],e.prototype,"_fill",void 0),Wx([du(Gu(0,1))],e.prototype,"_fillOpacity",void 0),Wx([du(tc)],e.prototype,"_lineCap",void 0),Wx([du(Gu(0))],e.prototype,"_width",void 0),Wx([du(Gu(0))],e.prototype,"_height",void 0),Wx([du(Gu())],e.prototype,"_min",void 0),Wx([du(Gu())],e.prototype,"_max",void 0),e}(Dh),Xx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yx=function(){return Yx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Yx.apply(this,arguments)},qx=function(t){function e(){var r=t.call(this,{name:"rangeSelectorGroup"})||this;return r.minHandle=new zx,r.maxHandle=new zx,r.mask=function(){var t=e.defaults,n=t.x,o=t.y,i=t.width,a=t.height,s=t.min,l=t.max,u=new Kx;u.x=n,u.y=o,u.width=i,u.height=a,u.min=s,u.max=l;var c=r,p=c.minHandle,d=c.maxHandle;return p.centerX=n,d.centerX=n+i,p.centerY=d.centerY=o+a/2,r.append([u,p,d]),u.onRangeChange=function(){var t;r.updateHandles(),null===(t=r.onRangeChange)||void 0===t||t.call(r)},u}(),r._x=e.defaults.x,r._y=e.defaults.y,r._width=e.defaults.width,r._height=e.defaults.height,r._min=e.defaults.min,r._max=e.defaults.max,r.isContainerNode=!0,r}return Xx(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.mask.x},set:function(t){this.mask.x=t,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.mask.y},set:function(t){this.mask.y=t,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.mask.width},set:function(t){this.mask.width=t,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.mask.height},set:function(t){this.mask.height=t,this.updateHandles()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this.mask.min},set:function(t){this.mask.min=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.mask.max},set:function(t){this.mask.max=t},enumerable:!1,configurable:!0}),e.prototype.updateHandles=function(){var t=this,e=t.minHandle,r=t.maxHandle,n=t.x,o=t.y,i=t.width,a=t.height,s=t.mask;e.centerX=n+i*s.min,r.centerX=n+i*s.max,e.centerY=r.centerY=o+a/2},e.prototype.computeBBox=function(){return this.mask.computeBBox()},e.prototype.computeVisibleRangeBBox=function(){return this.mask.computeVisibleRangeBBox()},e.prototype.render=function(t){var e=t.ctx,r=t.forceRender,n=t.stats;if(this.dirty!==_s.NONE||r){this.computeTransformMatrix(),this.matrix.toContext(e);var o=this,i=o.mask,a=o.minHandle,s=o.maxHandle;[i,a,s].forEach((function(n){n.visible&&(r||n.dirty>_s.NONE)&&(e.save(),n.render(Yx(Yx({},t),{ctx:e,forceRender:r})),e.restore())})),this.markClean({force:!0}),n&&n.nodesRendered++}else n&&n.nodesSkipped++},e.className="Range",e.defaults={x:0,y:0,width:200,height:30,min:0,max:1},e}(yl),Zx=function(){function t(t){this.rm=t}return Object.defineProperty(t.prototype,"fill",{get:function(){return this.rm.fill},set:function(t){this.rm.fill=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.rm.stroke},set:function(t){this.rm.stroke=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.rm.strokeWidth},set:function(t){this.rm.strokeWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillOpacity",{get:function(){return this.rm.fillOpacity},set:function(t){this.rm.fillOpacity=t},enumerable:!1,configurable:!0}),t}(),Jx=function(){function t(t){this.rh=t}return Object.defineProperty(t.prototype,"fill",{get:function(){return this.rh.fill},set:function(t){this.rh.fill=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this.rh.stroke},set:function(t){this.rh.stroke=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this.rh.strokeWidth},set:function(t){this.rh.strokeWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.rh.width},set:function(t){this.rh.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.rh.height},set:function(t){this.rh.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gripLineGap",{get:function(){return this.rh.gripLineGap},set:function(t){this.rh.gripLineGap=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gripLineLength",{get:function(){return this.rh.gripLineLength},set:function(t){this.rh.gripLineLength=t},enumerable:!1,configurable:!0}),t}(),Qx=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$x=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},tO=function(t){function e(e){var r,n=t.call(this)||this;return n.ctx=e,n.rs=new qx,n.mask=new Zx(n.rs.mask),n.minHandle=new Jx(n.rs.minHandle),n.maxHandle=new Jx(n.rs.maxHandle),n.minHandleDragging=!1,n.maxHandleDragging=!1,n.panHandleOffset=NaN,n._enabled=!1,n.margin=10,n._visible=!0,n.rs.onRangeChange=function(){return n.ctx.zoomManager.updateZoom("navigator",{x:{min:n.rs.min,max:n.rs.max}})},[e.interactionManager.addListener("drag-start",(function(t){return n.onDragStart(t)})),e.interactionManager.addListener("drag",(function(t){return n.onDrag(t)})),e.interactionManager.addListener("hover",(function(t){return n.onDrag(t)})),e.interactionManager.addListener("drag-end",(function(){return n.onDragStop()}))].forEach((function(t){return n.destroyFns.push((function(){return e.interactionManager.removeListener(t)}))})),[e.layoutService.addListener("before-series",(function(t){return n.layout(t)})),e.layoutService.addListener("layout-complete",(function(t){return n.layoutComplete(t)}))].forEach((function(t){return n.destroyFns.push((function(){return e.layoutService.removeListener(t)}))})),null===(r=e.scene.root)||void 0===r||r.appendChild(n.rs),n.destroyFns.push((function(){var t;return null===(t=e.scene.root)||void 0===t?void 0:t.removeChild(n.rs)})),n.destroyFns.push((function(){return n.ctx.zoomManager.updateZoom("navigator")})),n.updateGroupVisibility(),n}return Qx(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.rs.width},set:function(t){this.rs.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.rs.height},set:function(t){this.rs.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this.rs.min},set:function(t){this.rs.min=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.rs.max},set:function(t){this.rs.max=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.updateGroupVisibility()},enumerable:!1,configurable:!0}),e.prototype.updateGroupVisibility=function(){var t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")},e.prototype.layout=function(t){var e=t.shrinkRect;if(this.enabled){var r=this.rs.height+this.margin;e.shrink(r,"bottom"),this.rs.y=e.y+e.height+this.margin}return{shrinkRect:e}},e.prototype.layoutComplete=function(t){var e=t.series,r=e.rect,n=e.visible;this.enabled&&n&&(this.rs.x=r.x,this.rs.width=r.width),this.visible=n},e.prototype.onDragStart=function(t){if(this.enabled){var e=t.offsetX,r=t.offsetY,n=this.rs,o=n.minHandle,i=n.maxHandle,a=n.x,s=n.width,l=n.min,u=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(o.containsPoint(e,r)?this.minHandleDragging=!0:i.containsPoint(e,r)?this.maxHandleDragging=!0:u.containsPoint(e,r)&&(this.panHandleOffset=(e-a)/s-l))}},e.prototype.onDrag=function(t){if(this.enabled){var e=this,r=e.rs,n=e.panHandleOffset,o=r.x,i=r.y,a=r.width,s=r.height,l=r.minHandle,u=r.maxHandle,c=t.offsetX,p=t.offsetY,d=o+a*r.min,h=o+a*r.max,f=new Ls(d,i,h-d,s),v=function(){return Math.min(Math.max((c-o)/a,0),1)};if(l.containsPoint(c,p)||u.containsPoint(c,p)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):f.containsPoint(c,p)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)r.min=v();else if(this.maxHandleDragging)r.max=v();else if(!isNaN(n)){var y=r.max-r.min,g=Math.min(v()-n,1-y);g<=r.min?(r.min=g,r.max=r.min+y):(r.max=g+y,r.min=r.max-y)}}},e.prototype.onDragStop=function(){this.stopHandleDragging()},e.prototype.stopHandleDragging=function(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN},$x([du(Ou)],e.prototype,"_enabled",void 0),$x([du(Gu(0))],e.prototype,"margin",void 0),e}(Gx),eO={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:tO,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}};Bx(eO);var rO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nO=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},oO=function(t){function e(e){var r,n=t.call(this)||this;n.onLayoutComplete=function(t){var e=t.chart,r=e.width,o=e.height;n.rectNode.width=r,n.rectNode.height=o},n.node=new yl({name:"background"}),n.node.zIndex=nc.SERIES_BACKGROUND_ZINDEX,n.rectNode=new dC,n.node.appendChild(n.rectNode),n.fill="white",n.visible=!0,null===(r=e.scene.root)||void 0===r||r.appendChild(n.node),n.destroyFns.push((function(){var t;return null===(t=e.scene.root)||void 0===t?void 0:t.removeChild(n.node)}));var o=e.layoutService.addListener("layout-complete",n.onLayoutComplete);return n.destroyFns.push((function(){return e.layoutService.removeListener(o)})),n}return rO(e,t),nO([du(Ou),ip("node","visible")],e.prototype,"visible",void 0),nO([du(Iu),ip("rectNode","fill")],e.prototype,"fill",void 0),e}(Gx),iO={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:oO};Bx(iO);var aO=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function sO(){var t,e,r,n,o,i;try{for(var a=aO(jx),s=a.next();!s.done;s=a.next()){var l=s.value;if(null!=Dg.constructors&&null!=l.optionConstructors&&Object.assign(Dg.constructors,l.optionConstructors),"root"===l.type&&l.themeTemplate)try{for(var u=(r=void 0,aO(l.chartTypes)),c=u.next();!c.done;c=u.next()){var p=c.value;zS(p,l.themeTemplate)}}catch(v){r={error:v}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if("series"===l.type){if(l.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+l.identifier);ZS(l.identifier,l.chartTypes[0],l.instanceConstructor,l.seriesDefaults,l.themeTemplate,l.paletteFactory)}if("axis-option"===l.type&&l.themeTemplate)try{for(var d=(o=void 0,aO(l.axisTypes)),h=d.next();!h.done;h=d.next()){var f=h.value;Ob(f,l.themeTemplate)}}catch(y){o={error:y}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}"axis"===l.type&&(Cb(l.identifier,l.instanceConstructor),l.themeTemplate&&Ob(l.identifier,l.themeTemplate)),"legend"===l.type&&wf(l.identifier,l.instanceConstructor)}}catch(g){t={error:g}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}}var lO=function(){return lO=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},lO.apply(this,arguments)},uO=function(t,e,r,n){function o(t){return t instanceof r?t:new r((function(e){e(t)}))}return new(r||(r=Promise))((function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n["throw"](t))}catch(e){i(e)}}function l(t){t.done?r(t.value):o(t.value).then(a,s)}l((n=n.apply(t,e||[])).next())}))},cO=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return l([t,e])}}function l(i){if(r)throw new TypeError("Generator is already executing.");while(a)try{if(r=1,n&&(o=2&i[0]?n["return"]:i[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},pO=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},dO=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},hO=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function fO(t){if(yx(t))return"cartesian";if(mx(t))return"polar";if(gx(t))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+t.type)}var vO=function(){function t(){}return t.create=function(t){return gO.createOrUpdate(t)},t.update=function(t,e){if(!yO.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");gO.createOrUpdate(e,t)},t.updateDelta=function(t,e){if(!yO.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");return gO.updateUserDelta(t,e)},t.download=function(t,e){if(!(t instanceof yO))throw new Error("AG Charts - invalid chart reference passed");return gO.download(t,e)},t.getImageDataURL=function(t,e){if(!(t instanceof yO))throw new Error("AG Charts - invalid chart reference passed");return gO.getImageDataURL(t,e)},t}(),yO=function(){function t(t){this.chart=t}return t.isInstance=function(e){var r,n;if(e instanceof t)return!0;if("AgChartInstanceProxy"===(null===(r=e.constructor)||void 0===r?void 0:r.name)&&null!=e.chart)return!0;var o=Object.keys(null===(n=e.constructor)||void 0===n?void 0:n.prototype),i=Object.keys(t.prototype).every((function(t){return o.includes(t)}));return!(!i||null==e.chart)},t.prototype.getOptions=function(){return this.chart.getOptions()},t.prototype.destroy=function(){this.chart.destroy()},t}(),gO=function(){function t(){}return t.initialiseModules=function(){t.initialised||(sO(),t.initialised=!0)},t.createOrUpdate=function(e,r){var n=this;t.initialiseModules(),mO(">>> AgChartV2.createOrUpdate() user options",e);var o={};!0===t.DEBUG()&&(o["debug"]=!0);var i=e.overrideDevicePixelRatio;delete e["overrideDevicePixelRatio"];var a=Ox(e,o),s=null===r||void 0===r?void 0:r.chart;null!=s&&fO(e)===fO(s.processedOptions)||(s=t.createChartInstance(a,i,s)),null==r?r=new yO(s):r.chart=s;var l=s;l.queuedUserOptions.push(e);var u=function(){var t=l.queuedUserOptions.indexOf(e);l.queuedUserOptions.splice(0,t)};return l.requestFactoryUpdate((function(){return uO(n,void 0,void 0,(function(){var r;return cO(this,(function(n){switch(n.label){case 0:return l.destroyed?[2]:(r=ed(l.processedOptions,a),null==r?(u(),[2]):[4,t.updateDelta(l,r,e)]);case 1:return n.sent(),u(),[2]}}))}))})),r},t.updateUserDelta=function(e,r){var n,o=e.chart,i=e.chart.queuedUserOptions,a=null!==(n=i[i.length-1])&&void 0!==n?n:o.userOptions,s=od([a,r]);mO(">>> AgChartV2.updateUserDelta() user delta",r),mO("AgChartV2.updateUserDelta() - base options",a),t.createOrUpdate(s,e)},t.download=function(e,r){var n=this,o=function(){return uO(n,void 0,void 0,(function(){var n,o;return cO(this,(function(i){switch(i.label){case 0:return[4,t.prepareResizedChart(e,r)];case 1:return n=i.sent(),o=n.chart,o.scene.download(null===r||void 0===r?void 0:r.fileName,null===r||void 0===r?void 0:r.fileFormat),n!==e&&n.destroy(),[2]}}))}))};o().catch((function(t){return ul.errorOnce(t)}))},t.getImageDataURL=function(e,r){return uO(this,void 0,void 0,(function(){var n,o,i;return cO(this,(function(a){switch(a.label){case 0:return[4,t.prepareResizedChart(e,r)];case 1:return n=a.sent(),o=n.chart,i=o.scene.canvas.getDataURL(null===r||void 0===r?void 0:r.fileFormat),n!==e&&n.destroy(),[2,i]}}))}))},t.prepareResizedChart=function(e,r){return uO(this,void 0,void 0,(function(){var n,o,i,a,s,l,u,c,p;return cO(this,(function(d){switch(d.label){case 0:return n=e.chart,o=null!==r&&void 0!==r?r:{},i=o.width,a=o.height,s=n.width,l=n.height,u=void 0===i&&void 0===a||1===n.scene.canvas.pixelRatio&&s===i&&l===a,u?[2,e]:(i=null!==i&&void 0!==i?i:s,a=null!==a&&void 0!==a?a:l,c=lO(lO({},n.userOptions),{container:document.createElement("div"),width:i,height:a,autoSize:!1,overrideDevicePixelRatio:1}),p=t.createOrUpdate(c),[4,p.chart.waitForUpdate()]);case 1:return d.sent(),[2,p]}}))}))},t.createChartInstance=function(t,e,r){var n=null===r||void 0===r?void 0:r.destroy({keepTransferableResources:!0});if(yx(t))return new Bm(document,e,n);if(gx(t))return new $m(document,e,n);if(mx(t))return new qm(document,e,n);throw new Error("AG Charts - couldn't apply configuration, check type of options: "+t["type"])},t.updateDelta=function(t,e,r){var n;return uO(this,void 0,void 0,(function(){return cO(this,(function(o){switch(o.label){case 0:return null==e.type&&(e=lO(lO({},e),{type:null!==(n=t.processedOptions.type)&&void 0!==n?n:vx(e)})),[4,t.awaitUpdateCompletion()];case 1:return o.sent(),t.destroyed?[2]:(mO("AgChartV2.updateDelta() - applying delta",e),bO(t,e,r),[2])}}))}))},t.DEBUG=function(){var t;return null!==(t=ml("agChartsDebug"))&&void 0!==t&&t},t.initialised=!1,t}();function mO(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];[!0,"opts"].includes(gO.DEBUG())&&ul.debug.apply(ul,dO([t],pO(e)))}function bO(t,e,r){var n,o,i,a,s=od([null!==(n=t.processedOptions)&&void 0!==n?n:{},e],xx),l=CO(t,s),u=["type","data","series","listeners","theme","legend"];if(yx(e)||mx(e))u.push("axes");else if(!gx(e))throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+e["type"]);e.listeners&&PO(t,e.listeners),DO(t,e,{skip:u});var c=!1;if(e.series&&e.series.length>0&&(SO(t,e),c=!0),"axes"in e&&Array.isArray(e.axes)){var p=wO(t,e);p&&(c=!0)}xO(t,e);var d=e.series,h=!!e.data||(null===d||void 0===d?void 0:d.some((function(t){return null!=t.data}))),f=null!==(i=null!==(o=e.legend)&&void 0!==o?o:e.title)&&void 0!==i?i:e.subtitle;c=c||h||!!f,e.data&&(t.data=e.data),e.listeners&&t.updateAllSeriesListeners(),t.processedOptions=s,t.userOptions=od([null!==(a=t.userOptions)&&void 0!==a?a:{},r],xx);var v=c||l,y=v?ih.PROCESS_DATA:ih.PERFORM_LAYOUT;mO("AgChartV2.applyChartOptions() - update type",ih[y]),t.update(y,{forceNodeDataRefresh:c})}function CO(t,e){var r,n,o=function(e){return t instanceof Bm&&e.chartTypes.includes("cartesian")||t instanceof qm&&e.chartTypes.includes("polar")||t instanceof $m&&e.chartTypes.includes("hierarchy")},i=!1,a=jx.filter((function(t){return"root"===t.type}));try{for(var s=hO(a),l=s.next();!l.done;l=s.next()){var u=l.value,c=o(u)&&null!=e[u.optionsKey],p=t.isModuleEnabled(u);c!==p&&(i=!0,c?t.addModule(u):t.removeModule(u))}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}function SO(t,e){var r=e.series;if(r){var n=t.series.length===r.length&&t.series.every((function(t,e){var n;return t.type===(null===(n=r[e])||void 0===n?void 0:n.type)}));n?t.series.forEach((function(e,n){var o,i,a,s,l=null!==(a=null===(i=null===(o=t.processedOptions)||void 0===o?void 0:o.series)||void 0===i?void 0:i[n])&&void 0!==a?a:{},u=ed(l,null!==(s=r[n])&&void 0!==s?s:{});u&&(mO("AgChartV2.applySeries() - applying series diff idx "+n,u),AO(e,u,{path:"series["+n+"]",index:n}),e.markNodeDataDirty())})):t.series=OO(t,r)}}function wO(t,e){var r=e.axes;if(!r)return!1;var n=t.axes.length===r.length&&t.axes.every((function(t,e){return t.type===r[e].type}));if(n){var o=t.processedOptions;if(yx(o))return t.axes.forEach((function(t,e){var n,i,a=null!==(i=null===(n=o.axes)||void 0===n?void 0:n[e])&&void 0!==i?i:{},s=ed(a,r[e]);mO("AgChartV2.applyAxes() - applying axis diff idx "+e,s);var l="axes["+e+"]",u=["axes[].type"];DO(t,s,{path:l,skip:u})})),!0}return t.axes=EO(t,r),!0}function xO(t,e){var r=["listeners"];t.setLegendInit((function(n){var o,i,a,s;DO(n,null!==(o=e.legend)&&void 0!==o?o:{},{skip:r}),(null===(i=e.legend)||void 0===i?void 0:i.listeners)&&Object.assign(null===(a=t.legend)||void 0===a?void 0:a.listeners,null!==(s=e.legend.listeners)&&void 0!==s?s:{})}))}function OO(t,e){var r,n,o,i=[],a=t.getModuleContext(),s=0;try{for(var l=hO(null!==e&&void 0!==e?e:[]),u=l.next();!u.done;u=l.next()){var c=u.value,p="series["+s+++"]",d=JS(null!==(o=c.type)&&void 0!==o?o:"unknown",a);AO(d,c,{path:p,index:s}),i.push(d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i}function EO(t,e){var r,n,o=[],i=["axes[].type"],a=t.getModuleContext(),s=0;try{for(var l=hO(null!==e&&void 0!==e?e:[]),u=l.next();!u.done;u=l.next()){var c=u.value,p=Sb(c.type,a),d="axes["+s+++"]";TO(p,c),DO(p,c,{path:d,skip:i}),o.push(p)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o}function TO(t,e){var r,n,o=!1,i=jx.filter((function(t){return"axis-option"===t.type}));try{for(var a=hO(i),s=a.next();!s.done;s=a.next()){var l=s.value,u=null!=e[l.optionsKey],c=t.isModuleEnabled(l);u!==c&&(o=!0,u?t.addModule(l):t.removeModule(l))}}catch(p){r={error:p}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function PO(t,e){for(var r in t.clearEventListeners(),e){var n=e[r];"function"===typeof n&&t.addEventListener(r,n)}}function DO(t,e,r){var n=void 0===r?{}:r,o=n.skip,i=n.path,a=lO(lO(lO({},Rg()),{skip:o}),i?{path:i}:{});return id(t,e,a)}function AO(t,e,r){var n,o,i=void 0===r?{}:r,a=i.path,s=i.index,l=["series[].listeners","series[].seriesGrouping"],u=Rg(),c=null!==(n=u.constructors)&&void 0!==n?n:{},p={constructors:lO(lO({},c),{title:"pie"===t.type?wg:c["title"]})},d=lO(lO(lO(lO(lO({},u),p),{skip:dO(["series[].type"],pO(null!==l&&void 0!==l?l:[]))}),a?{path:a}:{}),{idx:null!==s&&void 0!==s?s:-1}),h=id(t,e,d),f=null===e||void 0===e?void 0:e.listeners;null!=f&&PO(t,f);var v=e.seriesGrouping;if("seriesGrouping"in(null!==e&&void 0!==e?e:{}))if(v){var y=Object.freeze(lO(lO({},null!==(o=t.seriesGrouping)&&void 0!==o?o:{}),v));t.seriesGrouping=y}else t.seriesGrouping=v;return h}var MO,RO="8.2.1",_O=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kO=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};(function(t){t[t["Open"]=0]="Open",t[t["Chord"]=1]="Chord",t[t["Round"]=2]="Round"})(MO||(MO={}));var FO=function(t){function e(){var e=t.call(this)||this;return e.centerX=0,e.centerY=0,e.radius=10,e.startAngle=0,e.endAngle=2*Math.PI,e.counterClockwise=!1,e.type=MO.Open,e.restoreOwnStyles(),e}return _O(e,t),Object.defineProperty(e.prototype,"fullPie",{get:function(){return Zy(Al(this.startAngle),Al(this.endAngle))},enumerable:!1,configurable:!0}),e.prototype.updatePath=function(){var t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===MO.Chord?t.closePath():this.type!==MO.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())},e.prototype.computeBBox=function(){return new Ls(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)},e.prototype.isPointInPath=function(t,e){var r=this.transformPoint(t,e),n=this.computeBBox();return this.type!==MO.Open&&n.containsPoint(r.x,r.y)&&this.path.isPointInPath(r.x,r.y)},e.className="Arc",e.defaultStyles=Object.assign({},Nl.defaultStyles,{lineWidth:1,fillStyle:null}),kO([Ph()],e.prototype,"centerX",void 0),kO([Ph()],e.prototype,"centerY",void 0),kO([Ph()],e.prototype,"radius",void 0),kO([Ph()],e.prototype,"startAngle",void 0),kO([Ph()],e.prototype,"endAngle",void 0),kO([Ph()],e.prototype,"counterClockwise",void 0),kO([Ph()],e.prototype,"type",void 0),e}(Dh),IO=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LO=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};(function(t){function e(e){var r=t.call(this)||this;return r.x=0,r.y=0,r.width=0,r.height=0,r.opacity=1,r.sourceImage=e,r}IO(e,t),e.prototype.render=function(e){var r=e.ctx,n=e.forceRender,o=e.stats;if(this.dirty!==_s.NONE||n){this.computeTransformMatrix(),this.matrix.toContext(r);var i=this.sourceImage;r.globalAlpha=this.opacity,r.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height),t.prototype.render.call(this,e)}else o&&o.nodesSkipped++},LO([Us({redraw:_s.MAJOR})],e.prototype,"x",void 0),LO([Us({redraw:_s.MAJOR})],e.prototype,"y",void 0),LO([Us({redraw:_s.MAJOR})],e.prototype,"width",void 0),LO([Us({redraw:_s.MAJOR})],e.prototype,"height",void 0),LO([Us({redraw:_s.MAJOR})],e.prototype,"opacity",void 0)})(el);var NO=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},GO=Object.entries(tx).reduce((function(t,e){var r=NO(e,2),n=r[0],o=r[1];return t[n]=o(),t}),{}),jO=["area","bar","column","histogram","line","pie","scatter"];function BO(t){switch(t){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var VO=["number","category","groupedCategory","log","time"];function HO(t){switch(t){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","groupedCategory"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["groupedCategory","number"];case"scatter":case"bubble":return["number","number"];default:return}}var zO=function(){return zO=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},zO.apply(this,arguments)};function UO(t,e){var r,n=t.chartOptionsToRestore,o=t.chartPaletteToRestore,i=t.chartThemeToRestore,s=ZO(t),l=KO(s),u=l?{baseTheme:s}:null!==(r=JO(t,s))&&void 0!==r?r:{},c=t.getGridOptionsChartThemeOverrides(),p=t.apiChartThemeOverrides,d=BO(t.chartType),h="pie"===d?"polar":"cartesian",f=t.crossFiltering?XO(e,t,h):void 0,v=zO({},null!==n&&void 0!==n?n:{}),y=function(){var t=function(t){return!!t&&Object.keys(t).some((function(e){return a["Bb"].get(t[e],"title.enabled",!1)}))};return t(c)||t(p)},g=[l?qO(t,y()):void 0,f,c,p,v],m=g.filter((function(t){return!!t})).reduce((function(t,e){return{baseTheme:t,overrides:e}}),u);if(o&&s===i){var b=ex(u).palette;WO(o,b)||(m.palette=o)}return m}function WO(t,e){var r=function(t,e){return t.length===e.length&&t.every((function(t,r){return t===e[r]}))};return r(t.fills,e.fills)&&r(t.strokes,e.strokes)}function KO(t){return a["Bb"].includes(Object.keys(GO),t)}function XO(t,e,r){var n,o={listeners:{legendItemClick:function(e){var r=t.getChart();r.series.forEach((function(t){t.toggleSeriesItem(e.itemId,e.enabled),t.toggleSeriesItem(e.itemId+"-filtered-out",e.enabled)}))}}},i={};return"polar"===r&&(i.pie={tooltip:{renderer:function(t){var e=t.angleName,r=t.datum,n=t.calloutLabelKey,o=t.radiusKey,i=t.angleValue,a=e,s=r[n],l=r[o],u=i;return{title:a,content:s+": "+u*l}}}}),n={},n[r]={tooltip:{delay:500},legend:o,listeners:{click:function(t){return e.crossFilterCallback(t,!0)}},series:i},n}var YO=VO.reduce((function(t,e){var r;return zO(zO({},t),(r={},r[e]={title:{_enabledFromTheme:!0}},r))}),{});function qO(t,e){var r=t.getExtraPaddingDirections();return{common:{axes:YO,padding:{top:!e&&r.includes("top")?40:20,right:r.includes("right")?30:20,bottom:r.includes("bottom")?40:20,left:r.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function ZO(t){var e=t.getChartThemeName(),r=t.getChartThemes();return a["Bb"].includes(r,e)||(e=r[0]),e}function JO(t,e){var r=t.customChartThemes,n=r&&r[e];return n||console.warn("AG Grid: no stock theme exists with the name '"+e+"' and no custom chart theme with that name was supplied to 'customChartThemes'"),n}var QO=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},$O=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},tE=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eE=function(t){return function(e){return void 0===e||t(e)}},rE=function(t){return"string"===typeof t},nE=function(t){return"boolean"===typeof t},oE=function(t){return"object"===typeof t},iE=function(t,e){return function(r){return"AG Grid - unable to update chart as invalid params supplied:  `"+t+": "+r+"`, expected "+e+"."}},aE=function(){function t(){}return t.validateChartParams=function(e){var r=e;switch(r.type){case"rangeChartUpdate":return t.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return t.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return t.validateUpdateCrossFilterChartParams(e);default:return console.warn("AG Grid - Invalid value supplied for 'type': "+e.type+". It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1}},t.validateUpdateRangeChartParams=function(e){var r=$O($O($O([],QO(t.commonValidations)),QO(t.cellRangeValidations)),[{property:"seriesChartTypes",validationFn:function(t){return void 0===t||Array.isArray(t)&&t.every(oE)},warnMessage:iE("seriesChartTypes","Array of SeriesChartType")}]);return t.validateProperties(e,r,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")},t.validateUpdatePivotChartParams=function(e){var r=$O([],QO(t.commonValidations));return t.validateProperties(e,r,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")},t.validateUpdateCrossFilterChartParams=function(e){var r=$O($O([],QO(t.commonValidations)),QO(t.cellRangeValidations));return t.validateProperties(e,r,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")},t.validateProperties=function(t,e,r,n){var o,i;try{for(var a=tE(e),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.property,c=l.validationFn,p=l.warnMessage;if(u in t){var d=t[u];if(!c(d))return console.warn(p(d)),!1}}}catch(h){o={error:h}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}for(var u in t)if(!r.includes(u))return console.warn("AG Grid - Unexpected property supplied. "+n+" does not contain: `"+u+"`."),!1;return!0},t.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","doughnut","area","stackedArea","normalizedArea","histogram","columnLineCombo","areaColumnCombo","customCombo"],t.validateChartType=eE((function(e){return t.validChartTypes.includes(e)})),t.validateAgChartThemeOverrides=eE((function(t){return"object"===typeof t})),t.validateChartParamsCellRange=eE((function(t){return"object"===typeof t})),t.validateAggFunc=eE((function(t){return"string"===typeof t||"function"===typeof t})),t.commonValidations=[{property:"chartId",validationFn:rE,warnMessage:iE("chartId","string")},{property:"chartType",validationFn:t.validateChartType,warnMessage:iE("chartType",t.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:rE,warnMessage:iE("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:t.validateAgChartThemeOverrides,warnMessage:iE("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:nE,warnMessage:iE("unlinkChart","boolean")}],t.cellRangeValidations=[{property:"cellRange",validationFn:t.validateChartParamsCellRange,warnMessage:iE("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:nE,warnMessage:iE("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:t.validateAggFunc,warnMessage:iE("aggFunc","string or IAggFunc")}],t}(),sE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lE=function(){return lE=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},lE.apply(this,arguments)},uE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},cE=["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"],pE=function(t){function e(e){var r=t.call(this)||this;return r.model=e,r}return sE(e,t),e.prototype.init=function(){var t=this;this.setChartRange(),this.addManagedListener(this.eventService,a["R"].EVENT_RANGE_SELECTION_CHANGED,(function(e){e.id&&e.id===t.model.chartId&&t.updateForRangeChange()})),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},e.prototype.update=function(t){var e,r,n,o,i,a,s;if(!this.validUpdateType(t)||!aE.validateChartParams(t))return!1;var l=t.chartId,u=t.chartType,c=t.chartThemeName,p=t.unlinkChart,d={chartId:l,pivotChart:this.model.pivotChart,chartType:null!==u&&void 0!==u?u:this.model.chartType,chartThemeName:null!==c&&void 0!==c?c:this.model.chartThemeName,unlinkChart:null!==p&&void 0!==p?p:this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1},h=lE({},d);switch(t.type){case"rangeChartUpdate":h.cellRange=null!==(e=this.createCellRange(t))&&void 0!==e?e:this.model.suppliedCellRange,h.aggFunc=null!==(r=t.aggFunc)&&void 0!==r?r:this.model.aggFunc,h.seriesChartTypes=t.seriesChartTypes,h.suppressChartRanges=null!==(n=t.suppressChartRanges)&&void 0!==n?n:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":h.cellRange=null!==(o=this.createCellRange(t))&&void 0!==o?o:this.model.suppliedCellRange,h.aggFunc=null!==(i=t.aggFunc)&&void 0!==i?i:this.model.aggFunc,h.crossFiltering=!0,h.suppressChartRanges=null!==(a=t.suppressChartRanges)&&void 0!==a?a:this.model.suppressChartRanges;break}this.model.updateModel(h);var f=h.unlinkChart||h.suppressChartRanges;return f?null===(s=this.rangeService)||void 0===s||s.setCellRanges([]):this.setChartRange(),!0},e.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())},e.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())},e.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},e.prototype.updateForPanelChange=function(t){this.model.updateCellRanges(t),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},e.prototype.getChartUpdateParams=function(t){var e=this.getSelectedValueColState(),r=e.map((function(t){return{colId:t.colId,displayName:t.displayName}})),n=this.getChartData(),o=this.getSelectedDimension();return{data:n,grouping:this.isGrouping(),category:{id:o.colId,name:o.displayName,chartDataType:this.model.getChartDataType(o.colId)},fields:r,chartId:this.getChartId(),getCrossFilteringContext:function(){return{lastSelectedChartId:"xxx"}},seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:t}},e.prototype.getChartModel=function(){var t=this.model.pivotChart?"pivot":"range",e=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:t,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:e}},e.prototype.getChartId=function(){return this.model.chartId},e.prototype.getChartData=function(){return this.model.chartData},e.prototype.getChartType=function(){return this.model.chartType},e.prototype.setChartType=function(t){this.model.chartType=t,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},e.prototype.setChartThemeName=function(t){this.model.chartThemeName=t,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},e.prototype.getChartThemeName=function(){return this.model.chartThemeName},e.prototype.isPivotChart=function(){return this.model.pivotChart},e.prototype.isPivotMode=function(){return this.model.isPivotMode()},e.prototype.isGrouping=function(){return this.model.isGrouping()},e.prototype.isCrossFilterChart=function(){return this.model.crossFiltering},e.prototype.getThemes=function(){return this.gridOptionsService.get("chartThemes")||cE},e.prototype.getPalettes=function(){var t=this,e=this.getThemes();return e.map((function(e){var r=KO(e),n=r?e:t.chartProxy.lookupCustomChartTheme(e);return ex(n).palette}))},e.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},e.prototype.getSelectedValueColState=function(){return this.getValueColState().filter((function(t){return t.selected}))},e.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},e.prototype.displayNameMapper=function(t){var e=this.model.columnNames[t.colId];return t.displayName=e?e.join(" - "):this.model.getColDisplayName(t.column),t},e.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},e.prototype.setChartRange=function(t){void 0===t&&(t=!1),!this.rangeService||this.model.suppressChartRanges||this.model.unlinked||this.rangeService.setCellRanges(this.getCellRanges()),t||this.raiseChartModelUpdateEvent()},e.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},e.prototype.setChartProxy=function(t){this.chartProxy=t},e.prototype.getChartProxy=function(){return this.chartProxy},e.prototype.isActiveXYChart=function(){return a["Bb"].includes(["scatter","bubble"],this.getChartType())},e.prototype.isChartLinked=function(){return!this.model.unlinked},e.prototype.customComboExists=function(){var t=this.model.comboChartModel.savedCustomSeriesChartTypes;return t&&t.length>0},e.prototype.getSeriesChartTypes=function(){return this.model.comboChartModel.seriesChartTypes},e.prototype.isComboChart=function(){return this.model.isComboChart()},e.prototype.updateSeriesChartType=function(t,r,n){var o=this.model.comboChartModel.seriesChartTypes.find((function(e){return e.colId===t}));if(o){var i="customCombo"!==this.model.chartType;i&&(this.model.chartType="customCombo");var a=o.chartType;null!=r&&(o.chartType=r),null!=n&&(o.secondaryAxis=n),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),i&&this.dispatchEvent({type:e.EVENT_CHART_TYPE_CHANGED}),a!==r&&this.dispatchEvent({type:e.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}},e.prototype.getActiveSeriesChartTypes=function(){var t=this.getSelectedValueColState().map((function(t){return t.colId}));return this.getSeriesChartTypes().filter((function(e){return t.includes(e.colId)}))},e.prototype.getChartSeriesTypes=function(){var t=["line","column","area"];return this.isComboChart()?t:[BO(this.getChartType())]},e.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter((function(t){return t}))},e.prototype.createCellRange=function(t){var e;return t.cellRange&&(null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange))},e.prototype.validUpdateType=function(t){var e,r=this;if(!t.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;var n={"Range Chart":function(){return!r.isPivotChart()&&!r.isCrossFilterChart()},"Pivot Chart":function(){return r.isPivotChart()},"Cross Filter Chart":function(){return r.isCrossFilterChart()}},o=null!==(e=Object.keys(n).find((function(t){return n[t]()})))&&void 0!==e?e:"Range Chart",i=t.type===""+o[0].toLowerCase()+o.slice(1).replace(/ /g,"")+"Update";return i||console.warn("AG Grid - Unable to update chart as a '"+t.type+"' update type is not permitted on a "+o+"."),i},e.prototype.getCellRangeParams=function(){var t=this.getCellRanges(),e=t[0],r=e&&e.startRow||null,n=e&&e.endRow||null;return{rowStartIndex:r&&r.rowIndex,rowStartPinned:r&&r.rowPinned,rowEndIndex:n&&n.rowIndex,rowEndPinned:n&&n.rowPinned,columns:t.reduce((function(t,e){return t.concat(e.columns.map((function(t){return t.getId()})))}),[])}},e.prototype.raiseChartModelUpdateEvent=function(){var t={type:e.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(t)},e.prototype.raiseChartUpdatedEvent=function(){var t={type:e.EVENT_CHART_UPDATED};this.dispatchEvent(t)},e.prototype.raiseChartApiUpdateEvent=function(){var t={type:e.EVENT_CHART_API_UPDATE};this.dispatchEvent(t)},e.prototype.raiseChartOptionsChangedEvent=function(){var t=this.getChartModel(),e=t.chartId,r=t.chartType,n={type:a["R"].EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:r,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(n)},e.prototype.raiseChartRangeSelectionChangedEvent=function(){var t={type:a["R"].EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},e.EVENT_CHART_UPDATED="chartUpdated",e.EVENT_CHART_API_UPDATE="chartApiUpdate",e.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",e.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",e.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",uE([Object(a["u"])("rangeService")],e.prototype,"rangeService",void 0),uE([a["fb"]],e.prototype,"init",null),e}(a["z"]),dE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},fE=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},vE=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},yE=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gE={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},mE=function(t){function e(r,n){var o=t.call(this,e.TEMPLATE)||this;return o.chartController=r,o.chartOptionsService=n,o.columnComps=new Map,o}return dE(e,t),e.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,pE.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,pE.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()},e.prototype.destroy=function(){this.clearComponents(),t.prototype.destroy.call(this)},e.prototype.updatePanels=function(){var t,e,r=this,n=this.chartType,o=this.chartController.getColStateForMenu(),i=o.dimensionCols,s=o.valueCols,l=i.map((function(t){return t.colId})).concat(s.map((function(t){return t.colId})));this.chartType=this.chartController.getChartType();var u=this.getGroupExpandedState();if(a["Bb"].areEqual(a["Bb"].keys(this.columnComps),l)&&this.chartType===n){if(vE(vE([],fE(i)),fE(s)).forEach((function(t){r.columnComps.get(t.colId).setValue(t.selected,!0)})),this.chartController.isActiveXYChart()){var c=this.generateGetSeriesLabel();s.forEach((function(t){r.columnComps.get(t.colId).setLabel(c(t))}))}a["Bb"].removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);var p=null===(t=this.getDataPanelDef().groups)||void 0===t?void 0:t.reduce((function(t,e,r){var n=e.type;return"seriesChartType"===n?r:t}),-1);-1!==p&&this.createSeriesChartTypeGroup(s,p)}else this.clearComponents(),null===(e=this.getDataPanelDef().groups)||void 0===e||e.forEach((function(t){var e=t.type;"categories"===e?r.createCategoriesGroup(i):"series"===e?r.createSeriesGroup(s):"seriesChartType"===e?r.createSeriesChartTypeGroup(s):console.warn("AG Grid: invalid charts data panel group name supplied: '"+e+"'")}));this.restoreGroupExpandedState(u)},e.prototype.getGroupExpandedState=function(){var t=this,e=[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}];return e.map((function(e){var r,n,o=e.groupType,i=e.comp,a=Boolean(null===(n=null===(r=t.getDataPanelDef().groups)||void 0===r?void 0:r.find((function(t){var e=t.type;return e===o})))||void 0===n?void 0:n.isOpen);return i?i.isExpanded():a}))},e.prototype.restoreGroupExpandedState=function(t){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((function(e,r){e&&e.toggleGroupExpand(t[r])}))},e.prototype.createAutoScrollService=function(){var t=this.getGui();this.autoScrollService=new a["t"]({scrollContainer:t,scrollAxis:"y",getVerticalPosition:function(){return t.scrollTop},setVerticalPosition:function(e){return t.scrollTop=e}})},e.prototype.createComponent=function(t,e){var r=document.createElement("div");return r.id=e,r.className="ag-chart-data-section",r.appendChild(t.getGui()),r},e.prototype.addComponent=function(t,e,r){var n=this.createComponent(e,r);t.appendChild(n)},e.prototype.addComponentAtIndex=function(t,e,r,n){var o=this.createComponent(e,r);t.insertBefore(o,t.children[n])},e.prototype.addChangeListener=function(t,e){var r=this;this.addManagedListener(t,a["R"].EVENT_FIELD_VALUE_CHANGED,(function(){e.selected=t.getValue(),r.chartController.updateForPanelChange(e)}))},e.prototype.createCategoriesGroup=function(t){var e=this;this.categoriesGroupComp=this.createBean(new a["e"]({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var r="chartDimension"+this.getCompId();t.forEach((function(t){var n=e.categoriesGroupComp.createManagedBean(new a["n"]);n.setLabel(a["Bb"].escapeString(t.displayName)),n.setValue(t.selected),n.setInputName(r),e.addChangeListener(n,t),e.categoriesGroupComp.addItem(n),e.columnComps.set(t.colId,n)})),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},e.prototype.createSeriesGroup=function(t){var e=this;if(this.seriesGroupComp=this.createManagedBean(new a["e"]({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var r=this.seriesGroupComp.createManagedBean(new a["r"]);r.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange((function(t){e.chartOptionsService.setPairedMode(!!t),e.chartController.updateForGridChange()})),this.seriesGroupComp.addItem(r)}var n=this.generateGetSeriesLabel();t.forEach((function(t){var r=e.seriesGroupComp.createManagedBean(new a["c"]);r.addCssClass("ag-data-select-checkbox");var o=n(t);r.setLabel(o),r.setValue(t.selected),e.addChangeListener(r,t),e.seriesGroupComp.addItem(r),e.columnComps.set(t.colId,r),e.addDragHandle(r,t)}));var o=this.getGui(),i=this.seriesGroupComp.getGui();this.addComponent(o,this.seriesGroupComp,"seriesGroup");var s={getIconName:function(){return a["O"].ICON_MOVE},getContainer:function(){return i},onDragging:function(t){return e.onDragging(t)},onDragLeave:function(){return e.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(s),this.addDestroyFunc((function(){return e.dragAndDropService.removeDropTarget(s)}))},e.prototype.createSeriesChartTypeGroup=function(t,e){var r=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new a["e"]({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n=this.chartController.getSeriesChartTypes();t.forEach((function(t){if(t.selected){var e=n.filter((function(e){return e.colId===t.colId}))[0];if(e){var o=r.seriesChartTypeGroupComp.createManagedBean(new a["e"]({title:t.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),i=r.seriesChartTypeGroupComp.createManagedBean(new a["c"]).setLabel(r.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType)).setValue(!!e.secondaryAxis).onValueChange((function(e){return r.chartController.updateSeriesChartType(t.colId,void 0,e)}));o.addItem(i);var s=function(t,e){return r.chartTranslationService.translate(t,e)},l=[{value:"line",text:s("line","Line")},{value:"area",text:s("area","Area")},{value:"stackedArea",text:s("stackedArea","StackedArea")},{value:"groupedColumn",text:s("groupedColumn","Grouped Column")},{value:"stackedColumn",text:s("stackedColumn","Stacked Column")}],u=o.createManagedBean(new a["p"]);u.setLabelAlignment("left").setLabelWidth("flex").addOptions(l).setValue(e.chartType).onValueChange((function(e){return r.chartController.updateSeriesChartType(t.colId,e)})),o.addItem(u),r.seriesChartTypeGroupComp.addItem(o)}}})),void 0===e?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",e)}},e.prototype.addDragHandle=function(t,e){var r=this,n=a["Bb"].createIconNoSpan("columnDrag",this.gridOptionsService);n.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),t.getGui().insertAdjacentElement("beforeend",n);var o={type:a["P"].ChartPanel,eElement:n,dragItemName:e.displayName,getDragItem:function(){return{columns:[e.column]}},onDragStopped:function(){return r.onDragStop()}};this.dragAndDropService.addDragSource(o,!0),this.addDestroyFunc((function(){return r.dragAndDropService.removeDragSource(o)}))},e.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(t){return a["Bb"].escapeString(t.displayName)};var t="bubble"===this.chartType,e=this.isInPairedMode(),r=0,n=new Map;return n.set(0,"X"),n.set(1,"Y"),n.set(2,"size"),function(o){var i,s=a["Bb"].escapeString(o.displayName);return o.selected?(i=e?n.get(r%(t?3:2)):0===r?"X":t&&r%2===0?"size":"Y",r++,s+" ("+i+")"):s}},e.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},e.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},e.prototype.getDataPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.dataPanel;return e||gE},e.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},e.prototype.clearComponents=function(){a["Bb"].clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},e.prototype.onDragging=function(t){var e=this.checkHoveredItem(t);if(e){this.lastDraggedColumn=t.dragItem.columns[0];var r=e.comp,n=e.position,o=this.lastHoveredItem||{},i=o.comp,a=o.position;if(r!==i||n!==a){this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredItem={comp:r,position:n};var s=r.getGui();s.classList.add("ag-list-item-hovered","ag-item-highlight-"+n)}}},e.prototype.checkHoveredItem=function(t){var e,r;if(a["Bb"].missing(t.vDirection))return null;var n=t.event;try{for(var o=yE(this.columnComps.values()),i=o.next();!i.done;i=o.next()){var s=i.value,l=s.getGui();if(l.querySelector(".ag-chart-data-column-drag-handle")){var u=l.getBoundingClientRect(),c=n.clientY>=u.top&&n.clientY<=u.bottom;if(c){var p=l.clientHeight,d=n.clientY>u.top+p/2?"bottom":"top";return{comp:s,position:d}}}}}catch(h){e={error:h}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return null},e.prototype.onDragLeave=function(){this.clearHoveredItems()},e.prototype.onDragStop=function(){var t=this;if(this.lastHoveredItem){var e=this.chartController.getColStateForMenu(),r=e.dimensionCols,n=e.valueCols,o=vE(vE([],fE(r)),fE(n)).find((function(e){return e.column===t.lastDraggedColumn}));if(o){var i=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&i++,o.order=i,this.chartController.updateForPanelChange(o)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},e.prototype.clearHoveredItems=function(){this.columnComps.forEach((function(t){t.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")})),this.lastHoveredItem=void 0},e.prototype.isInterestedIn=function(t){return t===a["P"].ChartPanel},e.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',hE([Object(a["u"])("dragAndDropService")],e.prototype,"dragAndDropService",void 0),hE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),hE([a["fb"]],e.prototype,"init",null),e}(a["H"]),bE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},SE=function(t){function e(e){var r=t.call(this)||this;return r.activeComps=[],r.params=e,r}return bE(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(e.TEMPLATE,{fontGroup:t}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},e.prototype.addCompToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},e.prototype.setEnabled=function(t){this.fontGroup.setEnabled(t)},e.prototype.initGroup=function(){var t=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange((function(e){t.params.setEnabled&&t.params.setEnabled(e)}))},e.prototype.initFontFamilySelect=function(){var t=this,e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],r=this.params.initialFont.family,n=e[0];if(r){var o=e.map((function(t){return t.toLowerCase()})),i=o.indexOf(r.toLowerCase());if(i>=0)n=e[i];else{var s=a["Bb"].capitalise(r);e.push(s),n=s}}var l=e.sort().map((function(t){return{value:t,text:t}}));this.familySelect.addOptions(l).setInputWidth("flex").setValue(""+n).onValueChange((function(e){return t.params.setFont({family:e})}))},e.prototype.initFontSizeSelect=function(){var t=this,e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],r=this.params.initialFont.size;a["Bb"].includes(e,r)||e.push(r);var n=e.sort((function(t,e){return t-e})).map((function(t){return{value:""+t,text:""+t}}));this.sizeSelect.addOptions(n).setInputWidth("flex").setValue(""+r).onValueChange((function(e){return t.params.setFont({size:parseInt(e,10)})})),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},e.prototype.initFontWeightStyleSelect=function(){var t=this,e=this.params.initialFont,r=e.weight,n=void 0===r?"normal":r,o=e.style,i=void 0===o?"normal":o,a=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],s=a.find((function(t){return t.weight===n&&t.style===i}));s||(s={name:"predefined",weight:n,style:i},a.unshift(s));var l=a.map((function(e){return{value:e.name,text:t.chartTranslationService.translate(e.name)}}));this.weightStyleSelect.addOptions(l).setInputWidth("flex").setValue(s.name).onValueChange((function(e){var r=a.find((function(t){return t.name===e}));t.params.setFont({weight:r.weight,style:r.style})}))},e.prototype.initFontColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange((function(e){return t.params.setFont({color:e})}))},e.prototype.addItemToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},e.prototype.destroyActiveComps=function(){var t=this;this.activeComps.forEach((function(e){a["Bb"].removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActiveComps(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',CE([Object(a["kb"])("fontGroup")],e.prototype,"fontGroup",void 0),CE([Object(a["kb"])("familySelect")],e.prototype,"familySelect",void 0),CE([Object(a["kb"])("weightStyleSelect")],e.prototype,"weightStyleSelect",void 0),CE([Object(a["kb"])("sizeSelect")],e.prototype,"sizeSelect",void 0),CE([Object(a["kb"])("colorPicker")],e.prototype,"colorPicker",void 0),CE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),CE([a["fb"]],e.prototype,"init",null),e}(a["H"]),wE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},OE=function(t){function e(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,o=void 0!==n&&n,i=t.call(this)||this;return i.activePanels=[],i.chartOptionsService=r,i.isExpandedOnInit=o,i}return wE(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(e.TEMPLATE,{legendGroup:t}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},e.prototype.initLegendGroup=function(){var t=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange((function(e){t.chartOptionsService.setChartOption("legend.enabled",e),t.legendGroup.toggleGroupExpand(!0)}))},e.prototype.initLegendPosition=function(){var t=this,e=["top","right","bottom","left"];this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(e.map((function(e){return{value:e,text:t.chartTranslationService.translate(e)}}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.position",e)}))},e.prototype.initLegendPadding=function(){var t=this,e=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(cT(e,200)).setValue(""+e).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.spacing",e)}))},e.prototype.initLegendItems=function(){var t=this,e=function(e,r,n,o){var i=t.chartOptionsService.getChartOption("legend."+e);n.setLabel(t.chartTranslationService.translate(r)).setMaxValue(cT(i,o)).setValue(""+i).setTextFieldWidth(45).onValueChange((function(r){t.chartOptionsService.setChartOption("legend."+e,r)}))};e("item.marker.size","markerSize",this.markerSizeSlider,40),e("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),e("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),e("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),e("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},e.prototype.initLabelPanel=function(){var t=this,e=this.chartOptionsService,r={family:e.getChartOption("legend.item.label.fontFamily"),style:e.getChartOption("legend.item.label.fontStyle"),weight:e.getChartOption("legend.item.label.fontWeight"),size:e.getChartOption("legend.item.label.fontSize"),color:e.getChartOption("legend.item.label.color")},n=function(e){var r=t.chartOptionsService;e.family&&r.setChartOption("legend.item.label.fontFamily",e.family),e.weight&&r.setChartOption("legend.item.label.fontWeight",e.weight),e.style&&r.setChartOption("legend.item.label.fontStyle",e.style),e.size&&r.setChartOption("legend.item.label.fontSize",e.size),e.color&&r.setChartOption("legend.item.label.color",e.color)},o={enabled:!0,suppressEnabledCheckbox:!0,initialFont:r,setFont:n},i=this.createBean(new SE(o));this.legendGroup.addItem(i),this.activePanels.push(i)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){a["Bb"].removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',xE([Object(a["kb"])("legendGroup")],e.prototype,"legendGroup",void 0),xE([Object(a["kb"])("legendPositionSelect")],e.prototype,"legendPositionSelect",void 0),xE([Object(a["kb"])("legendPaddingSlider")],e.prototype,"legendPaddingSlider",void 0),xE([Object(a["kb"])("markerSizeSlider")],e.prototype,"markerSizeSlider",void 0),xE([Object(a["kb"])("markerStrokeSlider")],e.prototype,"markerStrokeSlider",void 0),xE([Object(a["kb"])("markerPaddingSlider")],e.prototype,"markerPaddingSlider",void 0),xE([Object(a["kb"])("itemPaddingXSlider")],e.prototype,"itemPaddingXSlider",void 0),xE([Object(a["kb"])("itemPaddingYSlider")],e.prototype,"itemPaddingYSlider",void 0),xE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),xE([a["fb"]],e.prototype,"init",null),e}(a["H"]),EE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},PE=function(t){function e(e){var r=t.call(this)||this;return r.chartOptionsService=e,r}return EE(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(e.TEMPLATE,{axisTicksGroup:t}),this.initAxisTicks()},e.prototype.initAxisTicks=function(){var t=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("tick.color",e)}));var e=function(e,r,n,o){var i=t.chartOptionsService.getAxisProperty(e);r.setLabel(n).setMaxValue(cT(i,o)).setValue(""+i).setTextFieldWidth(45).onValueChange((function(r){return t.chartOptionsService.setAxisProperty(e,r)}))};e("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),e("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},e.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',TE([Object(a["kb"])("axisTicksGroup")],e.prototype,"axisTicksGroup",void 0),TE([Object(a["kb"])("axisTicksColorPicker")],e.prototype,"axisTicksColorPicker",void 0),TE([Object(a["kb"])("axisTicksWidthSlider")],e.prototype,"axisTicksWidthSlider",void 0),TE([Object(a["kb"])("axisTicksSizeSlider")],e.prototype,"axisTicksSizeSlider",void 0),TE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),TE([a["fb"]],e.prototype,"init",null),e}(a["H"]),DE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ME=function(t){function e(r){var n=t.call(this,r,e.TEMPLATE)||this;return n.radius=0,n.offsetX=0,n.offsetY=0,n}return DE(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(t){e.parentCircleRect=e.eParentCircle.getBoundingClientRect()},onDragging:function(t){return e.calculateAngleDrag(t)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange((function(t){null!=t&&""!==t||(t="0"),t=e.eAngleValue.normalizeValue(t);var r=parseFloat(t);r>180&&(r-=360),e.setValue(r)})),this.updateNumberInput(),a["Bb"].exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,a["R"].EVENT_FIELD_VALUE_CHANGED,(function(){var t=e.gridOptionsService.getDocument();e.eAngleValue.getInputElement().contains(t.activeElement)||e.updateNumberInput()}))},e.prototype.updateNumberInput=function(){var t=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(t.toString())},e.prototype.positionChildCircle=function(t){var e=this.parentCircleRect||{width:24,height:24},r=this.eChildCircle,n=e.width/2,o=e.height/2;r.style.left=n+8*Math.cos(t)+"px",r.style.top=o+8*Math.sin(t)+"px"},e.prototype.calculatePolar=function(){var t=this.offsetX,e=this.offsetY,r=Math.atan2(e,t);this.degrees=this.toDegrees(r),this.radius=Math.sqrt(t*t+e*e),this.positionChildCircle(r)},e.prototype.calculateCartesian=function(){var t=this.toRadians(this.getValue()),e=this.getRadius();this.setOffsetX(Math.cos(t)*e).setOffsetY(Math.sin(t)*e)},e.prototype.setOffsetX=function(t){return this.offsetX!==t&&(this.offsetX=t,this.calculatePolar()),this},e.prototype.setOffsetY=function(t){return this.offsetY!==t&&(this.offsetY=t,this.calculatePolar()),this},e.prototype.calculateAngleDrag=function(t){var e=this.parentCircleRect,r=e.width/2,n=e.height/2,o=t.clientX-e.left,i=t.clientY-e.top,a=o-r,s=i-n,l=Math.atan2(s,a);this.setValue(l,!0)},e.prototype.toDegrees=function(t){return t/Math.PI*180},e.prototype.toRadians=function(t){return t/180*Math.PI},e.prototype.normalizeNegativeValue=function(t){return t<0?360+t:t},e.prototype.normalizeAngle180=function(t){return t%=2*Math.PI,t<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},e.prototype.getRadius=function(){return this.radius},e.prototype.setRadius=function(t){return this.radius===t||(this.radius=t,this.calculateCartesian()),this},e.prototype.onValueChange=function(t){var e=this;return this.addManagedListener(this,a["R"].EVENT_FIELD_VALUE_CHANGED,(function(){t(e.degrees)})),this},e.prototype.getValue=function(t){return t?this.toRadians(this.degrees):this.degrees},e.prototype.setValue=function(t,e){var r;return r=e?t:this.normalizeAngle180(this.toRadians(t)),t=this.toDegrees(r),this.degrees!==t&&(this.degrees=Math.floor(t),this.calculateCartesian(),this.positionChildCircle(r),this.dispatchEvent({type:a["R"].EVENT_FIELD_VALUE_CHANGED})),this},e.prototype.setWidth=function(t){return a["Bb"].setFixedWidth(this.getGui(),t),this},e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.eAngleValue.setDisabled(e),this},e.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',AE([Object(a["kb"])("eLabel")],e.prototype,"eLabel",void 0),AE([Object(a["kb"])("eParentCircle")],e.prototype,"eParentCircle",void 0),AE([Object(a["kb"])("eChildCircle")],e.prototype,"eChildCircle",void 0),AE([Object(a["kb"])("eAngleValue")],e.prototype,"eAngleValue",void 0),AE([Object(a["u"])("dragService")],e.prototype,"dragService",void 0),e}(a["a"]),RE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_E=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},kE=function(t){function e(e){var r=e.chartController,n=e.chartOptionsService,o=e.isExpandedOnInit,i=void 0!==o&&o,a=t.call(this)||this;return a.activePanels=[],a.axisLabelUpdateFuncs=[],a.prevXRotation=0,a.prevYRotation=0,a.chartController=r,a.chartOptionsService=n,a.isExpandedOnInit=i,a}return RE(e,t),e.prototype.init=function(){var t=this,r={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(e.TEMPLATE,{axisGroup:r}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();var n=function(){return t.axisLabelUpdateFuncs.forEach((function(t){return t()}))};this.addManagedListener(this.chartController,pE.EVENT_CHART_UPDATED,n)},e.prototype.initAxis=function(){var t=this;this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.color",e)}));var e=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(cT(e,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.width",e)}))},e.prototype.initAxisTicks=function(){var t=this.createBean(new PE(this.chartOptionsService));this.axisGroup.addItem(t),this.activePanels.push(t)},e.prototype.initAxisLabels=function(){var t=this,e={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},r=function(e){e.family&&t.chartOptionsService.setAxisProperty("label.fontFamily",e.family),e.weight&&t.chartOptionsService.setAxisProperty("label.fontWeight",e.weight),e.style&&t.chartOptionsService.setAxisProperty("label.fontStyle",e.style),e.size&&t.chartOptionsService.setAxisProperty("label.fontSize",e.size),e.color&&t.chartOptionsService.setAxisProperty("label.color",e.color)},n={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:e,setFont:r},o=this.createBean(new SE(n));this.axisGroup.addItem(o),this.activePanels.push(o),this.addAdditionalLabelComps(o)},e.prototype.addAdditionalLabelComps=function(t){this.addLabelPadding(t);var e=this.createRotationWidgets(),r=e.xRotationComp,n=e.yRotationComp,o=this.initLabelRotations(r,n);t.addCompToPanel(o),t.addCompToPanel(r),t.addCompToPanel(n)},e.prototype.initLabelRotations=function(t,e){var r=this,n=function(t){return r.chartOptionsService.getLabelRotation(t)},o=function(t,e){r.chartOptionsService.setLabelRotation(t,e)},i=function(i){r.chartOptionsService.setAxisProperty("label.autoRotate",i),i?(r.prevXRotation=n("xAxis"),r.prevYRotation=n("yAxis"),o("xAxis",void 0),o("yAxis",void 0)):(o("xAxis",r.prevXRotation),o("yAxis",r.prevYRotation)),t.setDisabled(i),e.setDisabled(i)},s=function(){var t=n("xAxis"),e=n("yAxis");return void 0==t&&void 0==e&&r.chartOptionsService.getAxisProperty("label.autoRotate")},l=s(),u=this.createBean(new a["c"]).setLabel(this.translate("autoRotate")).setValue(l).onValueChange(i);return t.setDisabled(l),e.setDisabled(l),u},e.prototype.createRotationWidgets=function(){var t=this,e=String.fromCharCode(176),r=function(r,n){var o=t.chartTranslationService.translate(r)+" "+e,i=t.chartOptionsService.getLabelRotation(n),a=(new ME).setLabel(o).setLabelWidth("flex").setValue(i||0).onValueChange((function(e){return t.chartOptionsService.setLabelRotation(n,e)}));return t.axisLabelUpdateFuncs.push((function(){var e=t.chartOptionsService.getLabelRotation(n);a.setValue(e||0)})),t.createBean(a)};return{xRotationComp:r("xRotation","xAxis"),yRotationComp:r("yRotation","yAxis")}},e.prototype.addLabelPadding=function(t){var e=this,r=this.createBean(new a["q"]),n=this.chartOptionsService.getAxisProperty("label.padding");r.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(cT(n,30)).setValue(""+n).setTextFieldWidth(45).onValueChange((function(t){return e.chartOptionsService.setAxisProperty("label.padding",t)})),t.addCompToPanel(r)},e.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){a["Bb"].removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',_E([Object(a["kb"])("axisGroup")],e.prototype,"axisGroup",void 0),_E([Object(a["kb"])("axisColorInput")],e.prototype,"axisColorInput",void 0),_E([Object(a["kb"])("axisLineWidthSlider")],e.prototype,"axisLineWidthSlider",void 0),_E([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),_E([a["fb"]],e.prototype,"init",null),e}(a["H"]),FE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),IE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},LE=function(t){function e(e){var r=e.chartOptionsService,n=e.isExpandedOnInit,o=void 0!==n&&n,i=t.call(this)||this;return i.chartOptionsService=r,i.isExpandedOnInit=o,i}return FE(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(e.TEMPLATE,{navigatorGroup:t}),this.initNavigator()},e.prototype.initNavigator=function(){var t=this,e=this.chartTranslationService;this.navigatorGroup.setTitle(e.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange((function(e){t.chartOptionsService.setChartOption("navigator.enabled",e),t.navigatorGroup.toggleGroupExpand(!0)})).toggleGroupExpand(this.isExpandedOnInit);var r=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(e.translate("height")).setMinValue(10).setMaxValue(cT(r,60)).setTextFieldWidth(45).setValue(""+(r||30)).onValueChange((function(e){return t.chartOptionsService.setChartOption("navigator.height",e)}))},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',IE([Object(a["kb"])("navigatorGroup")],e.prototype,"navigatorGroup",void 0),IE([Object(a["kb"])("navigatorHeightSlider")],e.prototype,"navigatorHeightSlider",void 0),IE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),IE([a["fb"]],e.prototype,"init",null),e}(a["H"]),NE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},jE=function(t){function e(e,r){var n=t.call(this)||this;return n.chartOptionsService=e,n.chartController=r,n}return NE(e,t),e.prototype.init=function(){var t=this,r={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(e.TEMPLATE,{chartPaddingGroup:r}),this.addManagedListener(this.eventService,a["R"].EVENT_CHART_OPTIONS_CHANGED,(function(e){t.updateTopPadding(e.chartOptions)})),this.initGroup(),this.initChartPaddingItems()},e.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},e.prototype.initChartPaddingItems=function(){var t=this,e=function(e,r){var n=t.chartOptionsService.getChartOption("padding."+e);r.setLabel(t.chartTranslationService.translate(e)).setMaxValue(cT(n,200)).setValue(""+n).setTextFieldWidth(45).onValueChange((function(r){return t.chartOptionsService.setChartOption("padding."+e,r)}))};e("top",this.paddingTopSlider),e("right",this.paddingRightSlider),e("bottom",this.paddingBottomSlider),e("left",this.paddingLeftSlider)},e.prototype.updateTopPadding=function(t){var e,r,n=this.chartController.getChartSeriesTypes()[0],o=null===(r=null===(e=t[n])||void 0===e?void 0:e.padding)||void 0===r?void 0:r.top;null!=o&&this.paddingTopSlider.setValue(o)},e.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',GE([Object(a["kb"])("chartPaddingGroup")],e.prototype,"chartPaddingGroup",void 0),GE([Object(a["kb"])("paddingTopSlider")],e.prototype,"paddingTopSlider",void 0),GE([Object(a["kb"])("paddingRightSlider")],e.prototype,"paddingRightSlider",void 0),GE([Object(a["kb"])("paddingBottomSlider")],e.prototype,"paddingBottomSlider",void 0),GE([Object(a["kb"])("paddingLeftSlider")],e.prototype,"paddingLeftSlider",void 0),GE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),GE([a["fb"]],e.prototype,"init",null),e}(a["H"]),BE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),VE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},HE=function(t){function e(e){var r=t.call(this)||this;return r.chartOptionsService=e,r}return BE(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(e.TEMPLATE,{chartBackgroundGroup:t}),this.initGroup(),this.initColorPicker()},e.prototype.initGroup=function(){var t=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setChartOption("background.visible",e)}))},e.prototype.initColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange((function(e){return t.chartOptionsService.setChartOption("background.fill",e)}))},e.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',VE([Object(a["kb"])("chartBackgroundGroup")],e.prototype,"group",void 0),VE([Object(a["kb"])("colorPicker")],e.prototype,"colorPicker",void 0),VE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),VE([a["fb"]],e.prototype,"init",null),e}(a["H"]),zE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),UE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},WE=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.chartOptionsService=r,n.activePanels=[],n}return zE(e,t),e.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},e.prototype.hasTitle=function(){var t=this.getOption("title");return t&&t.enabled&&t.text&&t.text.length>0},e.prototype.initFontPanel=function(){var t=this,e=this.hasTitle(),r=function(e,r){e.family&&t.setOption("title.fontFamily",e.family,r),e.weight&&t.setOption("title.fontWeight",e.weight,r),e.style&&t.setOption("title.fontStyle",e.style,r),e.size&&t.setOption("title.fontSize",e.size,r),e.color&&t.setOption("title.color",e.color,r)},n={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};e||r(n,!0);var o={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,initialFont:n,setFont:r,setEnabled:function(e){if(t.toolbarExists()){var r=t.getOption("padding.top");t.setOption("padding.top",e?r-20:r+20)}t.setOption("title.enabled",e);var n=t.getOption("title.text"),o="Title"===n||0===(null===n||void 0===n?void 0:n.trim().length);e&&o&&t.setOption("title.text",t.titlePlaceholder)}},i=this.createBean(new SE(o));i.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(i.getGui()),this.activePanels.push(i),this.addManagedListener(this.eventService,"chartTitleEdit",(function(){i.setEnabled(t.hasTitle())}))},e.prototype.createSpacingSlicer=function(){var t=this,e=this.createBean(new a["q"]),r=this.chartOptionsService.getChartOption("title.spacing");return e.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(r,100)).setValue(""+r).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setChartOption("title.spacing",e)})),e},e.prototype.toolbarExists=function(){var t=this.gridOptionsService.getCallback("getChartToolbarItems");if(!t)return!0;var e={defaultItems:["chartUnlink","chartDownload"]},r=["chartLink","chartUnlink","chartDownload"];return r.some((function(r){var n;return null===(n=t&&t(e))||void 0===n?void 0:n.includes(r)}))},e.prototype.getOption=function(t){return this.chartOptionsService.getChartOption(t)},e.prototype.setOption=function(t,e,r){this.chartOptionsService.setChartOption(t,e,r)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){a["Bb"].removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE="<div></div>",UE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),UE([a["fb"]],e.prototype,"init",null),e}(a["H"]),KE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),XE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},YE=function(t){function e(e){var r=e.chartController,n=e.chartOptionsService,o=e.isExpandedOnInit,i=void 0!==o&&o,a=t.call(this)||this;return a.activePanels=[],a.chartController=r,a.chartOptionsService=n,a.isExpandedOnInit=i,a}return KE(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(e.TEMPLATE,{chartGroup:t}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},e.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)},e.prototype.initTitles=function(){var t=this.createBean(new WE(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.initPaddingPanel=function(){var t=this.createBean(new jE(this.chartOptionsService,this.chartController));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.initBackgroundPanel=function(){var t=this.createBean(new HE(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){a["Bb"].removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',XE([Object(a["kb"])("chartGroup")],e.prototype,"chartGroup",void 0),XE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),XE([a["fb"]],e.prototype,"init",null),e}(a["H"]),qE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZE=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},JE=function(t){function e(e,r){var n=t.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return qE(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0};this.setTemplate(e.TEMPLATE,{shadowGroup:t}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},e.prototype.initSeriesShadow=function(){var t=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.enabled",e,t.getSelectedSeries())})),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.color",e,t.getSelectedSeries())}));var e=function(e,r,n,o){var i=t.chartOptionsService.getSeriesOption("shadow."+r,t.getSelectedSeries());e.setLabel(t.chartTranslationService.translate(r)).setMinValue(n).setMaxValue(cT(i,o)).setValue(""+i).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow."+r,e,t.getSelectedSeries())}))};e(this.shadowBlurSlider,"blur",0,20),e(this.shadowXOffsetSlider,"xOffset",-10,10),e(this.shadowYOffsetSlider,"yOffset",-10,10)},e.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',ZE([Object(a["kb"])("shadowGroup")],e.prototype,"shadowGroup",void 0),ZE([Object(a["kb"])("shadowColorPicker")],e.prototype,"shadowColorPicker",void 0),ZE([Object(a["kb"])("shadowBlurSlider")],e.prototype,"shadowBlurSlider",void 0),ZE([Object(a["kb"])("shadowXOffsetSlider")],e.prototype,"shadowXOffsetSlider",void 0),ZE([Object(a["kb"])("shadowYOffsetSlider")],e.prototype,"shadowYOffsetSlider",void 0),ZE([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),ZE([a["fb"]],e.prototype,"init",null),e}(a["H"]);function QE(t){var e=t.labelName,r=t.chartOptionsService,n=t.getSelectedSeries,o=t.seriesOptionLabelProperty,i=function(t){return o+"."+t},a=function(t){var e=i(t);return r.getSeriesOption(e,n())},s=function(t,e){var o=i(t);r.setSeriesOption(o,e,n())},l={family:a("fontFamily"),style:a("fontStyle"),weight:a("fontWeight"),size:a("fontSize"),color:a("color")},u=function(t){t.family&&s("fontFamily",t.family),t.weight&&s("fontWeight",t.weight),t.style&&s("fontStyle",t.style),t.size&&s("fontSize",t.size),t.color&&s("color",t.color)},c={name:e,enabled:a("enabled")||!1,setEnabled:function(t){return s("enabled",t)},suppressEnabledCheckbox:!1,initialFont:l,setFont:u};return c}var $E=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tT=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},eT=function(t){function e(e,r){var n=t.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return $E(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(e.TEMPLATE,{seriesMarkersGroup:t}),this.initMarkers()},e.prototype.initMarkers=function(){var t=this,e=[{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}];this.seriesMarkerShapeSelect.addOptions(e).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange((function(e){return t.setSeriesOption("marker.shape",e)}));var r=this.chartOptionsService.getChartType(),n=a["Bb"].includes(["scatter","bubble"],r);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(n).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange((function(e){return t.setSeriesOption("marker.enabled",e)}));var o=function(e,r,n,o){var i=t.getSeriesOption(e);r.setLabel(t.chartTranslationService.translate(n)).setMaxValue(cT(i,o)).setValue(""+i).setTextFieldWidth(45).onValueChange((function(r){return t.setSeriesOption(e,r)}))};"bubble"===r?(o("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),o("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),o("marker.size",this.seriesMarkerSizeSlider,"size",60)),o("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},e.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.getSelectedSeries())},e.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.getSelectedSeries())},e.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',tT([Object(a["kb"])("seriesMarkersGroup")],e.prototype,"seriesMarkersGroup",void 0),tT([Object(a["kb"])("seriesMarkerShapeSelect")],e.prototype,"seriesMarkerShapeSelect",void 0),tT([Object(a["kb"])("seriesMarkerSizeSlider")],e.prototype,"seriesMarkerSizeSlider",void 0),tT([Object(a["kb"])("seriesMarkerMinSizeSlider")],e.prototype,"seriesMarkerMinSizeSlider",void 0),tT([Object(a["kb"])("seriesMarkerStrokeWidthSlider")],e.prototype,"seriesMarkerStrokeWidthSlider",void 0),tT([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),tT([a["fb"]],e.prototype,"init",null),e}(a["H"]),rT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nT=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},oT=function(t){function e(e,r){var n=t.call(this)||this;return n.chartOptionsService=e,n.getSelectedSeries=r,n}return rT(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-sub-level",direction:"vertical"};this.setTemplate(e.TEMPLATE,{calloutGroup:t}),this.initCalloutOptions()},e.prototype.initCalloutOptions=function(){var t=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var e=function(e,r,n,o){var i=t.chartOptionsService.getSeriesOption(e,t.getSelectedSeries());r.setLabel(t.chartTranslationService.translate(n)).setMaxValue(cT(i,o)).setValue(""+i).setTextFieldWidth(45).onValueChange((function(r){return t.chartOptionsService.setSeriesOption(e,r,t.getSelectedSeries())}))};e("calloutLine.length",this.calloutLengthSlider,"length",40),e("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),e("calloutLabel.offset",this.labelOffsetSlider,"offset",30)},e.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',nT([Object(a["kb"])("calloutGroup")],e.prototype,"calloutGroup",void 0),nT([Object(a["kb"])("calloutLengthSlider")],e.prototype,"calloutLengthSlider",void 0),nT([Object(a["kb"])("calloutStrokeWidthSlider")],e.prototype,"calloutStrokeWidthSlider",void 0),nT([Object(a["kb"])("labelOffsetSlider")],e.prototype,"labelOffsetSlider",void 0),nT([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),nT([a["fb"]],e.prototype,"init",null),e}(a["H"]),iT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aT=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sT=function(t){function e(e){var r=e.chartController,n=e.chartOptionsService,o=e.seriesType,i=e.isExpandedOnInit,a=void 0!==i&&i,s=t.call(this)||this;return s.activePanels=[],s.widgetFuncs={lineWidth:function(){return s.initLineWidth()},strokeWidth:function(){return s.initStrokeWidth()},lineDash:function(){return s.initLineDash()},lineOpacity:function(){return s.initLineOpacity()},fillOpacity:function(){return s.initFillOpacity()},markers:function(){return s.initMarkers()},labels:function(){return s.initLabels()},shadow:function(){return s.initShadow()},tooltips:function(){return s.initTooltips()},bins:function(){return s.initBins()}},s.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},s.chartController=r,s.chartOptionsService=n,s.seriesType=o||s.getChartSeriesType(),s.isExpandedOnInit=a,s}return iT(e,t),e.prototype.init=function(){var t={cssIdentifier:"charts-format-top-level",direction:"vertical"};this.setTemplate(e.TEMPLATE,{seriesGroup:t}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,pE.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},e.prototype.refreshWidgets=function(){var t=this;this.destroyActivePanels();var e=this.chartController.getChartProxy().getChart();e.waitForUpdate().then((function(){t.chartController.isComboChart()&&(t.updateSeriesType(),t.initSeriesSelect()),t.seriesWidgetMappings[t.seriesType].forEach((function(e){return t.widgetFuncs[e]()}))})).catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},e.prototype.initSeriesSelect=function(){var t=this,e=this.seriesGroup.createManagedBean(new a["p"]);e.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange((function(e){t.seriesType=e,t.refreshWidgets()})),this.seriesGroup.addItem(e),this.activePanels.push(e)},e.prototype.initTooltips=function(){var t=this,e=this.createBean(new a["r"]);e.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange((function(e){return t.setSeriesOption("tooltip.enabled",e)})),this.addWidget(e)},e.prototype.initStrokeWidth=function(){var t=this,e=this.getSeriesOption("strokeWidth"),r=this.createBean(new a["q"]);r.setLabel(this.translate("strokeWidth")).setMaxValue(cT(e,10)).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.setSeriesOption("strokeWidth",e)})),this.addWidget(r)},e.prototype.initLineWidth=function(){var t=this,e=this.getSeriesOption("strokeWidth"),r=this.createBean(new a["q"]);r.setLabel(this.translate("lineWidth")).setMaxValue(cT(e,10)).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.setSeriesOption("strokeWidth",e)})),this.addWidget(r)},e.prototype.initLineDash=function(){var t=this,e=this.getSeriesOption("lineDash"),r=e?e[0]:0,n=this.createBean(new a["q"]);n.setLabel(this.translate("lineDash")).setMaxValue(cT(r,30)).setTextFieldWidth(45).setValue(""+r).onValueChange((function(e){return t.setSeriesOption("lineDash",[e])})),this.addWidget(n)},e.prototype.initLineOpacity=function(){var t=this,e=this.getSeriesOption("strokeOpacity"),r=this.createBean(new a["q"]);r.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(cT(e,1)).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.setSeriesOption("strokeOpacity",e)})),this.addWidget(r)},e.prototype.initFillOpacity=function(){var t=this,e=this.getSeriesOption("fillOpacity"),r=this.createBean(new a["q"]);r.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(cT(e,1)).setTextFieldWidth(45).setValue(""+e).onValueChange((function(e){return t.setSeriesOption("fillOpacity",e)})),this.addWidget(r)},e.prototype.initLabels=function(){var t=this,e="pie"===this.seriesType?"calloutLabel":"label",r="pie"===this.seriesType?this.chartTranslationService.translate("calloutLabels"):this.chartTranslationService.translate("labels"),n=QE({labelName:r,chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:e}),o=this.createBean(new SE(n));if("pie"===this.seriesType){var i=this.createBean(new oT(this.chartOptionsService,(function(){return t.seriesType})));o.addCompToPanel(i),this.activePanels.push(i)}if(this.addWidget(o),"pie"===this.seriesType){var a=QE({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:"sectorLabel"}),s=this.createBean(new SE(a)),l=this.getSectorLabelPositionRatio();s.addCompToPanel(l),this.addWidget(s)}},e.prototype.getSectorLabelPositionRatio=function(){var t=this,e="sectorLabel.positionRatio",r=this.chartOptionsService.getSeriesOption(e,this.seriesType),n=this.createBean(new a["q"]);return n.setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(cT(r,1)).setTextFieldWidth(45).setValue(""+r).onValueChange((function(r){return t.chartOptionsService.setSeriesOption(e,r,t.seriesType)}))},e.prototype.initShadow=function(){var t=this,e=this.createBean(new JE(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},e.prototype.initMarkers=function(){var t=this,e=this.createBean(new eT(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},e.prototype.initBins=function(){var t,e=this,r=(null!==(t=this.getSeriesOption("bins"))&&void 0!==t?t:this.getSeriesOption("calculatedBins")).length,n=this.createBean(new a["q"]);n.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(cT(r,20)).setTextFieldWidth(45).setValue(""+r).onValueChange((function(t){return e.setSeriesOption("binCount",t)})),this.addWidget(n)},e.prototype.addWidget=function(t){this.seriesGroup.addItem(t),this.activePanels.push(t)},e.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.seriesType)},e.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.seriesType)},e.prototype.getChartSeriesType=function(){if(0===this.chartController.getSeriesChartTypes().length)return"column";var t=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===t?"column":"areaColumnCombo"===t?"area":BO(t)},e.prototype.getSeriesSelectOptions=function(){var t=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var e=new Set;return this.chartController.getActiveSeriesChartTypes().forEach((function(r){var n=BO(r.chartType);e.add(t.seriesSelectOptions.get(n))})),Array.from(e)},e.prototype.updateSeriesType=function(){var t=this.chartController.getActiveSeriesChartTypes().map((function(t){return BO(t.chartType)})),e=!t.includes(this.seriesType);e&&t.length>0&&(this.seriesType=t[0])},e.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){a["Bb"].removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">\n            </ag-group-component>\n        </div>',aT([Object(a["kb"])("seriesGroup")],e.prototype,"seriesGroup",void 0),aT([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),aT([a["fb"]],e.prototype,"init",null),e}(a["H"]),lT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uT=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};function cT(t,e){return Math.max(t,e)}var pT={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]},dT=function(t){function e(r,n){var o=t.call(this,e.TEMPLATE)||this;return o.chartController=r,o.chartOptionsService=n,o.panels=[],o.isGroupPanelShownInSeries=function(t,e){var r=["chart","legend","series"];if(r.includes(t))return!0;var n=["axis","navigator"],o=["bar","column","line","area","scatter","histogram","cartesian"];return!(!n.includes(t)||!o.includes(e))},o}return lT(e,t),e.prototype.init=function(){var t=this;this.createPanels(),this.addManagedListener(this.chartController,pE.EVENT_CHART_UPDATED,(function(){return t.createPanels(!0)})),this.addManagedListener(this.chartController,pE.EVENT_CHART_API_UPDATE,(function(){return t.createPanels(!1)}))},e.prototype.createPanels=function(t){var e,r=this,n=this.chartController.getChartType(),o=this.chartController.isGrouping(),i=BO(n);t&&n===this.chartType&&o===this.isGrouping||(this.destroyPanels(),null===(e=this.getFormatPanelDef().groups)||void 0===e||e.forEach((function(t){var e=t.type;if(r.isGroupPanelShownInSeries(e,i)){var n={chartController:r.chartController,chartOptionsService:r.chartOptionsService,isExpandedOnInit:t.isOpen,seriesType:i};"chart"===e?r.addComponent(new YE(n)):"legend"===e?r.addComponent(new OE(n)):"axis"===e?r.addComponent(new kE(n)):"series"===e?r.addComponent(new sT(n)):"navigator"===e?r.addComponent(new LE(n)):console.warn("AG Grid: invalid charts format panel group name supplied: '"+t.type+"'")}})),this.chartType=n,this.isGrouping=o)},e.prototype.getFormatPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.formatPanel;return e||pT},e.prototype.addComponent=function(t){this.createBean(t),this.panels.push(t),t.addCssClass("ag-chart-format-section"),this.getGui().appendChild(t.getGui())},e.prototype.destroyPanels=function(){var t=this;this.panels.forEach((function(e){a["Bb"].removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyPanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',uT([a["fb"]],e.prototype,"init",null),e}(a["H"]),hT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fT=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},vT=function(t){function e(e,r){var n=t.call(this)||this;n.size=58,n.padding=5,n.root=new yl;var o=new Tl({document:window.document,width:n.size,height:n.size});return o.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),o.root=n.root,o.container=e,n.scene=o,n.tooltipName=r,n}return hT(e,t),e.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch((function(t){return console.error("AG Grid - chart update failed",t)}))},fT([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),fT([a["fb"]],e.prototype,"init",null),e}(a["H"]),yT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gT=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},mT=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.stroke="gray",n.axisOvershoot=3,n}return yT(e,t),e.prototype.addAxes=function(){var t=this.size,e=this.padding,r=new $f;r.x1=e,r.y1=e,r.x2=e,r.y2=t-e+this.axisOvershoot,r.stroke=this.stroke;var n=new $f;n.x1=e-this.axisOvershoot+1,n.y1=t-e,n.x2=t-e+1,n.y2=t-e,n.stroke=this.stroke;var o=this.root;o.append(r),o.append(n)},gT([a["fb"]],e.prototype,"addAxes",null),e}(vT);function bT(t){var e=t.stacked,r=t.size,n=t.padding,o=t.xScalePadding,i=t.xScaleDomain,a=t.yScaleDomain,s=new Zf;s.domain=i,s.range=[n,r-n],s.paddingInner=o,s.paddingOuter=o;var l=new qy;l.domain=a,l.range=[r-n,n];var u=function(t,e,r){return t.map((function(t,n){var o=r.convert(t),i=new dC;return i.x=e.convert(n),i.y=o,i.width=e.bandwidth,i.height=r.convert(0)-o,i.strokeWidth=1,i.crisp=!0,i}))};return e?t.data.map((function(t){return u(t,s,l)})):u(t.data,s,l)}function CT(t,e,r,n){var o=new qy;o.domain=[0,4],o.range=[n,r-n];var i=new qy;i.domain=[0,10],i.range=[r-n,n];var a=e.map((function(t){var e=new Dh;return e.strokeWidth=3,e.lineCap="round",e.fill=void 0,t.forEach((function(t,r){e.path[r>0?"lineTo":"moveTo"](o.convert(r),i.convert(t))})),e})),s=new yl;return s.setClipRectInGroupCoordinateSpace(new Ls(n,n,r-2*n,r-2*n)),s.append(a),t.append(s),a}var ST=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wT=function(t){function e(e,r,n){var o=t.call(this,e,"groupedColumnTooltip")||this;o.columnData=[2,3,4];var i=o,a=i.root,s=i.columnData,l=i.size,u=i.padding;return o.columns=bT({stacked:!1,root:a,data:s,size:l,padding:u,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),a.append(o.columns),o.updateColors(r,n),o}return ST(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]}))},e.chartType="groupedColumn",e}(mT),xT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),OT=function(t){function e(r,n,o,i,a,s){void 0===i&&(i=e.data),void 0===a&&(a=[0,16]),void 0===s&&(s="stackedColumnTooltip");var l=t.call(this,r,s)||this,u=l,c=u.root,p=u.size,d=u.padding;return l.stackedColumns=bT({stacked:!0,root:c,data:i,size:p,padding:d,xScaleDomain:[0,1,2],yScaleDomain:a,xScalePadding:.3}),c.append([].concat.apply([],l.stackedColumns)),l.updateColors(n,o),l}return xT(e,t),e.prototype.updateColors=function(t,e){this.stackedColumns.forEach((function(r,n){return r.forEach((function(r){r.fill=t[n],r.stroke=e[n]}))}))},e.chartType="stackedColumn",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(mT),ET=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TT=function(t){function e(r,n,o){return t.call(this,r,n,o,e.data,[0,10],"normalizedColumnTooltip")||this}return ET(e,t),e.chartType="normalizedColumn",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(OT),PT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),DT=function(t){function e(e,r,n){var o=t.call(this,e,"groupedBarTooltip")||this,i=o.padding,a=o.size,s=[2,3,4],l=new Zf;l.domain=[0,1,2],l.range=[i,a-i],l.paddingInner=.3,l.paddingOuter=.3;var u=new qy;u.domain=[0,4],u.range=[a-i,i];var c=u.convert(0),p=l.bandwidth;return o.bars=s.map((function(t,e){var r=new dC;return r.x=i,r.y=l.convert(e),r.width=c-u.convert(t),r.height=p,r.strokeWidth=1,r.crisp=!0,r})),o.updateColors(r,n),o.root.append(o.bars),o}return PT(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]}))},e.chartType="groupedBar",e}(mT),AT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MT=function(t){function e(r,n,o,i,a,s){void 0===i&&(i=e.data),void 0===a&&(a=[0,16]),void 0===s&&(s="stackedBarTooltip");var l=t.call(this,r,s)||this,u=l.size,c=l.padding,p=new Zf;p.domain=[0,1,2],p.range=[c,u-c],p.paddingInner=.3,p.paddingOuter=.3;var d=new qy;d.domain=a,d.range=[u-c,c];var h=d.convert(0),f=p.bandwidth;return l.bars=i.map((function(t){return t.map((function(t,e){var r=new dC;return r.x=c,r.y=p.convert(e),r.width=h-d.convert(t),r.height=f,r.strokeWidth=1,r.crisp=!0,r}))})),l.updateColors(n,o),l.root.append([].concat.apply([],l.bars)),l}return AT(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(r,n){return r.forEach((function(r){r.fill=t[n],r.stroke=e[n]}))}))},e.chartType="stackedBar",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(mT),RT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_T=function(t){function e(r,n,o){return t.call(this,r,n,o,e.data,[0,10],"normalizedBarTooltip")||this}return RT(e,t),e.chartType="normalizedBar",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(MT),kT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),FT=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},IT=Rl,LT=function(t){function e(e,r,n,o,i){void 0===o&&(o=.6),void 0===i&&(i="doughnutTooltip");var a=t.call(this,e,i)||this,s=(a.size-2*a.padding)/2,l=s+a.padding,u=[[IT(-90),IT(30)],[IT(30),IT(120)],[IT(120),IT(180)],[IT(180),IT(210)],[IT(210),IT(240)],[IT(240),IT(270)]];return a.sectors=u.map((function(t){var e=FT(t,2),r=e[0],n=e[1],i=new ig;return i.centerX=l,i.centerY=l,i.innerRadius=s*o,i.outerRadius=s,i.startAngle=r,i.endAngle=n,i.stroke=void 0,i.strokeWidth=1,i})),a.updateColors(r,n),a.root.append(a.sectors),a}return kT(e,t),e.prototype.updateColors=function(t,e){this.sectors.forEach((function(r,n){r.fill=t[n%t.length],r.stroke=e[n%e.length]}))},e.chartType="doughnut",e}(vT),NT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GT=function(t){function e(e,r,n){return t.call(this,e,r,n,0,"pieTooltip")||this}return NT(e,t),e.chartType="pie",e}(LT),jT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BT=function(t){function e(e,r,n){var o=t.call(this,e,"lineTooltip")||this;return o.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],o.lines=CT(o.root,o.data,o.size,o.padding),o.updateColors(r,n),o}return jT(e,t),e.prototype.updateColors=function(t,e){this.lines.forEach((function(e,r){e.stroke=t[r]}))},e.chartType="line",e}(mT),VT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),HT=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},zT=function(t){function e(e,r,n){var o=t.call(this,e,"scatterTooltip")||this,i=o.size,a=o.padding,s=[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]],l=new qy;l.domain=[-.5,4],l.range=[2*a,i-a];var u=new qy;u.domain=[-.5,3.5],u.range=[i-a,a];var c=[];s.forEach((function(t){t.forEach((function(t){var e=HT(t,2),r=e[0],n=e[1],o=new FO;o.strokeWidth=1,o.centerX=l.convert(r),o.centerY=u.convert(n),o.radius=2.5,c.push(o)}))})),o.points=c,o.updateColors(r,n);var p=new yl;return p.setClipRectInGroupCoordinateSpace(new Ls(a,a,i-2*a,i-2*a)),p.append(o.points),o.root.append(p),o}return VT(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(r,n){r.stroke=e[n%e.length],r.fill=t[n%t.length]}))},e.chartType="scatter",e}(mT),UT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),WT=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},KT=function(t){function e(e,r,n){var o=t.call(this,e,"bubbleTooltip")||this,i=o.size,a=o.padding,s=[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]],l=new qy;l.domain=[0,1],l.range=[2*a,i-a];var u=new qy;u.domain=[0,1],u.range=[i-a,a];var c=[];s.forEach((function(t){t.forEach((function(t){var e=WT(t,3),r=e[0],n=e[1],o=e[2],i=new FO;i.strokeWidth=1,i.centerX=l.convert(r),i.centerY=u.convert(n),i.radius=o,i.fillOpacity=.7,c.push(i)}))})),o.points=c,o.updateColors(r,n);var p=new yl;return p.setClipRectInGroupCoordinateSpace(new Ls(a,a,i-2*a,i-2*a)),p.append(o.points),o.root.append(p),o}return UT(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(r,n){r.stroke=e[n%e.length],r.fill=t[n%t.length]}))},e.chartType="bubble",e}(mT),XT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),YT=function(t){function e(r,n,o,i){void 0===i&&(i=e.data);var a=t.call(this,r,"groupedAreaTooltip")||this,s=a.size,l=a.padding,u=new Zf;u.domain=[0,1,2],u.paddingInner=1,u.paddingOuter=0,u.range=[l+.5,s-l-.5];var c=new qy;c.domain=[0,6],c.range=[s-l+.5,l];var p=i.length,d=2*p-1,h=[],f=c.convert(0);return i.forEach((function(t,e){var r=u.convert(e);t.forEach((function(t,n){var o=c.convert(t),i=h[n]||(h[n]=[]);i[e]={x:r,y:o},i[d-e]={x:r,y:f}}))})),a.areas=h.reverse().map((function(t){var e=new Dh;e.strokeWidth=1,e.fillOpacity=.7;var r=e.path;return r.clear(),t.forEach((function(t,e){return r[e>0?"lineTo":"moveTo"](t.x,t.y)})),r.closePath(),e})),a.updateColors(n,o),a.root.append(a.areas),a}return XT(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]}))},e.chartType="area",e.data=[[1,3,5],[2,6,4],[5,3,1]],e}(mT),qT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZT=function(t){function e(r,n,o,i,a){void 0===i&&(i=e.data),void 0===a&&(a="stackedAreaTooltip");var s=t.call(this,r,a)||this,l=s.size,u=s.padding,c=new Zf;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[u+.5,l-u-.5];var p=new qy;p.domain=[0,16],p.range=[l-u+.5,u+.5];var d=i.length,h=2*d-1,f=[];return i.forEach((function(t,e){var r=c.convert(e),n=0;t.forEach((function(t,o){var i=p.convert(n+t),a=f[o]||(f[o]=[]);a[e]={x:r,y:i},a[h-e]={x:r,y:p.convert(n)},n+=t}))})),s.areas=f.map((function(t){var e=new Dh;e.strokeWidth=1;var r=e.path;return r.clear(),t.forEach((function(t,e){return r[e>0?"lineTo":"moveTo"](t.x,t.y)})),r.closePath(),e})),s.updateColors(n,o),s.root.append(s.areas),s}return qT(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]}))},e.chartType="stackedArea",e.data=[[2,3,2],[3,6,5],[6,2,2]],e}(mT),JT=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QT=function(t){function e(r,n,o,i){return void 0===i&&(i=e.data),t.call(this,r,n,o,i,"normalizedAreaTooltip")||this}return JT(e,t),e.chartType="normalizedArea",e.data=ZT.data.map((function(t){var e=t.reduce((function(t,e){return t+e}),0);return t.map((function(t){return t/e*16}))})),e}(ZT),$T=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tP=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},eP=function(t){function e(e,r,n){var o=t.call(this,e,"histogramTooltip")||this,i=o.padding,a=o.size,s=[2,5,11,13,10,6,1],l=new qy;l.domain=[0,s.length],l.range=[i,a-i];var u=new qy;u.domain=[0,s.reduce((function(t,e){return Math.max(t,e)}),0)],u.range=[a-i,i];var c=u.convert(0);return o.bars=s.map((function(t,e){var r=u.convert(t),n=l.convert(e),o=l.convert(e+1),i=new dC;return i.x=n,i.y=r,i.width=o-n,i.height=c-r,i.strokeWidth=1,i.crisp=!0,i})),o.updateColors(r,n),o.root.append(o.bars),o}return $T(e,t),e.prototype.updateColors=function(t,e){var r=tP(t,1),n=r[0],o=tP(e,1),i=o[0];this.bars.forEach((function(t){t.fill=n,t.stroke=i}))},e.chartType="histogram",e}(mT),rP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nP=function(t){function e(e,r,n){var o=t.call(this,e,"columnLineComboTooltip")||this;o.columnData=[3,4],o.lineData=[[5,4,6,5,4]];var i=o,a=i.root,s=i.columnData,l=i.lineData,u=i.size,c=i.padding;return o.columns=bT({stacked:!1,root:a,data:s,size:u,padding:c,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),a.append(o.columns),o.lines=CT(a,l,u,c),o.updateColors(r,n),o}return rP(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]})),this.lines.forEach((function(e,r){e.stroke=t[r+2]}))},e.chartType="columnLineCombo",e}(mT),oP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iP=function(t){function e(e,r,n){var o=t.call(this,e,"areaColumnComboTooltip")||this;o.columnData=[3,4.5],o.areaData=[[5,4,6,5,4]];var i=o,a=i.root,s=i.columnData,l=i.areaData,u=i.size,c=i.padding;o.columns=bT({stacked:!1,root:a,data:s,size:u,padding:c,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var p=new Zf;p.range=[c,u-c],p.domain=[0,1,2,3,4],p.paddingInner=1,p.paddingOuter=0;var d=new qy;d.range=[u-c,c],d.domain=[0,6];var h=[],f=d.convert(0),v=p.convert(0);return l.forEach((function(t,e){var r=h[e]||(h[e]=[]);t.forEach((function(t,e){var n=t,o=e,i=p.convert(o),a=d.convert(n);r[e]={x:i,y:a}}));var n=p.convert(t.length-1);h[e].push({x:n,y:f},{x:v,y:f})})),o.areas=h.map((function(t){var e=new Dh;e.strokeWidth=1,e.fillOpacity=.8;var r=e.path;return t.forEach((function(t,e){return r[e>0?"lineTo":"moveTo"](t.x,t.y)})),e})),a.append(o.areas),a.append([].concat.apply([],o.columns)),o.updateColors(r,n),o}return oP(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]})),this.columns.forEach((function(r,n){r.fill=t[n+1],r.stroke=e[n+1]}))},e.chartType="areaColumnCombo",e}(mT),aP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sP=function(t){function e(e,r,n){var o=t.call(this,e,"customComboTooltip")||this;o.columnData=[3,4],o.lineData=[[5,4,6,5,4]];var i=o,a=i.root,s=i.columnData,l=i.lineData,u=i.size,c=i.padding;o.columns=bT({stacked:!1,root:a,data:s,size:u,padding:c,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),a.append(o.columns),o.lines=CT(a,l,u,c);var p="grey",d=3,h=new $f;h.x1=c,h.y1=c,h.x2=c,h.y2=u-c+d,h.stroke=p;var f=new $f;f.x1=c-d+1,f.y1=u-c,f.x2=u-c+1,f.y2=u-c,f.stroke=p;var v=new Dh;return o.buildPenIconPath(v),v.fill="whitesmoke",v.stroke="darkslategrey",v.strokeWidth=1,a.append([f,h,v]),o.updateColors(r,n),o}return aP(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(r,n){r.fill=t[n],r.stroke=e[n]})),this.lines.forEach((function(e,r){e.stroke=t[r+2]}))},e.prototype.buildPenIconPath=function(t){var e=t.path;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)},e.chartType="customCombo",e}(vT),lP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uP=function(){return uP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},uP.apply(this,arguments)},cP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},pP={columnGroup:{column:wT,stackedColumn:OT,normalizedColumn:TT},barGroup:{bar:DT,stackedBar:MT,normalizedBar:_T},pieGroup:{pie:GT,doughnut:LT},lineGroup:{line:BT},scatterGroup:{scatter:zT,bubble:KT},areaGroup:{area:YT,stackedArea:ZT,normalizedArea:QT},histogramGroup:{histogram:eP},combinationGroup:{columnLineCombo:nP,areaColumnCombo:iP,customCombo:sP}},dP=function(t){function e(r,n,o,i){void 0===i&&(i=a["M"]);var s=t.call(this,e.TEMPLATE)||this;return s.wrappers={},s.chartController=r,s.fills=n,s.strokes=o,s.chartGroups=uP({},i),s}return lP(e,t),e.prototype.init=function(){var t=this;!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter((function(t){return"customCombo"!==t})));var e=this.getGui();Object.keys(this.chartGroups).forEach((function(r){var n=t.chartGroups[r],o=t.createBean(new a["e"]({title:t.chartTranslationService.translate(r),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));n.forEach((function(e){var n,i=null===(n=pP[r])||void 0===n?void 0:n[e];if(i){var s=document.createElement("div");s.classList.add("ag-chart-mini-thumbnail");var l=i.chartType;t.addManagedListener(s,"click",(function(){t.chartController.setChartType(l),t.updateSelectedMiniChart()})),t.wrappers[l]=s,t.createBean(new i(s,t.fills,t.strokes)),o.addItem(s)}else pP[r]?a["Bb"].doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+r+"."+e+"'")}),"invalid_chartGroupsDef"+e+"_"+r):a["Bb"].doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+r+"'")}),"invalid_chartGroupsDef"+r)})),e.appendChild(o.getGui())})),this.updateSelectedMiniChart()},e.prototype.updateSelectedMiniChart=function(){var t=this.chartController.getChartType();for(var e in this.wrappers){var r=this.wrappers[e],n=e===t;r.classList.toggle("ag-selected",n)}},e.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',cP([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),cP([a["fb"]],e.prototype,"init",null),e}(a["H"]),hP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},vP=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.miniChartsContainers=[],n.cardItems=[],n.activePaletteIndex=0,n.palettes=[],n.themes=[],n.chartController=r,n}return hP(e,t),e.prototype.postConstruct=function(){var t=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",a["Bb"].createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",a["Bb"].createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",(function(){return t.setActivePalette(t.getPrev(),"left")})),this.addManagedListener(this.eNextBtn,"click",(function(){return t.setActivePalette(t.getNext(),"right")})),this.addManagedListener(this.chartController,pE.EVENT_CHART_TYPE_CHANGED,(function(){return t.resetPalettes(!0)})),this.addManagedListener(this.chartController,pE.EVENT_CHART_API_UPDATE,(function(){return t.resetPalettes(!0)})),this.scrollSelectedIntoView()},e.prototype.scrollSelectedIntoView=function(){var t=this;setTimeout((function(){var e=function(t){return!t.getGui().classList.contains("ag-hidden")},r=t.miniChartsContainers.find(e),n=r.getGui().querySelector(".ag-selected");if(n){var o=n.offsetParent;o&&t.eMiniChartsContainer.scrollTo(0,o.offsetTop)}}),250)},e.prototype.resetPalettes=function(t){var e,r,n=this,o=this.chartController.getPalettes(),i=null===(r=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.settingsPanel)||void 0===r?void 0:r.chartGroupsDef;a["Bb"].shallowCompare(o,this.palettes)&&!t||this.isAnimating||(this.palettes=o,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex((function(t){return t===n.chartController.getChartThemeName()})),this.cardItems=[],a["Bb"].clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach((function(t,e){var r=n.activePaletteIndex===e,o=t.fills,a=t.strokes,s=n.createBean(new dP(n.chartController,o,a,i));n.miniChartsContainers.push(s),n.eMiniChartsContainer.appendChild(s.getGui()),n.addCardLink(e),r?s.updateSelectedMiniChart():s.setDisplayed(!1)})),a["Bb"].setDisplayed(this.eNavBar,this.palettes.length>1),a["Bb"].radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},e.prototype.addCardLink=function(t){var e=this,r=document.createElement("div");r.classList.add("ag-chart-settings-card-item"),this.addManagedListener(r,"click",(function(){e.setActivePalette(t,t<e.activePaletteIndex?"left":"right")})),this.eCardSelector.appendChild(r),this.cardItems.push(r)},e.prototype.getPrev=function(){var t=this.activePaletteIndex-1;return t<0&&(t=this.palettes.length-1),t},e.prototype.getNext=function(){var t=this.activePaletteIndex+1;return t>=this.palettes.length&&(t=0),t},e.prototype.setActivePalette=function(t,e){var r=this;if(!this.isAnimating&&this.activePaletteIndex!==t){a["Bb"].radioCssClass(this.cardItems[t],"ag-selected","ag-not-selected");var n=this.miniChartsContainers[this.activePaletteIndex],o=n.getGui(),i=this.miniChartsContainers[t],s=i.getGui();n.updateSelectedMiniChart(),i.updateSelectedMiniChart();var l="left"===e?-1:1,u=s.style.left=a["Bb"].getAbsoluteWidth(this.getGui())*l+"px";this.activePaletteIndex=t,this.isAnimating=!0;var c="ag-animating";i.setDisplayed(!0),n.addCssClass(c),i.addCssClass(c),this.chartController.setChartThemeName(this.themes[t]),window.setTimeout((function(){o.style.left=-parseFloat(u)+"px",s.style.left="0px"}),0),window.setTimeout((function(){r.isAnimating=!1,n.removeCssClass(c),i.removeCssClass(c),n.setDisplayed(!1)}),300)}},e.prototype.destroyMiniCharts=function(){a["Bb"].clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)},e.prototype.destroy=function(){this.destroyMiniCharts(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',fP([Object(a["u"])("resizeObserverService")],e.prototype,"resizeObserverService",void 0),fP([Object(a["kb"])("eMiniChartsContainer")],e.prototype,"eMiniChartsContainer",void 0),fP([Object(a["kb"])("eNavBar")],e.prototype,"eNavBar",void 0),fP([Object(a["kb"])("eCardSelector")],e.prototype,"eCardSelector",void 0),fP([Object(a["kb"])("ePrevBtn")],e.prototype,"ePrevBtn",void 0),fP([Object(a["kb"])("eNextBtn")],e.prototype,"eNextBtn",void 0),fP([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),yP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},mP=function(t){function e(e){var r=t.call(this)||this;r.tabs=[];var n=e.controller,o=e.panels,i=e.chartOptionsService;return r.chartController=n,r.chartOptionsService=i,r.panels=o,r}return yP(e,t),e.prototype.init=function(){var t=this;this.panels.forEach((function(e){var r=e.replace("chart","").toLowerCase(),n=t.createTab(e,r,t.getPanelClass(r)),o=n.comp,i=n.tab;t.tabs.push(i),t.addDestroyFunc((function(){return t.destroyBean(o)}))})),this.tabbedLayout=new a["sb"]({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},e.prototype.createTab=function(t,e,r){var n=document.createElement("div");n.classList.add("ag-chart-tab","ag-chart-"+e);var o=new r(this.chartController,this.chartOptionsService);this.getContext().createBean(o),n.appendChild(o.getGui());var i=document.createElement("div"),s=this.chartTranslationService.translate(e);return i.innerText=s,{comp:o,tab:{title:i,titleLabel:s,bodyPromise:a["m"].resolve(n),getScrollableContainer:function(){var t=n.querySelector(".ag-scrollable-container");return t||n},name:t}}},e.prototype.showTab=function(t){var e=this.tabs[t];this.tabbedLayout.showItem(e)},e.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},e.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),t.prototype.destroy.call(this)},e.prototype.getPanelClass=function(t){switch(t){case e.TAB_DATA:return mE;case e.TAB_FORMAT:return dT;default:return vP}},e.TAB_DATA="data",e.TAB_FORMAT="format",gP([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),gP([a["fb"]],e.prototype,"init",null),e}(a["H"]),bP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},SP=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},wP=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},xP=function(t){function e(r,n,o,i){var a=t.call(this,e.TEMPLATE)||this;return a.eChartContainer=r,a.eMenuPanelContainer=n,a.chartController=o,a.chartOptionsService=i,a.buttons={chartSettings:["menu",function(){return a.showMenu(a.defaultPanel)}],chartData:["menu",function(){return a.showMenu("chartData")}],chartFormat:["menu",function(){return a.showMenu("chartFormat")}],chartLink:["linked",function(t){return a.toggleDetached(t)}],chartUnlink:["unlinked",function(t){return a.toggleDetached(t)}],chartDownload:["save",function(){return a.saveChart()}]},a.panels=[],a.buttonListenersDestroyFuncs=[],a.menuVisible=!1,a}return bP(e,t),e.prototype.postConstruct=function(){var t=this;this.createButtons(),this.addManagedListener(this.eventService,a["R"].EVENT_CHART_CREATED,(function(e){var r;if(e.chartId===t.chartController.getChartId()){var n=Boolean(null===(r=t.gridOptionsService.get("chartToolPanelsDef"))||void 0===r?void 0:r.defaultToolPanel);n&&t.showMenu(t.defaultPanel,!1)}})),this.refreshMenuClasses(),!this.gridOptionsService.is("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,pE.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))},e.prototype.isVisible=function(){return this.menuVisible},e.prototype.getExtraPaddingDirections=function(){var t=this,e=["chartLink","chartUnlink","chartDownload"],r=["chartSettings","chartData","chartFormat"],n=[];return e.some((function(e){return t.chartToolbarOptions.includes(e)}))&&n.push("top"),r.some((function(e){return t.chartToolbarOptions.includes(e)}))&&n.push(this.gridOptionsService.is("enableRtl")?"left":"right"),n},e.prototype.getToolbarOptions=function(){var t,e,r,n=this,o=Boolean(this.gridOptionsService.get("chartToolPanelsDef"));if(o){var i=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],s=this.gridOptionsService.getCallback("getChartToolbarItems"),l={defaultItems:i},u=s?s(l).filter((function(t){if(!a["A"].includes(t)){var e=a["B"].includes(t)?"AG Grid: '"+t+"' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead":"AG Grid: '"+t+"' is not a valid Chart Toolbar Option";return console.warn(e),!1}return!0})):i,c=null===(e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.panels)||void 0===e?void 0:e.map((function(t){var e=a["C"][t];return e||console.warn("AG Grid - invalid panel in chartToolPanelsDef.panels: '"+t+"'"),e})).filter((function(t){return Boolean(t)}));this.panels=c||Object.values(a["C"]),this.chartController.isPivotChart()&&(this.panels=this.panels.filter((function(t){return"chartData"!==t})));var p=null===(r=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===r?void 0:r.defaultToolPanel;return this.defaultPanel=p&&a["C"][p]||this.panels[0],this.panels.length>0?wP([this.panels[0]],SP(u)):u}var d=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];s=this.gridOptionsService.getCallback("getChartToolbarItems");if(s){var h=this.gridOptionsService.is("suppressChartToolPanelsButton");l={defaultItems:h?d:a["A"]};d=s(l).filter((function(t){if(!n.buttons[t])return console.warn("AG Grid: '"+t+"' is not a valid Chart Toolbar Option"),!1;if(!h&&a["B"].includes(t)){var e="AG Grid: '"+t+"' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead";return console.warn(e),!1}return!0})),h||(d=d.concat(a["B"]))}this.chartController.isPivotChart()&&(d=d.filter((function(t){return"chartData"!==t})));var f=["chartUnlink","chartLink","chartDownload"];return this.panels=d.filter((function(t){return-1===f.indexOf(t)})),this.defaultPanel=this.panels[0],d.filter((function(t){return-1!==f.indexOf(t)||n.panels.length&&t===n.panels[0]}))},e.prototype.toggleDetached=function(t){var e=t.target,r=e.classList.contains("ag-icon-linked");e.classList.toggle("ag-icon-linked",!r),e.classList.toggle("ag-icon-unlinked",r);var n=r?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",o=this.chartTranslationService.translate(n);o&&(e.title=o),this.chartController.detachChartRange()},e.prototype.createButtons=function(){var t=this;this.buttonListenersDestroyFuncs.forEach((function(t){return t()})),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();var e=this.eMenu;a["Bb"].clearElement(e),this.chartToolbarOptions.forEach((function(r){var n=t.buttons[r],o=SP(n,2),i=o[0],s=o[1],l=a["Bb"].createIconNoSpan(i,t.gridOptionsService,void 0,!0);l.classList.add("ag-chart-menu-icon");var u=t.chartTranslationService.translate(r+"ToolbarTooltip");u&&l instanceof HTMLElement&&(l.title=u),t.buttonListenersDestroyFuncs.push(t.addManagedListener(l,"click",s)),e.appendChild(l)}))},e.prototype.saveChart=function(){var t={type:e.EVENT_DOWNLOAD_CHART};this.dispatchEvent(t)},e.prototype.createMenuPanel=function(t){var e=this,r=this.environment.chartMenuPanelWidth(),n=this.menuPanel=this.createBean(new a["k"]({minWidth:r,width:r,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return n.setParentComponent(this),this.eMenuPanelContainer.appendChild(n.getGui()),this.tabbedMenu=this.createBean(new mP({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(n,a["H"].EVENT_DESTROYED,(function(){return e.destroyBean(e.tabbedMenu)})),new a["m"]((function(r){window.setTimeout((function(){n.setBodyComponent(e.tabbedMenu),e.tabbedMenu.showTab(t),r(n),e.addManagedListener(e.eChartContainer,"click",(function(t){e.getGui().contains(t.target)||e.menuVisible&&e.hideMenu()}))}),100)}))},e.prototype.showContainer=function(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},e.prototype.toggleMenu=function(){this.menuVisible?this.hideMenu():this.showMenu()},e.prototype.showMenu=function(t,e){var r=this;if(void 0===e&&(e=!0),e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer();else{var n=t||this.defaultPanel,o=this.panels.indexOf(n);o<0&&(console.warn("AG Grid: '"+t+"' is not a valid Chart Tool Panel name"),o=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(o),this.showContainer()):this.createMenuPanel(o).then(this.showContainer.bind(this))}e||setTimeout((function(){r.isAlive()&&r.eMenuPanelContainer.classList.remove("ag-no-transition")}),500)},e.prototype.hideMenu=function(){var t=this;this.hideParent(),window.setTimeout((function(){t.menuVisible=!1,t.refreshMenuClasses()}),500)},e.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.is("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))},e.prototype.showParent=function(t){this.eMenuPanelContainer.style.minWidth=t+"px"},e.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)},e.EVENT_DOWNLOAD_CHART="downloadChart",e.TEMPLATE='<div>\n        <div class="ag-chart-menu" ref="eMenu"></div>\n        <button class="ag-button ag-chart-menu-close" ref="eHideButton">\n            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>\n        </button>\n    </div>',CP([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),CP([Object(a["kb"])("eMenu")],e.prototype,"eMenu",void 0),CP([Object(a["kb"])("eHideButton")],e.prototype,"eHideButton",void 0),CP([Object(a["kb"])("eHideButtonIcon")],e.prototype,"eHideButtonIcon",void 0),CP([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),OP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),EP=function(){return EP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},EP.apply(this,arguments)},TP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},PP=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DP=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.chartMenu=r,n.destroyableChartListeners=[],n.editing=!1,n}return OP(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.getGui(),"keydown",(function(e){t.editing&&"Enter"===e.key&&!e.shiftKey&&(t.handleEndEditing(),e.preventDefault())})),this.addManagedListener(this.getGui(),"input",(function(){t.editing&&t.updateHeight()})),this.addManagedListener(this.getGui(),"blur",(function(){return t.endEditing()}))},e.prototype.refreshTitle=function(t,e){var r,n,o=this;this.chartController=t,this.chartOptionsService=e;try{for(var i=PP(this.destroyableChartListeners),a=i.next();!a.done;a=i.next()){var s=a.value;s()}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.destroyableChartListeners=[];var l=this.chartController.getChartProxy(),u=l.getChart(),c=u.scene.canvas.element,p=this.addManagedListener(c,"dblclick",(function(t){var e=u.title;if(e&&e.node.containsPoint(t.offsetX,t.offsetY)){var r=e.node.computeBBox(),n=e.node.inverseTransformPoint(r.x,r.y);o.startEditing(EP(EP({},r),n),c.width)}})),d=!1,h=this.addManagedListener(c,"mousemove",(function(t){var e=u.title,r=!!(e&&e.enabled&&e.node.containsPoint(t.offsetX,t.offsetY));d!==r&&(c.style.cursor=r?"pointer":""),d=r}));this.destroyableChartListeners=[p,h]},e.prototype.startEditing=function(t,e){if((!this.chartMenu||!this.chartMenu.isVisible())&&!this.editing){this.editing=!0;var r=300,n=Math.max(Math.min(t.width+20,e),r),o=this.getGui();o.classList.add("currently-editing");var i=o.style;i.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),i.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),i.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),i.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",i.color=this.chartOptionsService.getChartOption("title.color");var a=this.chartOptionsService.getChartOption("title.text"),s=a===this.chartTranslationService.translate("titlePlaceholder");o.value=s?"":a;var l=a.split(/\r?\n/g).length;i.left=Math.round(t.x+t.width/2-n/2-1)+"px",i.top=Math.round(t.y+t.height/2-l*this.getLineHeight()/2-2)+"px",i.width=Math.round(n)+"px",i.lineHeight=this.getLineHeight()+"px",this.updateHeight(),o.focus()}},e.prototype.updateHeight=function(){var t=this.getGui(),e=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,r=t.value.split(/\r?\n/g).length;t.style.height=Math.round(Math.max(e,r)*this.getLineHeight())+4+"px"},e.prototype.getLineHeight=function(){var t=this.chartOptionsService.getChartOption("title.lineHeight");return t?parseInt(t):Math.round(1.2*parseInt(this.chartOptionsService.getChartOption("title.fontSize")))},e.prototype.handleEndEditing=function(){var t=this,e=this.chartOptionsService.getChartOption("title.color"),r="rgba(0, 0, 0, 0)";this.chartOptionsService.setChartOption("title.color",r),this.chartOptionsService.awaitChartOptionUpdate((function(){return t.endEditing()})),this.chartOptionsService.awaitChartOptionUpdate((function(){t.chartOptionsService.setChartOption("title.color",e)}))},e.prototype.endEditing=function(){var t=this;if(this.editing){this.editing=!1;var e=this.getGui().value;e&&""!==e.trim()?(this.chartOptionsService.setChartOption("title.text",e),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate((function(){t.eventService.dispatchEvent({type:"chartTitleEdit"})}))}},e.TEMPLATE='<textarea\n             class="ag-chart-title-edit"\n             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />\n        ',TP([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),TP([a["fb"]],e.prototype,"init",null),e}(a["H"]),AP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),MP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},RP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return AP(e,t),e.prototype.getData=function(t){if(t.crossFiltering){if(t.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}var e=this.gridOptionsService.isRowModelType("serverSide");e&&t.pivoting&&this.updatePivotKeysForSSRM();var r=this.extractRowsFromGridRowModel(t);return r.chartData=this.aggregateRowsByDimension(t,r.chartData),r},e.prototype.extractRowsFromGridRowModel=function(t){var r,n=this,o=[],i={},s={},l={},u={},c=[];if(t.crossFiltering)u=this.getFilteredRowNodes(),c=this.getAllRowNodes(),r=c.length;else{var p=this.gridRowModel.getRowCount()-1,d=t.endRow>=0?Math.min(t.endRow,p):p;r=d-t.startRow+1}for(var h=function(r){var a={},p=t.crossFiltering?c[r]:f.gridRowModel.getRow(r+t.startRow);t.dimensionCols.forEach((function(o){var i=o.colId,u=n.columnModel.getGridColumn(i);if(u){var c=n.valueService.getValue(u,p);if(t.grouping){var d=c&&c.toString?String(c.toString()):"",h=e.getGroupLabels(p,d);a[i]={labels:h,toString:function(){return this.labels.filter((function(t){return!!t})).reverse().join(" - ")}},p.group&&(s[h.toString()]=r);var f=h.slice(1,h.length).toString();f&&(l[f]=s[f])}else a[i]=c}else a[zP.DEFAULT_CATEGORY]=r+1})),t.valueCols.forEach((function(e){var r=[],o=e.getColDef().pivotKeys;o&&(r=o.slice());var s=e.getColDef().headerName;s&&r.push(s),r.length>0&&(i[e.getId()]=r);var l=e.getColId();if(t.crossFiltering){var c=l+"-filtered-out",d=n.valueService.getValue(e,p),h=null!=d&&"function"===typeof d.toNumber?d.toNumber():d;u[p.id]?(a[l]=h,a[c]=t.aggFunc||t.isScatter?void 0:0):(a[l]=t.aggFunc||t.isScatter?void 0:0,a[c]=h)}else{d=n.valueService.getValue(e,p);d&&d.hasOwnProperty("toString")&&(d=parseFloat(d.toString())),a[l]=null!=d&&"function"===typeof d.toNumber?d.toNumber():d}})),p.footer&&(a.footer=!0),o.push(a)},f=this,v=0;v<r;v++)h(v);if(t.grouping){var y=a["Bb"].values(l),g=function(t,e){return!t.footer&&!a["Bb"].includes(y,e)};o=o.filter(g)}return{chartData:o,columnNames:i}},e.prototype.aggregateRowsByDimension=function(t,e){var r=this,n=t.dimensionCols;if(!t.aggFunc||0===n.length)return e;var o=a["Bb"].last(n),i=o&&o.colId,s={},l=[];return e.forEach((function(t){var e=s;n.forEach((function(r){var o=r.colId,a=t[o];if(o===i){var s=e[a];s||(s={__children:[]},n.forEach((function(e){var r=e.colId;s[r]=t[r]})),e[a]=s,l.push(s)),s.__children.push(t)}else e[a]||(e[a]={}),e=e[a]}))})),a["ab"].__assertRegistered(a["Z"].RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&l.forEach((function(e){return t.valueCols.forEach((function(n){if(t.crossFiltering)t.valueCols.forEach((function(n){var o=n.getColId(),i=e.__children.filter((function(t){return"undefined"!==typeof t[o]})).map((function(t){return t[o]})),a=r.aggregationStage.aggregateValues(i,t.aggFunc);e[n.getId()]=a&&"undefined"!==typeof a.value?a.value:a;var s=o+"-filtered-out",l=e.__children.filter((function(t){return"undefined"!==typeof t[s]})).map((function(t){return t[s]})),u=r.aggregationStage.aggregateValues(l,t.aggFunc);e[s]=u&&"undefined"!==typeof u.value?u.value:u}));else{var o=e.__children.map((function(t){return t[n.getId()]})),i=0;a["ab"].__assertRegistered(a["Z"].RowGroupingModule,"Charting Aggregation",r.context.getGridId())&&(i=r.aggregationStage.aggregateValues(o,t.aggFunc)),e[n.getId()]=i&&"undefined"!==typeof i.value?i.value:i}}))})),l},e.prototype.updatePivotKeysForSSRM=function(){var t=this.columnModel.getSecondaryColumns();if(t){var e=this.extractPivotKeySeparator(t);t.forEach((function(t){if(""===e)t.getColDef().pivotKeys=[];else{var r=t.getColId().split(e);t.getColDef().pivotKeys=r.slice(0,r.length-1)}}))}},e.prototype.extractPivotKeySeparator=function(t){if(0===t.length)return"";var e=function(t,r){var n=t.getGroupId();return t.getParent()?e(t.getParent(),n):r.split(n)[1][0]},r=t[0];return null==r.getParent()?"":e(r.getParent(),r.getColId())},e.getGroupLabels=function(t,e){var r=[e];while(t&&0!==t.level)t=t.parent,t&&r.push(t.key);return r},e.prototype.getFilteredRowNodes=function(){var t={};return this.gridRowModel.forEachNodeAfterFilterAndSort((function(e){t[e.id]=e})),t},e.prototype.getAllRowNodes=function(){var t=[];return this.gridRowModel.forEachNode((function(e){t.push(e)})),this.sortRowNodes(t)},e.prototype.sortRowNodes=function(t){var e=this.sortController.getSortOptions(),r=!e||0==e.length;return r?t:this.rowNodeSorter.doFullSort(t,e)},MP([Object(a["u"])("rowModel")],e.prototype,"gridRowModel",void 0),MP([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),MP([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),MP([Object(a["u"])("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),MP([Object(a["u"])("sortController")],e.prototype,"sortController",void 0),MP([Object(a["cb"])("aggregationStage")],e.prototype,"aggregationStage",void 0),e}(a["z"]),_P=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},FP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _P(e,t),e.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},e.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},e.prototype.getColDisplayName=function(t){return this.columnModel.getDisplayNameForColumn(t,"chart")},e.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},e.prototype.getGroupDisplayColumns=function(){return this.columnModel.getGroupDisplayColumns()},e.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},e.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},e.prototype.getChartColumns=function(){var t=this,e=this.columnModel.getAllDisplayedColumns(),r=new Set,n=new Set;return e.forEach((function(e){var o=e.getColDef(),i=o.chartDataType;if(i)switch(i){case"category":case"time":return void r.add(e);case"series":return void n.add(e);case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '"+i+"' supplied, instead use 'category', 'series' or 'excluded'");break}"ag-Grid-AutoColumn"!==o.colId?e.isPrimary()?(t.isNumberCol(e)?n:r).add(e):n.add(e):r.add(e)})),{dimensionCols:r,valueCols:n}},e.prototype.isNumberCol=function(t){if("ag-Grid-AutoColumn"===t.getColId())return!1;var e=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!e)return!1;var r=this.valueService.getValue(t,e);return null==r&&(r=this.extractLeafData(e,t)),null!=r&&"function"===typeof r.toNumber&&(r=r.toNumber()),"number"===typeof r},e.prototype.extractLeafData=function(t,e){if(!t.allLeafChildren)return null;for(var r=0;r<t.allLeafChildren.length;r++){var n=t.allLeafChildren[r],o=this.valueService.getValue(e,n);if(null!=o)return o}return null},kP([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),kP([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),kP([Object(a["u"])("rowRenderer")],e.prototype,"rowRenderer",void 0),e=kP([Object(a["y"])("chartColumnService")],e),e}(a["z"]),IP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},NP=function(t){function e(e){var r,n=t.call(this)||this;return n.suppressComboChartWarnings=!1,n.chartDataModel=e,n.seriesChartTypes=null!==(r=e.params.seriesChartTypes)&&void 0!==r?r:[],n}return IP(e,t),e.prototype.init=function(){this.initComboCharts()},e.prototype.update=function(t){this.seriesChartTypes=null!==t&&void 0!==t?t:this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()},e.prototype.initComboCharts=function(){var t=this.seriesChartTypes&&this.seriesChartTypes.length>0,e="customCombo"===this.chartDataModel.chartType||t;e&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},e.prototype.updateSeriesChartTypes=function(){this.chartDataModel.isComboChart()&&(this.seriesChartTypes=this.seriesChartTypes.map((function(t){var e=["groupedColumn","stackedColumn","stackedArea"].includes(t.chartType);return t.secondaryAxis=!e&&t.secondaryAxis,t})),"customCombo"!==this.chartDataModel.chartType?this.updateChartSeriesTypesForBuiltInCombos():this.updateSeriesChartTypesForCustomCombo())},e.prototype.updateSeriesChartTypesForCustomCombo=function(){var t=this,r=this.seriesChartTypes&&this.seriesChartTypes.length>0;r||this.suppressComboChartWarnings||console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map((function(t){return e.SUPPORTED_COMBO_CHART_TYPES.includes(t.chartType)||(console.warn("AG Grid: invalid chartType '"+t.chartType+"' supplied in 'seriesChartTypes', converting to 'line' instead."),t.chartType="line"),t}));var n=function(e){t.savedCustomSeriesChartTypes&&0!==t.savedCustomSeriesChartTypes.length||(t.savedCustomSeriesChartTypes=t.seriesChartTypes);var r=t.savedCustomSeriesChartTypes.find((function(t){return t.colId===e.colId}));return r||(e.selected&&!t.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '"+e.colId+"', defaulting to 'line'."),{colId:e.colId,chartType:"line",secondaryAxis:!1})},o=this.chartDataModel.valueColState.map(n);this.seriesChartTypes=o,this.savedCustomSeriesChartTypes=o,this.suppressComboChartWarnings=!0},e.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var t=this.chartDataModel,e=t.chartType,r=t.valueColState,n="columnLineCombo"===e?"groupedColumn":"stackedArea",o="columnLineCombo"===e?"line":"groupedColumn",i=r.filter((function(t){return t.selected})),a=Math.ceil(i.length/2);this.seriesChartTypes=i.map((function(t,e){var r=e>=a?o:n;return{colId:t.colId,chartType:r,secondaryAxis:!1}}))},e.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],LP([a["fb"]],e.prototype,"init",null),e}(a["z"]),GP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jP=function(){return jP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},jP.apply(this,arguments)},BP=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},VP=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},HP=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},zP=function(t){function e(e){var r=t.call(this)||this;return r.unlinked=!1,r.chartData=[],r.valueColState=[],r.dimensionColState=[],r.columnNames={},r.crossFiltering=!1,r.grouping=!1,r.params=e,r.chartId=e.chartId,r.chartType=e.chartType,r.pivotChart=e.pivotChart,r.chartThemeName=e.chartThemeName,r.aggFunc=e.aggFunc,r.referenceCellRange=e.cellRange,r.suppliedCellRange=e.cellRange,r.suppressChartRanges=e.suppressChartRanges,r.unlinked=!!e.unlinkChart,r.crossFiltering=!!e.crossFiltering,r}return GP(e,t),e.prototype.init=function(){this.datasource=this.createManagedBean(new RP),this.chartColumnService=this.createManagedBean(new FP),this.comboChartModel=this.createManagedBean(new NP(this)),this.updateCellRanges(),this.updateData()},e.prototype.updateModel=function(t){var e=t.cellRange,r=t.chartType,n=t.pivotChart,o=t.chartThemeName,i=t.aggFunc,a=t.suppressChartRanges,s=t.unlinkChart,l=t.crossFiltering,u=t.seriesChartTypes;e!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=r,this.pivotChart=n,this.chartThemeName=o,this.aggFunc=i,this.referenceCellRange=e,this.suppliedCellRange=e,this.suppressChartRanges=a,this.unlinked=!!s,this.crossFiltering=!!l,this.updateSelectedDimension(null===e||void 0===e?void 0:e.columns),this.updateCellRanges();var c=this.isComboChart()||u;c&&this.comboChartModel.update(u),this.unlinked||this.updateData()},e.prototype.updateCellRanges=function(t){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var e=this.chartColumnService.getChartColumns(),r=e.dimensionCols,n=e.valueCols,o=this.getAllColumnsFromRanges();t&&this.updateColumnState(t),this.setDimensionCellRange(r,o,t),this.setValueCellRange(n,o,t),t||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()},e.prototype.updateData=function(){var t=this.getRowIndexes(),e=t.startRow,r=t.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var n={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:r,isScatter:a["Bb"].includes(["scatter","bubble"],this.chartType)},o=this.datasource.getData(n),i=o.chartData,s=o.columnNames;this.chartData=i,this.columnNames=s},e.prototype.isGrouping=function(){var t=this.gridOptionsService.is("treeData"),e=t?null:this.chartColumnService.getRowGroupColumns(),r=t||e&&e.length>0,n=this.getSelectedDimension().colId,o=this.chartColumnService.getGroupDisplayColumns(),i=o.map((function(t){return t.getColId()})).some((function(t){return t===n}));return!!r&&i},e.prototype.getSelectedValueCols=function(){return this.valueColState.filter((function(t){return t.selected})).map((function(t){return t.column}))},e.prototype.getSelectedDimension=function(){return this.dimensionColState.filter((function(t){return t.selected}))[0]},e.prototype.getColDisplayName=function(t){return this.chartColumnService.getColDisplayName(t)},e.prototype.isPivotMode=function(){return this.chartColumnService.isPivotMode()},e.prototype.getChartDataType=function(t){var e=this.chartColumnService.getColumn(t);return e?e.getColDef().chartDataType:void 0},e.prototype.isPivotActive=function(){return this.chartColumnService.isPivotActive()},e.prototype.createCellRange=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:e,startColumn:t===a["E"].DIMENSION?e[0]:this.referenceCellRange.startColumn,type:t}},e.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return a["Bb"].convertToSet(this.chartColumnService.getAllDisplayedColumns());var t=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&t.push.apply(t,HP([],VP(this.dimensionCellRange.columns))),this.valueCellRange&&t.push.apply(t,HP([],VP(this.valueCellRange.columns))),a["Bb"].convertToSet(t)},e.prototype.getRowIndexes=function(){var t=0,e=0,r=this,n=r.rangeService,o=r.valueCellRange;if(n&&o){t=n.getRangeStartRow(o).rowIndex;var i=n.getRangeEndRow(o);e="bottom"===i.rowPinned?-1:i.rowIndex}return{startRow:t,endRow:e}},e.prototype.resetColumnState=function(){var t=this,r=this.chartColumnService.getChartColumns(),n=r.dimensionCols,o=r.valueCols,i=this.getAllColumnsFromRanges(),s=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var l=!1,u=1,c=this.suppliedCellRange.columns[0];n.forEach((function(e){var r="ag-Grid-AutoColumn"===e.getColId(),n=!1;t.crossFiltering&&t.aggFunc?c.getColId()===e.getColId()&&(n=!0):n=!!r||!l&&i.has(e),t.dimensionColState.push({column:e,colId:e.getColId(),displayName:t.getColDisplayName(e),selected:n,order:u++}),n&&(l=!0)}));var p={colId:e.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!l,order:0};this.dimensionColState.unshift(p);var d=this.referenceCellRange.columns.filter((function(t){return o.has(t)}));o.forEach((function(e){s&&a["Bb"].includes(t.referenceCellRange.columns,e)&&(e=d.shift()),t.valueColState.push({column:e,colId:e.getColId(),displayName:t.getColDisplayName(e),selected:i.has(e),order:u++})}))},e.prototype.updateColumnState=function(t){var e=function(e){return e.colId===t.colId},r=this,n=r.dimensionColState,o=r.valueColState;n.filter(e).length>0?n.forEach((function(t){return t.selected=e(t)})):o.filter(e).forEach((function(e){return e.selected=t.selected}));var i=HP(HP([],VP(n)),VP(o)),a=[];i.forEach((function(e,r){r===t.order&&a.push(t.colId),e.colId!==t.colId&&a.push(e.colId)})),i.forEach((function(t){var e=a.indexOf(t.colId);t.order=e>=0?a.indexOf(t.colId):i.length-1})),this.reorderColState()},e.prototype.reorderColState=function(){var t=function(t,e){return t.order-e.order};this.dimensionColState.sort(t),this.valueColState.sort(t)},e.prototype.setDimensionCellRange=function(t,r,n){var o=this;if(this.dimensionCellRange=void 0,n||this.dimensionColState.length){var i=n;if(this.crossFiltering&&this.aggFunc){var s=this.suppliedCellRange.columns[0];i=this.dimensionColState.filter((function(t){return t.colId===s.getColId()}))[0]}else i&&t.has(i.column)||(i=this.dimensionColState.filter((function(t){return t.selected}))[0]);i&&i.colId!==e.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(a["E"].DIMENSION,i.column))}else t.forEach((function(t){!o.dimensionCellRange&&r.has(t)&&(o.dimensionCellRange=o.createCellRange(a["E"].DIMENSION,t))}))},e.prototype.setValueCellRange=function(t,e,r){this.valueCellRange=void 0;var n=[];if(t.forEach((function(t){r&&r.colId===t.getColId()?r.selected&&n.push(r.column):e.has(t)&&n.push(t)})),n.length>0){var o=[];this.valueColState.length>0?o=this.valueColState.map((function(t){return t.colId})):e.forEach((function(t){return o.push(t.getColId())})),n.sort((function(t,e){return o.indexOf(t.getColId())-o.indexOf(e.getColId())})),this.valueCellRange=this.createCellRange.apply(this,HP([a["E"].VALUE],VP(n)))}},e.prototype.updateSelectedDimension=function(t){var e=new Set(t.map((function(t){return t.getColId()}))),r=this.dimensionColState.find((function(t){return e.has(t.colId)}))||this.dimensionColState[0];this.dimensionColState=this.dimensionColState.map((function(t){return jP(jP({},t),{selected:t.colId===r.colId})}))},e.prototype.syncDimensionCellRange=function(){var t=this.getSelectedDimension();t&&t.column&&(this.dimensionCellRange=this.createCellRange(a["E"].DIMENSION,t.column))},e.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},e.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",BP([Object(a["u"])("rangeService")],e.prototype,"rangeService",void 0),BP([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),BP([a["fb"]],e.prototype,"init",null),e}(a["z"]);function UP(t){return null!=t.chart?t.chart:t}var WP=function(){return WP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},WP.apply(this,arguments)},KP=function(){function t(t){this.chartProxyParams=t,this.clearThemeOverrides=!1,this.chart=t.chartInstance,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=BO(this.chartType),null==this.chart?this.chart=vO.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}return t.prototype.getChart=function(){return UP(this.chart)},t.prototype.getChartRef=function(){return this.chart},t.prototype.downloadChart=function(t,e,r){var n=this.chart,o=UP(n),i=e||(o.title?o.title.text:"chart"),a=t||{},s=a.width,l=a.height;vO.download(n,{width:s,height:l,fileName:i,fileFormat:r})},t.prototype.getChartImageDataURL=function(t){return this.getChart().scene.getDataURL(t)},t.prototype.getChartOptions=function(){return this.chart.getOptions()},t.prototype.getChartThemeOverrides=function(){var t,e=this.getChartOptions().theme;return null!==(t=e.overrides)&&void 0!==t?t:{}},t.prototype.getChartPalette=function(){return ex(this.getChartOptions().theme).palette},t.prototype.setPaired=function(t){var e,r=BO(this.chartProxyParams.chartType);vO.updateDelta(this.chart,{theme:{overrides:(e={},e[r]={paired:t},e)}})},t.prototype.isPaired=function(){var t=BO(this.chartProxyParams.chartType);return a["Bb"].get(this.getChartThemeOverrides(),t+".paired",!0)},t.prototype.lookupCustomChartTheme=function(t){return JO(this.chartProxyParams,t)},t.prototype.transformData=function(t,e,r){return r?t.map((function(t,r){var n=t[e],o=n&&n.toString?n.toString():"",i=WP({},t);return i[e]={id:r,value:n,toString:function(){return o}},i})):t},t.prototype.getCommonChartOptions=function(t){var e,r,n=this.clearThemeOverrides?{}:null!==(r=null===(e=this.chart)||void 0===e?void 0:e.getOptions())&&void 0!==r?r:{},o=null!=this.chart?{overrides:this.getActiveFormattingPanelOverrides()}:{};return this.clearThemeOverrides=!1,WP(WP({},n),{theme:WP(WP({},UO(this.chartProxyParams,this)),t?{overrides:t}:o),container:this.chartProxyParams.parentElement,mode:"integrated"})},t.prototype.getActiveFormattingPanelOverrides=function(){var t,e;if(this.clearThemeOverrides)return{};var r=null===(t=this.chart)||void 0===t?void 0:t.getOptions().theme;return null!==(e=null===r||void 0===r?void 0:r.overrides)&&void 0!==e?e:{}},t.prototype.destroy=function(t){var e=void 0===t?{}:t,r=e.keepChartInstance,n=void 0!==r&&r;if(n)return this.chart;this.destroyChart()},t.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},t}(),XP=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),YP=function(){return YP=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},YP.apply(this,arguments)},qP=function(t){function e(e){var r=t.call(this,e)||this;return r.crossFilteringAllPoints=new Set,r.crossFilteringSelectedPoints=[],r}return XP(e,t),e.prototype.update=function(t){var e=this.getAxes(t),r=YP(YP({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.getData(t,e),axes:e,series:this.getSeries(t)});vO.update(this.getChartRef(),r)},e.prototype.getData=function(t,e){var r,n=["area","line"].includes(this.standaloneChartType),o="bar"===this.standaloneChartType?"left":"bottom",i="category"===(null===(r=e.find((function(t){return t.position===o})))||void 0===r?void 0:r.type);return this.crossFiltering&&n?this.getCrossFilterData(t):this.getDataTransformedData(t,i)},e.prototype.getDataTransformedData=function(t,e){return this.transformData(t.data,t.category.id,e)},e.prototype.getXAxisType=function(t){return t.grouping?"groupedCategory":e.isTimeAxis(t)?"time":"category"},e.isTimeAxis=function(t){if(t.category&&t.category.chartDataType)return"time"===t.category.chartDataType;var e=t.data[0];return(e&&e[t.category.id])instanceof Date},e.prototype.crossFilteringReset=function(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()},e.prototype.crossFilteringPointSelected=function(t){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(t)},e.prototype.crossFilteringDeselectedPoints=function(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length},e.prototype.extractLineAreaCrossFilterSeries=function(t,e){var r=this,n=function(t){if("area"===r.standaloneChartType){var n=e.getCrossFilteringContext().lastSelectedChartId;return n===e.chartId?t+"-total":t}return t+"-total"};return t.map((function(t){return t.yKey=n(t.yKey),t.listeners={nodeClick:function(e){var n=e.datum[t.xKey],o=e.event.metaKey||e.event.ctrlKey;r.crossFilteringAddSelectedPoint(o,n),r.crossFilterCallback(e)}},t.marker={formatter:function(t){var n=t.datum[e.category.id];return{fill:t.highlighted?"yellow":t.fill,size:t.highlighted?14:r.crossFilteringPointSelected(n)?8:0}}},"area"===r.standaloneChartType&&(t.fillOpacity=r.crossFilteringDeselectedPoints()?.3:1),"line"===r.standaloneChartType&&(t.strokeOpacity=r.crossFilteringDeselectedPoints()?.3:1),t}))},e.prototype.getCrossFilterData=function(t){var e=this;this.crossFilteringAllPoints.clear();var r=t.fields[0].colId,n=r+"-filtered-out",o=t.getCrossFilteringContext().lastSelectedChartId;return t.data.map((function(i){var a=i[t.category.id];e.crossFilteringAllPoints.add(a);var s=e.crossFilteringPointSelected(a);return"area"===e.standaloneChartType&&o===t.chartId&&(i[r+"-total"]=s?i[r]:i[r]+i[n]),"line"===e.standaloneChartType&&(i[r+"-total"]=s?i[r]:i[r]+i[n]),i}))},e.prototype.crossFilteringAddSelectedPoint=function(t,e){t?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]},e}(KP);function ZP(t){return Array.isArray(t)?[]:{}}function JP(t,e){return!1!==e.clone&&e.isMergeableObject(t)?lD(ZP(t),t,e):t}function QP(t,e,r){return t.concat(e).map((function(t){return JP(t,r)}))}function $P(t,e){if(!e.customMerge)return lD;var r=e.customMerge(t);return"function"===typeof r?r:lD}function tD(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}function eD(t){return Object.keys(t).concat(tD(t))}function rD(t,e){try{return e in t}catch(r){return!1}}function nD(t,e){return rD(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function oD(t,e,r){void 0===t&&(t={}),void 0===e&&(e={});var n={};return r.isMergeableObject(t)&&eD(t).forEach((function(e){n[e]=JP(t[e],r)})),eD(e).forEach((function(o){nD(t,o)||(rD(t,o)&&r.isMergeableObject(e[o])?n[o]=$P(o,r)(t[o],e[o],r):n[o]=JP(e[o],r))})),n}function iD(t){return aD(t)&&!sD(t)}function aD(t){return!!t&&"object"===typeof t}function sD(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e}function lD(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||QP,r.isMergeableObject=r.isMergeableObject||iD,r.cloneUnlessOtherwiseSpecified=JP;var n=Array.isArray(e),o=Array.isArray(t),i=n===o;return i?n?r.arrayMerge(t,e,r):oD(t,e,r):JP(e,r)}function uD(t,e){var r=parseInt(t.slice(1,3),16),n=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16);return e?"rgba("+r+", "+n+", "+o+", "+e+")":"rgba("+r+", "+n+", "+o+")"}function cD(t,e){return t.map((function(t){var r=au.fromString(t);return new au(r.r,r.g,r.b,e).toHexString()}))}var pD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dD=function(){return dD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},dD.apply(this,arguments)},hD=function(t){function e(e){return t.call(this,e)||this}return pD(e,t),e.prototype.getAxes=function(t){var e="bar"===this.standaloneChartType,r=[{type:this.getXAxisType(t),position:e?"left":"bottom"},{type:"number",position:e?"bottom":"left"}];if(this.isNormalised()){var n=r[1];n.label=dD(dD({},n.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return r},e.prototype.getSeries=function(t){var e=this,r=["groupedColumn","groupedBar"],n=!this.crossFiltering&&a["Bb"].includes(r,this.chartType),o=t.fields.map((function(r){return{type:e.standaloneChartType,grouped:n,stacked:["stackedColumn","normalizedColumn","stackedBar","normalizedBar"].includes(e.chartType),normalizedTo:e.isNormalised()?100:void 0,xKey:t.category.id,xName:t.category.name,yKey:r.colId,yName:r.displayName}}));return this.crossFiltering?this.extractCrossFilterSeries(o):o},e.prototype.extractCrossFilterSeries=function(t){for(var e=this,r=this.getChartPalette(),n=function(t,n){return dD(dD({},t),{highlightStyle:{item:{fill:void 0}},fill:null===r||void 0===r?void 0:r.fills[n],stroke:null===r||void 0===r?void 0:r.strokes[n],listeners:{nodeClick:e.crossFilterCallback}})},o=function(t){var e=t.yKey+"-filtered-out";return dD(dD({},lD({},t)),{yKey:e,fill:uD(t.fill,"0.3"),stroke:uD(t.stroke,"0.3"),showInLegend:!1})},i=[],a=0;a<t.length;a++){var s=n(t[a],a);i.push(s),i.push(o(s))}return i},e.prototype.isNormalised=function(){var t=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&a["Bb"].includes(t,this.chartType)},e}(qP),fD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vD=function(){return vD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},vD.apply(this,arguments)},yD=function(t){function e(e){return t.call(this,e)||this}return fD(e,t),e.prototype.getAxes=function(t){var e=[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){var r=e[1];r.label=vD(vD({},r.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return e},e.prototype.getSeries=function(t){var e=this,r=t.fields.map((function(r){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:r.colId,yName:r.displayName,normalizedTo:"normalizedArea"===e.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(e.chartType)}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(r,t):r},e.prototype.isNormalised=function(){return!this.crossFiltering&&"normalizedArea"===this.chartType},e}(qP),gD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mD=function(t){function e(e){return t.call(this,e)||this}return gD(e,t),e.prototype.getAxes=function(t){return[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this,r=t.fields.map((function(r){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:r.colId,yName:r.displayName}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(r,t):r},e}(qP),bD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CD=function(){return CD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},CD.apply(this,arguments)},SD=function(t){function e(e){return t.call(this,e)||this}return bD(e,t),e.prototype.update=function(t){var e=t.data,r=t.category,n=CD(CD({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(t):this.transformData(e,r.id),series:this.getSeries(t)});vO.update(this.getChartRef(),n)},e.prototype.getSeries=function(t){var r=this,n=t.fields.length,o={currentOffset:0,offsetAmount:n>1?20:40},i=this.getFields(t).map((function(i){var a,s={type:r.standaloneChartType,angleKey:i.colId,angleName:i.displayName,sectorLabelKey:i.colId,calloutLabelKey:t.category.id,calloutLabelName:t.category.name};if("doughnut"===r.chartType){var l=e.calculateOffsets(o),u=l.outerRadiusOffset,c=l.innerRadiusOffset,p=i.displayName?{title:{text:i.displayName,showInLegend:n>1}}:void 0;return CD(CD(CD(CD({},s),{outerRadiusOffset:u,innerRadiusOffset:c}),p),{calloutLine:{colors:null===(a=r.getChartPalette())||void 0===a?void 0:a.strokes}})}return s}));return this.crossFiltering?this.extractCrossFilterSeries(i):i},e.prototype.getCrossFilterData=function(t){var e=t.fields[0].colId,r=e+"-filtered-out";return t.data.map((function(t){var n=t[e]+t[r];return t[e+"-total"]=n,t[r]=1,t[e]=t[e]/n,t}))},e.prototype.extractCrossFilterSeries=function(t){var e=this,r=this.getChartPalette(),n=function(t){return CD(CD({},t),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:t.angleKey,angleKey:t.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:e.crossFilterCallback}})},o=function(t,e){var n,o;return CD(CD({},lD({},s)),{radiusKey:e+"-filtered-out",fills:cD(null!==(n=t.fills)&&void 0!==n?n:r.fills,.3),strokes:cD(null!==(o=t.strokes)&&void 0!==o?o:r.strokes,.3),showInLegend:!1})},i=t[0],a=i.angleKey,s=n(i);return[o(i,a),s]},e.calculateOffsets=function(t){var e=t.currentOffset;t.currentOffset-=t.offsetAmount;var r=t.currentOffset;return t.currentOffset-=t.offsetAmount,{outerRadiusOffset:e,innerRadiusOffset:r}},e.prototype.getFields=function(t){return"pie"===this.chartType?t.fields.slice(0,1):t.fields},e.prototype.crossFilteringReset=function(){},e}(KP),wD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xD=function(){return xD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},xD.apply(this,arguments)},OD=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ED=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},TD=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},PD=function(t){function e(e){return t.call(this,e)||this}return wD(e,t),e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this,r=this.isPaired(),n=this.getSeriesDefinitions(t.fields,r),o=t.category.id===zP.DEFAULT_CATEGORY?void 0:t.category,i=n.map((function(t){return{type:e.standaloneChartType,xKey:t.xField.colId,xName:t.xField.displayName,yKey:t.yField.colId,yName:t.yField.displayName,title:t.yField.displayName+" vs "+t.xField.displayName,sizeKey:t.sizeField?t.sizeField.colId:void 0,sizeName:t.sizeField?t.sizeField.displayName:void 0,labelKey:o?o.id:t.yField.colId,labelName:o?o.name:void 0}}));return this.crossFiltering?this.extractCrossFilterSeries(i,t):i},e.prototype.extractCrossFilterSeries=function(t,e){var r=this,n=e.data,o=this.getChartPalette(),i=function(t){return t+"-filtered-out"},a=function(t,e){var r,n,o,a=[1/0,-1/0];if(null!=e)try{for(var s=OD(t),l=s.next();!l.done;l=s.next()){var u=l.value,c=null!==(o=u[e])&&void 0!==o?o:u[i(e)];c<a[0]&&(a[0]=c),c>a[1]&&(a[1]=c)}}catch(p){r={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}if(a[0]<=a[1])return a},s=function(t,e){var i=t.sizeKey,s=null===o||void 0===o?void 0:o.fills[e],l=null===o||void 0===o?void 0:o.strokes[e],u=a(n,i),c=xD(xD({},t.marker),{fill:s,stroke:l,domain:u});return xD(xD({},t),{marker:c,highlightStyle:{item:{fill:"yellow"}},listeners:xD(xD({},t.listeners),{nodeClick:r.crossFilterCallback})})},l=function(t){var e=t.sizeKey,n=t.yKey,o=t.xKey;return null!=e&&(e=i(e)),xD(xD({},t),{yKey:i(n),xKey:i(o),marker:xD(xD({},t.marker),{fillOpacity:.3,strokeOpacity:.3}),sizeKey:e,showInLegend:!1,listeners:xD(xD({},t.listeners),{nodeClick:function(t){var e,n=t.datum[i(o)],a=xD(xD({},t),{xKey:o,datum:xD(xD({},t.datum),(e={},e[o]=n,e))});r.crossFilterCallback(a)}})})},u=t.map(s);return TD(TD([],ED(u)),ED(u.map(l)))},e.prototype.getSeriesDefinitions=function(t,e){if(t.length<2)return[];var r="bubble"===this.chartType;if(e)return r?t.map((function(e,r){return r%3===0?{xField:e,yField:t[r+1],sizeField:t[r+2]}:null})).filter((function(t){return t&&t.yField&&t.sizeField})):t.map((function(e,r){return r%2===0?{xField:e,yField:t[r+1]}:null})).filter((function(t){return t&&t.yField}));var n=t[0];return r?t.map((function(e,r){return r%2===1?{xField:n,yField:e,sizeField:t[r+1]}:null})).filter((function(t){return t&&t.sizeField})):t.filter((function(t,e){return e>0})).map((function(t){return{xField:n,yField:t}}))},e}(qP),DD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AD=function(t){function e(e){return t.call(this,e)||this}return DD(e,t),e.prototype.getSeries=function(t){var e=t.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]},e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e}(qP),MD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),RD=function(t){function e(e){var r=t.call(this)||this;return r.chartController=e,r}return MD(e,t),e.prototype.getChartOption=function(t){return a["Bb"].get(this.getChart(),t,void 0)},e.prototype.setChartOption=function(t,e,r){var n=this,o=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&o.push("cartesian");var i={};o.forEach((function(r){i=lD(i,n.createChartOptions({seriesType:r,expression:t,value:e}))})),this.updateChart(i),r||this.raiseChartOptionsChangedEvent()},e.prototype.awaitChartOptionUpdate=function(t){var e=this.chartController.getChartProxy().getChart();e.waitForUpdate().then((function(){return t()})).catch((function(t){return console.error("AG Grid - chart update failed",t)}))},e.prototype.getAxisProperty=function(t){var e;return a["Bb"].get(null===(e=this.getChart().axes)||void 0===e?void 0:e[0],t,void 0)},e.prototype.setAxisProperty=function(t,e){var r,n=this,o=this.getChart(),i={};null===(r=o.axes)||void 0===r||r.forEach((function(r){i=lD(i,n.getUpdateAxisOptions(r,t,e))})),this.updateChart(i),this.raiseChartOptionsChangedEvent()},e.prototype.getLabelRotation=function(t){var e=this.getAxis(t);return a["Bb"].get(e,"label.rotation",void 0)},e.prototype.setLabelRotation=function(t,e){var r=this.getAxis(t);if(r){var n=this.getUpdateAxisOptions(r,"label.rotation",e);this.updateChart(n),this.raiseChartOptionsChangedEvent()}},e.prototype.getSeriesOption=function(t,r){var n=this.getChart().series.find((function(t){return e.isMatchingSeries(r,t)}));return a["Bb"].get(n,t,void 0)},e.prototype.setSeriesOption=function(t,e,r){var n=this.createChartOptions({seriesType:r,expression:"series."+t,value:e});this.updateChart(n),this.raiseChartOptionsChangedEvent()},e.prototype.getPairedMode=function(){return this.chartController.getChartProxy().isPaired()},e.prototype.setPairedMode=function(t){this.chartController.getChartProxy().setPaired(t)},e.prototype.getAxis=function(t){var e=this.getChart();if(e.axes&&!(e.axes.length<1))return"xAxis"===t?e.axes&&"x"===e.axes[0].direction?e.axes[0]:e.axes[1]:e.axes&&"y"===e.axes[1].direction?e.axes[1]:e.axes[0]},e.prototype.getUpdateAxisOptions=function(t,e,r){var n=BO(this.getChartType()),o=["number","category","time","groupedCategory"];return o.includes(t.type)?this.createChartOptions({seriesType:n,expression:"axes."+t.type+"."+e,value:r}):{}},e.prototype.getChartType=function(){return this.chartController.getChartType()},e.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},e.prototype.updateChart=function(t){var e=this.chartController.getChartProxy().getChartRef();vO.updateDelta(e,t)},e.prototype.createChartOptions=function(t){var e=t.seriesType,r=t.expression,n=t.value,o={},i={theme:{overrides:o}};return a["Bb"].set(o,e+"."+r,n),i},e.prototype.raiseChartOptionsChangedEvent=function(){var t=this.chartController.getChartModel(),e={type:a["R"].EVENT_CHART_OPTIONS_CHANGED,chartId:t.chartId,chartType:t.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:t.chartOptions};this.eventService.dispatchEvent(e)},e.isMatchingSeries=function(t,e){return jO.includes(t)&&e.type===t},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(a["z"]),_D=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kD=function(){return kD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},kD.apply(this,arguments)},FD=function(t){function e(e){return t.call(this,e)||this}return _D(e,t),e.prototype.getAxes=function(t){var e=t?t.fields:[],r=new Map(e.map((function(t){return[t.colId,t]}))),n=this.getYKeys(e,t.seriesChartTypes),o=n.primaryYKeys,i=n.secondaryYKeys,a=[{type:this.getXAxisType(t),position:"bottom",gridStyle:[{stroke:void 0}]}];return o.length>0&&a.push({type:"number",keys:o,position:"left"}),i.length>0&&i.forEach((function(t,e){var n=r.get(t),s=n&&n.colId===t;if(s){var l={type:"number",keys:[t],position:"right"},u=o.some((function(t){return!!r.get(t)})),c=e===i.length-1;!u&&c||(l.gridStyle=[{stroke:void 0}]),a.push(l)}})),a},e.prototype.getSeries=function(t){var e=t.fields,r=t.category,n=t.seriesChartTypes;return e.map((function(t){var e=n.find((function(e){return e.colId===t.colId}));if(e){var o=e.chartType,i=["groupedColumn","groupedBar"].includes(o),a=i?{grouped:!0}:{};return kD({type:BO(o),xKey:r.id,yKey:t.colId,yName:t.displayName,stacked:["stackedArea","stackedColumn"].includes(o)},a)}}))},e.prototype.getYKeys=function(t,e){var r=[],n=[];return t.forEach((function(t){var o=t.colId,i=e.find((function(t){return t.colId===o}));i&&(i.secondaryAxis?n.push(o):r.push(o))})),{primaryYKeys:r,secondaryYKeys:n}},e}(qP),ID=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),LD=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ND=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},GD=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.params=r,n}return ID(e,t),e.prototype.init=function(){var t=this,e=this.gridOptionsService.get("chartThemes")||cE;if(e.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");var r=this.params.chartThemeName;a["Bb"].includes(e,r)||(r=e[0]);var n={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:r,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},o=this.gridOptionsService.is("enableRtl");this.addCssClass(o?"ag-rtl":"ag-ltr");var i=this.createBean(new zP(n));this.chartController=this.createManagedBean(new pE(i)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,pE.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,xP.EVENT_DOWNLOAD_CHART,(function(){return t.downloadChart()})),this.update(),this.raiseChartCreatedEvent()},e.prototype.validateCustomThemes=function(){var t=this.getChartThemes(),e=this.gridOptionsService.get("customChartThemes");e&&a["Bb"].getAllKeysInObjects([e]).forEach((function(e){a["Bb"].includes(t,e)||console.warn("AG Grid: a custom chart theme with the name '"+e+"' has been supplied but not added to the 'chartThemes' list")}))},e.prototype.createChart=function(){var t=this,r=void 0;this.chartProxy&&(r=this.chartProxy.destroy({keepChartInstance:!0}));var n=function(e,r){var n=t.params.crossFilteringContext;n.lastSelectedChartId=r?"":t.chartController.getChartId(),r&&t.params.crossFilteringResetCallback(),t.crossFilterService.filter(e,r)},o=this.chartController.getChartType(),i={chartType:o,chartInstance:r,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:function(){return t.getGridOptionsChartThemeOverrides()},getExtraPaddingDirections:function(){var e,r;return null!==(r=null===(e=t.chartMenu)||void 0===e?void 0:e.getExtraPaddingDirections())&&void 0!==r?r:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:n,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:function(e,r){return t.chartTranslationService.translate(e,r)}};if(this.params.chartOptionsToRestore=void 0,this.chartType=o,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=e.createChartProxy(i),this.chartProxy){var a=this.eChart.querySelector("canvas");a&&a.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new RD(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}else console.warn("AG Grid: invalid chart type supplied: ",i.chartType)},e.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},e.prototype.getChartThemes=function(){return this.chartController.getThemes()},e.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsService.get("chartThemeOverrides")},e.createChartProxy=function(t){switch(t.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new hD(t);case"pie":case"doughnut":return new SD(t);case"area":case"stackedArea":case"normalizedArea":return new yD(t);case"line":return new mD(t);case"scatter":case"bubble":return new PD(t);case"histogram":return new AD(t);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new FD(t);default:throw"AG Grid: Unable to create chart as an invalid chartType = '"+t.chartType+"' was supplied."}},e.prototype.addDialog=function(){var t=this,e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),r=this.getBestDialogSize(),n=r.width,o=r.height;this.chartDialog=new a["d"]({resizable:!0,movable:!0,maximizable:!0,title:e,width:n,height:o,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(a["d"].EVENT_DESTROYED,(function(){return t.destroy()}))},e.prototype.getBestDialogSize=function(){var t=this.popupService.getPopupParent(),e=.75*a["Bb"].getAbsoluteWidth(t),r=.75*a["Bb"].getAbsoluteHeight(t),n=.553,o=this.chartProxy.getChart(),i=this.params.insideDialog?850:o.width,s=this.params.insideDialog?470:o.height;return(i>e||s>r)&&(i=Math.min(i,e),s=Math.round(i*n),s>r&&(s=r,i=Math.min(i,Math.round(s/n)))),{width:i,height:s}},e.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new xP(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},e.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new DP(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},e.prototype.update=function(t){var e=this;if(null===t||void 0===t?void 0:t.chartId){var r=this.chartController.update(t);if(!r)return}var n=this.chartTypeChanged(t);n&&this.createChart(),this.updateChart(null===t||void 0===t?void 0:t.chartThemeOverrides),(null===t||void 0===t?void 0:t.chartId)&&this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartApiUpdateEvent()}))},e.prototype.updateChart=function(t){var e=this,r=this.chartProxy,n=this.chartController.getSelectedValueColState(),o=n.map((function(t){return{colId:t.colId,displayName:t.displayName}})),i=this.chartController.getChartData(),a=this.handleEmptyChart(i,o);if(!a){var s=this.chartController.getChartUpdateParams(t);r.update(s),this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartUpdatedEvent()})),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},e.prototype.chartTypeChanged=function(t){var e=ND([this.chartController.getChartType(),null===t||void 0===t?void 0:t.chartType],2),r=e[0],n=e[1];return this.chartType!==r||!!n&&this.chartType!==n},e.prototype.getChartModel=function(){return this.chartController.getChartModel()},e.prototype.getChartImageDataURL=function(t){return this.chartProxy.getChartImageDataURL(t)},e.prototype.handleEmptyChart=function(t,e){var r=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),n=1;this.chartController.isActiveXYChart()&&(n="bubble"===this.chartController.getChartType()?3:2);var o=e.length<n||0===t.length;if(this.eChart){var i=r||o;a["Bb"].setDisplayed(this.eChart,!i),a["Bb"].setDisplayed(this.eEmpty,i)}return r?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!o&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)},e.prototype.downloadChart=function(t,e,r){this.chartProxy.downloadChart(t,e,r)},e.prototype.openChartToolPanel=function(t){var e=t?a["C"][t]:t;this.chartMenu.showMenu(e)},e.prototype.closeChartToolPanel=function(){this.chartMenu.hideMenu()},e.prototype.getChartId=function(){return this.chartController.getChartId()},e.prototype.getUnderlyingChart=function(){return this.chartProxy.getChartRef()},e.prototype.crossFilteringReset=function(){this.chartProxy.crossFilteringReset()},e.prototype.setActiveChartCellRange=function(t){this.getGui().contains(t.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},e.prototype.raiseChartCreatedEvent=function(){var t=this,e={type:a["R"].EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then((function(){t.eventService.dispatchEvent(e)}))},e.prototype.raiseChartDestroyedEvent=function(){var t={type:a["R"].EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);var e=this.getGui();a["Bb"].clearElement(e),a["Bb"].removeFromParent(e),this.raiseChartDestroyedEvent()},e.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>\n        </div>',LD([Object(a["kb"])("eChart")],e.prototype,"eChart",void 0),LD([Object(a["kb"])("eChartContainer")],e.prototype,"eChartContainer",void 0),LD([Object(a["kb"])("eMenuContainer")],e.prototype,"eMenuContainer",void 0),LD([Object(a["kb"])("eEmpty")],e.prototype,"eEmpty",void 0),LD([Object(a["kb"])("eTitleEditContainer")],e.prototype,"eTitleEditContainer",void 0),LD([Object(a["u"])("chartCrossFilterService")],e.prototype,"crossFilterService",void 0),LD([Object(a["u"])("chartTranslationService")],e.prototype,"chartTranslationService",void 0),LD([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),LD([Object(a["u"])("popupService")],e.prototype,"popupService",void 0),LD([a["fb"]],e.prototype,"init",null),e}(a["H"]),jD="30.2.1",BD=function(){return BD=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},BD.apply(this,arguments)},VD=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},HD=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},zD=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function UD(t){return t.version,null==t.version&&(t.version=oA(t)),t=iA("23.0.0",t,WD),t=iA("24.0.0",t,KD),t=iA("25.1.0",t,XD),t=iA("26.0.0",t,YD),t=iA("26.1.0",t,qD),t=iA("26.2.0",t,ZD),t=iA("28.0.0",t,JD),t=iA("28.2.0",t,QD),t=iA("29.0.0",t,$D),t=iA("29.1.0",t,tA),t=iA("29.2.0",t,eA),t=iA("30.0.0",t,rA),t=nA(t),t=iA(jD,t,(function(t){return t})),t}function WD(t){return t=hA("chartOptions.legend.item.marker.type","shape",t),t=hA("chartOptions.seriesDefaults.marker.type","shape",t),t=hA("chartOptions.legend.padding","spacing",t),t}function KD(t){var e;t=fA("chartOptions.seriesDefaults.marker.minSize",t);var r=t,n=r.chartType,o=r.chartPalette,i=r.chartOptions,a=i.xAxis,s=i.yAxis,l=VD(i,["xAxis","yAxis"]),u=VD(r,["chartType","chartPalette","chartOptions"]),c=HO(n),p=null===c||void 0===c?void 0:c.map((function(t,e){return BD({type:t},0===e?a:s)}));return BD({chartType:n,chartThemeName:null!==(e=mA[o])&&void 0!==e?e:"ag-default",chartOptions:BD(BD({},l),{axes:p,xAxis:a,yAxis:s})},u)}function XD(t){return t=hA("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",t),t}function YD(t){var e=function(t){var e=t.dimOpacity,r=VD(t,["dimOpacity"]);return BD(BD({},r),null!=e?{series:{dimOpacity:e}}:{})};return t=yA("chartOptions.seriesDefaults.highlightStyle",t,e),t=fA("chart",t),t=fA("chartOptions.seriesDefaults.tooltipClass",t),t=fA("chartOptions.seriesDefaults.tooltipTracking",t),t=lA("chartOptions.axes[].label.rotation",0,t),t=lA("chartOptions.axes[].label.rotation",335,t),t}function qD(t){var e=function(t){var e=t.item,r=t.series,n=VD(t,["item","series"]);return BD({item:BD(BD({},n),e)},r?{series:r}:{})};return t=yA("chartOptions.seriesDefaults.highlightStyle",t,e),t=yA("chartOptions.series[].highlightStyle",t,e),t}function ZD(t){t=pA("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",t),t=pA("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",t),t=pA("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",t),t=fA("chartOptions.seriesDefaults.fill",t),t=fA("chartOptions.seriesDefaults.stroke",t),t=fA("chartOptions.seriesDefaults.callout.colors",t),t=fA("chartOptions.xAxis",t),t=fA("chartOptions.yAxis",t);var e=t,r=e.chartType,n=e.chartOptions,o=n.axes;n.series;var i=n.seriesDefaults,a=VD(n,["axes","series","seriesDefaults"]),s=VD(e,["chartType","chartOptions"]),l=[BO(r)],u={};if(!l.includes("pie")){var c={top:{},bottom:{},left:{},right:{}},p=o.map((function(t){var e,r=t.type,n=VD(t,["type"]);return e={},e[r]=BD(BD({},c),n),e})).reduce(gA,{});VO.filter((function(t){return null==p[t]})).forEach((function(t){p[t]=BD({},c)})),u.axes=p}var d=l.map((function(t){var e;return e={},e[t]=BD(BD(BD({},u),{series:i}),a),e})).reduce(gA,{});return t=BD(BD({},s),{chartType:r,chartOptions:d}),t}function JD(t){return t=fA("chartOptions.*.title.padding",t),t=fA("chartOptions.*.subtitle.padding",t),t=fA("chartOptions.*.axes.*.title.padding",t),t=uA("chartOptions.*.axes.*.title.enabled",!1,t),t}function QD(t){return t=hA("chartOptions.pie.series.callout","calloutLine",t),t=hA("chartOptions.pie.series.label","calloutLabel",t),t=hA("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=hA("chartOptions.pie.series.labelName","sectorLabelName",t),t}function $D(t){return t=dA("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",t),t=dA("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",t),t=dA("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",t),t=dA("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",t),t=dA("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",t),t=pA("chartOptions.scatter.series.paired","chartOptions.scatter.paired",t),t}function tA(t){return t=fA("chartOptions.axes[].tick.count",t),t}function eA(t){var e=function(t){var e,r,n,o,i=t.tracking,a=VD(t,["tracking"]),s=BD({},a);return!1===i?(null!==(e=s.position)&&void 0!==e||(s.position={type:"pointer"}),null!==(r=s.range)&&void 0!==r||(s.range="nearest")):!0===i&&(null!==(n=s.position)&&void 0!==n||(s.position={type:"node"}),null!==(o=s.range)&&void 0!==o||(s.range="nearest")),s};return t=yA("chartOptions.*.tooltip",t,e),t}function rA(t){return t=hA("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=hA("chartOptions.pie.series.labelName","sectorLabelName",t),t=tA(t),t=eA(t),t=fA("chartOptions.*.series.flipXY",t),t=cA("chartOptions.common.legend.enabled",!0,t),t=uA("chartOptions.common.legend.position","right",t),t}function nA(t){return t=fA("chartOptions.*.width",t),t=fA("chartOptions.*.height",t),t=uA("chartOptions.*.axes.category.label.autoRotate",!0,t),t}function oA(t){var e,r,n=t;if(null!=t.version)return t.version;var o=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return Object.keys(t||{}).some((function(t){return e.includes(t)}))},i=n.chartOptions,a=o(i,"seriesDefaults")?null===i||void 0===i?void 0:i.seriesDefaults:null===i||void 0===i?void 0:i[Object.keys(i)[0]],s={"27.0.0":o(n,"seriesChartTypes"),"26.2.0":!o(i,"seriesDefaults"),"26.1.0":o(null===a||void 0===a?void 0:a.highlightStyle,"item"),"26.0.0":o(null===a||void 0===a?void 0:a.highlightStyle,"series"),"25.1.0":o(null===a||void 0===a?void 0:a.label,"minAngle"),"25.0.0":o(n,"modelType","aggFunc","unlinkChart","suppressChartRanges")||o(a,"lineDash","lineDashOffset"),"24.0.0":o(n,"chartThemeName","chart")||o(i,"series"),"23.2.0":o(i,"navigator"),"23.0.0":o(null===(r=null===(e=null===i||void 0===i?void 0:i.legend)||void 0===e?void 0:e.item)||void 0===r?void 0:r.marker,"shape"),"22.1.0":o(n,"chartPalette","chartType")},l="27.1.0",u=Object.entries(s).filter((function(t){var e=HD(t,2);e[0];var r=e[1];return r})),c=HD(u[0],1),p=c[0],d=void 0===p?l:p;return d}function iA(t,e,r){if(sA(t)>sA(e.version)){var n=r(e);return n.version=t,n}return e}function aA(t){var e="string"===typeof t?t.split(".").map((function(t){return Number(t)})):[];if(3!==e.length||e.some((function(t){return isNaN(t)})))throw new Error("AG Grid - Illegal version string: "+t);return{major:e[0],minor:e[1],patch:e[2]}}function sA(t){var e=aA(t),r=e.major,n=e.minor,o=e.patch;return 1e4*r+100*n+o}function lA(t,e,r){return vA(t,!0,r,(function(t,r){t[r]===e&&delete t[r]}))}function uA(t,e,r){return vA(t,!1,r,(function(t,r){null==t[r]&&(t[r]=e)}))}function cA(t,e,r){var n;"string"===typeof t&&(t=t.split("."));var o=t[0];t.length>1&&(r[o]=cA(t.slice(1),e,null!==(n=r[o])&&void 0!==n?n:{}));var i=Object.keys(r).includes(o);return i||(r[o]=e),r}function pA(t,e,r){var n=void 0,o=!1;return r=vA(t,!0,r,(function(t,e){o=!0,n=t[e],delete t[e]})),o?vA(e,!1,r,(function(t,e){t[e]=n})):r}function dA(t,e,r){var n=void 0,o=!1;return r=vA(t,!0,r,(function(t,e){o=!0,n=t[e],delete t[e]})),o?vA(e,!1,r,(function(t,e){void 0===t[e]&&(t[e]=n)})):r}function hA(t,e,r){return vA(t,!0,r,(function(t,r){t[e]=t[r],delete t[r]}))}function fA(t,e){return vA(t,!0,e,(function(t,e){return delete t[e]}))}function vA(t,e,r,n){var o=t instanceof Array?t:t.split("."),i=o.slice(0,o.length-1),a=o[o.length-1];return yA(i,r,(function(t){var r=Object.keys(t).includes(a);if(e&&!r)return t;var o=BD({},t);return n(o,a),o}))}function yA(t,e,r){var n,o,i=t instanceof Array?t:t.split(".");if(e=BD({},e),0===i.length)return r(e);if(i[0].startsWith("{")){var a=i[0].substring(1,i[0].lastIndexOf("}")).split(",");try{for(var s=zD(a),l=s.next();!l.done;l=s.next()){var u=l.value;null!=e[u]&&(e[u]=yA(i.slice(1),e[u],r))}}catch(d){n={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}}else if(i[0].endsWith("[]")){var c=i[0].substring(0,t[0].indexOf("["));e[c]instanceof Array&&(e[c]=e[c].map((function(t){return yA(i.slice(1),t,r)})))}else if("*"===i[0])for(var p in e)e[p]=yA(i.slice(1),e[p],r);else null!=e[i[0]]&&(e[i[0]]=yA(i.slice(1),e[i[0]],r));return e}var gA=function(t,e){return BD(BD({},t),e)},mA={borneo:"ag-default",material:"ag-material",pastel:"ag-pastel",bright:"ag-vivid",flat:"ag-solar"},bA=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CA=function(){return CA=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},CA.apply(this,arguments)},SA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},wA=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},xA=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},OA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeCharts=new Set,e.activeChartComps=new Set,e.crossFilteringContext={lastSelectedChartId:""},e}return bA(e,t),e.prototype.updateChart=function(t){if(0!==this.activeChartComps.size){var e=xA([],wA(this.activeChartComps)).find((function(e){return e.getChartId()===t.chartId}));e?e.update(t):console.warn("AG Grid - Unable to update chart. No active chart found with ID: "+t.chartId+".")}else console.warn("AG Grid - No active charts to update.")},e.prototype.getChartModels=function(){var t=[],e=function(t){return CA(CA({},t),{version:jD})};return this.activeChartComps.forEach((function(r){return t.push(e(r.getChartModel()))})),t},e.prototype.getChartRef=function(t){var e;return this.activeCharts.forEach((function(r){r.chartId===t&&(e=r)})),e},e.prototype.getChartComp=function(t){var e;return this.activeChartComps.forEach((function(r){r.getChartId()===t&&(e=r)})),e},e.prototype.getChartImageDataURL=function(t){var e;return this.activeChartComps.forEach((function(r){r.getChartId()===t.chartId&&(e=r.getChartImageDataURL(t.fileFormat))})),e},e.prototype.downloadChart=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null===e||void 0===e||e.downloadChart(t.dimensions,t.fileName,t.fileFormat)},e.prototype.openChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null===e||void 0===e||e.openChartToolPanel(t.panel)},e.prototype.closeChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t}));null===e||void 0===e||e.closeChartToolPanel()},e.prototype.createChartFromCurrentRange=function(t){void 0===t&&(t="groupedColumn");var e=this.getSelectedRange();return this.createChart(e,t)},e.prototype.restoreChart=function(t,e){var r=this;if(t){t.version!==jD&&(t=UD(t));var n={cellRange:t.cellRange,chartType:t.chartType,chartThemeName:t.chartThemeName,chartContainer:e,suppressChartRanges:t.suppressChartRanges,aggFunc:t.aggFunc,unlinkChart:t.unlinkChart,seriesChartTypes:t.seriesChartTypes},o=function(t){return r.rangeService?r.rangeService.createCellRangeFromCellRangeParams(t):void 0};if("pivot"===t.modelType){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var i=this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()})),a={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:i},s=o(a);return s?this.createChart(s,n.chartType,n.chartThemeName,!0,!0,n.chartContainer,void 0,void 0,n.unlinkChart,!1,t.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}var l=o(n.cellRange);if(l)return this.createChart(l,n.chartType,n.chartThemeName,!1,n.suppressChartRanges,n.chartContainer,n.aggFunc,void 0,n.unlinkChart,!1,t.chartOptions,t.chartPalette,n.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}else console.warn("AG Grid - unable to restore chart as no chart model is provided")},e.prototype.createRangeChart=function(t){var e,r=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(r)return this.createChart(r,t.chartType,t.chartThemeName,!1,t.suppressChartRanges,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,void 0,void 0,void 0,t.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")},e.prototype.createPivotChart=function(t){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var e={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()}))},r=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e):void 0;if(r)return this.createChart(r,t.chartType,t.chartThemeName,!0,!0,t.chartContainer,void 0,t.chartThemeOverrides,t.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")},e.prototype.createCrossFilterChart=function(t){var e,r=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(r){var n=!0,o="undefined"!==typeof t.suppressChartRanges&&null!==t.suppressChartRanges,i=!o||t.suppressChartRanges;return this.createChart(r,t.chartType,t.chartThemeName,!1,i,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,n)}console.warn("AG Grid - unable to create chart as no range is selected")},e.prototype.createChart=function(t,e,r,n,o,i,a,s,l,u,c,p,d){var h=this;void 0===n&&(n=!1),void 0===o&&(o=!1),void 0===l&&(l=!1),void 0===u&&(u=!1);var f=this.gridOptionsService.getCallback("createChartContainer"),v={chartId:this.generateId(),pivotChart:n,cellRange:t,chartType:e,chartThemeName:r,insideDialog:!(i||f),suppressChartRanges:o,aggFunc:a,chartThemeOverrides:s,unlinkChart:l,crossFiltering:u,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:c,chartPaletteToRestore:p,seriesChartTypes:d,crossFilteringResetCallback:function(){return h.activeChartComps.forEach((function(t){return t.crossFilteringReset()}))}},y=new GD(v);this.context.createBean(y);var g=this.createChartRef(y);if(i){i.appendChild(y.getGui());var m=this.environment.getTheme();m.el&&!m.el.contains(i)&&i.classList.add(m.theme)}else f?f(g):y.addEventListener(GD.EVENT_DESTROYED,(function(){h.activeChartComps.delete(y),h.activeCharts.delete(g)}));return g},e.prototype.createChartRef=function(t){var e=this,r={destroyChart:function(){e.activeCharts.has(r)&&(e.context.destroyBean(t),e.activeChartComps.delete(t),e.activeCharts.delete(r))},chartElement:t.getGui(),chart:t.getUnderlyingChart(),chartId:t.getChartModel().chartId};return this.activeCharts.add(r),this.activeChartComps.add(t),r},e.prototype.getSelectedRange=function(){var t=this.rangeService.getCellRanges();return t.length>0?t[0]:{}},e.prototype.generateId=function(){return"id-"+Math.random().toString(36).substring(2,18)},e.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach((function(t){return t.destroyChart()}))},e.CHARTS_VERSION=RO,SA([Object(a["cb"])("rangeService")],e.prototype,"rangeService",void 0),SA([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),SA([a["hb"]],e.prototype,"destroyAllActiveCharts",null),e=SA([Object(a["y"])("chartService")],e),e}(a["z"]),EA=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},PA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var r;return EA(e,t),r=e,e.prototype.translate=function(t,e){var n=this.localeService.getLocaleTextFunc(),o=r.DEFAULT_TRANSLATIONS[t]||e;return n(t,o)},e.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},e=r=TA([Object(a["y"])("chartTranslationService")],e),e}(a["z"]),DA=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},MA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var r;return DA(e,t),r=e,e.prototype.filter=function(t,e){void 0===e&&(e=!1);var n=this.gridApi.getFilterModel();if(e)this.resetFilters(n);else{var o=r.extractFilterColId(t);this.isValidColumnFilter(o)?this.updateFilters(n,t,o):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+o+"'")}},e.prototype.resetFilters=function(t){var e=Object.keys(t).length>0;e&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},e.prototype.updateFilters=function(t,e,n){var o,i=r.extractFilterColId(e),s=e.datum[i];if(void 0!==s){var l=s.toString();if(e.event.metaKey||e.event.ctrlKey){var u=this.getCurrentGridValuesForCategory(n),c=a["Bb"].includes(u,l),p=void 0;c?p=u.filter((function(t){return t!==l})):(p=u,p.push(l)),t[n]=this.getUpdatedFilterModel(n,p)}else{p=[l];o={},o[n]=this.getUpdatedFilterModel(n,p),t=o}this.gridApi.setFilterModel(t)}},e.prototype.getUpdatedFilterModel=function(t,e){var r=this.getColumnFilterType(t);return"agMultiColumnFilter"===r?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}},e.prototype.getCurrentGridValuesForCategory=function(t){var e=this,r=[],n=this.getColumnById(t);return this.gridApi.forEachNodeAfterFilter((function(t){if(n&&!t.group){var o=e.valueService.getValue(n,t)+"";r.includes(o)||r.push(o)}})),r},e.extractFilterColId=function(t){return t.xKey||t.calloutLabelKey},e.prototype.isValidColumnFilter=function(t){t.indexOf("-filtered-out")&&(t=t.replace("-filtered-out",""));var e=this.getColumnFilterType(t);return"boolean"===typeof e?e:a["Bb"].includes(["agSetColumnFilter","agMultiColumnFilter"],e)},e.prototype.getColumnFilterType=function(t){var e=this.getColumnById(t);if(e){var r=e.getColDef();return r.filter}},e.prototype.getColumnById=function(t){return this.columnModel.getGridColumn(t)},AA([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),AA([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),AA([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),e=r=AA([Object(a["y"])("chartCrossFilterService")],e),e}(a["z"]),RA=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_A=function(){return _A=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},_A.apply(this,arguments)},kA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},FA=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},IA=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},LA=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cellRanges=[],e.bodyScrollListener=e.onBodyScroll.bind(e),e.dragging=!1,e.intersectionRange=!1,e}return RA(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,(function(){return t.onColumnsChanged()})),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady((function(){var e=t.ctrlsService.getGridBodyCtrl();t.autoScrollService=new a["t"]({scrollContainer:e.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return e.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(t){return e.getScrollFeature().setVerticalScrollPosition(t)},getHorizontalPosition:function(){return e.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(t){return e.getScrollFeature().setHorizontalScrollPosition(t)},shouldSkipVerticalScroll:function(){return!t.gridOptionsService.isDomLayout("normal")},shouldSkipHorizontalScroll:function(){return!e.getScrollFeature().isHorizontalScrollShowing()}})}))},e.prototype.onColumnsChanged=function(){var t=this;this.refreshLastRangeStart();var e=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach((function(r){var n=r.columns;r.columns=r.columns.filter((function(t){return t.isVisible()&&-1!==e.indexOf(t)}));var o=!a["Bb"].areEqual(n,r.columns);o&&t.dispatchChangedEvent(!1,!0,r.id)}));var r=this.cellRanges.length;this.cellRanges=this.cellRanges.filter((function(t){return t.columns.length>0})),r>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)},e.prototype.refreshLastRangeStart=function(){var t=a["Bb"].last(this.cellRanges);t&&this.refreshRangeStart(t)},e.prototype.isContiguousRange=function(t){var e=t.columns;if(!e.length)return!1;var r=this.columnModel.getAllDisplayedColumns(),n=e.map((function(t){return r.indexOf(t)})).sort((function(t,e){return t-e}));return a["Bb"].last(n)-n[0]+1===e.length},e.prototype.getRangeStartRow=function(t){if(t.startRow&&t.endRow)return this.rowPositionUtils.before(t.startRow,t.endRow)?t.startRow:t.endRow;var e=this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null;return{rowIndex:0,rowPinned:e}},e.prototype.getRangeEndRow=function(t){if(t.startRow&&t.endRow)return this.rowPositionUtils.before(t.startRow,t.endRow)?t.endRow:t.startRow;var e=this.pinnedRowModel.getPinnedBottomRowCount(),r=e>0;return r?{rowIndex:e-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}},e.prototype.setRangeToCell=function(t,e){if(void 0===e&&(e=!1),this.gridOptionsService.is("enableRangeSelection")){var r=this.calculateColumnsBetween(t.column,t.column);if(r){var n=this.gridOptionsService.is("suppressMultiRangeSelection");(n||!e||a["Bb"].missing(this.cellRanges))&&this.removeAllCellRanges(!0);var o={rowIndex:t.rowIndex,rowPinned:t.rowPinned},i={startRow:o,endRow:o,columns:r,startColumn:t.column};this.cellRanges.push(i),this.setNewestRangeStartCell(t),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}}},e.prototype.extendLatestRangeToCell=function(t){if(!this.isEmpty()&&this.newestRangeStartCell){var e=a["Bb"].last(this.cellRanges);this.updateRangeEnd(e,t)}},e.prototype.updateRangeEnd=function(t,e,r){void 0===r&&(r=!1);var n=e.column,o=this.calculateColumnsBetween(t.startColumn,n);o&&!this.isLastCellOfRange(t,e)&&(t.columns=o,t.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},r||this.dispatchChangedEvent(!0,!0,t.id))},e.prototype.refreshRangeStart=function(t){var e=t.startColumn,r=t.columns,n=function(e,r){var n=t.columns.filter((function(t){return t!==e}));e?(t.startColumn=e,t.columns=r?IA([e],FA(n)):IA(IA([],FA(n)),[e])):t.columns=n},o=this.getRangeEdgeColumns(t),i=o.left,s=o.right,l=e===r[0]&&e!==i;if(l)n(i,!0);else{var u=e===a["Bb"].last(r)&&e===s;u&&n(s,!1)}},e.prototype.getRangeEdgeColumns=function(t){var e=this.columnModel.getAllDisplayedColumns(),r=t.columns.map((function(t){return e.indexOf(t)})).filter((function(t){return t>-1})).sort((function(t,e){return t-e}));return{left:e[r[0]],right:e[a["Bb"].last(r)]}},e.prototype.extendLatestRangeInDirection=function(t){if(!this.isEmpty()&&this.newestRangeStartCell){var e=t.key,r=t.ctrlKey||t.metaKey,n=a["Bb"].last(this.cellRanges),o=this.newestRangeStartCell,i=n.columns[0],s=a["Bb"].last(n.columns),l=n.endRow.rowIndex,u=n.endRow.rowPinned,c=o.column===i?s:i,p={column:c,rowIndex:l,rowPinned:u},d=this.cellNavigationService.getNextCellToFocus(e,p,r);if(d)return this.setCellRange({rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:d.rowIndex,rowEndPinned:d.rowPinned,columnStart:o.column,columnEnd:d.column}),d}},e.prototype.setCellRange=function(t){this.gridOptionsService.is("enableRangeSelection")&&(this.removeAllCellRanges(!0),this.addCellRange(t))},e.prototype.setCellRanges=function(t){var e=this;a["Bb"].shallowCompare(this.cellRanges,t)||(this.removeAllCellRanges(!0),t.forEach((function(t){t.columns&&t.startRow&&e.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.columns[0]}),e.cellRanges.push(t)})),this.dispatchChangedEvent(!1,!0))},e.prototype.setNewestRangeStartCell=function(t){this.newestRangeStartCell=t},e.prototype.clearCellRangeCellValues=function(t){var e=this,r=t.cellRanges,n=t.cellEventSource,o=void 0===n?"rangeService":n,i=t.dispatchWrapperEvents,s=t.wrapperEventSource,l=void 0===s?"deleteKey":s;if(i){var u={type:a["R"].EVENT_RANGE_DELETE_START,source:l};this.eventService.dispatchEvent(u)}if(r||(r=this.cellRanges),r.forEach((function(t){e.forEachRowInRange(t,(function(r){var n=e.rowPositionUtils.getRowNode(r);if(n)for(var i=0;i<t.columns.length;i++){var a=e.columnModel.getGridColumn(t.columns[i]);if(!a||!a.isCellEditable(n))return;n.setDataValue(a,null,o)}}))})),i){var c={type:a["R"].EVENT_RANGE_DELETE_END,source:l};this.eventService.dispatchEvent(c)}},e.prototype.createCellRangeFromCellRangeParams=function(t){var e,r=this,n=!1;if(t.columns)e=t.columns.map((function(t){return r.columnModel.getColumnWithValidation(t)})).filter((function(t){return t}));else{var o=this.columnModel.getColumnWithValidation(t.columnStart),i=this.columnModel.getColumnWithValidation(t.columnEnd);if(!o||!i)return;e=this.calculateColumnsBetween(o,i),e&&e.length&&(n=e[0]!==o)}if(e){var s=null!=t.rowStartIndex?{rowIndex:t.rowStartIndex,rowPinned:t.rowStartPinned||null}:void 0,l=null!=t.rowEndIndex?{rowIndex:t.rowEndIndex,rowPinned:t.rowEndPinned||null}:void 0;return{startRow:s,endRow:l,columns:e,startColumn:n?a["Bb"].last(e):e[0]}}},e.prototype.addCellRange=function(t){if(this.gridOptionsService.is("enableRangeSelection")){var e=this.createCellRangeFromCellRangeParams(t);e&&(e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.startColumn}),this.cellRanges.push(e),this.dispatchChangedEvent(!1,!0,e.id))}},e.prototype.getCellRanges=function(){return this.cellRanges},e.prototype.isEmpty=function(){return 0===this.cellRanges.length},e.prototype.isMoreThanOneCell=function(){var t=this.cellRanges.length;if(0===t)return!1;if(t>1)return!0;var e=this.cellRanges[0],r=this.getRangeStartRow(e),n=this.getRangeEndRow(e);return r.rowPinned!==n.rowPinned||r.rowIndex!==n.rowIndex||1!==e.columns.length},e.prototype.areAllRangesAbleToMerge=function(){var t,e,r,n=this,o=new Map,i=this.cellRanges.length;if(i<=1)return!0;this.cellRanges.forEach((function(t){n.forEachRowInRange(t,(function(e){var r=(e.rowPinned||"normal")+"_"+e.rowIndex,n=o.get(r),i=t.columns.map((function(t){return t.getId()}));if(n){var a=i.filter((function(t){return-1===n.indexOf(t)}));n.push.apply(n,IA([],FA(a)))}else o.set(r,i)}))}));try{for(var a=LA(o.values()),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.sort().join();if(void 0!==r){if(r!==u)return!1}else r=u}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return!0},e.prototype.forEachRowInRange=function(t,e){var r=this.getRangeStartRow(t),n=this.getRangeEndRow(t),o=r;while(o){if(e(o),this.rowPositionUtils.sameRow(o,n))break;o=this.cellNavigationService.getRowBelow(o)}},e.prototype.removeAllCellRanges=function(t){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,t||this.dispatchChangedEvent(!1,!0))},e.prototype.onBodyScroll=function(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)},e.prototype.isCellInAnyRange=function(t){return this.getCellRangeCount(t)>0},e.prototype.isCellInSpecificRange=function(t,e){var r=null!==e.columns&&a["Bb"].includes(e.columns,t.column),n=this.isRowInRange(t.rowIndex,t.rowPinned,e);return r&&n},e.prototype.isLastCellOfRange=function(t,e){var r=t.startRow,n=t.endRow,o=this.rowPositionUtils.before(r,n)?n:r,i=e.rowIndex===o.rowIndex&&e.rowPinned===o.rowPinned,s=t.columns[0],l=a["Bb"].last(t.columns),u=t.startColumn===s?l:s,c=e.column===u;return c&&i},e.prototype.isBottomRightCell=function(t,e){var r=this.columnModel.getAllDisplayedColumns(),n=t.columns.map((function(t){return r.indexOf(t)})).sort((function(t,e){return t-e})),o=t.startRow,i=t.endRow,s=this.rowPositionUtils.before(o,i)?i:o,l=r.indexOf(e.column)===a["Bb"].last(n),u=e.rowIndex===s.rowIndex&&a["Bb"].makeNull(e.rowPinned)===a["Bb"].makeNull(s.rowPinned);return l&&u},e.prototype.getCellRangeCount=function(t){var e=this;return this.isEmpty()?0:this.cellRanges.filter((function(r){return e.isCellInSpecificRange(t,r)})).length},e.prototype.isRowInRange=function(t,e,r){var n=this.getRangeStartRow(r),o=this.getRangeEndRow(r),i={rowIndex:t,rowPinned:e||null},a=i.rowIndex===n.rowIndex&&i.rowPinned==n.rowPinned,s=i.rowIndex===o.rowIndex&&i.rowPinned==o.rowPinned;if(a||s)return!0;var l=!this.rowPositionUtils.before(i,n),u=this.rowPositionUtils.before(i,o);return l&&u},e.prototype.getDraggingRange=function(){return this.draggingRange},e.prototype.onDragStart=function(t){if(this.gridOptionsService.is("enableRangeSelection")){var e=t.ctrlKey,r=t.metaKey,n=t.shiftKey,o=e||r,i=!this.gridOptionsService.is("suppressMultiRangeSelection"),s=!!i&&o,l=n&&a["Bb"].existsAndNotEmpty(this.cellRanges);s||l&&!a["Bb"].exists(a["Bb"].last(this.cellRanges).type)||this.removeAllCellRanges(!0);var u=this.dragService.getStartTarget();if(u&&this.updateValuesOnMove(u),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=t,this.intersectionRange=s&&this.getCellRangeCount(this.lastCellHovered)>1,l||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=a["Bb"].last(this.cellRanges);else{var c={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:c,endRow:c,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}},e.prototype.intersectLastRange=function(t){var e=this;if((!t||!this.dragging)&&!this.gridOptionsService.is("suppressMultiRangeSelection")&&!this.isEmpty()){var r=a["Bb"].last(this.cellRanges),n=this.getRangeStartRow(r),o=this.getRangeEndRow(r),i=[];this.cellRanges.slice(0,-1).forEach((function(t){var s=e.getRangeStartRow(t),l=e.getRangeEndRow(t),u=t.columns,c=u.filter((function(t){return-1===r.columns.indexOf(t)}));if(c.length!==u.length)if(e.rowPositionUtils.before(o,s)||e.rowPositionUtils.before(l,n))i.push(t);else{var p=i.length;if(e.rowPositionUtils.before(s,n)){var d={columns:IA([],FA(u)),startColumn:r.startColumn,startRow:_A({},s),endRow:e.cellNavigationService.getRowAbove(n)};i.push(d)}if(c.length>0){var h={columns:c,startColumn:a["Bb"].includes(c,r.startColumn)?r.startColumn:c[0],startRow:e.rowPositionUtils.rowMax([_A({},n),_A({},s)]),endRow:e.rowPositionUtils.rowMin([_A({},o),_A({},l)])};i.push(h)}e.rowPositionUtils.before(o,l)&&i.push({columns:IA([],FA(u)),startColumn:r.startColumn,startRow:e.cellNavigationService.getRowBelow(o),endRow:_A({},l)}),i.length-p===1&&(i[i.length-1].id=t.id)}else i.push(t)})),this.cellRanges=i,t&&this.dispatchChangedEvent(!1,!0)}},e.prototype.updateValuesOnMove=function(t){var e=a["Bb"].getCtrlForEventTarget(this.gridOptionsService,t,a["D"].DOM_DATA_KEY_CELL_CTRL),r=null===e||void 0===e?void 0:e.getCellPosition();this.cellHasChanged=!1,!r||this.lastCellHovered&&this.cellPositionUtils.equals(r,this.lastCellHovered)||(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=r)},e.prototype.onDragging=function(t){var e=this;if(this.dragging&&t){this.updateValuesOnMove(t.target),this.lastMouseEvent=t;var r=this.lastCellHovered,n=function(t){return r&&r.rowPinned===t&&e.newestRangeStartCell.rowPinned===t},o=n("top")||n("bottom");if(this.autoScrollService.check(t,o),this.cellHasChanged){var i=this.calculateColumnsBetween(this.newestRangeStartCell.column,r.column);i&&(this.draggingRange.endRow={rowIndex:r.rowIndex,rowPinned:r.rowPinned},this.draggingRange.columns=i,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}}},e.prototype.onDragStop=function(){if(this.dragging){var t=this.draggingRange.id;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,t)}},e.prototype.dispatchChangedEvent=function(t,e,r){var n={type:a["R"].EVENT_RANGE_SELECTION_CHANGED,started:t,finished:e,id:r};this.eventService.dispatchEvent(n)},e.prototype.calculateColumnsBetween=function(t,e){var r=this.columnModel.getAllDisplayedColumns(),n=t===e,o=r.indexOf(t);if(o<0)console.warn("AG Grid: column "+t.getId()+" is not visible");else{var i=n?o:r.indexOf(e);if(!(i<0)){if(n)return[t];for(var a=Math.min(o,i),s=a===o?i:o,l=[],u=a;u<=s;u++)l.push(r[u]);return l}console.warn("AG Grid: column "+e.getId()+" is not visible")}},kA([Object(a["u"])("rowModel")],e.prototype,"rowModel",void 0),kA([Object(a["u"])("dragService")],e.prototype,"dragService",void 0),kA([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),kA([Object(a["u"])("cellNavigationService")],e.prototype,"cellNavigationService",void 0),kA([Object(a["u"])("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),kA([Object(a["u"])("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),kA([Object(a["u"])("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),kA([Object(a["u"])("ctrlsService")],e.prototype,"ctrlsService",void 0),kA([a["fb"]],e.prototype,"init",null),e=kA([Object(a["y"])("rangeService")],e),e}(a["z"]),GA=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},BA=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.changedCalculatedValues=!1,e.dragging=!1,e.shouldDestroyOnEndDragging=!1,e}return GA(e,t),e.prototype.init=function(){var t=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(e){t.dragging=!0,t.rangeService.autoScrollService.check(e),t.changedCalculatedValues&&(t.onDrag(e),t.changedCalculatedValues=!1)},onDragStop:function(e){t.dragging=!1,t.onDragEnd(e),t.clearValues(),t.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(t.getDraggingCssClass()),t.shouldDestroyOnEndDragging&&t.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))},e.prototype.isDragging=function(){return this.dragging},e.prototype.getCellCtrl=function(){return this.cellCtrl},e.prototype.setCellCtrl=function(t){this.cellCtrl=t},e.prototype.getCellRange=function(){return this.cellRange},e.prototype.setCellRange=function(t){this.cellRange=t},e.prototype.getRangeStartRow=function(){return this.rangeStartRow},e.prototype.setRangeStartRow=function(t){this.rangeStartRow=t},e.prototype.getRangeEndRow=function(){return this.rangeEndRow},e.prototype.setRangeEndRow=function(t){this.rangeEndRow=t},e.prototype.getLastCellHovered=function(){return this.lastCellHovered},e.prototype.preventRangeExtension=function(t){t.stopPropagation()},e.prototype.onDragStart=function(t){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())},e.prototype.getDraggingCssClass=function(){return"ag-dragging-"+(this.type===a["pb"].FILL?"fill":"range")+"-handle"},e.prototype.updateValuesOnMove=function(t){var e=this.mouseEventService.getCellPositionForEvent(t);!e||this.lastCellHovered&&this.cellPositionUtils.equals(e,this.lastCellHovered)||(this.lastCellHovered=e,this.changedCalculatedValues=!0)},e.prototype.getType=function(){return this.type},e.prototype.refresh=function(t){var e=this.getCellCtrl(),r=this.getGui(),n=a["Bb"].last(this.rangeService.getCellRanges()),o=n.startRow,i=n.endRow;if(o&&i){var s=this.rowPositionUtils.before(i,o);s?(this.setRangeStartRow(i),this.setRangeEndRow(o)):(this.setRangeStartRow(o),this.setRangeEndRow(i))}if(e!==t||!a["Bb"].isVisible(r)){this.setCellCtrl(t);var l=t.getComp().getParentOfValue();l&&l.appendChild(r)}this.setCellRange(n)},e.prototype.clearValues=function(){this.lastCellHovered=void 0,this.removeListeners()},e.prototype.removeListeners=function(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)},e.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging())return a["Bb"].setDisplayed(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,t.prototype.destroy.call(this),this.removeListeners();var e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)},jA([Object(a["u"])("rowRenderer")],e.prototype,"rowRenderer",void 0),jA([Object(a["u"])("dragService")],e.prototype,"dragService",void 0),jA([Object(a["u"])("rangeService")],e.prototype,"rangeService",void 0),jA([Object(a["u"])("mouseEventService")],e.prototype,"mouseEventService",void 0),jA([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),jA([Object(a["u"])("cellNavigationService")],e.prototype,"cellNavigationService",void 0),jA([Object(a["u"])("navigationService")],e.prototype,"navigationService",void 0),jA([Object(a["u"])("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),jA([Object(a["u"])("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),jA([Object(a["u"])("ctrlsService")],e.prototype,"ctrlsService",void 0),jA([a["fb"]],e.prototype,"init",null),e}(a["H"]);function VA(t){var e=t.length,r=0;if(e<=1)return t;for(var n=0;n<t.length;n++){var o=t[n],i=o.toString().split("e-");i.length>1?r=Math.max(r,parseInt(i[1],10)):Math.floor(o)!==o&&(r=Math.max(r,o.toString().split(".")[1].length))}for(var a=0,s=0,l=0,u=0,c=0,p=0;p<e;p++)c=t[p],a+=p,s+=c,u+=p*p,l+=p*c;var d=(e*l-a*s)/(e*u-a*a),h=s/e-d*a/e,f=[];for(p=0;p<=e;p++)f.push(parseFloat((p*d+h).toFixed(r)));return f}var HA=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zA=function(){return zA=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},zA.apply(this,arguments)},UA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},WA=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},KA=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},XA=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.markedCells=[],r.cellValues=[],r.isUp=!1,r.isLeft=!1,r.isReduce=!1,r.type=a["pb"].FILL,r}return HA(e,t),e.prototype.updateValuesOnMove=function(e){t.prototype.updateValuesOnMove.call(this,e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));var r,n=this.initialXY,o=n.x,i=n.y,a=this.mouseEventService.getNormalisedPosition(e),s=a.x,l=a.y,u=Math.abs(o-s),c=Math.abs(i-l),p=this.getFillHandleDirection();r="xy"===p?u>c?"x":"y":p,r!==this.dragAxis&&(this.dragAxis=r,this.changedCalculatedValues=!0)},e.prototype.onDrag=function(t){if(!this.initialPosition){var e=this.getCellCtrl();if(!e)return;this.initialPosition=e.getCellPosition()}var r=this.getLastCellHovered();r&&this.markPathFrom(this.initialPosition,r)},e.prototype.onDragEnd=function(t){if(this.initialXY=null,this.markedCells.length){var e,r="x"===this.dragAxis,n=this.getCellRange(),o=n.columns.length,i=this.getRangeStartRow(),a=this.getRangeEndRow();if(this.isUp||this.isLeft){var s=r?i:this.lastCellMarked;e=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,columnStart:r?this.lastCellMarked.column:n.columns[0],rowEndIndex:a.rowIndex,rowEndPinned:a.rowPinned,columnEnd:n.columns[o-1]})}else e=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:i.rowIndex,rowStartPinned:i.rowPinned,columnStart:n.columns[0],rowEndIndex:r?a.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:r?a.rowPinned:this.lastCellMarked.rowPinned,columnEnd:r?this.lastCellMarked.column:n.columns[o-1]});e&&(this.raiseFillStartEvent(),this.handleValueChanged(n,e,t),this.rangeService.setCellRanges([e]),this.raiseFillEndEvent(n,e))}},e.prototype.getFillHandleDirection=function(){var t=this.gridOptionsService.get("fillHandleDirection");return t?"x"!==t&&"y"!==t&&"xy"!==t?(a["Bb"].doOnce((function(){return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.")}),"warn invalid fill direction"),"xy"):t:"xy"},e.prototype.raiseFillStartEvent=function(){var t={type:a["R"].EVENT_FILL_START};this.eventService.dispatchEvent(t)},e.prototype.raiseFillEndEvent=function(t,e){var r={type:a["R"].EVENT_FILL_END,initialRange:t,finalRange:e};this.eventService.dispatchEvent(r)},e.prototype.handleValueChanged=function(t,e,r){var n=this,o=this.rangeService.getRangeEndRow(t),i=this.rangeService.getRangeStartRow(t),s=this.rangeService.getRangeEndRow(e),l=this.rangeService.getRangeStartRow(e),u="y"===this.dragAxis;if(!this.isReduce||this.gridOptionsService.is("suppressClearOnFillReduction")){var c=!0,p=[],d=[],h=0,f=function(){p.length=0,d.length=0,h=0},v=function(e,r){var d=n.isUp?o:i,h=!1;u&&(c=!0,f());var v=function(){var v=n.rowPositionUtils.getRowNode(d);if(!v)return"break";u&&e?y(p,e,v,(function(){return!n.rowPositionUtils.sameRow(d,n.isUp?i:o)})):r&&(c=!0,f(),r.forEach((function(e){return y(p,e,v,(function(){return e!==(n.isLeft?t.columns[0]:a["Bb"].last(t.columns))}))}))),h=n.rowPositionUtils.sameRow(d,n.isUp?l:s),d=n.isUp?n.cellNavigationService.getRowAbove(d):n.cellNavigationService.getRowBelow(d)};while(!h&&d){var g=v();if("break"===g)break}},y=function(t,e,o,i){var s,l,u,p=!1;if(c)u=n.valueService.getValue(e,o),d.push(u),c=i();else{var f=n.processValues(r,t,d,e,o,h++),v=f.value,y=f.fromUserFunction,g=f.sourceCol,m=f.sourceRowNode;if(u=v,e.isCellEditable(o)){var b=n.valueService.getValue(e,o);y||((null===(s=null===g||void 0===g?void 0:g.getColDef())||void 0===s?void 0:s.useValueFormatterForExport)&&(u=null!==(l=n.valueFormatterService.formatValue(g,m,u))&&void 0!==l?l:u),e.getColDef().useValueParserForImport&&(u=n.valueParserService.parseValue(e,o,g?u:a["Bb"].toStringOrNull(u),b))),y&&b===u?p=!0:o.setDataValue(e,u,"rangeService")}}p||t.push({value:u,column:e,rowNode:o})};if(u)t.columns.forEach((function(t){v(t)}));else{g=this.isLeft?KA([],WA(e.columns)).reverse():e.columns;v(void 0,g)}}else{var g=u?t.columns:t.columns.filter((function(t){return e.columns.indexOf(t)<0})),m=u?this.cellNavigationService.getRowBelow(s):l;m&&this.clearCellsInRange(m,o,g)}},e.prototype.clearCellsInRange=function(t,e,r){var n={startRow:t,endRow:e,columns:r,startColumn:r[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[n]})},e.prototype.processValues=function(t,e,r,n,o,i){var s,l=this.gridOptionsService.getCallback("fillOperation"),u="y"===this.dragAxis;if(s=u?this.isUp?"up":"down":this.isLeft?"left":"right",l){var c={event:t,values:e.map((function(t){var e=t.value;return e})),initialValues:r,currentIndex:i,currentCellValue:this.valueService.getValue(n,o),direction:s,column:n,rowNode:o},p=l(c);if(!1!==p)return{value:p,fromUserFunction:!0}}var d=!e.some((function(t){var e=t.value,r=parseFloat(e);return isNaN(r)||r.toString()!==e.toString()}));if(t.altKey||!d){if(d&&1===r.length){var h=this.isUp||this.isLeft?-1:1;return{value:parseFloat(a["Bb"].last(e).value)+1*h,fromUserFunction:!1}}var f=e[i%e.length],v=f.value,y=f.column,g=f.rowNode;return{value:v,fromUserFunction:!1,sourceCol:y,sourceRowNode:g}}return{value:a["Bb"].last(VA(e.map((function(t){var e=t.value;return Number(e)})))),fromUserFunction:!1}},e.prototype.clearValues=function(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,t.prototype.clearValues.call(this)},e.prototype.clearMarkedPath=function(){this.markedCells.forEach((function(t){if(t.isAlive()){var e=t.getComp();e.addOrRemoveCssClass("ag-selection-fill-top",!1),e.addOrRemoveCssClass("ag-selection-fill-right",!1),e.addOrRemoveCssClass("ag-selection-fill-bottom",!1),e.addOrRemoveCssClass("ag-selection-fill-left",!1)}})),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1},e.prototype.clearCellValues=function(){this.cellValues.length=0},e.prototype.markPathFrom=function(t,e){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(this.rowPositionUtils.sameRow(e,t))return;var r=this.rowPositionUtils.before(e,t),n=this.getRangeStartRow(),o=this.getRangeEndRow();r&&(e.rowPinned==n.rowPinned&&e.rowIndex>=n.rowIndex||n.rowPinned!=o.rowPinned&&e.rowPinned==o.rowPinned&&e.rowIndex<=o.rowIndex)?(this.reduceVertical(t,e),this.isReduce=!0):(this.extendVertical(t,e,r),this.isReduce=!1)}else{var i=t.column,a=e.column;if(i===a)return;var s=this.columnModel.getAllDisplayedColumns(),l=s.indexOf(i),u=s.indexOf(a);u<=l&&u>=s.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(t,e),this.isReduce=!0):(this.extendHorizontal(t,e,u<l),this.isReduce=!1)}this.lastCellMarked=e},e.prototype.extendVertical=function(t,e,r){var n=this,o=n.navigationService,i=n.rangeService,a=t;do{for(var s=this.getCellRange(),l=s.columns.length,u=0;u<l;u++){var c=s.columns[u],p={rowIndex:a.rowIndex,rowPinned:a.rowPinned},d=zA(zA({},p),{column:c}),h=i.isCellInSpecificRange(d,s),f=this.rowPositionUtils.sameRow(a,t);if(r&&(this.isUp=!0),!f){var v=o.getCellByPosition(d);if(v){this.markedCells.push(v);var y=v.getComp();h||(y.addOrRemoveCssClass("ag-selection-fill-left",0===u),y.addOrRemoveCssClass("ag-selection-fill-right",u===l-1)),y.addOrRemoveCssClass(r?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(a,e))}}}if(this.rowPositionUtils.sameRow(a,e))break}while(a=r?this.cellNavigationService.getRowAbove(a):this.cellNavigationService.getRowBelow(a))},e.prototype.reduceVertical=function(t,e){var r=t;do{for(var n=this.getCellRange(),o=n.columns.length,i=this.rowPositionUtils.sameRow(r,e),a=0;a<o;a++){var s={rowIndex:r.rowIndex,rowPinned:r.rowPinned},l=zA(zA({},s),{column:n.columns[a]}),u=this.navigationService.getCellByPosition(l);if(u){this.markedCells.push(u);var c=u.getComp();c.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(r,e))}}if(i)break}while(r=this.cellNavigationService.getRowAbove(r))},e.prototype.extendHorizontal=function(t,e,r){var n=this,o=this.columnModel.getAllDisplayedColumns(),i=o.indexOf(r?e.column:t.column),s=o.indexOf(r?this.getCellRange().columns[0]:e.column),l=r?0:1,u=o.slice(i+l,s+l),c=this.getRangeStartRow(),p=this.getRangeEndRow();u.forEach((function(t){var e=c,o=!1;do{o=n.rowPositionUtils.sameRow(e,p);var i=n.navigationService.getCellByPosition({rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t});if(i){n.markedCells.push(i);var s=i.getComp();s.addOrRemoveCssClass("ag-selection-fill-top",n.rowPositionUtils.sameRow(e,c)),s.addOrRemoveCssClass("ag-selection-fill-bottom",n.rowPositionUtils.sameRow(e,p)),r?(n.isLeft=!0,s.addOrRemoveCssClass("ag-selection-fill-left",t===u[0])):s.addOrRemoveCssClass("ag-selection-fill-right",t===a["Bb"].last(u))}e=n.cellNavigationService.getRowBelow(e)}while(!o)}))},e.prototype.reduceHorizontal=function(t,e){var r=this,n=this.columnModel.getAllDisplayedColumns(),o=n.indexOf(e.column),i=n.indexOf(t.column),a=n.slice(o,i),s=this.getRangeStartRow(),l=this.getRangeEndRow();a.forEach((function(t){var e=s,n=!1;do{n=r.rowPositionUtils.sameRow(e,l);var o=r.navigationService.getCellByPosition({rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t});if(o){r.markedCells.push(o);var i=o.getComp();i.addOrRemoveCssClass("ag-selection-fill-right",t===a[0])}e=r.cellNavigationService.getRowBelow(e)}while(!n)}))},e.prototype.refresh=function(e){var r=this.rangeService.getCellRanges()[0],n=!r.startRow||!r.endRow;n?this.destroy():t.prototype.refresh.call(this,e)},e.TEMPLATE='<div class="ag-fill-handle"></div>',UA([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),UA([Object(a["u"])("valueParserService")],e.prototype,"valueParserService",void 0),UA([Object(a["u"])("valueFormatterService")],e.prototype,"valueFormatterService",void 0),e}(BA),YA=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qA=function(){return qA=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},qA.apply(this,arguments)},ZA=function(t){function e(){var r=t.call(this,e.TEMPLATE)||this;return r.type=a["pb"].RANGE,r.rangeFixed=!1,r}return YA(e,t),e.prototype.onDrag=function(t){var e=this.getLastCellHovered();if(e){var r=this.rangeService.getCellRanges(),n=a["Bb"].last(r);if(this.rangeFixed||(this.fixRangeStartEnd(n),this.rangeFixed=!0),this.endPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column},2===r.length&&r[0].type===a["E"].DIMENSION&&n.type===a["E"].VALUE){var o=!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(n));o&&this.rangeService.updateRangeEnd(r[0],qA(qA({},this.endPosition),{column:r[0].columns[0]}),!0)}this.rangeService.extendLatestRangeToCell(this.endPosition)}},e.prototype.onDragEnd=function(t){var e=a["Bb"].last(this.rangeService.getCellRanges());this.fixRangeStartEnd(e),this.rangeFixed=!1},e.prototype.fixRangeStartEnd=function(t){var e=this.rangeService.getRangeStartRow(t),r=this.rangeService.getRangeEndRow(t),n=t.columns[0];t.startRow=e,t.endRow=r,t.startColumn=n},e.TEMPLATE='<div class="ag-range-handle"></div>',e}(BA),JA=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),QA=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},$A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return JA(e,t),e.prototype.createSelectionHandle=function(t){return this.createBean(t===a["pb"].RANGE?new ZA:new XA)},e=QA([Object(a["y"])("selectionHandleFactory")],e),e}(a["z"]),tM="30.2.1",eM={version:tM,moduleName:a["Z"].RangeSelectionModule,beans:[NA,$A],agStackComponents:[{componentName:"AgFillHandle",componentClass:XA},{componentName:"AgRangeHandle",componentClass:ZA}],dependantModules:[b]},rM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},oM=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},iM=function(t){function e(r){var n=t.call(this,e.TEMPLATE)||this;return n.H=1,n.S=1,n.B=1,n.A=1,n.isSpectrumDragging=!1,n.isSpectrumHueDragging=!1,n.isSpectrumAlphaDragging=!1,n.colorChanged=!1,n.picker=r.picker,n}return rM(e,t),e.prototype.postConstruct=function(){var t=this;this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",(function(){return t.spectrumColor.focus()})),this.addGuiEventListener("keydown",(function(e){e.key!==a["X"].ENTER||e.defaultPrevented||t.destroy()})),this.addManagedListener(this.spectrumColor,"keydown",(function(e){return t.moveDragger(e)})),this.addManagedListener(this.spectrumAlphaSlider,"keydown",(function(e){return t.moveAlphaSlider(e)})),this.addManagedListener(this.spectrumHueSlider,"keydown",(function(e){return t.moveHueSlider(e)})),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",(function(e){t.onSpectrumDraggerMove(e),t.onSpectrumHueMove(e),t.onSpectrumAlphaMove(e)})),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",(function(e){e.key!==a["X"].ENTER&&e.key!==a["X"].SPACE||(e.preventDefault(),t.onRecentColorClick(e))}))},e.prototype.initTabIndex=function(){var t=this.tabIndex=(this.gridOptionsService.getNum("tabIndex")||0).toString();this.spectrumColor.setAttribute("tabindex",t),this.spectrumHueSlider.setAttribute("tabindex",t),this.spectrumAlphaSlider.setAttribute("tabindex",t)},e.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},e.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},e.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},e.prototype.onSpectrumDraggerDown=function(t){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(t)},e.prototype.onSpectrumDraggerMove=function(t){this.isSpectrumDragging&&this.moveDragger(t)},e.prototype.onSpectrumHueDown=function(t){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(t)},e.prototype.onSpectrumHueMove=function(t){this.isSpectrumHueDragging&&this.moveHueSlider(t)},e.prototype.onSpectrumAlphaDown=function(t){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(t)},e.prototype.onSpectrumAlphaMove=function(t){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(t)},e.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},e.prototype.moveDragger=function(t){var e=this.spectrumValRect;if(e){var r,n;if(t instanceof MouseEvent)r=t.clientX-e.left,n=t.clientY-e.top;else{var o=t.key===a["X"].LEFT,i=t.key===a["X"].RIGHT,s=t.key===a["X"].UP,l=t.key===a["X"].DOWN,u=s||l,c=o||i;if(!u&&!c)return;t.preventDefault();var p=this.getSpectrumValue(),d=p.x,h=p.y;r=d+(c?o?-5:5:0),n=h+(u?s?-5:5:0)}r=Math.max(r,0),r=Math.min(r,e.width),n=Math.max(n,0),n=Math.min(n,e.height),this.setSpectrumValue(r/e.width,1-n/e.height)}},e.prototype.moveHueSlider=function(t){var e=this.spectrumHueRect;if(e){var r=this.moveSlider(this.spectrumHueSlider,t);null!=r&&(this.H=1-r/e.width,this.update())}},e.prototype.moveAlphaSlider=function(t){var e=this.spectrumAlphaRect;if(e){var r=this.moveSlider(this.spectrumAlphaSlider,t);null!=r&&(this.A=r/e.width,this.update())}},e.prototype.moveSlider=function(t,e){var r,n,o=t.getBoundingClientRect(),i=null===(r=t.parentElement)||void 0===r?void 0:r.getBoundingClientRect();if(!t||!i)return null;if(e instanceof MouseEvent)n=e.clientX-i.left;else{var s=e.key===a["X"].LEFT,l=e.key===a["X"].RIGHT;if(!s&&!l)return null;e.preventDefault();var u=s?-5:5;n=parseFloat(t.style.left)-o.width/2+u}return n=Math.max(n,0),n=Math.min(n,i.width),t.style.left=n+o.width/2+"px",n},e.prototype.update=function(){var t=au.fromHSB(360*this.H,this.S,this.B,this.A),e=au.fromHSB(360*this.H,1,1),r=t.toRgbaString(),n=this.picker,o=au.fromString(n.getValue());o.toRgbaString()!==r&&(this.colorChanged=!0),n.setValue(r),this.spectrumColor.style.backgroundColor=e.toRgbaString(),this.spectrumDragger.style.backgroundColor=r},e.prototype.setSpectrumValue=function(t,e){var r=this.spectrumValRect||this.refreshSpectrumRect();if(null!=r){var n=this.spectrumDragger,o=n.getBoundingClientRect();t=Math.max(0,t),t=Math.min(1,t),e=Math.max(0,e),e=Math.min(1,e),this.S=t,this.B=e,n.style.left=t*r.width-o.width/2+"px",n.style.top=(1-e)*r.height-o.height/2+"px",this.update()}},e.prototype.getSpectrumValue=function(){var t=this.spectrumDragger,e=t.getBoundingClientRect(),r=parseFloat(t.style.left)+e.width/2,n=parseFloat(t.style.top)+e.height/2;return{x:r,y:n}},e.prototype.initRecentColors=function(){var t=this,r=e.recentColors,n=r.map((function(e,r){return'<div class="ag-recent-color" id='+r+' style="background-color: '+e+'; width: 15px; height: 15px;" recent-color="'+e+'" tabIndex="'+t.tabIndex+'"></div>'}));this.recentColors.innerHTML=n.join("")},e.prototype.setValue=function(t){var e=au.fromString(t),r=oM(e.toHSB(),3),n=r[0],o=r[1],i=r[2];this.H=(isNaN(n)?0:n)/360,this.A=e.a;var a=this.spectrumHueRect||this.refreshHueRect(),s=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-a.width+"px",this.spectrumAlphaSlider.style.left=this.A*s.width+"px",this.setSpectrumValue(o,i)},e.prototype.onRecentColorClick=function(t){var r=t.target;if(a["Bb"].exists(r.id)){var n=parseInt(r.id,10);this.setValue(e.recentColors[n]),this.destroy()}},e.prototype.addRecentColor=function(){var t=au.fromHSB(360*this.H,this.S,this.B,this.A),r=t.toRgbaString(),n=e.recentColors;this.colorChanged&&n[0]!==r&&(n=n.filter((function(t){return t!=r})),n=[r].concat(n),n.length>e.maxRecentColors&&(n=n.slice(0,e.maxRecentColors)),e.recentColors=n)},e.prototype.destroy=function(){this.addRecentColor(),t.prototype.destroy.call(this)},e.maxRecentColors=8,e.recentColors=[],e.TEMPLATE='<div class="ag-color-panel" tabindex="-1">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',nM([Object(a["kb"])("spectrumColor")],e.prototype,"spectrumColor",void 0),nM([Object(a["kb"])("spectrumVal")],e.prototype,"spectrumVal",void 0),nM([Object(a["kb"])("spectrumDragger")],e.prototype,"spectrumDragger",void 0),nM([Object(a["kb"])("spectrumHue")],e.prototype,"spectrumHue",void 0),nM([Object(a["kb"])("spectrumHueSlider")],e.prototype,"spectrumHueSlider",void 0),nM([Object(a["kb"])("spectrumAlpha")],e.prototype,"spectrumAlpha",void 0),nM([Object(a["kb"])("spectrumAlphaSlider")],e.prototype,"spectrumAlphaSlider",void 0),nM([Object(a["kb"])("recentColors")],e.prototype,"recentColors",void 0),nM([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),aM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),sM=function(){return sM=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},sM.apply(this,arguments)},lM=function(t){function e(e){var r=t.call(this,sM({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},e))||this;return e&&e.color&&(r.value=e.color),r}return aM(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},e.prototype.createPickerComponent=function(){var t=this.getGui().getBoundingClientRect(),e=this.createBean(new a["d"]({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:t.right-190,y:t.top-250}));return e},e.prototype.renderAndPositionPicker=function(){var t=this,e=this.pickerComponent,r=this.createBean(new iM({picker:this}));return e.addCssClass("ag-color-dialog"),r.addDestroyFunc((function(){e.isAlive()&&t.destroyBean(e)})),e.setParentComponent(this),e.setBodyComponent(r),r.setValue(this.getValue()),r.getGui().focus(),e.addDestroyFunc((function(){t.isDestroyingPicker?t.isDestroyingPicker=!1:(t.beforeHidePicker(),t.isDestroyingPicker=!0,r.isAlive()&&t.destroyBean(r),t.isAlive()&&t.getFocusableElement().focus())})),function(){var e;return null===(e=t.pickerComponent)||void 0===e?void 0:e.close()}},e.prototype.setValue=function(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,t.prototype.setValue.call(this,e))},e.prototype.getValue=function(){return this.value},e}(a["l"]),uM=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},cM=28,pM=6;function dM(t){return t&&t.match(/\d+\.\d+\.\d+/)}function hM(t){var e=t.gridMajorVersion,r=t.chartsMajorVersion,n=parseInt(e,10),o=parseInt(r,10),i=n-cM,a=o-pM,s=i>=0;return i===a&&s}function fM(t){if(t&&dM(t)){var e=uM(t.split(".")||[],2),r=e[0],n=e[1],o=r+"."+n+".x",i=parseInt(r,10),a=i-cM+pM;if(!(a<0)){var s=n,l=a+"."+s+".x";return{gridMajorMinor:o,chartsMajorMinor:l}}}}function vM(t){var e=t.type,r=t.gridVersion,n=t.chartsVersion,o="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!r)return o;var i=fM(r);if(!i)return o;var a=i.gridMajorMinor,s=i.chartsMajorMinor;return"incompatible"===e?"AG Grid version "+r+" and AG Charts version "+n+" is not supported. AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":"invalidCharts"===e?"AG Grid version "+a+" should be used with AG Chart "+s+". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.":o}function yM(t){var e=t.gridVersion,r=t.chartsVersion;if(!dM(r))return{isValid:!1,message:vM({type:"invalidCharts",gridVersion:e,chartsVersion:r})};if(!dM(e))return{isValid:!1,message:vM({type:"invalidGrid",gridVersion:e,chartsVersion:r})};var n=uM(e.split(".")||[],2),o=n[0],i=n[1],a=uM(r.split(".")||[],2),s=a[0],l=a[1],u=hM({gridMajorVersion:o,chartsMajorVersion:s});return u&&i===l?{isValid:!0}:u&&i===l?{isValid:!1,message:vM({type:"invalid",gridVersion:e,chartsVersion:r})}:{isValid:!1,message:vM({type:"incompatible",gridVersion:e,chartsVersion:r})}}var gM,mM={version:jD,validate:function(){return yM({gridVersion:jD,chartsVersion:OA.CHARTS_VERSION})},moduleName:a["Z"].GridChartsModule,beans:[OA,PA,MA],agStackComponents:[{componentName:"AgColorPicker",componentClass:lM},{componentName:"AgAngleSelect",componentClass:ME}],dependantModules:[eM,b]},bM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),CM=function(){return CM=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},CM.apply(this,arguments)},SM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},wM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadRowDataVersion=0,e}return bM(e,t),e.prototype.init=function(t,e){this.params=e,this.comp=t;var r=null!=e.pinned;r||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,a["R"].EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},e.prototype.onFullWidthRowFocused=function(t){var e=this.params,r={rowIndex:e.node.rowIndex,rowPinned:e.node.rowPinned},n={rowIndex:t.rowIndex,rowPinned:t.rowPinned},o=this.rowPositionUtils.sameRow(r,n);o&&this.focusService.focusInto(this.comp.getGui(),t.fromBelow)},e.prototype.setAutoHeightClasses=function(){var t=this.gridOptionsService.is("detailRowAutoHeight"),e=t?"ag-details-row-auto-height":"ag-details-row-fixed-height",r=t?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(e,!0),this.comp.addOrRemoveDetailGridCssClass(r,!0)},e.prototype.setupRefreshStrategy=function(){var t=this.params.refreshStrategy,e="everything"==t||"nothing"==t||"rows"==t;e?this.refreshStrategy=t:(null!=t&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+t+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows")},e.prototype.addThemeToDetailGrid=function(){var t=this.environment.getTheme().theme;t&&this.comp.addOrRemoveDetailGridCssClass(t,!0)},e.prototype.createDetailGrid=function(){if(a["Bb"].missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var t=this.gridOptionsService.is("detailRowAutoHeight"),e=CM({},this.params.detailGridOptions);t&&(e.domLayout="autoHeight"),this.comp.setDetailGrid(e)}},e.prototype.registerDetailWithMaster=function(t,e){var r=this.params.node.id,n=this.params.api,o={id:r,api:t,columnApi:e},i=this.params.node;n.addDetailGridInfo(r,o),i.detailGridInfo=o,this.addDestroyFunc((function(){i.detailGridInfo===o&&(n.removeDetailGridInfo(r),i.detailGridInfo=null)}))},e.prototype.loadRowData=function(){var t=this;this.loadRowDataVersion++;var e=this.loadRowDataVersion,r=this.params.getDetailRowData;if(r){var n=function(r){var n=t.loadRowDataVersion===e;n&&t.comp.setRowData(r)},o={node:this.params.node,data:this.params.node.data,successCallback:n,context:this.gridOptionsService.context};r(o)}else console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},e.prototype.refresh=function(){var t=!1,e=!0;switch(this.refreshStrategy){case"nothing":return e;case"everything":return t}return this.loadRowData(),e},SM([Object(a["u"])("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),SM([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),e}(a["z"]),xM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),OM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},EM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xM(e,t),e.prototype.init=function(t){var e=this;this.params=t,this.selectAndSetTemplate();var r={addOrRemoveCssClass:function(t,r){return e.addOrRemoveCssClass(t,r)},addOrRemoveDetailGridCssClass:function(t,r){return e.eDetailGrid.classList.toggle(t,r)},setDetailGrid:function(t){return e.setDetailGrid(t)},setRowData:function(t){return e.setRowData(t)},getGui:function(){return e.eDetailGrid}};this.ctrl=this.createManagedBean(new wM),this.ctrl.init(r,t)},e.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.selectAndSetTemplate=function(){var t=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var r=function(){t.setTemplate(e.TEMPLATE)};if(a["Bb"].missing(this.params.template))r();else if("string"===typeof this.params.template)this.setTemplate(this.params.template);else if("function"===typeof this.params.template){var n=this.params.template,o=n(this.params);this.setTemplate(o)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),r();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},e.prototype.setDetailGrid=function(t){if(this.eDetailGrid){var e=this.context.getBean("agGridReact"),r=e?a["Bb"].cloneObject(e):void 0,n=this.context.getBean("frameworkComponentWrapper"),o=this.getFrameworkOverrides();new a["V"](this.eDetailGrid,t,{frameworkOverrides:o,providedBeanInstances:{agGridReact:r,frameworkComponentWrapper:n},modules:a["ab"].__getGridRegisteredModules(this.params.api.getGridId())}),this.detailApi=t.api,this.ctrl.registerDetailWithMaster(t.api,t.columnApi),this.addDestroyFunc((function(){t.api&&t.api.destroy()}))}},e.prototype.setRowData=function(t){this.detailApi&&this.detailApi.setRowData(t)},e.TEMPLATE='<div class="ag-details-row" role="gridcell">\n            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>\n        </div>',OM([Object(a["kb"])("eDetailGrid")],e.prototype,"eDetailGrid",void 0),e}(a["H"]),TM="30.2.1",PM={version:TM,moduleName:a["Z"].MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:EM}],controllers:[{controllerName:"detailCellRenderer",controllerClass:wM}],dependantModules:[b]},DM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),AM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},MM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return DM(e,t),e.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},e.prototype.showMenuAfterMouseEvent=function(t,e,r){var n=this;this.showMenu(t,(function(o){var i=o.getGui();n.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:t,mouseEvent:e,ePopup:i}),r&&o.showTab(r)}),"columnMenu",r,void 0,e.target)},e.prototype.showMenuAfterButtonClick=function(t,e,r,n,o){var i=this,a=-1,s="left";this.gridOptionsService.is("enableRtl")&&(a=1,s="right"),this.showMenu(t,(function(o){var l=o.getGui();i.popupService.positionPopupByComponent({type:r,column:t,eventSource:e,ePopup:l,alignSide:s,nudgeX:9*a,nudgeY:-23,position:"under",keepWithinBounds:!0}),n&&o.showTab(n)}),r,n,o,e)},e.prototype.showMenu=function(t,e,r,n,o,i){var s=this,l=this.getMenuParams(t,o,i),u=l.menu,c=l.eMenuGui,p=l.currentHeaderPosition,d=l.currentColumnIndex,h=l.anchorToElement,f=[];f.push(this.getClosedCallback(t,u,p,d,i));var v=this.localeService.getLocaleTextFunc();this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:function(t){f.forEach((function(e){return e(t)}))},afterGuiAttached:function(t){return u.afterGuiAttached(Object.assign({},{container:r},t))},positionCallback:n?function(){return e(u)}:void 0,ariaLabel:v("ariaLabelColumnMenu","Column Menu")}),n||(u.showTabBasedOnPreviousSelection(),e(u));var y=this.popupService.setPopupPositionRelatedToElement(c,h);y&&this.addStopAnchoring(y,t,f),u.addEventListener(RM.EVENT_TAB_SELECTED,(function(t){s.lastSelectedTab=t.key})),t.setMenuVisible(!0,"contextMenu"),this.activeMenu=u,u.addEventListener(a["z"].EVENT_DESTROYED,(function(){s.activeMenu===u&&(s.activeMenu=null)}))},e.prototype.addStopAnchoring=function(t,e,r){t.then((function(t){e.addEventListener("leftChanged",t),e.addEventListener("visibleChanged",t),r.push((function(){e.removeEventListener("leftChanged",t),e.removeEventListener("visibleChanged",t)}))}))},e.prototype.getClosedCallback=function(t,e,r,n,o){var i=this;return function(s){i.destroyBean(e),t.setMenuVisible(!1,"contextMenu");var l=s instanceof KeyboardEvent;if(l&&o){var u=i.columnModel.getAllDisplayedColumns().some((function(e){return e===t}));if(u&&a["Bb"].isVisible(o)){var c=i.focusService.findTabbableParent(o);c&&(t&&i.headerNavigationService.scrollToColumn(t),c.focus())}else if(r&&-1!==n){var p=i.columnModel.getAllDisplayedColumns(),d=p[n]||a["Bb"].last(p);d&&i.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:r.headerRowIndex,column:d}})}}}},e.prototype.getMenuParams=function(t,e,r){var n=this.createBean(new RM(t,this.lastSelectedTab,e));return{menu:n,eMenuGui:n.getGui(),currentHeaderPosition:this.focusService.getFocusedHeader(),currentColumnIndex:this.columnModel.getAllDisplayedColumns().indexOf(t),anchorToElement:r||this.ctrlsService.getGridBodyCtrl().getGui()}},e.prototype.isMenuEnabled=function(t){return t.getMenuTabs(RM.TABS_DEFAULT).length>0},AM([Object(a["u"])("popupService")],e.prototype,"popupService",void 0),AM([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),AM([Object(a["u"])("headerNavigationService")],e.prototype,"headerNavigationService",void 0),AM([Object(a["u"])("ctrlsService")],e.prototype,"ctrlsService",void 0),AM([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),e=AM([Object(a["y"])("menuFactory")],e),e}(a["z"]),RM=function(t){function e(r,n,o){var i=t.call(this)||this;return i.tabFactories={},i.includeChecks={},i.column=r,i.initialSelection=n,i.tabFactories[e.TAB_GENERAL]=i.createMainPanel.bind(i),i.tabFactories[e.TAB_FILTER]=i.createFilterPanel.bind(i),i.tabFactories[e.TAB_COLUMNS]=i.createColumnsPanel.bind(i),i.includeChecks[e.TAB_GENERAL]=function(){return!0},i.includeChecks[e.TAB_FILTER]=function(){return i.filterManager.isFilterAllowed(r)},i.includeChecks[e.TAB_COLUMNS]=function(){return!0},i.restrictTo=o,i}return DM(e,t),e.prototype.init=function(){var t=this,e=this.getTabsToCreate().map((function(e){return t.createTab(e)}));this.tabbedLayout=new a["sb"]({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc((function(){return t.destroyBean(t.tabbedLayout)}))},e.prototype.getTabsToCreate=function(){var t=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(e.TABS_DEFAULT).filter((function(e){return t.isValidMenuTabItem(e)})).filter((function(e){return t.isNotSuppressed(e)})).filter((function(e){return t.isModuleLoaded(e)}))},e.prototype.isModuleLoaded=function(t){return t!==e.TAB_COLUMNS||a["ab"].__isRegistered(a["Z"].ColumnsToolPanelModule,this.context.getGridId())},e.prototype.isValidMenuTabItem=function(t){var r=!0,n=e.TABS_DEFAULT;return null!=this.restrictTo&&(r=this.restrictTo.indexOf(t)>-1,n=this.restrictTo),r=r&&e.TABS_DEFAULT.indexOf(t)>-1,r||console.warn("AG Grid: Trying to render an invalid menu item '"+t+"'. Check that your 'menuTabs' contains one of ["+n+"]"),r},e.prototype.isNotSuppressed=function(t){return this.includeChecks[t]()},e.prototype.createTab=function(t){return this.tabFactories[t]()},e.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},e.prototype.showTab=function(t){this.tabItemColumns&&t===e.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&t===e.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&t===e.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},e.prototype.onTabItemClicked=function(t){var r=null;switch(t.item){case this.tabItemColumns:r=e.TAB_COLUMNS;break;case this.tabItemFilter:r=e.TAB_FILTER;break;case this.tabItemGeneral:r=e.TAB_GENERAL;break}r&&this.activateTab(r)},e.prototype.activateTab=function(t){var r={type:e.EVENT_TAB_SELECTED,key:t};this.dispatchEvent(r)},e.prototype.getMenuItems=function(){var t,r=this.getDefaultMenuOptions(),n=this.gridOptionsService.getCallback("getMainMenuItems");return t=n?n({column:this.column,defaultItems:r}):r,a["Bb"].removeRepeatsFromArray(t,e.MENU_ITEM_SEPARATOR),t},e.prototype.getDefaultMenuOptions=function(){var t=[],r=!this.column.getColDef().lockPinned,n=this.columnModel.getRowGroupColumns().length,o=n>0,i=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,a=this.column.isAllowValue(),s=this.column.isAllowRowGroup(),l=this.column.isPrimary(),u=this.columnModel.isPivotMode(),c="clientSide"===this.rowModel.getType(),p=this.gridOptionsService.is("treeData"),d=l&&o&&a||!l;r&&t.push("pinSubMenu"),d&&t.push("valueAggSubMenu"),(r||d)&&t.push(e.MENU_ITEM_SEPARATOR),t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(e.MENU_ITEM_SEPARATOR),this.column.getColDef().showRowGroup&&t.push("rowUnGroup"),s&&this.column.isPrimary()&&(i?t.push("rowUnGroup"):t.push("rowGroup")),t.push(e.MENU_ITEM_SEPARATOR),t.push("resetColumns");var h=c&&(p||n>(u?1:0));return h&&(t.push("expandAll"),t.push("contractAll")),t},e.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new a["j"]);var t=this.getMenuItems(),r=this.menuItemMapper.mapWithStockItems(t,this.column);return this.mainMenuList.addMenuItems(r),this.mainMenuList.addEventListener(a["i"].EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:a["Bb"].createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:e.TAB_GENERAL.replace("MenuTab",""),bodyPromise:a["m"].resolve(this.mainMenuList.getGui()),name:e.TAB_GENERAL},this.tabItemGeneral},e.prototype.onHidePopup=function(t){var e;t&&t.event&&t.event instanceof KeyboardEvent&&(e=t.event),this.hidePopupFunc(e&&{keyboardEvent:e});var r=this.focusService.getFocusedCell(),n=this.gridOptionsService.getDocument();if(n.activeElement===n.body&&r){var o=r.rowIndex,i=r.rowPinned,a=r.column;this.focusService.setFocusedCell({rowIndex:o,column:a,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}},e.prototype.createFilterPanel=function(){var t=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!t)throw new Error("AG Grid - Unable to instantiate filter");var r=function(e){(null===t||void 0===t?void 0:t.filterPromise)&&t.filterPromise.then((function(t){t&&t.afterGuiAttached&&t.afterGuiAttached(e)}))},n=function(){var e;return null===(e=null===t||void 0===t?void 0:t.filterPromise)||void 0===e?void 0:e.then((function(t){var e;return null===(e=null===t||void 0===t?void 0:t.afterGuiDetached)||void 0===e?void 0:e.call(t)}))};return this.tabItemFilter={title:a["Bb"].createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:e.TAB_FILTER.replace("MenuTab",""),bodyPromise:null===t||void 0===t?void 0:t.guiPromise,afterAttachedCallback:r,afterDetachedCallback:n,name:e.TAB_FILTER},this.tabItemFilter},e.prototype.createColumnsPanel=function(){var t=document.createElement("div");t.classList.add("ag-menu-column-select-wrapper");var r=this.createManagedBean(new Lr),n=this.column.getColDef().columnsMenuParams;n||(n={});var o=n.contractColumnSelection,i=n.suppressColumnExpandAll,s=n.suppressColumnFilter,l=n.suppressColumnSelectAll,u=n.suppressSyncLayoutWithGrid,c=n.columnLayout;r.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!o,suppressColumnExpandAll:!!i,suppressColumnFilter:!!s,suppressColumnSelectAll:!!l,suppressSyncLayoutWithGrid:!!c||!!u,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context},"columnMenu"),c&&r.setColumnLayout(c);var p=r.getGui();return p.classList.add("ag-menu-column-select"),t.appendChild(p),this.tabItemColumns={title:a["Bb"].createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:e.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:a["m"].resolve(t),name:e.TAB_COLUMNS},this.tabItemColumns},e.prototype.afterGuiAttached=function(t){var e=t.container,r=t.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:e,hidePopup:r}),r&&(this.hidePopupFunc=r,this.addDestroyFunc(r))},e.prototype.getGui=function(){return this.tabbedLayout.getGui()},e.EVENT_TAB_SELECTED="tabSelected",e.TAB_FILTER="filterMenuTab",e.TAB_GENERAL="generalMenuTab",e.TAB_COLUMNS="columnsMenuTab",e.TABS_DEFAULT=[e.TAB_GENERAL,e.TAB_FILTER,e.TAB_COLUMNS],e.MENU_ITEM_SEPARATOR="separator",AM([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),AM([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),AM([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),AM([Object(a["u"])("columnApi")],e.prototype,"columnApi",void 0),AM([Object(a["u"])("menuItemMapper")],e.prototype,"menuItemMapper",void 0),AM([Object(a["u"])("rowModel")],e.prototype,"rowModel",void 0),AM([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),AM([a["fb"]],e.prototype,"init",null),e}(a["z"]),_M=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),kM=function(){return kM=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},kM.apply(this,arguments)},FM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},IM="ag-menu",LM="ag-context-menu-open",NM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _M(e,t),e.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},e.prototype.getMenuItems=function(t,e,r){var n=[];if(a["Bb"].exists(t)&&a["ab"].__isRegistered(a["Z"].ClipboardModule,this.context.getGridId())&&e&&(this.gridOptionsService.is("suppressCutToClipboard")||n.push("cut"),n.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.is("enableCharts")&&a["ab"].__isRegistered(a["Z"].GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&n.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&n.push("chartRange")),a["Bb"].exists(t)){var o=!a["ab"].__isRegistered(a["Z"].CsvExportModule,this.context.getGridId()),i=!a["ab"].__isRegistered(a["Z"].ExcelExportModule,this.context.getGridId()),s=this.gridOptionsService.is("suppressExcelExport")||i,l=this.gridOptionsService.is("suppressCsvExport")||o,u=a["Bb"].isIOSUserAgent(),c=!u&&(!s||!l);c&&n.push("export")}var p=this.gridOptionsService.getCallback("getContextMenuItems");if(p){var d={node:t,column:e,value:r,defaultItems:n.length?n:void 0};return p(d)}return n},e.prototype.onContextMenu=function(t,e,r,n,o,i){if((this.gridOptionsService.is("allowContextMenuWithControlKey")||!t||!t.ctrlKey&&!t.metaKey)&&(t&&this.blockMiddleClickScrollsIfNeeded(t),!this.gridOptionsService.is("suppressContextMenu"))){var a=t||e.touches[0];if(this.showMenu(r,n,o,a,i)){var s=t||e;s.preventDefault()}}},e.prototype.blockMiddleClickScrollsIfNeeded=function(t){var e=this.gridOptionsService,r=t.which;e.is("suppressMiddleClickScrolls")&&2===r&&t.preventDefault()},e.prototype.showMenu=function(t,e,r,n,o){var i=this,s=this.getMenuItems(t,e,r),l=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===s||a["Bb"].missingOrEmpty(s))return!1;var u=new GM(s);this.createBean(u);var c=u.getGui(),p={column:e,rowNode:t,type:"contextMenu",mouseEvent:n,ePopup:c,nudgeY:1},d=this.localeService.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:function(){l.classList.remove(LM),i.destroyBean(u)},click:n,positionCallback:function(){var t=i.gridOptionsService.is("enableRtl");i.popupService.positionPopupUnderMouseEvent(kM(kM({},p),{nudgeX:t?-1*(c.offsetWidth+1):1}))},anchorToElement:o,ariaLabel:d("ariaLabelContextMenu","Context Menu")});return h&&(l.classList.add(LM),u.afterGuiAttached({container:"contextMenu",hidePopup:h.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=u,u.addEventListener(a["z"].EVENT_DESTROYED,(function(){i.activeMenu===u&&(i.activeMenu=null)})),h&&u.addEventListener(a["i"].EVENT_MENU_ITEM_SELECTED,h.hideFunc),!0},FM([Object(a["u"])("popupService")],e.prototype,"popupService",void 0),FM([Object(a["cb"])("rangeService")],e.prototype,"rangeService",void 0),FM([Object(a["u"])("ctrlsService")],e.prototype,"ctrlsService",void 0),FM([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),e=FM([Object(a["y"])("contextMenuFactory")],e),e}(a["z"]),GM=function(t){function e(e){var r=t.call(this,'<div class="'+IM+'" role="presentation"></div>')||this;return r.menuList=null,r.focusedCell=null,r.menuItems=e,r}return _M(e,t),e.prototype.addMenuItems=function(){var t=this,e=this.createManagedBean(new a["j"]),r=this.menuItemMapper.mapWithStockItems(this.menuItems,null);e.addMenuItems(r),this.appendChild(e),this.menuList=e,e.addEventListener(a["i"].EVENT_MENU_ITEM_SELECTED,(function(e){return t.dispatchEvent(e)}))},e.prototype.afterGuiAttached=function(t){t.hidePopup&&this.addDestroyFunc(t.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},e.prototype.restoreFocusedCell=function(){var t=this.focusService.getFocusedCell();if(t&&this.focusedCell&&this.cellPositionUtils.equals(t,this.focusedCell)){var e=this.focusedCell,r=e.rowIndex,n=e.rowPinned,o=e.column,i=this.gridOptionsService.getDocument();i.activeElement===i.body&&this.focusService.setFocusedCell({rowIndex:r,column:o,rowPinned:n,forceBrowserFocus:!0})}},e.prototype.destroy=function(){this.restoreFocusedCell(),t.prototype.destroy.call(this)},FM([Object(a["u"])("menuItemMapper")],e.prototype,"menuItemMapper",void 0),FM([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),FM([Object(a["u"])("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),FM([a["fb"]],e.prototype,"addMenuItems",null),e}(a["H"]),jM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),BM=function(){return BM=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},BM.apply(this,arguments)},VM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},HM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jM(e,t),e.prototype.mapWithStockItems=function(t,e){var r=this;if(!t)return[];var n=[];return t.forEach((function(t){var o;if(o="string"===typeof t?r.getStockMenuItem(t,e):BM({},t),o){var i=o,a=i.subMenu;a&&a instanceof Array&&(i.subMenu=r.mapWithStockItems(a,e)),null!=o&&n.push(o)}})),n},e.prototype.getStockMenuItem=function(t,e){var r,n,o=this,i=this.localeService.getLocaleTextFunc(),s=this.gridOptionsService.is("skipHeaderOnAutoSize");switch(t){case"pinSubMenu":return{name:i("pinColumn","Pin Column"),icon:a["Bb"].createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:i("pinLeft","Pin Left"),action:function(){return o.columnModel.setColumnPinned(e,"left","contextMenu")},checked:!!e&&e.isPinnedLeft()};case"pinRight":return{name:i("pinRight","Pin Right"),action:function(){return o.columnModel.setColumnPinned(e,"right","contextMenu")},checked:!!e&&e.isPinnedRight()};case"clearPinned":return{name:i("noPin","No Pin"),action:function(){return o.columnModel.setColumnPinned(e,null,"contextMenu")},checked:!!e&&!e.isPinned()};case"valueAggSubMenu":return a["ab"].__assertRegistered(a["Z"].RowGroupingModule,"Aggregation from Menu",this.context.getGridId())&&((null===e||void 0===e?void 0:e.isPrimary())||(null===e||void 0===e?void 0:e.getColDef().pivotValueColumn))?{name:i("valueAggregation","Value Aggregation"),icon:a["Bb"].createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(e)}:null;case"autoSizeThis":return{name:i("autosizeThiscolumn","Autosize This Column"),action:function(){return o.columnModel.autoSizeColumn(e,s,"contextMenu")}};case"autoSizeAll":return{name:i("autosizeAllColumns","Autosize All Columns"),action:function(){return o.columnModel.autoSizeAllColumns(s,"contextMenu")}};case"rowGroup":return{name:i("groupBy","Group by")+" "+a["Bb"].escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:(null===e||void 0===e?void 0:e.isRowGroupActive())||!(null===e||void 0===e?void 0:e.getColDef().enableRowGroup),action:function(){return o.columnModel.addRowGroupColumn(e,"contextMenu")},icon:a["Bb"].createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":var l=a["Bb"].createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null),u=null===e||void 0===e?void 0:e.getColDef().showRowGroup;if(!0===u)return{name:i("ungroupAll","Un-Group All"),disabled:!(null===e||void 0===e?void 0:e.getColDef().showRowGroup),action:function(){return o.columnModel.setRowGroupColumns([],"contextMenu")},icon:l};if("string"===typeof u){var c=null===(r=this.columnModel.getSourceColumnsForGroupColumn(e))||void 0===r?void 0:r[0],p=null!=c?a["Bb"].escapeString(this.columnModel.getDisplayNameForColumn(c,"header")):u;return{name:i("ungroupBy","Un-Group by")+" "+p,disabled:!(null===e||void 0===e?void 0:e.getColDef().showRowGroup),action:function(){return o.columnModel.removeRowGroupColumn(u,"contextMenu")},icon:l}}return{name:i("ungroupBy","Un-Group by")+" "+a["Bb"].escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:!(null===e||void 0===e?void 0:e.isRowGroupActive())||!(null===e||void 0===e?void 0:e.getColDef().enableRowGroup),action:function(){return o.columnModel.removeRowGroupColumn(e,"contextMenu")},icon:l};case"resetColumns":return{name:i("resetColumns","Reset Columns"),action:function(){return o.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:i("expandAll","Expand All Row Groups"),action:function(){return o.gridApi.expandAll()}};case"contractAll":return{name:i("collapseAll","Collapse All Row Groups"),action:function(){return o.gridApi.collapseAll()}};case"copy":return a["ab"].__assertRegistered(a["Z"].ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:i("copy","Copy"),shortcut:i("ctrlC","Ctrl+C"),icon:a["Bb"].createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return o.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return a["ab"].__assertRegistered(a["Z"].ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:i("copyWithHeaders","Copy with Headers"),icon:a["Bb"].createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return o.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return a["ab"].__assertRegistered(a["Z"].ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:i("copyWithGroupHeaders","Copy with Group Headers"),icon:a["Bb"].createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return o.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"cut":if(a["ab"].__assertRegistered(a["Z"].ClipboardModule,"Cut from Menu",this.context.getGridId())){var d=this.focusService.getFocusedCell(),h=d?this.rowPositionUtils.getRowNode(d):null,f=!!h&&(null===d||void 0===d?void 0:d.column.isCellEditable(h));return{name:i("cut","Cut"),shortcut:i("ctrlX","Ctrl+X"),icon:a["Bb"].createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!f||this.gridOptionsService.is("suppressCutToClipboard"),action:function(){return o.clipboardService.cutToClipboard(void 0,"contextMenu")}}}return null;case"paste":return a["ab"].__assertRegistered(a["Z"].ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:i("paste","Paste"),shortcut:i("ctrlV","Ctrl+V"),disabled:!0,icon:a["Bb"].createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:function(){return o.clipboardService.pasteFromClipboard()}}:null;case"export":var v=[],y=a["ab"].__isRegistered(a["Z"].CsvExportModule,this.context.getGridId()),g=a["ab"].__isRegistered(a["Z"].ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.is("suppressCsvExport")&&y&&v.push("csvExport"),!this.gridOptionsService.is("suppressExcelExport")&&g&&v.push("excelExport"),{name:i("export","Export"),subMenu:v,icon:a["Bb"].createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:i("csvExport","CSV Export"),icon:a["Bb"].createIconNoSpan("csvExport",this.gridOptionsService,null),action:function(){return o.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:i("excelExport","Excel Export"),icon:a["Bb"].createIconNoSpan("excelExport",this.gridOptionsService,null),action:function(){return o.gridApi.exportDataAsExcel()}};case"separator":return"separator";case"pivotChart":case"chartRange":return null!==(n=this.chartMenuItemMapper.getChartItems(t))&&void 0!==n?n:null;default:return console.warn("AG Grid: unknown menu item type "+t),null}},e.prototype.createAggregationSubMenu=function(t){var e,r=this,n=this.localeService.getLocaleTextFunc();if(t.isPrimary())e=t;else{var o=t.getColDef().pivotValueColumn;e=a["Bb"].exists(o)?o:void 0}var i=[];if(e){var s=e.isValueActive(),l=this.aggFuncService.getFuncNames(e);i.push({name:n("noAggregation","None"),action:function(){r.columnModel.removeValueColumn(e,"contextMenu"),r.columnModel.setColumnAggFunc(e,void 0,"contextMenu")},checked:!s}),l.forEach((function(t){i.push({name:n(t,a["Bb"].capitalise(t)),action:function(){r.columnModel.setColumnAggFunc(e,t,"contextMenu"),r.columnModel.addValueColumn(e,"contextMenu")},checked:s&&e.getAggFunc()===t})}))}return i},VM([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),VM([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),VM([Object(a["cb"])("clipboardService")],e.prototype,"clipboardService",void 0),VM([Object(a["cb"])("aggFuncService")],e.prototype,"aggFuncService",void 0),VM([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),VM([Object(a["u"])("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),VM([Object(a["u"])("chartMenuItemMapper")],e.prototype,"chartMenuItemMapper",void 0),e=VM([Object(a["y"])("menuItemMapper")],e),e}(a["z"]),zM="30.2.1",UM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),WM=function(){return WM=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},WM.apply(this,arguments)},KM=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},XM=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},YM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var r;return UM(e,t),r=e,e.prototype.getChartItems=function(t){var e,n;if(this.chartService){var o="pivotChart"===t?new qM(this.gridOptionsService,this.chartService,this.localeService):new ZM(this.gridOptionsService,this.chartService,this.localeService),i=o.getMenuItem(),s=null===(n=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.settingsPanel)||void 0===n?void 0:n.chartGroupsDef;return s&&(i=r.filterAndOrderChartMenu(i,s,o.getConfigLookup())),this.cleanInternals(i)}a["ab"].__assertRegistered(a["Z"].GridChartsModule,'the Context Menu key "'+t+'"',this.context.getGridId())},e.prototype.cleanInternals=function(t){if(!t)return t;var e=function(t){var r;return null===t||void 0===t||delete t._key,null===(r=null===t||void 0===t?void 0:t.subMenu)||void 0===r||r.forEach((function(t){return e(t)})),t};return e(t)},e.buildLookup=function(t){var e={},r=function(t){e[t._key]=t,t.subMenu&&t.subMenu.forEach((function(t){return r(t)}))};return r(t),e},e.filterAndOrderChartMenu=function(t,e,r){var n,o=this.buildLookup(t),i=WM(WM({},t),{subMenu:[]});if(Object.entries(e).forEach((function(t){var e,n,s=XM(t,2),l=s[0],u=s[1],c=r[l];if(void 0!=c){var p=o[c._key];if(p)if(p.subMenu){var d=u.map((function(t){var e=c[t];if(void 0!=e)return o[e];a["Bb"].doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+l+"."+t+"'")}),"invalid_chartGroupsDef"+t+"_"+l)})).filter((function(t){return void 0!==t}));d.length>0&&(p.subMenu=d,null===(e=i.subMenu)||void 0===e||e.push(p))}else null===(n=i.subMenu)||void 0===n||n.push(p)}else a["Bb"].doOnce((function(){return console.warn("AG Grid - invalid chartGroupsDef config '"+l+"'")}),"invalid_chartGroupsDef"+l)})),0!=(null===(n=i.subMenu)||void 0===n?void 0:n.length))return i},KM([Object(a["cb"])("chartService")],e.prototype,"chartService",void 0),e=r=KM([Object(a["y"])("chartMenuItemMapper")],e),e}(a["z"]),qM=function(){function t(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}return t.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),r=function(r,n,o,i){return{name:e(r,n),action:function(){return t.chartService.createPivotChart({chartType:o})},_key:i}};return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","pivotPie"),r("doughnut","Doughnut&lrm;","doughnut","pivotDoughnut")]},r("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","pivotScatter"),r("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","pivotArea"),r("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},r("histogramChart","Histogram&lrm;","histogram","pivotHistogramChart"),{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:a["Bb"].createIconNoSpan("chart",this.gridOptionsService,void 0)}},t.prototype.getConfigLookup=function(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",doughnut:"pivotDoughnut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},histogramGroup:{_key:"pivotHistogramChart",histogram:"pivotHistogramChart"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:""}}},t}(),ZM=function(){function t(t,e,r){this.gridOptionsService=t,this.chartService=e,this.localeService=r}return t.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),r=function(r,n,o,i){return{name:e(r,n),action:function(){return t.chartService.createChartFromCurrentRange(o)},_key:i}};return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[r("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),r("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),r("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[r("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),r("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),r("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[r("pie","Pie&lrm;","pie","rangePie"),r("doughnut","Doughnut&lrm;","doughnut","rangeDoughnut")],_key:"rangePieChart"},r("line","Line&lrm;","line","rangeLineChart"),{name:e("xyChart","X Y (Scatter)"),subMenu:[r("scatter","Scatter&lrm;","scatter","rangeScatter"),r("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("areaChart","Area"),subMenu:[r("area","Area&lrm;","area","rangeArea"),r("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),r("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},r("histogramChart","Histogram&lrm;","histogram","rangeHistogramChart"),{name:e("combinationChart","Combination"),subMenu:[r("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),r("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:a["Bb"].createIconNoSpan("chart",this.gridOptionsService,void 0)}},t.prototype.getConfigLookup=function(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",doughnut:"rangeDoughnut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},histogramGroup:{_key:"rangeHistogramChart",histogram:"rangeHistogramChart"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:""}}},t}(),JM={version:zM,moduleName:a["Z"].MenuModule,beans:[MM,NM,HM,YM],dependantModules:[b]},QM=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$M=function(){return $M=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},$M.apply(this,arguments)},tR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},eR=function(t){function e(){var e=t.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;return e.filterDefs=[],e.filters=[],e.guiDestroyFuncs=[],e.activeFilterIndices=[],e.lastActivatedMenuItem=null,e.afterFiltersReadyFuncs=[],e}return QM(e,t),e.prototype.postConstruct=function(){var t=this;this.initialiseTabGuard({onFocusIn:function(e){return t.onFocusIn(e)}})},e.getFilterDefs=function(t){var e=t.filters;return e&&e.length>0?e:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]},e.prototype.init=function(t){var r=this;this.params=t,this.filterDefs=e.getFilterDefs(t);var n=t.column,o=t.filterChangedCallback;this.column=n,this.filterChangedCallback=o;var i=[];return this.filterDefs.forEach((function(t,e){var n=r.createFilter(t,e);null!=n&&i.push(n)})),a["m"].all(i).then((function(t){r.filters=t,r.refreshGui("columnMenu"),r.afterFiltersReadyFuncs.forEach((function(t){return t()})),r.afterFiltersReadyFuncs.length=0}))},e.prototype.refreshGui=function(t){var e=this;t!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach((function(r,n){n>0&&e.appendChild(a["Bb"].loadTemplate('<div class="ag-filter-separator"></div>'));var o,i=e.filterDefs[n],s=e.getFilterTitle(r,i);if("subMenu"===i.display&&"toolPanel"!==t){var l=e.insertFilterMenu(r,s);o=l.getGui()}else if("subMenu"===i.display||"accordion"===i.display){var u=e.insertFilterGroup(r,s);o=u.getGui()}else o=r.getGui();e.appendChild(o)})),this.lastOpenedInContainer=t)},e.prototype.getFilterTitle=function(t,e){if(null!=e.title)return e.title;var r=t;return"function"===typeof r.getFilterTitle?r.getFilterTitle():"Filter"},e.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach((function(t){return t()})),this.guiDestroyFuncs.length=0},e.prototype.insertFilterMenu=function(t,e){var r=this,n=this.createBean(new a["i"]({name:e,subMenu:t,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:function(){return!1}}));return n.setParentComponent(this),this.guiDestroyFuncs.push((function(){return r.destroyBean(n)})),this.addManagedListener(n,a["i"].EVENT_MENU_ITEM_ACTIVATED,(function(t){r.lastActivatedMenuItem&&r.lastActivatedMenuItem!==t.menuItem&&r.lastActivatedMenuItem.deactivate(),r.lastActivatedMenuItem=t.menuItem})),n.addGuiEventListener("focusin",(function(){return n.activate()})),n.addGuiEventListener("focusout",(function(){n.isSubMenuOpen()||n.deactivate()})),n},e.prototype.insertFilterGroup=function(t,e){var r=this,n=this.createBean(new a["e"]({title:e,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push((function(){return r.destroyBean(n)})),n.addItem(t.getGui()),n.toggleGroupExpand(!1),t.afterGuiAttached&&n.addManagedListener(n,a["e"].EVENT_EXPANDED,(function(){return t.afterGuiAttached({container:r.lastOpenedInContainer,suppressFocus:!0,hidePopup:r.hidePopup})})),n},e.prototype.isFilterActive=function(){return this.filters.some((function(t){return t.isFilterActive()}))},e.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null},e.prototype.doesFilterPass=function(t,e){var r=!0;return this.filters.forEach((function(n){r&&n!==e&&n.isFilterActive()&&(r=n.doesFilterPass(t))})),r},e.prototype.getFilterType=function(){return"multi"},e.prototype.getModelFromUi=function(){var t={filterType:this.getFilterType(),filterModels:this.filters.map((function(t){var e=t;return"function"===typeof e.getModelFromUi?e.getModelFromUi():null}))};return t},e.prototype.getModel=function(){if(!this.isFilterActive())return null;var t={filterType:this.getFilterType(),filterModels:this.filters.map((function(t){return t.isFilterActive()?t.getModel():null}))};return t},e.prototype.setModel=function(t){var e=this,r=function(t,e){return new a["m"]((function(r){var n=t.setModel(e);n?n.then((function(){return r()})):r()}))},n=[];return null==t?n=this.filters.map((function(t,n){var o=r(t,null).then((function(){e.updateActiveList(n)}));return o})):this.filters.forEach((function(o,i){var a=t.filterModels.length>i?t.filterModels[i]:null,s=r(o,a).then((function(){e.updateActiveList(i)}));n.push(s)})),a["m"].all(n).then((function(){}))},e.prototype.applyModel=function(t){void 0===t&&(t="api");var e=!1;return this.filters.forEach((function(r){r instanceof a["jb"]&&(e=r.applyModel(t)||e)})),e},e.prototype.getChildFilterInstance=function(t){return this.filters[t]},e.prototype.afterGuiAttached=function(t){t?(this.hidePopup=t.hidePopup,this.refreshGui(t.container)):this.hidePopup=void 0;var e=this.params.filters,r=e&&e.some((function(t){return t.display&&"inline"!==t.display}));this.executeFunctionIfExists("afterGuiAttached",$M($M({},t||{}),{suppressFocus:r}));var n=this.gridOptionsService.getDocument(),o=n.activeElement;r&&(o===n.body||this.getGui().contains(o))&&this.forceFocusOutOfContainer(!0)},e.prototype.afterGuiDetached=function(){this.executeFunctionIfExists("afterGuiDetached")},e.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")},e.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")},e.prototype.destroy=function(){var e=this;this.filters.forEach((function(t){t.setModel(null),e.destroyBean(t)})),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,t.prototype.destroy.call(this)},e.prototype.executeFunctionIfExists=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];a["Bb"].forEachReverse(this.filters,(function(r){var n=r[t];"function"===typeof n&&n.apply(r,e)}))},e.prototype.createFilter=function(t,e){var r,n=this,o=this.params,i=o.filterModifiedCallback,a=o.doesRowPassOtherFilter,s=$M($M({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:i,filterChangedCallback:function(t){n.executeWhenAllFiltersReady((function(){return n.filterChanged(e,t)}))},doesRowPassOtherFilter:function(t){return a(t)&&n.doesFilterPass({node:t,data:t.data},r)}}),l=this.userComponentFactory.getFilterDetails(t,s,"agTextColumnFilter");if(!l)return null;var u=l.newAgStackInstance();return u&&u.then((function(t){return r=t})),u},e.prototype.executeWhenAllFiltersReady=function(t){this.filters&&this.filters.length>0?t():this.afterFiltersReadyFuncs.push(t)},e.prototype.updateActiveList=function(t){var e=this.filters[t];a["Bb"].removeFromArray(this.activeFilterIndices,t),e.isFilterActive()&&this.activeFilterIndices.push(t)},e.prototype.filterChanged=function(t,e){this.updateActiveList(t),this.filterChangedCallback(e);var r=this.filters[t];this.filters.forEach((function(t){t!==r&&"function"===typeof t.onAnyFilterChanged&&t.onAnyFilterChanged()}))},e.prototype.onFocusIn=function(t){return null==this.lastActivatedMenuItem||this.lastActivatedMenuItem.getGui().contains(t.target)||(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0},e.prototype.getModelAsString=function(t){var e,r,n,o;if(!this.filters||!(null===(e=null===t||void 0===t?void 0:t.filterModels)||void 0===e?void 0:e.length))return"";var i=null!==(r=this.getLastActiveFilterIndex())&&void 0!==r?r:0,a=this.filters[i];return null!==(o=null===(n=a.getModelAsString)||void 0===n?void 0:n.call(a,t.filterModels[i]))&&void 0!==o?o:""},tR([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),tR([Object(a["u"])("userComponentFactory")],e.prototype,"userComponentFactory",void 0),tR([a["fb"]],e.prototype,"postConstruct",null),e}(a["rb"]),rR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nR=function(){return nR=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},nR.apply(this,arguments)},oR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},iR=function(t){function e(){var e=t.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;return e.floatingFilters=[],e.compDetailsList=[],e}return rR(e,t),e.prototype.init=function(t){this.params=t;var e=this.getCompDetailsList(t).compDetailsList;return this.setParams(e)},e.prototype.setParams=function(t){var e=this,r=[];return t.forEach((function(t){var n=null===t||void 0===t?void 0:t.newAgStackInstance();null!=n&&(e.compDetailsList.push(t),r.push(n))})),a["m"].all(r).then((function(t){t.forEach((function(t,r){e.floatingFilters.push(t);var n=t.getGui();e.appendChild(n),r>0&&a["Bb"].setDisplayed(n,!1)}))}))},e.prototype.onParamsUpdated=function(t){var e=this;this.params=t;var r=this.getCompDetailsList(t),n=r.compDetailsList,o=r.floatingFilterParamsList,i=n.length===this.compDetailsList.length&&n.every((function(t,r){return!e.filterManager.areFilterCompsDifferent(e.compDetailsList[r],t)}));i?o.forEach((function(t,r){var n,o=e.floatingFilters[r];null===(n=o.onParamsUpdated)||void 0===n||n.call(o,t)})):(a["Bb"].clearElement(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(n))},e.prototype.getCompDetailsList=function(t){var e=this,r=[],n=[],o=t.filterParams;return eR.getFilterDefs(o).forEach((function(o,i){var s=nR(nR({},t),{parentFilterInstance:function(t){e.parentMultiFilterInstance((function(e){var r=e.getChildFilterInstance(i);null!=r&&t(r)}))}});a["Bb"].mergeDeep(s.filterParams,o.filterParams);var l=e.getCompDetails(o,s);l&&(r.push(l),n.push(s))})),{compDetailsList:r,floatingFilterParamsList:n}},e.prototype.onParentModelChanged=function(t,e){var r=this;e&&e.afterFloatingFilter||this.parentMultiFilterInstance((function(n){if(null==t)r.floatingFilters.forEach((function(t,r){t.onParentModelChanged(null,e),a["Bb"].setDisplayed(t.getGui(),0===r)}));else{var o=n.getLastActiveFilterIndex();r.floatingFilters.forEach((function(r,n){var i=t.filterModels.length>n?t.filterModels[n]:null;r.onParentModelChanged(i,e);var s=null==o?0===n:n===o;a["Bb"].setDisplayed(r.getGui(),s)}))}}))},e.prototype.destroy=function(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,t.prototype.destroy.call(this)},e.prototype.getCompDetails=function(t,e){var r,n=this,o=null!==(r=this.userComponentFactory.getDefaultFloatingFilterType(t,(function(){return n.filterManager.getDefaultFloatingFilter(n.params.column)})))&&void 0!==r?r:"agReadOnlyFloatingFilter";return this.userComponentFactory.getFloatingFilterCompDetails(t,e,o)},e.prototype.parentMultiFilterInstance=function(t){this.params.parentFilterInstance((function(e){if(!(e instanceof eR))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");t(e)}))},oR([Object(a["u"])("userComponentFactory")],e.prototype,"userComponentFactory",void 0),oR([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),e}(a["H"]),aR="30.2.1",sR={version:aR,moduleName:a["Z"].MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:eR},{componentName:"agMultiColumnFloatingFilter",componentClass:iR}],dependantModules:[b]},lR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uR=function(t){function e(){return t.call(this,'<div class="ag-cell-edit-wrapper"></div>')||this}return lR(e,t),e.prototype.init=function(t){var e=this;this.params=t;var r=t.cellStartedEdit,n=t.cellHeight,o=t.values;if(a["Bb"].missing(o))console.warn("AG Grid: richSelectCellEditor requires values for it to work");else{var i=this.buildRichSelectParams(),s=i.params,l=i.valuesPromise;this.richSelect=this.createManagedBean(new a["o"](s)),this.appendChild(this.richSelect),l&&l.then((function(t){e.richSelect.setValueList({valueList:t,refresh:!0});var r=e.getSearchStringCallback(t);r&&e.richSelect.setSearchStringCreator(r)})),this.addManagedListener(this.richSelect,a["R"].EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=r,a["Bb"].exists(n)&&this.richSelect.setRowHeight(n)}},e.prototype.onEditorPickerValueSelected=function(t){this.params.stopEditing(!t.fromEnterKey)},e.prototype.onEditorFocusOut=function(t){this.richSelect.getGui().contains(t.relatedTarget)||this.params.stopEditing(!0)},e.prototype.buildRichSelectParams=function(){var t,e,r=this.params,n=r.cellRenderer,o=r.value,i=r.values,a=r.formatValue,s=r.searchDebounceDelay,l=r.valueListGap,u=r.valueListMaxHeight,c=r.valueListMaxWidth,p=r.allowTyping,d=r.filterList,h=r.searchType,f=r.highlightMatch,v=r.valuePlaceholder,y={value:o,cellRenderer:n,searchDebounceDelay:s,valueFormatter:a,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:l,allowTyping:p,filterList:d,searchType:h,highlightMatch:f,maxPickerHeight:u,maxPickerWidth:c,placeholder:v};return t="function"===typeof i?i(this.params):i,Array.isArray(t)?(y.valueList=t,y.searchStringCreator=this.getSearchStringCallback(t)):e=t,{params:y,valuesPromise:e}},e.prototype.getSearchStringCallback=function(t){var e=this,r=this.params.colDef;if("object"===typeof t[0]&&r.keyCreator)return function(t){return t.map((function(t){var n={value:t,colDef:e.params.colDef,column:e.params.column,node:e.params.node,data:e.params.data,api:e.gridOptionsService.api,columnApi:e.gridOptionsService.columnApi,context:e.gridOptionsService.context};return r.keyCreator(n)}))}},e.prototype.afterGuiAttached=function(){var t=this,e=this,r=e.focusAfterAttached,n=e.params;setTimeout((function(){if(t.isAlive()){r&&t.richSelect.getFocusableElement().focus(),t.richSelect.showPicker();var e=n.eventKey;e&&1===(null===e||void 0===e?void 0:e.length)&&t.richSelect.searchTextFromString(e)}}))},e.prototype.getValue=function(){return this.richSelect.getValue()},e.prototype.isPopup=function(){return!1},e}(a["db"]),cR="30.2.1",pR={version:cR,moduleName:a["Z"].RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:uR},{componentName:"agRichSelectCellEditor",componentClass:uR}],dependantModules:[b]},dR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},fR=function(t){function e(e,r,n){var o=t.call(this,0)||this;return o.nodeIdSequence=new a["bb"],o.info={},o.ssrmParams=e,o.parentRowNode=n,o.level=n.level+1,o.groupLevel=e.rowGroupCols?o.level<e.rowGroupCols.length:void 0,o.leafGroup=!!e.rowGroupCols&&o.level===e.rowGroupCols.length-1,o}return dR(e,t),e.prototype.postConstruct=function(){var t=this;if(this.usingTreeData=this.gridOptionsService.is("treeData"),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){var e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}var r=1,n=-1===this.parentRowNode.level,o=this.storeUtils.getServerSideInitialRowCount();n&&void 0!==o&&(r=o),this.initialiseRowNodes(r),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc((function(){return t.rowNodeBlockLoader.removeBlock(t)})),this.postSortFunc=this.gridOptionsService.getCallback("postSortRows")},e.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},e.prototype.initialiseRowNodes=function(t,e){void 0===e&&(e=!1),this.destroyRowNodes();for(var r=0;r<t;r++){var n=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});e&&(n.failedLoad=!0),this.allRowNodes.push(n),this.nodesAfterFilter.push(n),this.nodesAfterSort.push(n)}},e.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},e.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,successCallback:this.pageLoaded.bind(this,this.getVersion()),success:this.success.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},e.prototype.getStartRow=function(){return 0},e.prototype.getEndRow=function(){return this.nodesAfterSort.length},e.prototype.createDataNode=function(t,e){var r=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});null!=e?a["Bb"].insertIntoArray(this.allRowNodes,r,e):this.allRowNodes.push(r);var n=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(r,t,n,void 0),this.nodeManager.addRowNode(r),this.blockUtils.checkOpenByDefault(r),this.allNodesMap[r.id]=r,r},e.prototype.prefixId=function(t){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+t:t.toString()},e.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},e.prototype.processServerResult=function(t){if(this.isAlive()){var e=t.storeInfo||t.groupLevelInfo;e&&Object.assign(this.info,e),t.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(t.pivotResultFields);var r=this.allRowNodes.length>0?this.allNodesMap:void 0;if(this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},!t.rowData){var n='AG Grid: "params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.';a["Bb"].doOnce((function(){return console.warn(n,t)}),"FullStore.noData")}this.createOrRecycleNodes(r,t.rowData),r&&this.blockUtils.destroyRowNodes(a["Bb"].getAllValuesInObject(r)),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},e.prototype.createOrRecycleNodes=function(t,e){var r=this;if(e){var n=function(e){if(t){var n=r.gridOptionsService.getCallback("getRowId");if(n){var o=r.parentRowNode.getGroupKeys(),i=r.level,a=n({data:e,parentKeys:o.length>0?o:void 0,level:i}),s=t[a];if(s)return delete t[a],s}}},o=function(t,e){r.allNodesMap[t.id]=t,r.blockUtils.updateDataIntoRowNode(t,e),r.allRowNodes.push(t)};e.forEach((function(t){var e=n(t);e?o(e,t):r.createDataNode(t)}))}},e.prototype.flushAsyncTransactions=function(){var t=this;window.setTimeout((function(){return t.transactionManager.flushAsyncTransactions()}),0)},e.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},e.prototype.sortRowNodes=function(){var t=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),e=this.sortController.getSortOptions(),r=!e||0==e.length;if(t||r)this.nodesAfterSort=this.nodesAfterFilter;else if(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,e),this.postSortFunc){var n={nodes:this.nodesAfterSort};this.postSortFunc(n)}},e.prototype.filterRowNodes=function(){var t=this,e=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),r=this.groupLevel;this.nodesAfterFilter=e||r?this.allRowNodes:this.allRowNodes.filter((function(e){return t.filterManager.doesRowPassFilter({rowNode:e})}))},e.prototype.clearDisplayIndexes=function(){var t=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach((function(e){return t.blockUtils.clearDisplayIndex(e)}))},e.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},e.prototype.isDisplayIndexInStore=function(t){return 0!==this.getRowCount()&&(t>=this.displayIndexStart&&t<this.displayIndexEnd)},e.prototype.setDisplayIndexes=function(t,e){var r=this;this.displayIndexStart=t.peek(),this.topPx=e.value;var n={};this.nodesAfterSort.forEach((function(o){r.blockUtils.setDisplayIndex(o,t,e),n[o.id]=!0})),this.allRowNodes.forEach((function(t){n[t.id]||r.blockUtils.clearDisplayIndex(t)})),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx},e.prototype.forEachStoreDeep=function(t,e){void 0===e&&(e=new a["bb"]),t(this,e.next()),this.allRowNodes.forEach((function(r){var n=r.childStore;n&&n.forEachStoreDeep(t,e)}))},e.prototype.forEachNodeDeep=function(t,e){void 0===e&&(e=new a["bb"]),this.allRowNodes.forEach((function(r){t(r,e.next());var n=r.childStore;n&&n.forEachNodeDeep(t,e)}))},e.prototype.forEachNodeDeepAfterFilterAndSort=function(t,e,r){void 0===e&&(e=new a["bb"]),void 0===r&&(r=!1),this.nodesAfterSort.forEach((function(n){t(n,e.next());var o=n.childStore;o&&o.forEachNodeDeepAfterFilterAndSort(t,e,r)})),r&&this.parentRowNode.sibling&&t(this.parentRowNode.sibling,e.next())},e.prototype.getRowUsingDisplayIndex=function(t){if(this.isDisplayIndexInStore(t)){var e=this.blockUtils.binarySearchForDisplayIndex(t,this.nodesAfterSort);return e}},e.prototype.getRowBounds=function(t){for(var e=0;e<this.nodesAfterSort.length;e++){var r=this.nodesAfterSort[e],n=this.blockUtils.extractRowBounds(r,t);if(n)return n}return null},e.prototype.isPixelInRange=function(t){return t>=this.topPx&&t<this.topPx+this.heightPx},e.prototype.getRowIndexAtPixel=function(t){var e=this,r=t<=this.topPx;if(r){var n=this.nodesAfterSort[0];return n.rowIndex}var o=t>=this.topPx+this.heightPx;if(o){var i=this.nodesAfterSort[this.nodesAfterSort.length-1],a=i.rowTop+i.rowHeight;if(t>=a&&i.expanded){if(i.childStore&&i.childStore.getRowCount()>0)return i.childStore.getRowIndexAtPixel(t);if(i.detailNode)return i.detailNode.rowIndex}return i.rowIndex}var s=null;this.nodesAfterSort.forEach((function(r){var n=e.blockUtils.getIndexAtPixel(r,t);null!=n&&(s=n)}));var l=null==s;return l?this.displayIndexEnd-1:s},e.prototype.getChildStore=function(t){var e=this;return this.storeUtils.getChildStore(t,this,(function(t){var r=e.allRowNodes.find((function(e){return e.key==t}));return r}))},e.prototype.forEachChildStoreShallow=function(t){this.allRowNodes.forEach((function(e){var r=e.childStore;r&&t(r)}))},e.prototype.refreshAfterFilter=function(t){var e=this.storeUtils.isServerSideFilterOnServer(),r=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t),n=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups();if(n||e&&r)return this.refreshStore(!0),void this.sortRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((function(e){return e.refreshAfterFilter(t)}))},e.prototype.refreshAfterSort=function(t){var e=this.storeUtils.isServerSideSortOnServer(),r=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t),n=this.storeUtils.isServerSideSortAllLevels();if(n||e&&r)return this.refreshStore(!0),void this.filterRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((function(e){return e.refreshAfterSort(t)}))},e.prototype.applyTransaction=function(t){switch(this.getState()){case a["mb"].STATE_FAILED:return{status:a["qb"].StoreLoadingFailed};case a["mb"].STATE_LOADING:return{status:a["qb"].StoreLoading};case a["mb"].STATE_WAITING_TO_LOAD:return{status:a["qb"].StoreWaitingToLoad}}var e=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(e){var r={transaction:t,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info},n=e(r);if(!n)return{status:a["qb"].Cancelled}}var o={status:a["qb"].Applied,remove:[],update:[],add:[]},i=[];return this.executeAdd(t,o),this.executeRemove(t,o,i),this.executeUpdate(t,o,i),this.filterAndSortNodes(),this.updateSelection(i),o},e.prototype.updateSelection=function(t){var e=t.length>0;if(e){this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});var r={type:a["R"].EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(r)}},e.prototype.executeAdd=function(t,e){var r=this,n=t.add,o=t.addIndex;if(!a["Bb"].missingOrEmpty(n)){var i="number"===typeof o&&o>=0;i?n.reverse().forEach((function(t){var n=r.createDataNode(t,o);e.add.push(n)})):n.forEach((function(t){var n=r.createDataNode(t);e.add.push(n)}))}},e.prototype.executeRemove=function(t,e,r){var n=this,o=t.remove;if(null!=o){var i={};o.forEach((function(t){var o=n.lookupRowNode(t);o&&(o.isSelected()&&r.push(o),o.clearRowTopAndRowIndex(),i[o.id]=!0,delete n.allNodesMap[o.id],e.remove.push(o),n.nodeManager.removeNode(o))})),this.allRowNodes=this.allRowNodes.filter((function(t){return!i[t.id]}))}},e.prototype.executeUpdate=function(t,e,r){var n=this,o=t.update;null!=o&&o.forEach((function(t){var o=n.lookupRowNode(t);o&&(n.blockUtils.updateDataIntoRowNode(o,t),!o.selectable&&o.isSelected()&&r.push(o),e.update.push(o))}))},e.prototype.lookupRowNode=function(t){var e,r=this.gridOptionsService.getCallback("getRowId");if(null!=r){var n=this.level,o=this.parentRowNode.getGroupKeys(),i=r({data:t,parentKeys:o.length>0?o:void 0,level:n});if(e=this.allNodesMap[i],!e)return console.error("AG Grid: could not find row id="+i+", data item was not found for this id"),null}else if(e=this.allRowNodes.find((function(e){return e.data===t})),!e)return console.error("AG Grid: could not find data item as object was not found",t),null;return e},e.prototype.addStoreStates=function(t){t.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow((function(e){return e.addStoreStates(t)}))},e.prototype.refreshStore=function(t){if(t){var e=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(e)}this.scheduleLoad(),this.fireStoreUpdatedEvent()},e.prototype.retryLoads=function(){this.getState()===a["mb"].STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow((function(t){return t.retryLoads()}))},e.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},e.prototype.fireStoreUpdatedEvent=function(){var t={type:a["R"].EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)},e.prototype.getRowCount=function(){return this.nodesAfterSort.length},e.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.nodesAfterSort[t];return e.rowIndex},e.prototype.isLastRowIndexKnown=function(){return this.getState()==a["mb"].STATE_LOADED},e.prototype.getRowNodesInRange=function(t,e){var r=[],n=!1;a["Bb"].missing(t)&&(n=!0),this.nodesAfterSort.forEach((function(o){var i=o===t||o===e;(n||i)&&r.push(o),i&&(n=!n)}));var o=n;return o?[]:r},e.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},hR([Object(a["u"])("ssrmStoreUtils")],e.prototype,"storeUtils",void 0),hR([Object(a["u"])("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),hR([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),hR([Object(a["u"])("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),hR([Object(a["u"])("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),hR([Object(a["u"])("sortController")],e.prototype,"sortController",void 0),hR([Object(a["u"])("selectionService")],e.prototype,"selectionService",void 0),hR([Object(a["u"])("ssrmNodeManager")],e.prototype,"nodeManager",void 0),hR([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),hR([Object(a["u"])("ssrmTransactionManager")],e.prototype,"transactionManager",void 0),hR([Object(a["u"])("rowModel")],e.prototype,"serverSideRowModel",void 0),hR([a["fb"]],e.prototype,"postConstruct",null),hR([a["hb"]],e.prototype,"destroyRowNodes",null),e}(a["mb"]),vR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},gR=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},mR=function(t){function e(e,r,n){var o=t.call(this)||this;return o.loadingNodes=new Set,o.checkForLoadQueued=!1,o.loaderTimeout=void 0,o.nextBlockToLoad=void 0,o.parentNode=r,o.cache=e,o.storeParams=n,o}return vR(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.rowNodeBlockLoader,a["nb"].BLOCK_LOADED_EVENT,(function(){return t.queueLoadAction()}))},e.prototype.isRowLoading=function(t){return this.loadingNodes.has(t)},e.prototype.getBlockToLoad=function(){for(var t,e=this,r=this.api.getFirstDisplayedRow(),n=this.api.getLastDisplayedRow(),o=r;o<=n;o++){var i=this.cache.getNodeCachedByDisplayIndex(o);if(i){var a=this.cache.getNodes().getBy("node",i);if(a&&!this.isRowLoading(a.index)&&(i.__needsRefreshWhenVisible||i.stub&&!i.failedLoad))return this.getBlockStartIndexForIndex(a.index)}}var s=this.cache.getNodesToRefresh(),l=null,u=Number.MAX_SAFE_INTEGER;s.forEach((function(t){if(null!=t.rowIndex){if(!e.isRowLoading(t.rowIndex)){var o=Math.abs(r-t.rowIndex),i=Math.abs(t.rowIndex-n);o<u&&(l=t,u=o),i<u&&(l=t,u=i)}}else l=t}));var c=null===(t=this.cache.getNodes().getBy("node",l))||void 0===t?void 0:t.index;return null==c?void 0:this.getBlockStartIndexForIndex(c)},e.prototype.reset=function(){this.loadingNodes.clear(),clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0},e.prototype.executeLoad=function(t,e){var r,n=this,o=this.cache.getSsrmParams(),i={startRow:t,endRow:e,rowGroupCols:o.rowGroupCols,valueCols:o.valueCols,pivotCols:o.pivotCols,pivotMode:o.pivotMode,groupKeys:this.parentNode.getGroupKeys(),filterModel:o.filterModel,sortModel:o.sortModel},a=function(){for(var r=0;r<e-t;r++)n.loadingNodes.delete(t+r)},s=function(){for(var r=0;r<e-t;r++)n.loadingNodes.add(t+r)},l=function(r){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadSuccess(t,e-t,r),a(),n.queueLoadAction()},u=function(){n.rowNodeBlockLoader.loadComplete(),n.cache.onLoadFailed(t,e-t),a(),n.queueLoadAction()},c={request:i,successCallback:function(t,e){return l({rowData:t,rowCount:e})},success:l,failCallback:u,fail:u,parentNode:this.parentNode,api:this.api,columnApi:this.columnApi,context:this.gridOptionsService.context};s(),null===(r=this.cache.getSsrmParams().datasource)||void 0===r||r.getRows(c)},e.prototype.getNextBlockToLoad=function(){var t=this.getBlockToLoad();return null!=t?[String(t),t+this.getBlockSize()]:null},e.prototype.queueLoadCheck=function(){var t=this;this.checkForLoadQueued||(this.checkForLoadQueued=!0,window.queueMicrotask((function(){t.checkForLoadQueued=!1,t.queueLoadAction()})))},e.prototype.queueLoadAction=function(){var t,e=this,r=this.getNextBlockToLoad();if(!r)return window.clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0,void(this.nextBlockToLoad=void 0);if(!this.nextBlockToLoad||this.nextBlockToLoad[0]!==r[0]&&this.nextBlockToLoad[1]!==r[1]){this.nextBlockToLoad=r,window.clearTimeout(this.loaderTimeout);var n=gR(this.nextBlockToLoad,2),o=n[0],i=n[1],a=Number(o);this.loaderTimeout=window.setTimeout((function(){e.cache.isAlive()&&(e.loaderTimeout=void 0,e.attemptLoad(a,i),e.nextBlockToLoad=void 0)}),null!==(t=this.gridOptionsService.getNum("blockLoadDebounceMillis"))&&void 0!==t?t:0)}},e.prototype.attemptLoad=function(t,e){var r=this.rowNodeBlockLoader.getAvailableLoadingCount();null!=r&&0===r||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(t,e),this.queueLoadAction())},e.prototype.getBlockSize=function(){return this.storeParams.cacheBlockSize||e.DEFAULT_BLOCK_SIZE},e.prototype.getBlockStartIndexForIndex=function(t){var e=this.getBlockSize();return t-t%e},e.prototype.getBlockBoundsForIndex=function(t){var e=this.getBlockStartIndexForIndex(t),r=this.getBlockSize();return[e,e+r]},e.DEFAULT_BLOCK_SIZE=100,yR([Object(a["u"])("gridApi")],e.prototype,"api",void 0),yR([Object(a["u"])("columnApi")],e.prototype,"columnApi",void 0),yR([Object(a["u"])("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),yR([a["fb"]],e.prototype,"init",null),e}(a["z"]),bR=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=t,this.maps=new Map(this.indexes.map((function(t){return[t,new Map]})))}return t.prototype.getBy=function(t,e){var r=this.maps.get(t);if(!r)throw new Error("AG Grid: "+String(t)+" not found");return r.get(e)},t.prototype.set=function(t){var e=this;this.indexes.forEach((function(r){var n=e.maps.get(r);if(!n)throw new Error("AG Grid: "+String(r)+" not found");n.set(t[r],t)}))},t.prototype.delete=function(t){var e=this;this.indexes.forEach((function(r){var n=e.maps.get(r);if(!n)throw new Error("AG Grid: "+String(r)+" not found");n.delete(t[r])}))},t.prototype.clear=function(){this.maps.forEach((function(t){return t.clear()}))},t.prototype.getIterator=function(t){var e=this.maps.get(t);if(!e)throw new Error("AG Grid: "+String(t)+" not found");return e.values()},t.prototype.forEach=function(t){var e,r=this.getIterator(this.indexes[0]);while(e=r.next()){if(e.done)break;t(e.value)}},t.prototype.find=function(t){var e,r=this.getIterator(this.indexes[0]);while(e=r.next()){if(e.done)break;if(t(e.value))return e.value}},t.prototype.filter=function(t){var e,r=this.getIterator(this.indexes[0]),n=[];while(e=r.next()){if(e.done)break;t(e.value)&&n.push(e.value)}return n},t}(),CR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),SR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},wR=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},xR=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},OR=function(t){function e(e,r,n){var o=t.call(this)||this;return o.live=!0,o.removedNodeCache=new Map,o.store=e,o.numberOfRows=r,o.isLastRowKnown=!1,o.storeParams=n,o}return CR(e,t),e.prototype.init=function(){this.nodeMap=new bR("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.rowLoader=this.createManagedBean(new mR(this,this.store.getParentNode(),this.storeParams)),this.getRowIdFunc=this.gridOptionsService.getCallback("getRowId"),this.isMasterDetail=this.gridOptionsService.is("masterDetail")},e.prototype.destroyRowNodes=function(){var t=this;this.numberOfRows=0,this.nodeMap.forEach((function(e){return t.blockUtils.destroyRowNode(e.node)})),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1},e.prototype.getRowByDisplayIndex=function(t){var e,r,n,o;if(this.store.isDisplayIndexInStore(t)){var i=this.nodeDisplayIndexMap.get(t);if(i)return(i.stub||i.__needsRefreshWhenVisible)&&this.rowLoader.queueLoadCheck(),i;if(t===this.store.getDisplayIndexStart())return this.createStubNode(0,t);var a=this.nodeDisplayIndexMap.get(t-1);if(a){if(this.isMasterDetail&&a.master&&a.expanded)return a.detailNode;if(a.expanded&&(null===(e=a.childStore)||void 0===e?void 0:e.isDisplayIndexInStore(t)))return null===(r=a.childStore)||void 0===r?void 0:r.getRowUsingDisplayIndex(t);var s=this.nodeMap.getBy("node",a);return this.createStubNode(s.index+1,t)}var l=this.getSurroundingNodesByDisplayIndex(t);if(null==l){var u=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(u,t)}var c=l.previousNode,p=l.nextNode;if(c&&c.node.expanded&&(null===(n=c.node.childStore)||void 0===n?void 0:n.isDisplayIndexInStore(t)))return null===(o=c.node.childStore)||void 0===o?void 0:o.getRowUsingDisplayIndex(t);if(p){var d=p.node.rowIndex-t,h=p.index-d;return this.createStubNode(h,t)}var f=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(f,t)}},e.prototype.createStubNode=function(t,e){var r=this,n=this.store.getRowBounds(e),o=this.createRowAtIndex(t,null,(function(t){t.setRowIndex(e),t.setRowTop(n.rowTop),r.nodeDisplayIndexMap.set(e,t)}));return this.rowLoader.queueLoadCheck(),o},e.prototype.getRowByStoreIndex=function(t){var e;return null===(e=this.nodeMap.getBy("index",t))||void 0===e?void 0:e.node},e.prototype.skipDisplayIndexes=function(t,e,r){if(0!==t){var n=this.gridOptionsService.getRowHeightAsNumber();e.skip(t),r.value+=t*n}},e.prototype.setDisplayIndexes=function(t,e){this.nodeDisplayIndexMap.clear();var r={};this.nodeMap.forEach((function(t){r[t.index]=t.node}));var n=-1;for(var o in r){var i=r[o],a=Number(o),s=a-1-n;this.skipDisplayIndexes(s,t,e),this.blockUtils.setDisplayIndex(i,t,e),this.nodeDisplayIndexMap.set(i.rowIndex,i),n=a}var l=this.numberOfRows-1-n;this.skipDisplayIndexes(l,t,e),this.purgeExcessRows()},e.prototype.getRowCount=function(){return this.numberOfRows},e.prototype.setRowCount=function(t,e){if(t<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=t,null!=e&&(this.isLastRowKnown=e,!1===e&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()},e.prototype.getNodes=function(){return this.nodeMap},e.prototype.getNodeCachedByDisplayIndex=function(t){var e;return null!==(e=this.nodeDisplayIndexMap.get(t))&&void 0!==e?e:null},e.prototype.getNodesToRefresh=function(){return this.nodesToRefresh},e.prototype.getSurroundingNodesByDisplayIndex=function(t){var e,r;return this.nodeMap.forEach((function(n){t>n.node.rowIndex?(null==r||r.node.rowIndex<n.node.rowIndex)&&(r=n):(null==e||e.node.rowIndex>n.node.rowIndex)&&(e=n)})),r||e?{previousNode:r,nextNode:e}:null},e.prototype.getDisplayIndexFromStoreIndex=function(t){var e,r,n,o,i=this.nodeMap.getBy("index",t);if(i)return i.node.rowIndex;if(this.nodeMap.forEach((function(e){t>e.index?(null==o||o.index<e.index)&&(o=e):(null==n||n.index>e.index)&&(n=e)})),!n)return this.store.getDisplayIndexEnd()-(this.numberOfRows-t);if(!o)return this.store.getDisplayIndexStart()+t;var a=t-o.index,s=null!==(r=null===(e=o.node.childStore)||void 0===e?void 0:e.getDisplayIndexEnd())&&void 0!==r?r:o.node.rowIndex;return s+a},e.prototype.createRowAtIndex=function(t,e,r){var n,o,i=this.nodeMap.getBy("index",t);if(i){var a=i.node;if(a.__needsRefreshWhenVisible=!1,this.doesNodeMatch(e,a))return this.blockUtils.updateDataIntoRowNode(a,e),this.nodesToRefresh.delete(a),a;if(null==this.getRowIdFunc&&a.hasChildren()&&a.expanded)return this.nodesToRefresh.delete(a),a;this.destroyRowAtIndex(t)}if(e&&null!=this.getRowIdFunc){var s=this.getRowId(e),l=s&&(null===(n=this.removedNodeCache)||void 0===n?void 0:n.get(s));if(l)return null===(o=this.removedNodeCache)||void 0===o||o.delete(s),this.blockUtils.updateDataIntoRowNode(l,e),this.nodeMap.set({id:l.id,node:l,index:t}),l;var u=this.nodeMap.getBy("id",s);if(u){this.nodeMap.delete(u);a=u.node;var c=u.index;return this.blockUtils.updateDataIntoRowNode(a,e),this.nodeMap.set({id:a.id,node:a,index:t}),this.nodesToRefresh.delete(a),this.rowLoader.getBlockStartIndexForIndex(c)===this.rowLoader.getBlockStartIndexForIndex(t)?a:(this.markBlockForVerify(c),a)}}var p=this.blockUtils.createRowNode(this.store.getRowDetails());if(null!=e){var d=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(p,e,d,void 0),this.blockUtils.checkOpenByDefault(p),this.nodeManager.addRowNode(p)}return this.nodeMap.set({id:p.id,node:p,index:t}),r&&r(p),p},e.prototype.getBlockStates=function(){var t=this,e={},r={};this.nodeMap.forEach((function(n){var o,i=n.node,a=n.index,s=t.rowLoader.getBlockStartIndexForIndex(a);i.stub||i.failedLoad||(e[s]=(null!==(o=e[s])&&void 0!==o?o:0)+1);var l="loaded";i.failedLoad?l="failed":t.rowLoader.isRowLoading(s)?l="loading":(t.nodesToRefresh.has(i)||i.stub)&&(l="needsLoading"),r[s]||(r[s]=new Set),r[s].add(l)}));var n={loading:4,failed:3,needsLoading:2,loaded:1},o=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),i={};return Object.entries(r).forEach((function(r){var a,s=wR(r,2),l=s[0],u=s[1],c=xR([],wR(u)).sort((function(t,e){var r,o;return(null!==(r=n[t])&&void 0!==r?r:0)-(null!==(o=n[e])&&void 0!==o?o:0)})),p=c[0],d=Number(l)/t.rowLoader.getBlockSize(),h=o?o+"-"+d:String(d);i[h]={blockNumber:d,startRow:Number(l),endRow:Number(l)+t.rowLoader.getBlockSize(),pageStatus:p,loadedRowCount:null!==(a=e[l])&&void 0!==a?a:0}})),i},e.prototype.destroyRowAtIndex=function(t){var e=this.nodeMap.getBy("index",t);e&&(this.nodeMap.delete(e),this.nodeDisplayIndexMap.delete(e.node.rowIndex),e.node.hasChildren()&&this.nodesToRefresh.size>0?this.removedNodeCache.set(e.node.id,e.node):this.blockUtils.destroyRowNode(e.node),this.nodesToRefresh.delete(e.node))},e.prototype.getSsrmParams=function(){return this.store.getSsrmParams()},e.prototype.getPrefixedId=function(t){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+t:t.toString()},e.prototype.markBlockForVerify=function(t){var e=wR(this.rowLoader.getBlockBoundsForIndex(t),2),r=e[0],n=e[1],o=this.nodeMap.filter((function(t){return t.index>=r&&t.index<n}));o.forEach((function(t){var e=t.node;e.__needsRefreshWhenVisible=!0}))},e.prototype.doesNodeMatch=function(t,e){if(e.stub)return!1;if(null!=this.getRowIdFunc){var r=this.getRowId(t);return e.id===r}return e.data===t},e.prototype.purgeStubsOutsideOfViewport=function(){var t=this,e=this.api.getFirstDisplayedRow(),r=this.api.getLastDisplayedRow(),n=this.rowLoader.getBlockStartIndexForIndex(e),o=wR(this.rowLoader.getBlockBoundsForIndex(r),2);o[0];var i=o[1];this.nodeMap.forEach((function(e){t.rowLoader.isRowLoading(e.index)||e.node.failedLoad||e.node.stub&&(e.index<n||e.index>i)&&t.destroyRowAtIndex(e.index)}))},e.prototype.getBlocksDistanceFromRow=function(t,e){var r=this,n={};return t.forEach((function(t){var o=t.node,i=t.index,a=wR(r.rowLoader.getBlockBoundsForIndex(i),2),s=a[0],l=a[1];if(!(s in n)){var u,c=Math.abs(o.rowIndex-e),p=r.nodeMap.getBy("index",[l-1]);p&&(u=Math.abs(p.node.rowIndex-e));var d=null==u||c<u?c:u;n[s]=d}})),Object.entries(n)},e.prototype.purgeExcessRows=function(){var t,e=this;if(this.purgeStubsOutsideOfViewport(),null!=this.store.getDisplayIndexEnd()&&null!=this.storeParams.maxBlocksInCache){var r=this.api.getFirstDisplayedRow(),n=this.api.getLastDisplayedRow(),o=new Set,i=new Set;this.nodeMap.forEach((function(t){var a=t.index,s=t.node,l=e.rowLoader.getBlockStartIndexForIndex(a);o.add(l);var u=s.rowIndex>=r&&s.rowIndex<=n;u&&i.add(l)}));var a=Math.max(i.size,null!==(t=this.storeParams.maxBlocksInCache)&&void 0!==t?t:0),s=o.size,l=s-a;if(!(l<=0)){var u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;i.forEach((function(t){u>t&&(u=t),c<t&&(c=t)}));var p=this.nodeMap.filter((function(t){var r=t.node,n=t.index,o=e.rowLoader.getBlockStartIndexForIndex(n),i=o>=u&&o<=c;return!i&&!e.isNodeCached(r)}));if(0!==p.length){var d=r+(n-r)/2,h=this.getBlocksDistanceFromRow(p,d),f=this.rowLoader.getBlockSize();h.sort((function(t,e){return Math.sign(e[1]-t[1])}));for(var v=0;v<Math.min(l,h.length);v++)for(var y=Number(h[v][0]),g=y;g<y+f;g++){var m=this.nodeMap.getBy("index",g);m&&!this.isNodeCached(m.node)&&this.destroyRowAtIndex(g)}}}}},e.prototype.isNodeFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();if(!e)return!1;if(null!=e.rowPinned)return!1;var r=e.rowIndex===t.rowIndex;return r},e.prototype.isNodeCached=function(t){return t.isExpandable()&&t.expanded||this.isNodeFocused(t)},e.prototype.extractDuplicateIds=function(t){var e=this;if(null!=this.getRowIdFunc)return[];var r=new Set,n=new Set;return t.forEach((function(t){var o=e.getRowId(t);r.has(o)?n.add(o):r.add(o)})),xR([],wR(n))},e.prototype.onLoadSuccess=function(t,e,r){var n,o=this;if(this.live){var i=null!==(n=r.groupLevelInfo)&&void 0!==n?n:r.storeInfo;if(this.store.setStoreInfo(i),null!=this.getRowIdFunc){var a=this.extractDuplicateIds(r.rowData);if(a.length>0){var s=a.join(", ");return console.warn("AG Grid: Unable to display rows as duplicate row ids ("+s+") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids."),void this.onLoadFailed(t,e)}}r.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(r.pivotResultFields);var l=this.nodesToRefresh.size>0;r.rowData.forEach((function(e,r){var n,i=t+r,a=o.nodeMap.getBy("index",i);if(!(null===(n=null===a||void 0===a?void 0:a.node)||void 0===n?void 0:n.stub))return a&&o.doesNodeMatch(e,a.node)?(o.blockUtils.updateDataIntoRowNode(a.node,e),o.nodesToRefresh.delete(a.node),void(a.node.__needsRefreshWhenVisible=!1)):void o.createRowAtIndex(i,e);o.createRowAtIndex(i,e)}));var u=0===this.nodesToRefresh.size;if(l&&u&&this.fireRefreshFinishedEvent(),void 0!=r.rowCount&&-1!==r.rowCount)this.numberOfRows=r.rowCount,this.isLastRowKnown=!0;else if(e>r.rowData.length)this.numberOfRows=t+r.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){var c=t+r.rowData.length+1;c>this.numberOfRows&&(this.numberOfRows=c)}if(this.isLastRowKnown){var p=this.nodeMap.filter((function(t){return t.index>=o.numberOfRows}));p.forEach((function(t){return o.destroyRowAtIndex(t.index)}))}this.fireStoreUpdatedEvent()}},e.prototype.fireRefreshFinishedEvent=function(){var t=this,e=0===this.nodesToRefresh.size;e&&(this.removedNodeCache.forEach((function(e){t.blockUtils.destroyRowNode(e)})),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())},e.prototype.isLastRowIndexKnown=function(){return this.isLastRowKnown},e.prototype.onLoadFailed=function(t,e){var r;if(this.live){for(var n=this.nodesToRefresh.size>0,o=t;o<t+e&&o<this.getRowCount();o++){var i=(null!==(r=this.nodeMap.getBy("index",o))&&void 0!==r?r:{}).node;i&&this.nodesToRefresh.delete(i),i&&i.stub||(i&&!i.stub&&this.destroyRowAtIndex(o),i=this.createRowAtIndex(o)),i.__needsRefreshWhenVisible=!1,i.failedLoad=!0}var a=0===this.nodesToRefresh.size;n&&a&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}},e.prototype.markNodesForRefresh=function(){var t=this;this.nodeMap.forEach((function(e){e.node.stub&&!e.node.failedLoad||t.nodesToRefresh.add(e.node)})),this.rowLoader.queueLoadCheck(),this.isLastRowKnown&&0===this.numberOfRows&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())},e.prototype.isNodeInCache=function(t){return!!this.nodeMap.getBy("id",t)},e.prototype.fireStoreUpdatedEvent=function(){this.live&&this.store.fireStoreUpdatedEvent()},e.prototype.getRowId=function(t){if(null==this.getRowIdFunc)return null;var e=this.store.getRowDetails().level,r=this.store.getParentNode().getGroupKeys(),n=this.getRowIdFunc({data:t,parentKeys:r.length>0?r:void 0,level:e});return String(n)},e.prototype.updateRowNodes=function(t){var e=this;if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var r=[];return t.forEach((function(t){var n=e.getRowId(t),o=e.nodeMap.getBy("id",n);o&&(e.blockUtils.updateDataIntoRowNode(o.node,t),r.push(o.node))})),r},e.prototype.insertRowNodes=function(t,e){var r=this,n=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),o=null==e&&this.isLastRowKnown?n:e;if(null==o||n<o)return[];if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var i={};t.forEach((function(t){var e=r.getRowId(t);e&&r.isNodeInCache(e)||(i[e]=t)}));var a=Object.values(i),s=a.length;if(0===s)return[];var l=this.nodeMap.filter((function(t){return t.index>=o}));return l.forEach((function(t){return r.nodeMap.delete(t)})),l.forEach((function(t){r.nodeMap.set({node:t.node,index:t.index+s,id:t.id})})),this.numberOfRows+=s,a.map((function(t,e){return r.createRowAtIndex(o+e,t)}))},e.prototype.getOrderedNodeMap=function(){var t={};return this.nodeMap.forEach((function(e){return t[e.index]=e})),t},e.prototype.clearDisplayIndexes=function(){this.nodeDisplayIndexMap.clear()},e.prototype.removeRowNodes=function(t){if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var e=[],r=[],n=0,o=xR([],wR(t)),i=this.getOrderedNodeMap(),a=-1,s=function(t){a+=1;var s=i[t],u=o.findIndex((function(t){return t===s.id}));if(-1!==u)return o.splice(u,1),l.destroyRowAtIndex(Number(t)),e.push(s.node),n+=1,"continue";if(0===n)return"continue";var c=Number(t);a!==c&&r.push(s.node),l.nodeMap.delete(i[t]),l.nodeMap.set({id:s.id,node:s.node,index:c-n})},l=this;for(var u in i)s(u);return this.numberOfRows-=this.isLastRowIndexKnown()?t.length:n,o.length>0&&r.length>0&&(r.forEach((function(t){return t.__needsRefreshWhenVisible=!0})),this.rowLoader.queueLoadCheck()),e},SR([Object(a["u"])("gridApi")],e.prototype,"api",void 0),SR([Object(a["u"])("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),SR([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),SR([Object(a["u"])("ssrmNodeManager")],e.prototype,"nodeManager",void 0),SR([Object(a["u"])("rowModel")],e.prototype,"serverSideRowModel",void 0),SR([a["fb"]],e.prototype,"init",null),SR([a["hb"]],e.prototype,"destroyRowNodes",null),e}(a["z"]),ER=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),TR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},PR=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},DR=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},AR=function(t){function e(e,r,n){var o=t.call(this)||this;return o.idSequence=new a["bb"],o.ssrmParams=e,o.parentRowNode=n,o.storeParams=r,o.level=n.level+1,o.group=!!e.rowGroupCols&&o.level<e.rowGroupCols.length,o.leafGroup=!!e.rowGroupCols&&o.level===e.rowGroupCols.length-1,o.info={},o}return ER(e,t),e.prototype.init=function(){var t=1;0===this.level&&(t=this.storeUtils.getServerSideInitialRowCount()),this.cache=this.createManagedBean(new OR(this,t,this.storeParams));var e=this.gridOptionsService.is("treeData");if(!e&&this.group){var r=this.ssrmParams.rowGroupCols[this.level];this.groupField=r.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}},e.prototype.destroyRowNodes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)},e.prototype.applyRowData=function(t,e,r){this.cache.onLoadSuccess(e,r,t)},e.prototype.applyTransaction=function(t){var e,r,n,o=this,i=this.gridOptionsService.getCallback("getRowId");if(!i)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:a["qb"].Cancelled};var s=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(s){var l={transaction:t,parentNode:this.parentRowNode,storeInfo:this.info,groupLevelInfo:this.info},u=s(l);if(!u)return{status:a["qb"].Cancelled}}var c=void 0;(null===(e=t.update)||void 0===e?void 0:e.length)&&(c=this.cache.updateRowNodes(t.update));var p=void 0;if(null===(r=t.add)||void 0===r?void 0:r.length){var d=t.addIndex;null!=d&&d<0&&(d=void 0),p=this.cache.insertRowNodes(t.add,d)}var h=void 0;if(null===(n=t.remove)||void 0===n?void 0:n.length){var f=t.remove.map((function(t){return i({level:o.level,parentKeys:o.parentRowNode.getGroupKeys(),data:t})})),v=DR([],PR(new Set(f)));h=this.cache.removeRowNodes(v)}return this.updateSelectionAfterTransaction(c,h),{status:a["qb"].Applied,update:c,add:p,remove:h}},e.prototype.updateSelectionAfterTransaction=function(t,e){var r=[];null===t||void 0===t||t.forEach((function(t){t.isSelected()&&!t.selectable&&r.push(t)})),null===e||void 0===e||e.forEach((function(t){t.isSelected()&&r.push(t)})),r.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:r,source:"rowDataChanged"})},e.prototype.clearDisplayIndexes=function(){var t=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach((function(e){return t.blockUtils.clearDisplayIndex(e.node)})),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()},e.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},e.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},e.prototype.getRowCount=function(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()},e.prototype.setRowCount=function(t,e){this.cache.setRowCount(t,e)},e.prototype.isDisplayIndexInStore=function(t){return 0!==this.cache.getRowCount()&&(this.displayIndexStart<=t&&t<this.getDisplayIndexEnd())},e.prototype.setDisplayIndexes=function(t,e){this.displayIndexStart=t.peek(),this.topPx=e.value,this.cache.setDisplayIndexes(t,e),this.parentRowNode.sibling&&this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,t,e),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx},e.prototype.forEachStoreDeep=function(t,e){void 0===e&&(e=new a["bb"]),t(this,e.next()),this.cache.getNodes().forEach((function(r){var n=r.node.childStore;n&&n.forEachStoreDeep(t,e)}))},e.prototype.forEachNodeDeep=function(t,e){void 0===e&&(e=new a["bb"]),this.cache.getNodes().forEach((function(r){t(r.node,e.next());var n=r.node.childStore;n&&n.forEachNodeDeep(t,e)}))},e.prototype.forEachNodeDeepAfterFilterAndSort=function(t,e,r){void 0===e&&(e=new a["bb"]),void 0===r&&(r=!1);var n=this.cache.getOrderedNodeMap();for(var o in n){var i=n[o];t(i.node,e.next());var s=i.node.childStore;s&&s.forEachNodeDeepAfterFilterAndSort(t,e,r)}r&&this.parentRowNode.sibling&&t(this.parentRowNode.sibling,e.next())},e.prototype.retryLoads=function(){this.cache.getNodes().forEach((function(t){var e=t.node;e.failedLoad&&(e.failedLoad=!1,e.__needsRefreshWhenVisible=!0,e.stub=!0)})),this.forEachChildStoreShallow((function(t){return t.retryLoads()})),this.fireStoreUpdatedEvent()},e.prototype.getRowUsingDisplayIndex=function(t){return this.parentRowNode.sibling&&t===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(t)},e.prototype.getRowBounds=function(t){var e;if(!this.isDisplayIndexInStore(t))return null;var r=this.cache.getNodeCachedByDisplayIndex(t);if(r){var n=this.blockUtils.extractRowBounds(r,t);if(n)return n}var o=null!==(e=this.cache.getSurroundingNodesByDisplayIndex(t))&&void 0!==e?e:{},i=o.previousNode,a=o.nextNode;if(i){n=this.blockUtils.extractRowBounds(i.node,t);if(null!=n)return n}var s=this.gridOptionsService.getRowHeightAsNumber();if(a){var l=(a.node.rowIndex-t)*s;return{rowTop:a.node.rowTop-l,rowHeight:s}}var u=this.topPx+this.heightPx,c=(this.getDisplayIndexEnd()-t)*s;return{rowTop:u-c,rowHeight:s}},e.prototype.isPixelInRange=function(t){return t>=this.topPx&&t<this.topPx+this.heightPx},e.prototype.getRowIndexAtPixel=function(t){if(t<this.topPx)return this.getDisplayIndexStart();if(t>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;var e=Number.MAX_SAFE_INTEGER,r=null,n=Number.MAX_SAFE_INTEGER,o=null;if(this.cache.getNodes().forEach((function(i){var a=i.node,s=Math.abs(t-a.rowTop);a.rowTop<t?s<e&&(e=s,r=a):s<n&&(n=s,o=a)})),r=r,o=o,r){var i=this.blockUtils.getIndexAtPixel(r,t);if(null!=i)return i}var a=this.gridOptionsService.getRowHeightAsNumber();if(o){var s=o.rowTop,l=Math.ceil((s-t)/a);return o.rowIndex-l}var u=this.topPx+this.heightPx,c=Math.floor((u-t)/a);return this.getDisplayIndexEnd()-c},e.prototype.getChildStore=function(t){var e=this;return this.storeUtils.getChildStore(t,this,(function(t){var r=e.cache.getNodes().find((function(e){return e.node.key==t}));return r?r.node:null}))},e.prototype.forEachChildStoreShallow=function(t){this.cache.getNodes().forEach((function(e){var r=e.node;r.childStore&&t(r.childStore)}))},e.prototype.refreshAfterSort=function(t){var e=this.storeUtils.isServerSideSortAllLevels();if(e||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)){var r=this.cache.getRowCount();return this.destroyBean(this.cache),this.cache=this.createManagedBean(new OR(this,r,this.storeParams)),void this.fireStoreUpdatedEvent()}this.forEachChildStoreShallow((function(e){return e.refreshAfterSort(t)}))},e.prototype.refreshAfterFilter=function(t){var e=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups();e||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)?this.refreshStore(!0):this.forEachChildStoreShallow((function(e){return e.refreshAfterFilter(t)}))},e.prototype.refreshStore=function(t){if(t)return this.destroyBean(this.cache),this.cache=this.createManagedBean(new OR(this,1,this.storeParams)),void this.fireStoreUpdatedEvent();this.cache.markNodesForRefresh()},e.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.cache.getDisplayIndexFromStoreIndex(t);return null!==e&&void 0!==e?e:t},e.prototype.isLastRowIndexKnown=function(){return this.cache.isLastRowIndexKnown()},e.prototype.getRowNodesInRange=function(t,e){return a["Bb"].missing(t),this.cache.getNodes().filter((function(r){var n=r.node;return n.rowIndex>=t.rowIndex&&n.rowIndex<=e.rowIndex})).map((function(t){var e=t.node;return e}))},e.prototype.addStoreStates=function(t){t.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow((function(e){return e.addStoreStates(t)}))},e.prototype.getIdSequence=function(){return this.idSequence},e.prototype.getParentNode=function(){return this.parentRowNode},e.prototype.getRowDetails=function(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}},e.prototype.getSsrmParams=function(){return this.ssrmParams},e.prototype.setStoreInfo=function(t){t&&Object.assign(this.info,t)},e.prototype.fireStoreUpdatedEvent=function(){var t={type:a["R"].EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)},e.prototype.fireRefreshFinishedEvent=function(){var t={type:a["R"].EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(t)},e.prototype.getBlockStates=function(){return this.cache.getBlockStates()},e.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},TR([Object(a["u"])("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),TR([Object(a["u"])("ssrmStoreUtils")],e.prototype,"storeUtils",void 0),TR([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),TR([Object(a["u"])("selectionService")],e.prototype,"selectionService",void 0),TR([a["fb"]],e.prototype,"init",null),TR([a["hb"]],e.prototype,"destroyRowNodes",null),e}(a["z"]),MR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),RR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},_R=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},kR=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=a["Bb"].debounce(e.onRowHeightChanged.bind(e),100),e.pauseStoreUpdateListening=!1,e.started=!1,e.managingPivotResultColumns=!1,e}return MR(e,t),e.prototype.ensureRowHeightsValid=function(){return!1},e.prototype.start=function(){this.started=!0;var t=this.gridOptionsService.get("serverSideDatasource");t&&this.setDatasource(t)},e.prototype.destroyDatasource=function(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},e.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,a["R"].EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var t=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_VALUE_CHANGED,t),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_CHANGED,t),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedPropertyListener("treeData",t),this.verifyProps()},e.prototype.verifyProps=function(){if(this.gridOptionsService.exists("initialGroupOrderComparator")){var t="AG Grid: initialGroupOrderComparator cannot be used with Server Side Row Model. If using Full Store, then provide the rows to the grid in the desired sort order. If using Infinite Scroll, then sorting is done on the server side, nothing to do with the client.";a["Bb"].doOnce((function(){return console.warn(t)}),"SSRM.InitialGroupOrderComparator")}if(this.gridOptionsService.isRowSelection()&&!this.gridOptionsService.exists("getRowId")){var e="AG Grid: getRowId callback must be provided for Server Side Row Model selection to work correctly.";a["Bb"].doOnce((function(){return console.warn(e)}),"SSRM.SelectionNeedsRowNodeIdFunc")}},e.prototype.setDatasource=function(t){this.started&&(this.destroyDatasource(),this.datasource=t,this.resetRootStore())},e.prototype.applyRowData=function(t,e,r){var n=this.getRootStore();if(n){var o=n.getChildStore(r);o&&(o instanceof AR?o.applyRowData(t,e,t.rowData.length):o instanceof fR&&o.processServerResult(t))}},e.prototype.isLastRowIndexKnown=function(){var t=this.getRootStore();return!!t&&t.isLastRowIndexKnown()},e.prototype.onColumnEverything=function(){if(this.storeParams){var t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),r=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=function(t){var e={};t.oldCols.forEach((function(t){return e[t.id]=t}));var r=t.newCols.every((function(t){var r=e[t.id];return r&&delete e[t.id],r&&r.field===t.field&&r.aggFunc===t.aggFunc})),n=!t.allowRemovedColumns&&!!Object.values(e).length;return r&&!n},o=!a["Bb"].jsonEquals(this.storeParams.sortModel,this.sortListener.extractSortModel()),i=!n({oldCols:this.storeParams.rowGroupCols,newCols:t}),s=!n({oldCols:this.storeParams.pivotCols,newCols:r}),l=!!(null===t||void 0===t?void 0:t.length)&&!n({oldCols:this.storeParams.valueCols,newCols:e,allowRemovedColumns:!0}),u=o||i||s||l;if(u)this.resetRootStore();else{var c=this.createStoreParams();this.storeParams.rowGroupCols=c.rowGroupCols,this.storeParams.pivotCols=c.pivotCols,this.storeParams.valueCols=c.valueCols}}else this.resetRootStore()},e.prototype.destroyRootStore=function(){this.rootNode&&this.rootNode.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},e.prototype.refreshAfterSort=function(t,e){this.storeParams&&(this.storeParams.sortModel=t);var r=this.getRootStore();r&&(r.refreshAfterSort(e),this.onStoreUpdated())},e.prototype.generateSecondaryColumns=function(t){var e=this.pivotColDefService.createColDefsFromFields(t);this.managingPivotResultColumns=!0,this.columnModel.setSecondaryColumns(e,"rowModelUpdated")},e.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new a["lb"](this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.columnModel.setSecondaryColumns(null),this.managingPivotResultColumns=!1);var t={type:a["R"].EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(t),this.dispatchModelUpdated(!0)},e.prototype.columnsToValueObjects=function(t){var e=this;return t.map((function(t){return{id:t.getId(),aggFunc:t.getAggFunc(),displayName:e.columnModel.getDisplayNameForColumn(t,"model"),field:t.getColDef().field}}))},e.prototype.createStoreParams=function(){var t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),r=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=this.gridOptionsService.isGetRowHeightFunction(),o={valueCols:e,rowGroupCols:t,pivotCols:r,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.getFilterModel(),sortModel:this.sortListener.extractSortModel(),datasource:this.datasource,lastAccessedSequence:new a["bb"],dynamicRowHeight:n};return o},e.prototype.getParams=function(){return this.storeParams},e.prototype.dispatchModelUpdated=function(t){void 0===t&&(t=!1);var e={type:a["R"].EVENT_MODEL_UPDATED,animate:!t,keepRenderedRows:!t,newPage:!1,newData:!1};this.eventService.dispatchEvent(e)},e.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},e.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},e.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},e.prototype.updateRowIndexesAndBounds=function(){var t=this.getRootStore();t&&t.setDisplayIndexes(new a["bb"],{value:0})},e.prototype.retryLoads=function(){var t=this.getRootStore();t&&(t.retryLoads(),this.onStoreUpdated())},e.prototype.getRow=function(t){var e=this.getRootStore();if(e)return e.getRowUsingDisplayIndex(t)},e.prototype.expandAll=function(t){this.pauseStoreUpdateListening=!0,this.forEachNode((function(e){e.stub||e.hasChildren()&&e.setExpanded(t)})),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},e.prototype.refreshAfterFilter=function(t,e){this.storeParams&&(this.storeParams.filterModel=t);var r=this.getRootStore();r&&(r.refreshAfterFilter(e),this.onStoreUpdated())},e.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},e.prototype.getRowCount=function(){var t=this.getRootStore();return t?t.getDisplayIndexEnd():0},e.prototype.getTopLevelRowCount=function(){var t=this.getRootStore();return t?t.getRowCount():1},e.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.getRootStore();return e?e.getTopLevelRowDisplayedIndex(t):t},e.prototype.getRowBounds=function(t){var e=this.getRootStore();if(!e){var r=this.gridOptionsService.getRowHeightAsNumber();return{rowTop:0,rowHeight:r}}return e.getRowBounds(t)},e.prototype.getBlockStates=function(){var t=this.getRootStore();if(t){var e={};return t.forEachStoreDeep((function(t){if(t instanceof fR){var r=t.getBlockStateJson(),n=r.id,o=r.state;e[n]=o}else{if(!(t instanceof AR))throw new Error("AG Grid: Unsupported store type");Object.entries(t.getBlockStates()).forEach((function(t){var r=_R(t,2),n=r[0],o=r[1];e[n]=o}))}})),e}},e.prototype.getRowIndexAtPixel=function(t){var e=this.getRootStore();return t<=0||!e?0:e.getRowIndexAtPixel(t)},e.prototype.isEmpty=function(){return!1},e.prototype.isRowsToRender=function(){return null!=this.getRootStore()&&this.getRowCount()>0},e.prototype.getType=function(){return"serverSide"},e.prototype.forEachNode=function(t){var e=this.getRootStore();e&&e.forEachNodeDeep(t)},e.prototype.forEachNodeAfterFilterAndSort=function(t,e){void 0===e&&(e=!1);var r=this.getRootStore();r&&r.forEachNodeDeepAfterFilterAndSort(t,void 0,e)},e.prototype.executeOnStore=function(t,e){var r=this.getRootStore();if(r){var n=r.getChildStore(t);n&&e(n)}},e.prototype.refreshStore=function(t){void 0===t&&(t={});var e=t.route?t.route:[];this.executeOnStore(e,(function(e){return e.refreshStore(1==t.purge)}))},e.prototype.getStoreState=function(){var t=[],e=this.getRootStore();return e&&e.addStoreStates(t),t},e.prototype.getNodesInRangeForSelection=function(t,e){if(!a["Bb"].exists(t))return[];if(!e)return[t];var r=t.rowIndex,n=e.rowIndex;if(null===r||null===n)return[t];var o=[],i=_R([r,n].sort((function(t,e){return t-e})),2),s=i[0],l=i[1];return this.forEachNode((function(t){var e=t.rowIndex;null==e||t.stub||e>=s&&e<=l&&o.push(t)})),o.length!==l-s+1?[t]:o},e.prototype.getRowNode=function(t){var e;return this.forEachNode((function(r){r.id===t&&(e=r),r.detailNode&&r.detailNode.id===t&&(e=r.detailNode)})),e},e.prototype.isRowPresent=function(t){var e=this.getRowNode(t.id);return!!e},e.prototype.setRowCount=function(t,e){var r=this.getRootStore();if(r){if(r instanceof AR)return void r.setRowCount(t,e);console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}},RR([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),RR([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),RR([Object(a["u"])("rowRenderer")],e.prototype,"rowRenderer",void 0),RR([Object(a["u"])("ssrmSortService")],e.prototype,"sortListener",void 0),RR([Object(a["u"])("ssrmNodeManager")],e.prototype,"nodeManager",void 0),RR([Object(a["u"])("ssrmStoreFactory")],e.prototype,"storeFactory",void 0),RR([Object(a["u"])("beans")],e.prototype,"beans",void 0),RR([Object(a["cb"])("pivotColDefService")],e.prototype,"pivotColDefService",void 0),RR([a["hb"]],e.prototype,"destroyDatasource",null),RR([a["fb"]],e.prototype,"addEventListeners",null),RR([a["hb"]],e.prototype,"destroyRootStore",null),e=RR([Object(a["y"])("rowModel")],e),e}(a["z"]),FR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),IR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},LR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return FR(e,t),e.prototype.loadFromDatasource=function(t){var e=t.storeParams,r=t.parentBlock,n=t.parentNode,o=n.getGroupKeys();if(e.datasource){var i={startRow:t.startRow,endRow:t.endRow,rowGroupCols:e.rowGroupCols,valueCols:e.valueCols,pivotCols:e.pivotCols,pivotMode:e.pivotMode,groupKeys:o,filterModel:e.filterModel,sortModel:e.sortModel},a={successCallback:t.successCallback,success:t.success,failCallback:t.failCallback,fail:t.fail,request:i,parentNode:t.parentNode,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};window.setTimeout((function(){e.datasource&&r.isAlive()?e.datasource.getRows(a):t.failCallback()}),0)}},e.prototype.getChildStore=function(t,e,r){if(a["Bb"].missingOrEmpty(t))return e;var n=t[0],o=r(n);if(o){if(1===t.length&&!o.childStore){var i=this.serverSideRowModel.getParams();o.childStore=this.createBean(this.storeFactory.createStore(i,o))}var s=t.slice(1,t.length),l=o.childStore;return l?l.getChildStore(s):null}return null},e.prototype.isServerRefreshNeeded=function(t,e,r){if(r.valueColChanged||r.secondaryColChanged)return!0;var n=t.level+1,o=n<e.length,i=!o;if(i)return!0;var a=e[n].id,s=r.changedColumns.indexOf(a)>-1;if(s)return!0;var l=this.columnModel.getAllGridColumns(),u=l.filter((function(t){return t.getColDef().showRowGroup&&r.changedColumns.includes(t.getId())})).map((function(t){return t.getColDef().showRowGroup})).some((function(t){return!0===t||t===a}));return u},e.prototype.getServerSideInitialRowCount=function(){var t=this.gridOptionsService.getNum("serverSideInitialRowCount");return"number"===typeof t&&t>0?t:1},e.prototype.assertRowModelIsServerSide=function(t){return!!this.gridOptionsService.isRowModelType("serverSide")||(a["Bb"].doOnce((function(){return console.warn("AG Grid: The '"+t+"' property can only be used with the Server Side Row Model.")}),t),!1)},e.prototype.assertNotTreeData=function(t){return!this.gridOptionsService.is("treeData")||(a["Bb"].doOnce((function(){return console.warn("AG Grid: The '"+t+"' property cannot be used while using tree data.")}),t+"_TreeData"),!1)},e.prototype.isServerSideSortAllLevels=function(){return this.gridOptionsService.is("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")},e.prototype.isServerSideOnlyRefreshFilteredGroups=function(){return this.gridOptionsService.is("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")},e.prototype.isServerSideSortOnServer=function(){return this.gridOptionsService.is("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")},e.prototype.isServerSideFilterOnServer=function(){return this.gridOptionsService.is("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")},IR([Object(a["u"])("columnApi")],e.prototype,"columnApi",void 0),IR([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),IR([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),IR([Object(a["u"])("rowModel")],e.prototype,"serverSideRowModel",void 0),IR([Object(a["u"])("ssrmStoreFactory")],e.prototype,"storeFactory",void 0),e=IR([Object(a["y"])("ssrmStoreUtils")],e),e}(a["z"]),NR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),GR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},jR="ag-Grid-MissingKey",BR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return NR(e,t),e.prototype.postConstruct=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.usingMasterDetail=this.gridOptionsService.is("masterDetail")},e.prototype.createRowNode=function(t){var e=new a["lb"](this.beans),r=null!=t.rowHeight?t.rowHeight:this.rowHeight;return e.setRowHeight(r),e.group=t.group,e.leafGroup=t.leafGroup,e.level=t.level,e.uiLevel=t.level,e.parent=t.parent,e.stub=!0,e.__needsRefreshWhenVisible=!1,e.group&&(e.expanded=!1,e.field=t.field,e.rowGroupColumn=t.rowGroupColumn),e},e.prototype.destroyRowNodes=function(t){var e=this;t&&t.forEach((function(t){return e.destroyRowNode(t)}))},e.prototype.destroyRowNode=function(t,e){void 0===e&&(e=!1),t.childStore&&!e&&(this.destroyBean(t.childStore),t.childStore=null),t.sibling&&!t.footer&&this.destroyRowNode(t.sibling,!1),t.clearRowTopAndRowIndex(),null!=t.id&&this.nodeManager.removeNode(t)},e.prototype.setTreeGroupInfo=function(t){t.updateHasChildren();var e=this.gridOptionsService.get("getServerSideGroupKey");t.hasChildren()&&null!=e&&(t.key=e(t.data)),t.hasChildren()||null==t.childStore||(this.destroyBean(t.childStore),t.childStore=null,t.expanded=!1)},e.prototype.setRowGroupInfo=function(t){t.key=this.valueService.getValue(t.rowGroupColumn,t),null!==t.key&&void 0!==t.key||a["Bb"].doOnce((function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),t.rowGroupColumn&&console.warn("column = "+t.rowGroupColumn.getId()),console.warn("data is ",t.data)}),"ServerSideBlock-CannotHaveNullOrUndefinedForKey");var e=this.beans.gridOptionsService.getGroupIncludeFooter(),r=e({node:t});r&&(t.createFooter(),t.sibling&&(t.sibling.uiLevel=t.uiLevel+1))},e.prototype.setMasterDetailInfo=function(t){var e=this.gridOptionsService.get("isRowMaster");t.master=null==e||e(t.data)},e.prototype.updateDataIntoRowNode=function(t,e){if(t.updateData(e),this.gridOptionsService.is("treeData"))this.setTreeGroupInfo(t),this.setChildCountIntoRowNode(t);else if(t.group){if(this.setChildCountIntoRowNode(t),!t.footer){var r=this.beans.gridOptionsService.getGroupIncludeFooter(),n=r({node:t});n?t.sibling?t.sibling.updateData(e):t.createFooter():t.sibling&&t.destroyFooter()}}else this.usingMasterDetail},e.prototype.setDataIntoRowNode=function(t,e,r,n){var o;t.stub=!1;var i=this.gridOptionsService.is("treeData");a["Bb"].exists(e)?(t.setDataAndId(e,r),i?this.setTreeGroupInfo(t):t.group?this.setRowGroupInfo(t):this.usingMasterDetail&&this.setMasterDetailInfo(t)):(t.setDataAndId(void 0,void 0),t.key=null),(i||t.group)&&(this.setGroupDataIntoRowNode(t),this.setChildCountIntoRowNode(t)),a["Bb"].exists(e)&&(t.setRowHeight(this.gridOptionsService.getRowHeightForNode(t,!1,n).height),null===(o=t.sibling)||void 0===o||o.setRowHeight(this.gridOptionsService.getRowHeightForNode(t.sibling,!1,n).height))},e.prototype.setChildCountIntoRowNode=function(t){var e=this.gridOptionsService.get("getChildCount");e&&t.setAllChildrenCount(e(t.data))},e.prototype.setGroupDataIntoRowNode=function(t){var e=this,r=this.columnModel.getGroupDisplayColumns(),n=this.gridOptionsService.is("treeData");r.forEach((function(r){if(null==t.groupData&&(t.groupData={}),n)t.groupData[r.getColId()]=t.key;else if(r.isRowGroupDisplayed(t.rowGroupColumn.getId())){var o=e.valueService.getValue(t.rowGroupColumn,t);t.groupData[r.getColId()]=o}}))},e.prototype.clearDisplayIndex=function(t){t.clearRowTopAndRowIndex();var e=t.hasChildren()&&a["Bb"].exists(t.childStore);if(e){var r=t.childStore;r.clearDisplayIndexes()}var n=t.master&&t.detailNode;n&&t.detailNode.clearRowTopAndRowIndex()},e.prototype.setDisplayIndex=function(t,e,r){if(t.setRowIndex(e.next()),t.setRowTop(r.value),r.value+=t.rowHeight,!t.footer){var n=t.master;n&&(t.expanded&&t.detailNode?(t.detailNode.setRowIndex(e.next()),t.detailNode.setRowTop(r.value),r.value+=t.detailNode.rowHeight):t.detailNode&&t.detailNode.clearRowTopAndRowIndex());var o=t.hasChildren()&&a["Bb"].exists(t.childStore);if(o){var i=t.childStore;t.expanded?i.setDisplayIndexes(e,r):i.clearDisplayIndexes()}}},e.prototype.binarySearchForDisplayIndex=function(t,e){var r=0,n=e.length-1;if(a["Bb"].missing(n)||a["Bb"].missing(r))console.warn("AG Grid: error: topPointer = "+n+", bottomPointer = "+r);else while(1){var o=Math.floor((r+n)/2),i=e[o];if(i.rowIndex===t)return i;var s=i.master&&i.expanded,l=i.detailNode;if(s&&l&&l.rowIndex===t)return i.detailNode;var u=i.childStore;if(i.expanded&&u&&u.isDisplayIndexInStore(t))return u.getRowUsingDisplayIndex(t);if(i.rowIndex<t)r=o+1;else{if(!(i.rowIndex>t))return void console.warn("AG Grid: error: unable to locate rowIndex = "+t+" in cache");n=o-1}}},e.prototype.extractRowBounds=function(t,e){var r=function(t){return{rowHeight:t.rowHeight,rowTop:t.rowTop}};if(t.rowIndex===e)return r(t);if(t.hasChildren()&&t.expanded&&a["Bb"].exists(t.childStore)){var n=t.childStore;if(n.isDisplayIndexInStore(e))return n.getRowBounds(e)}else if(t.master&&t.expanded&&a["Bb"].exists(t.detailNode)&&t.detailNode.rowIndex===e)return r(t.detailNode)},e.prototype.getIndexAtPixel=function(t,e){if(t.isPixelInRange(e))return t.rowIndex;var r=t.master&&t.expanded,n=t.detailNode;if(r&&n&&n.isPixelInRange(e))return t.detailNode.rowIndex;if(t.hasChildren()&&t.expanded&&a["Bb"].exists(t.childStore)){var o=t.childStore;if(o.isPixelInRange(e))return o.getRowIndexAtPixel(e)}return null},e.prototype.createNodeIdPrefix=function(t){var e=[],r=t;while(r&&r.level>=0)""===r.key?e.push(jR):e.push(r.key),r=r.parent;if(e.length>0)return e.reverse().join("-")},e.prototype.checkOpenByDefault=function(t){if(t.isExpandable()){var e=this.gridOptionsService.getCallback("isServerSideGroupOpenByDefault");if(e){var r={data:t.data,rowNode:t},n=e(r);n&&window.setTimeout((function(){return t.setExpanded(!0)}),0)}}},GR([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),GR([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),GR([Object(a["u"])("ssrmNodeManager")],e.prototype,"nodeManager",void 0),GR([Object(a["u"])("beans")],e.prototype,"beans",void 0),GR([a["fb"]],e.prototype,"postConstruct",null),e=GR([Object(a["y"])("ssrmBlockUtils")],e),e}(a["z"]),VR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},HR=function(){function t(){this.rowNodes={}}return t.prototype.addRowNode=function(t){var e=t.id;this.rowNodes[e]&&(console.warn("AG Grid: Duplicate node id "+t.id+". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values."),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",t.data)),this.rowNodes[e]=t},t.prototype.removeNode=function(t){var e=t.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)},t.prototype.clear=function(){this.rowNodes={}},VR([a["hb"]],t.prototype,"clear",null),t=VR([Object(a["y"])("ssrmNodeManager")],t),t}(),zR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),UR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},WR=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.asyncTransactions=[],e}return zR(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")},e.prototype.applyTransactionAsync=function(t,e){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:t,callback:e})},e.prototype.scheduleExecuteAsync=function(){var t=this,e=this.gridOptionsService.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout((function(){t.executeAsyncTransactions()}),e)},e.prototype.executeAsyncTransactions=function(){var t=this;if(this.asyncTransactions){var e=[],r=[],n=[],o=!1;if(this.asyncTransactions.forEach((function(i){var s;t.serverSideRowModel.executeOnStore(i.transaction.route,(function(t){s=t.applyTransaction(i.transaction)})),void 0==s&&(s={status:a["qb"].StoreNotFound}),r.push(s);var l=s.status==a["qb"].StoreLoading;l?n.push(i):(i.callback&&e.push((function(){return i.callback(s)})),s.status===a["qb"].Applied&&(o=!0))})),e.length>0&&window.setTimeout((function(){e.forEach((function(t){return t()}))}),0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=n,o&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:a["R"].EVENT_STORE_UPDATED})),r.length>0){var i={type:a["R"].EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:r};this.eventService.dispatchEvent(i)}}},e.prototype.flushAsyncTransactions=function(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},e.prototype.applyTransaction=function(t){var e;if(this.serverSideRowModel.executeOnStore(t.route,(function(r){e=r.applyTransaction(t)})),e){if(this.valueCache.onDataChanged(),e.remove){var r=e.remove.map((function(t){return t.id}));this.selectionService.deleteSelectionStateFromParent(t.route||[],r)}return this.eventService.dispatchEvent({type:a["R"].EVENT_STORE_UPDATED}),e}return{status:a["qb"].StoreNotFound}},UR([Object(a["u"])("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),UR([Object(a["u"])("valueCache")],e.prototype,"valueCache",void 0),UR([Object(a["u"])("rowModel")],e.prototype,"serverSideRowModel",void 0),UR([Object(a["u"])("rowRenderer")],e.prototype,"rowRenderer",void 0),UR([Object(a["u"])("selectionService")],e.prototype,"selectionService",void 0),UR([a["fb"]],e.prototype,"postConstruct",null),e=UR([Object(a["y"])("ssrmTransactionManager")],e),e}(a["z"]),KR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),XR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},YR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return KR(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,a["R"].EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},e.prototype.onRowGroupOpened=function(t){var e=t.node;if(e.expanded){if(e.master)this.createDetailNode(e);else if(a["Bb"].missing(e.childStore)){var r=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(r,e))}}else this.gridOptionsService.is("purgeClosedRowNodes")&&a["Bb"].exists(e.childStore)&&(e.childStore=this.destroyBean(e.childStore));var n={type:a["R"].EVENT_STORE_UPDATED};this.eventService.dispatchEvent(n)},e.prototype.createDetailNode=function(t){if(a["Bb"].exists(t.detailNode))return t.detailNode;var e=new a["lb"](this.beans);e.detail=!0,e.selectable=!1,e.parent=t,a["Bb"].exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1;var r=200,n=this.gridOptionsService.getRowHeightForNode(e).height;return e.rowHeight=n||r,t.detailNode=e,e},XR([Object(a["u"])("rowModel")],e.prototype,"serverSideRowModel",void 0),XR([Object(a["u"])("ssrmStoreFactory")],e.prototype,"storeFactory",void 0),XR([Object(a["u"])("beans")],e.prototype,"beans",void 0),XR([a["fb"]],e.prototype,"postConstruct",null),e=XR([Object(a["y"])("ssrmExpandListener")],e),e}(a["z"]),qR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZR=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},JR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qR(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,a["R"].EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},e.prototype.extractSortModel=function(){var t=this.sortController.getSortModel();return this.gridOptionsService.is("treeData")||(this.replaceAutoGroupColumnWithActualRowGroupColumns(t),this.removeMultiColumnPrefixOnColumnIds(t)),t},e.prototype.removeMultiColumnPrefixOnColumnIds=function(t){if(this.gridOptionsService.isGroupMultiAutoColumn())for(var e=a["U"]+"-",r=0;r<t.length;++r)t[r].colId.indexOf(e)>-1&&(t[r].colId=t[r].colId.substr(e.length))},e.prototype.replaceAutoGroupColumnWithActualRowGroupColumns=function(t){var e=t.find((function(t){return t.colId==a["U"]}));if(e){var r=t.indexOf(e);a["Bb"].removeFromArray(t,e);var n=function(e){return 0==t.filter((function(t){return t.colId===e.getColId()})).length},o=function(t){return{colId:t.getId(),sort:e.sort}},i=this.columnModel.getRowGroupColumns().filter(n).map(o);a["Bb"].insertArrayIntoArray(t,i,r)}},e.prototype.onSortChanged=function(){var t=this.serverSideRowModel.getParams();if(t){var e=this.extractSortModel(),r=t.sortModel,n=this.findChangedColumnsInSort(e,r),o=this.listenerUtils.isSortingWithValueColumn(n),i=this.listenerUtils.isSortingWithSecondaryColumn(n),a={valueColChanged:o,secondaryColChanged:i,changedColumns:n};this.serverSideRowModel.refreshAfterSort(e,a)}},e.prototype.findChangedColumnsInSort=function(t,e){var r=[];[t,e].forEach((function(t){if(t){var e=t.map((function(t){return t.colId}));r=r.concat(e)}}));var n=function(t,e){var r=t?t.sort:null,n=e?e.sort:null;return r!==n},o=function(r,n){var o=r?e.indexOf(r):-1,i=n?t.indexOf(n):-1;return o!==i};return r.filter((function(r){var i=e.find((function(t){return t.colId===r})),a=t.find((function(t){return t.colId===r}));return n(i,a)||o(i,a)}))},ZR([Object(a["u"])("sortController")],e.prototype,"sortController",void 0),ZR([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),ZR([Object(a["u"])("rowModel")],e.prototype,"serverSideRowModel",void 0),ZR([Object(a["u"])("ssrmListenerUtils")],e.prototype,"listenerUtils",void 0),ZR([a["fb"]],e.prototype,"postConstruct",null),e=ZR([Object(a["y"])("ssrmSortService")],e),e}(a["z"]),QR=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$R=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},t_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return QR(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,a["R"].EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))},e.prototype.onFilterChanged=function(){var t=this.serverSideRowModel.getParams();if(t){var e=this.filterManager.getFilterModel(),r=t?t.filterModel:{},n=this.findChangedColumns(e,r),o=this.listenerUtils.isSortingWithValueColumn(n),i=this.listenerUtils.isSortingWithSecondaryColumn(n),a={valueColChanged:o,secondaryColChanged:i,changedColumns:n};this.serverSideRowModel.refreshAfterFilter(e,a)}},e.prototype.findChangedColumns=function(t,e){var r={};Object.keys(t).forEach((function(t){return r[t]=!0})),Object.keys(e).forEach((function(t){return r[t]=!0}));var n=[];return Object.keys(r).forEach((function(r){var o=JSON.stringify(t[r]),i=JSON.stringify(e[r]),a=o!=i;a&&n.push(r)})),n},$R([Object(a["u"])("rowModel")],e.prototype,"serverSideRowModel",void 0),$R([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),$R([Object(a["u"])("ssrmListenerUtils")],e.prototype,"listenerUtils",void 0),$R([a["fb"]],e.prototype,"postConstruct",null),e=$R([Object(a["y"])("ssrmFilterListener")],e),e}(a["z"]),e_=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},r_=function(){function t(){}return t.prototype.createStore=function(t,e){var r=this.getStoreParams(t,e),n=r.suppressInfiniteScroll?fR:AR;return new n(t,r,e)},t.prototype.getStoreParams=function(t,e){var r=this.getLevelSpecificParams(e),n=this.isInfiniteScroll(r),o=this.getBlockSize(n,r),i=this.getMaxBlocksInCache(n,t,r),a={suppressInfiniteScroll:!n,cacheBlockSize:o,maxBlocksInCache:i};return a},t.prototype.getMaxBlocksInCache=function(t,e,r){if(t){var n=r&&null!=r.maxBlocksInCache?r.maxBlocksInCache:this.gridOptionsService.getNum("maxBlocksInCache"),o=null!=n&&n>=0;if(o)if(e.dynamicRowHeight){var i="AG Grid: Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.";a["Bb"].doOnce((function(){return console.warn(i)}),"storeFactory.maxBlocksInCache.dynamicRowHeight")}else{if(!this.columnModel.isAutoRowHeightActive())return n;var s="AG Grid: Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.";a["Bb"].doOnce((function(){return console.warn(s)}),"storeFactory.maxBlocksInCache.autoRowHeightActive")}}},t.prototype.getBlockSize=function(t,e){if(t){var r=e&&null!=e.cacheBlockSize?e.cacheBlockSize:this.gridOptionsService.getNum("cacheBlockSize");return null!=r&&r>0?r:100}},t.prototype.getLevelSpecificParams=function(t){var e=this.gridOptionsService.getCallback("getServerSideGroupLevelParams");if(e){var r={level:t.level+1,parentRowNode:t.level>=0?t:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()},n=e(r);return null!=n.storeType&&(n.suppressInfiniteScroll="partial"!==n.storeType),n}},t.prototype.isInfiniteScroll=function(t){var e=t&&null!=t.suppressInfiniteScroll?t.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll();return!e},t.prototype.isSuppressServerSideInfiniteScroll=function(){return this.gridOptionsService.is("suppressServerSideInfiniteScroll")},e_([Object(a["u"])("gridOptionsService")],t.prototype,"gridOptionsService",void 0),e_([Object(a["u"])("columnModel")],t.prototype,"columnModel",void 0),t=e_([Object(a["y"])("ssrmStoreFactory")],t),t}(),n_=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},o_=function(){function t(){}return t.prototype.isSortingWithValueColumn=function(t){for(var e=this.columnModel.getValueColumns().map((function(t){return t.getColId()})),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},t.prototype.isSortingWithSecondaryColumn=function(t){if(!this.columnModel.getSecondaryColumns())return!1;for(var e=this.columnModel.getSecondaryColumns().map((function(t){return t.getColId()})),r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1},n_([Object(a["u"])("columnModel")],t.prototype,"columnModel",void 0),t=n_([Object(a["y"])("ssrmListenerUtils")],t),t}(),i_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),a_=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},s_=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},l_=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},u_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedState={selectAll:!1,toggledNodes:new Set},e.lastSelected=null,e.selectAllUsed=!1,e.selectedNodes={},e}return i_(e,t),e.prototype.init=function(){var t=this;this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",(function(e){t.rowSelection=e.currentValue}))},e.prototype.getSelectedState=function(){return{selectAll:this.selectedState.selectAll,toggledNodes:l_([],s_(this.selectedState.toggledNodes))}},e.prototype.setSelectedState=function(t){var e={selectAll:!1,toggledNodes:new Set};"object"===typeof t?"selectAll"in t&&"boolean"===typeof t.selectAll?(e.selectAll=t.selectAll,"toggledNodes"in t&&Array.isArray(t.toggledNodes)?(t.toggledNodes.forEach((function(t){"string"===typeof t?e.toggledNodes.add(t):console.warn("AG Grid: Provided ids must be of string type. Invalid id provided: "+t)})),this.selectedState=e):console.error("AG Grid: `toggledNodes` must be an array of string ids.")):console.error("AG Grid: Select all status should be of boolean type."):console.error("AG Grid: The provided selection state should be an object.")},e.prototype.deleteSelectionStateFromParent=function(t,e){var r=this;if(0===this.selectedState.toggledNodes.size)return!1;var n=!1;return e.forEach((function(t){r.selectedState.toggledNodes.delete(t)&&(n=!0)})),n},e.prototype.setNodesSelected=function(t){var e,r=this;if(0===t.nodes.length)return 0;var n=t.clearSelection&&t.newValue&&!t.rangeSelect;if("multiple"!==this.rowSelection||n){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");var o=t.nodes[0];return t.newValue?(this.selectedNodes=(e={},e[o.id]=o,e),this.selectedState={selectAll:!1,toggledNodes:new Set([o.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=o.id,1}var i=function(e){t.newValue?r.selectedNodes[e.id]=e:delete r.selectedNodes[e.id];var n=e.selectable,o=t.newValue===r.selectedState.selectAll;!o&&n?r.selectedState.toggledNodes.add(e.id):r.selectedState.toggledNodes.delete(e.id)};if(t.rangeSelect&&this.lastSelected){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");o=t.nodes[0];var a=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(o,null!==a&&void 0!==a?a:null).forEach(i),this.lastSelected=o.id,1}return t.nodes.forEach(i),this.lastSelected=t.nodes[t.nodes.length-1].id,1},e.prototype.processNewRow=function(t){this.selectedNodes[t.id]&&(this.selectedNodes[t.id]=t)},e.prototype.isNodeSelected=function(t){var e=this.selectedState.toggledNodes.has(t.id);return this.selectedState.selectAll?!e:e},e.prototype.getSelectedNodes=function(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)},e.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(t){return t.data}))},e.prototype.getSelectionCount=function(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size},e.prototype.clearOtherNodes=function(t,e){var r=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([t.id])},this.rowModel.forEachNode((function(r){r!==t&&r.selectThisNode(!1,void 0,e)}));var n={type:a["R"].EVENT_SELECTION_CHANGED,source:e};return this.eventService.dispatchEvent(n),r},e.prototype.isEmpty=function(){var t;return!this.selectedState.selectAll&&!(null===(t=this.selectedState.toggledNodes)||void 0===t?void 0:t.size)},e.prototype.selectAllRowNodes=function(t){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0},e.prototype.deselectAllRowNodes=function(t){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}},e.prototype.getSelectAllState=function(t,e){return this.selectedState.selectAll?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},a_([Object(a["u"])("rowModel")],e.prototype,"rowModel",void 0),a_([a["fb"]],e.prototype,"init",null),e}(a["z"]),c_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),p_=function(){return p_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},p_.apply(this,arguments)},d_=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},h_=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},f_=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},v_=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},y_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedState={selectAllChildren:!1,toggledNodes:new Map},e.lastSelected=null,e}return c_(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.eventService,a["R"].EVENT_MODEL_UPDATED,(function(){return t.removeRedundantState()})),this.addManagedListener(this.eventService,a["R"].EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.selectionService.reset()}))},e.prototype.getSelectedState=function(){var t=this,e=function(r,n,o){var i={nodeId:o};if(n<=t.columnModel.getRowGroupColumns().length&&(i.selectAllChildren=r.selectAllChildren),r.toggledNodes.size){var a=[];r.toggledNodes.forEach((function(t,r){var o=e(t,n+1,r);a.push(o)})),i.toggledNodes=a}return i};return e(this.selectedState,0)},e.prototype.setSelectedState=function(t){var e=function(t,r){var n,o;if("object"!==typeof t)throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in t&&"boolean"!==typeof t.selectAllChildren)throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in t){if(!Array.isArray(t.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");var i=t.toggledNodes.every((function(t){return"object"===typeof t&&"nodeId"in t&&"string"===typeof t.nodeId}));if(!i)throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}var a=null!==(n=t.selectAllChildren)&&void 0!==n?n:!r,s=null===(o=t.toggledNodes)||void 0===o?void 0:o.map((function(t){return[t.nodeId,e(t,a)]})),l=null===s||void 0===s?void 0:s.some((function(t){var e=f_(t,2);e[0];var r=e[1];return a===r.selectAllChildren&&0===r.toggledNodes.size}));if(l)throw new Error("\n                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.\n                    Please rebuild the selection state and reapply it.\n                ");return{selectAllChildren:a,toggledNodes:new Map(s)}};try{this.selectedState=e(t,!!t.selectAllChildren)}catch(r){console.error(r.message)}},e.prototype.deleteSelectionStateFromParent=function(t,e){var r=this.selectedState,n=v_([],f_(t));while(r&&n.length)r=r.toggledNodes.get(n.pop());if(!r)return!1;var o=!1;return e.forEach((function(t){(null===r||void 0===r?void 0:r.toggledNodes.delete(t))&&(o=!0)})),o&&this.removeRedundantState(),o},e.prototype.setNodesSelected=function(t){var e=this,r=t.nodes,n=h_(t,["nodes"]);if(0===r.length)return 0;if(t.rangeSelect){if(r.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");var o=r[0],i=this.rowModel.getNodesInRangeForSelection(o,this.lastSelected),a=i.map(this.getRouteToNode).sort((function(t,e){return e.length-t.length})),s=new Set;return a.forEach((function(t){s.has(t[t.length-1])||(t.forEach((function(t){return s.add(t)})),e.recursivelySelectNode(t,e.selectedState,p_({node:o},n)))})),this.removeRedundantState(),this.lastSelected=o,1}return t.nodes.forEach((function(t){var r=e.getRouteToNode(t);e.recursivelySelectNode(r,e.selectedState,p_(p_({},n),{node:t}))})),this.removeRedundantState(),this.lastSelected=t.nodes[t.nodes.length-1],1},e.prototype.isNodeSelected=function(t){var e=this.getRouteToNode(t);return this.isNodePathSelected(e,this.selectedState)},e.prototype.isNodePathSelected=function(t,e){var r=f_(t),n=r[0],o=r.slice(1);if(0===o.length){var i=e.toggledNodes.has(n.id);if(n.hasChildren()){var a=e.toggledNodes.get(n.id);if(a&&a.toggledNodes.size)return}return e.selectAllChildren?!i:i}if(e.toggledNodes.has(n.id)){var s=e.toggledNodes.get(n.id);if(s)return this.isNodePathSelected(o,s)}return!!e.selectAllChildren},e.prototype.getRouteToNode=function(t){var e=[],r=t;while(r.parent)e.push(r),r=r.parent;return e.reverse()},e.prototype.removeRedundantState=function(){var t=this;if(!this.filterManager.isAnyFilterPresent()){var e=function(r,n,o){void 0===r&&(r=t.selectedState),void 0===n&&(n=t.serverSideRowModel.getRootStore());var i=!0,a=!0;return r.toggledNodes.forEach((function(n,o){var s=t.rowModel.getRowNode(o);s||(i=!1);var l=null===s||void 0===s?void 0:s.childStore;l?(e(n,l,s)&&r.selectAllChildren===n.selectAllChildren&&r.toggledNodes.delete(o),n.toggledNodes.size>0&&(a=!1)):n.toggledNodes.size>0&&(a=!1)})),!(!n||!n.isLastRowIndexKnown()||n.getRowCount()!==r.toggledNodes.size)&&(!(!a||!i)&&(r.toggledNodes.clear(),r.selectAllChildren=!r.selectAllChildren,o&&(null===o||void 0===o?void 0:o.isSelected())!==r.selectAllChildren&&o.selectThisNode(r.selectAllChildren,void 0,"api"),!0))};e()}},e.prototype.recursivelySelectNode=function(t,e,r){var n=f_(t),o=n[0],i=n.slice(1);if(o){var a=!i.length;if(a){var s=o.selectable,l=e.selectAllChildren===r.newValue;if(l||!s)return void e.toggledNodes.delete(o.id);var u={selectAllChildren:r.newValue,toggledNodes:new Map};e.toggledNodes.set(o.id,u)}else{var c=e.toggledNodes.has(o.id),p=c?e.toggledNodes.get(o.id):{selectAllChildren:e.selectAllChildren,toggledNodes:new Map};c||e.toggledNodes.set(o.id,p),this.recursivelySelectNode(i,p,r),e.selectAllChildren===p.selectAllChildren&&0===p.toggledNodes.size&&e.toggledNodes.delete(o.id)}}},e.prototype.getSelectedNodes=function(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");var t=[];return this.rowModel.forEachNode((function(e){e.isSelected()&&t.push(e)})),t},e.prototype.processNewRow=function(t){},e.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(t){return t.data}))},e.prototype.getSelectionCount=function(){return-1},e.prototype.isEmpty=function(){var t;return!this.selectedState.selectAllChildren&&!(null===(t=this.selectedState.toggledNodes)||void 0===t?void 0:t.size)},e.prototype.selectAllRowNodes=function(t){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}},e.prototype.deselectAllRowNodes=function(t){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}},e.prototype.getSelectAllState=function(t,e){return this.selectedState.selectAllChildren?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},d_([Object(a["u"])("rowModel")],e.prototype,"rowModel",void 0),d_([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),d_([Object(a["u"])("filterManager")],e.prototype,"filterManager",void 0),d_([Object(a["u"])("rowModel")],e.prototype,"serverSideRowModel",void 0),d_([Object(a["u"])("selectionService")],e.prototype,"selectionService",void 0),d_([a["fb"]],e.prototype,"init",null),e}(a["z"]),g_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m_=function(){return m_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},m_.apply(this,arguments)},b_=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},C_=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},S_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g_(e,t),e.prototype.init=function(){var t=this,e=this.gridOptionsService.is("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",(function(e){t.destroyBean(t.selectionStrategy);var r=e.currentValue?y_:u_;t.selectionStrategy=t.createManagedBean(new r),t.shotgunResetNodeSelectionState();var n={type:a["R"].EVENT_SELECTION_CHANGED,source:"api"};t.eventService.dispatchEvent(n)})),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",(function(e){return t.rowSelection=e.currentValue}));var r=e?y_:u_;this.selectionStrategy=this.createManagedBean(new r)},e.prototype.getServerSideSelectionState=function(){return this.selectionStrategy.getSelectedState()},e.prototype.setServerSideSelectionState=function(t){this.selectionStrategy.setSelectedState(t),this.shotgunResetNodeSelectionState();var e={type:a["R"].EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(e)},e.prototype.setNodesSelected=function(t){var e=t.nodes,r=C_(t,["nodes"]);if(e.length>1&&"multiple"!==this.rowSelection)return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(e.length>1&&t.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;var n=m_({nodes:e.filter((function(t){return t.selectable}))},r);if(!n.nodes.length)return 0;var o=this.selectionStrategy.setNodesSelected(n);this.shotgunResetNodeSelectionState(n.source);var i={type:a["R"].EVENT_SELECTION_CHANGED,source:n.source};return this.eventService.dispatchEvent(i),o},e.prototype.deleteSelectionStateFromParent=function(t,e){var r=this.selectionStrategy.deleteSelectionStateFromParent(t,e);if(r){this.shotgunResetNodeSelectionState();var n={type:a["R"].EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(n)}},e.prototype.shotgunResetNodeSelectionState=function(t){var e=this;this.rowModel.forEachNode((function(r){if(!r.stub){var n=e.selectionStrategy.isNodeSelected(r);n!==r.isSelected()&&r.selectThisNode(n,void 0,t)}}))},e.prototype.getSelectedNodes=function(){return this.selectionStrategy.getSelectedNodes()},e.prototype.getSelectedRows=function(){return this.selectionStrategy.getSelectedRows()},e.prototype.getSelectionCount=function(){return this.selectionStrategy.getSelectionCount()},e.prototype.syncInRowNode=function(t,e){this.selectionStrategy.processNewRow(t);var r=this.selectionStrategy.isNodeSelected(t);if(0==r||t.selectable)t.setSelectedInitialValue(r);else{this.selectionStrategy.setNodesSelected({nodes:[t],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState();var n={type:a["R"].EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(n)}},e.prototype.reset=function(){this.selectionStrategy.deselectAllRowNodes({source:"api"})},e.prototype.isEmpty=function(){return this.selectionStrategy.isEmpty()},e.prototype.selectAllRowNodes=function(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(t),this.rowModel.forEachNode((function(e){e.stub||e.selectThisNode(!0,void 0,t.source)}));var e={type:a["R"].EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)},e.prototype.deselectAllRowNodes=function(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(t),this.rowModel.forEachNode((function(e){e.stub||e.selectThisNode(!1,void 0,t.source)}));var e={type:a["R"].EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)},e.prototype.getSelectAllState=function(t,e){return this.selectionStrategy.getSelectAllState(t,e)},e.prototype.updateGroupsFromChildrenSelections=function(t,e){return!1},e.prototype.getBestCostNodeSelection=function(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")},e.prototype.filterFromSelection=function(){},b_([Object(a["u"])("rowModel")],e.prototype,"rowModel",void 0),b_([a["fb"]],e.prototype,"init",null),e=b_([Object(a["y"])("selectionService")],e),e}(a["z"]),w_="30.2.1",x_={version:w_,moduleName:a["Z"].ServerSideRowModelModule,rowModel:"serverSide",beans:[kR,YR,JR,LR,BR,HR,WR,t_,r_,o_,S_],dependantModules:[b]},O_=function(){function t(t,e,r,n,o,i,a,s,l,u){this.rowModel=t,this.filterParams=e,this.createKey=r,this.caseFormat=n,this.columnModel=o,this.valueService=i,this.treeDataOrGrouping=a,this.treeData=s,this.getDataPath=l,this.groupAllowUnbalanced=u}return t.prototype.extractUniqueValues=function(t,e){var r=this,n=new Map,o=this.extractExistingFormattedKeys(e),i=new Set,s=this.treeData&&!!this.getDataPath,l=this.columnModel.getRowGroupColumns(),u=function(t,s){var l=r.caseFormat(t);if(!i.has(l)){i.add(l);var u=t,c=a["Bb"].makeNull(s),p=null===o||void 0===o?void 0:o.get(l);null!=p&&(u=p,c=e.get(p)),n.set(u,c)}};return this.rowModel.forEachLeafNode((function(e){if(e.data&&t(e))if(r.treeDataOrGrouping)r.addValueForTreeDataOrGrouping(e,s,l,u);else{var n=r.getValue(e);r.filterParams.convertValuesToStrings?r.addValueForConvertValuesToString(e,n,u):null!=n&&Array.isArray(n)?(n.forEach((function(t){u(r.createKey(t,e),t)})),0===n.length&&u(null,null)):u(r.createKey(n,e),n)}})),n},t.prototype.addValueForConvertValuesToString=function(t,e,r){var n=this.createKey(e,t);null!=n&&Array.isArray(n)?(n.forEach((function(t){var e=a["Bb"].toStringOrNull(a["Bb"].makeNull(t));r(e,e)})),0===n.length&&r(null,null)):r(n,n)},t.prototype.addValueForTreeDataOrGrouping=function(t,e,r,n){var o,i,s=this;if(e){if(null===(o=t.childrenAfterGroup)||void 0===o?void 0:o.length)return;i=this.getDataPath(t.data)}else i=r.map((function(e){return s.valueService.getKeyForNode(e,t)})),i.push(this.getValue(t));i&&(i=i.map((function(t){return a["Bb"].toStringOrNull(a["Bb"].makeNull(t))}))),!e&&this.groupAllowUnbalanced&&(null===i||void 0===i?void 0:i.some((function(t){return null==t})))&&(i=i.filter((function(t){return null!=t}))),n(this.createKey(i),i)},t.prototype.getValue=function(t){var e=this.filterParams,r=e.api,n=e.colDef,o=e.column,i=e.columnApi,a=e.context;return this.filterParams.valueGetter({api:r,colDef:n,column:o,columnApi:i,context:a,data:t.data,getValue:function(e){return t.data[e]},node:t})},t.prototype.extractExistingFormattedKeys=function(t){var e=this;if(!t)return null;var r=new Map;return t.forEach((function(t,n){r.set(e.caseFormat(n),n)})),r},t}(),E_=function(){function t(){}return t.SELECT_ALL="__AG_SELECT_ALL__",t.ADD_SELECTION_TO_FILTER="__AG_ADD_SELECTION_TO_FILTER__",t}(),T_=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P_=function(){function t(t,e,r,n){this.valueFormatterService=t,this.valueFormatter=e,this.formatter=r,this.column=n,this.displayedKeys=[]}return t.prototype.updateDisplayedValuesToAllAvailable=function(t,e,r){this.displayedKeys=Array.from(r)},t.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,r,n,o){var i,a;this.displayedKeys=[];try{for(var s=T_(r),l=s.next();!l.done;l=s.next()){var u=l.value;if(null==u)o&&this.displayedKeys.push(u);else{var c=t(u),p=this.valueFormatterService.formatValue(this.column,null,c,this.valueFormatter,!1),d=this.formatter(p);n(d)&&this.displayedKeys.push(u)}}}catch(h){i={error:h}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},t.prototype.getDisplayedValueCount=function(){return this.displayedKeys.length},t.prototype.getDisplayedItem=function(t){return this.displayedKeys[t]},t.prototype.getSelectAllItem=function(){return E_.SELECT_ALL},t.prototype.getAddSelectionToFilterItem=function(){return E_.ADD_SELECTION_TO_FILTER},t.prototype.getDisplayedKeys=function(){return this.displayedKeys},t.prototype.forEachDisplayedKey=function(t){this.displayedKeys.forEach(t)},t.prototype.someDisplayedKey=function(t){return this.displayedKeys.some(t)},t.prototype.hasGroups=function(){return!1},t.prototype.refresh=function(){},t}(),D_=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},A_=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},M_=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R_=function(){function t(t,e,r,n){this.formatter=t,this.treeListPathGetter=e,this.treeListFormatter=r,this.treeDataOrGrouping=n,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:E_.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:E_.SELECT_ALL,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:E_.ADD_SELECTION_TO_FILTER,expanded:!0,key:E_.ADD_SELECTION_TO_FILTER,parentTreeKeys:[]}}return t.prototype.updateDisplayedValuesToAllAvailable=function(t,e,r,n){"reload"===n?this.generateItemTree(t,e,r):"otherFilter"===n?(this.updateAvailable(r),this.updateExpandAll()):"miniFilter"===n&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()},t.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,r,n,o,i){"reload"===i?this.generateItemTree(t,e,r):"otherFilter"===i&&this.updateAvailable(r),this.updateFilter(n,o),this.updateExpandAll(),this.flattenItems()},t.prototype.generateItemTree=function(t,e,r){var n,o,i;this.allDisplayedItemsTree=[],this.groupsExist=!1;var a=this.getTreeListPathGetter(t,r),s=function(e){var n=t(e),o=null!==(i=a(n))&&void 0!==i?i:[null];o.length>1&&(l.groupsExist=!0);var s,u=r.has(e),c=l.allDisplayedItemsTree,p=[];o.forEach((function(t,r){c||(c=[],s.children=c),s=c.find((function(e){var r;return(null===(r=e.treeKey)||void 0===r?void 0:r.toUpperCase())===(null===t||void 0===t?void 0:t.toUpperCase())})),s||(s={treeKey:t,depth:r,filterPasses:!0,expanded:!1,available:u,parentTreeKeys:p},r===o.length-1&&(s.key=e),c.push(s)),c=s.children,p=A_(A_([],D_(p)),[t])}))},l=this;try{for(var u=M_(e),c=u.next();!c.done;c=u.next()){var p=c.value;s(p)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}this.updateAvailable(r),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1},t.prototype.getTreeListPathGetter=function(e,r){var n,o;if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return function(t){return t};var i=!1;try{for(var s=M_(r),l=s.next();!l.done;l=s.next()){var u=l.value,c=e(u);if(c instanceof Date){i=!0;break}if(null!=c)break}}catch(p){n={error:p}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i?t.DATE_TREE_LIST_PATH_GETTER:(a["Bb"].doOnce((function(){return console.warn("AG Grid: property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.")}),"getTreeListPathGetter"),function(t){return[String(t)]})},t.prototype.flattenItems=function(){var t=this;this.activeDisplayedItemsFlat=[];var e=function(r){r.forEach((function(r){r.filterPasses&&r.available&&(t.activeDisplayedItemsFlat.push(r),r.children&&r.expanded&&e(r.children))}))};e(this.allDisplayedItemsTree)},t.prototype.resetFilter=function(){var t=function(e){e.children&&e.children.forEach((function(e){t(e)})),e.filterPasses=!0};this.allDisplayedItemsTree.forEach((function(e){return t(e)}))},t.prototype.updateFilter=function(t,e){var r=this,n=function(n){return!!n.available&&(null==n.treeKey?e:t(r.formatter(r.treeListFormatter?r.treeListFormatter(n.treeKey,n.depth,n.parentTreeKeys):n.treeKey)))};this.allDisplayedItemsTree.forEach((function(t){return r.recursiveItemCheck(t,!1,n,"filterPasses")}))},t.prototype.getDisplayedValueCount=function(){return this.activeDisplayedItemsFlat.length},t.prototype.getDisplayedItem=function(t){return this.activeDisplayedItemsFlat[t]},t.prototype.getSelectAllItem=function(){return this.selectAllItem},t.prototype.getAddSelectionToFilterItem=function(){return this.addSelectionToFilterItem},t.prototype.getDisplayedKeys=function(){var t=[];return this.forEachDisplayedKey((function(e){return t.push(e)})),t},t.prototype.forEachDisplayedKey=function(t){var e=function(r,n){r.children?r.expanded&&n||r.children.forEach((function(t){t.filterPasses&&e(t,!1)})):t(r.key)};this.activeDisplayedItemsFlat.forEach((function(t){return e(t,!0)}))},t.prototype.someDisplayedKey=function(t){var e=function(r,n){return r.children?(!r.expanded||!n)&&r.children.some((function(t){return!!t.filterPasses&&e(t,!1)})):t(r.key)};return this.activeDisplayedItemsFlat.some((function(t){return e(t,!0)}))},t.prototype.hasGroups=function(){return this.groupsExist},t.prototype.refresh=function(){this.updateExpandAll(),this.flattenItems()},t.prototype.updateExpandAll=function(){var t=function(e,r,n){var o,i;try{for(var a=M_(e),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.filterPasses&&l.available&&l.children){if(r=r||!!l.expanded,n=n||!l.expanded,r&&n)return;var u=t(l.children,r,n);if(void 0===u)return;u?r=!0:n=!0}}}catch(c){o={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return r&&n?void 0:r},e=this.getSelectAllItem();e.expanded=t(e.children,!1,!1)},t.prototype.recursiveItemCheck=function(t,e,r,n){var o=this,i=!1;t.children&&t.children.forEach((function(a){var s=o.recursiveItemCheck(a,e||r(t),r,n);i=i||s}));var a=e||i||r(t);return t[n]=a,a},t.prototype.updateAvailable=function(t){var e=this,r=function(e){return t.has(e.key)};this.allDisplayedItemsTree.forEach((function(t){return e.recursiveItemCheck(t,!1,r,"available")}))},t.DATE_TREE_LIST_PATH_GETTER=function(t){return t?[String(t.getFullYear()),String(t.getMonth()+1),String(t.getDate())]:null},t}(),__=function(){function t(t){var e=t.caseFormat;this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=e}return t.prototype.allFilteringKeys=function(){return this.filteringKeys},t.prototype.allFilteringKeysCaseFormatted=function(){return this.filteringKeysCaseFormatted},t.prototype.noAppliedFilteringKeys=function(){return this.hasNoAppliedFilteringKeys},t.prototype.setFilteringKeys=function(t){var e=this;this.filteringKeys=new Set(t),this.hasNoAppliedFilteringKeys=!this.filteringKeys||0===this.filteringKeys.size,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach((function(t){return e.filteringKeysCaseFormatted.add(e.caseFormat(t))}))},t.prototype.addFilteringKey=function(t){null==this.filteringKeys&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(t),this.filteringKeysCaseFormatted.add(this.caseFormat(t)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)},t.prototype.hasCaseFormattedFilteringKey=function(t){return this.filteringKeysCaseFormatted.has(this.caseFormat(t))},t.prototype.hasFilteringKey=function(t){return this.filteringKeys.has(t)},t.prototype.reset=function(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1},t}(),k_=function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{while((void 0===e||e-- >0)&&!(n=i.next()).done)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a},F_=function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};(function(t){t[t["PROVIDED_LIST"]=0]="PROVIDED_LIST",t[t["PROVIDED_CALLBACK"]=1]="PROVIDED_CALLBACK",t[t["TAKEN_FROM_GRID_VALUES"]=2]="TAKEN_FROM_GRID_VALUES"})(gM||(gM={}));var I_,L_=function(){function t(t){var e,r=this;this.localEventService=new a["Q"],this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;var n=t.usingComplexObjects,o=t.columnModel,i=t.valueService,s=t.treeDataTreeList,l=t.groupingTreeList,u=t.filterParams,c=t.gridOptionsService,p=t.valueFormatterService,d=t.valueFormatter,h=u.column,f=u.colDef,v=u.textFormatter,y=u.doesRowPassOtherFilter,g=u.suppressSorting,m=u.comparator,b=u.rowModel,C=u.values,S=u.caseSensitive,w=u.convertValuesToStrings,x=u.treeList,O=u.treeListPathGetter,E=u.treeListFormatter;this.filterParams=u,this.setIsLoading=t.setIsLoading,this.translate=t.translate,this.caseFormat=t.caseFormat,this.createKey=t.createKey,this.usingComplexObjects=!!t.usingComplexObjects,this.formatter=v||a["tb"].DEFAULT_FORMATTER,this.doesRowPassOtherFilters=y,this.suppressSorting=g||!1,this.convertValuesToStrings=!!w,this.filteringKeys=new __({caseFormat:this.caseFormat});var T=null!==m&&void 0!==m?m:f.comparator,P=!!s||!!l;this.compareByValue=!!(n&&T||P||x&&!O),this.entryComparator=P&&!T?this.createTreeDataOrGroupingComparator():!x||O||T?function(t,e){var r=k_(t,2);r[0];var n=r[1],o=k_(e,2);o[0];var i=o[1];return T(n,i)}:function(t,e){var r=k_(t,2);r[0];var n=r[1],o=k_(e,2);o[0];var i=o[1];return a["Bb"].defaultComparator(n,i)},this.keyComparator=null!==(e=T)&&void 0!==e?e:a["Bb"].defaultComparator,this.caseSensitive=!!S;var D=c.get("getDataPath"),A=c.is("groupAllowUnbalanced");"clientSide"===b.getType()&&(this.clientSideValuesExtractor=new O_(b,this.filterParams,this.createKey,this.caseFormat,o,i,P,!!s,D,A)),null==C?this.valuesType=gM.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(C)?gM.PROVIDED_LIST:gM.PROVIDED_CALLBACK,this.providedValues=C),this.displayValueModel=x?new R_(this.formatter,O,E,s||l):new P_(p,d,this.formatter,h),this.updateAllValues().then((function(t){return r.resetSelectionState(t||[])}))}return t.prototype.addEventListener=function(t,e,r){this.localEventService.addEventListener(t,e,r)},t.prototype.removeEventListener=function(t,e,r){this.localEventService.removeEventListener(t,e,r)},t.prototype.refreshValues=function(){var t=this.getModel();return this.updateAllValues(),this.setModel(t)},t.prototype.overrideValues=function(t){var e=this;return new a["m"]((function(r){e.allValuesPromise.then((function(){e.valuesType=gM.PROVIDED_LIST,e.providedValues=t,e.refreshValues().then((function(){return r()}))}))}))},t.prototype.refreshAfterAnyFilterChanged=function(){var t=this;return this.showAvailableOnly()?this.allValuesPromise.then((function(e){return t.updateAvailableKeys(null!==e&&void 0!==e?e:[],"otherFilter"),!0})):a["m"].resolve(!1)},t.prototype.isInitialised=function(){return this.initialised},t.prototype.updateAllValues=function(){var t=this;return this.allValuesPromise=new a["m"]((function(e){switch(t.valuesType){case gM.TAKEN_FROM_GRID_VALUES:case gM.PROVIDED_LIST:e(t.processAllKeys(t.valuesType===gM.TAKEN_FROM_GRID_VALUES,t.providedValues));break;case gM.PROVIDED_CALLBACK:t.setIsLoading(!0);var r=t.providedValues,n=t.filterParams,o=n.columnApi,i=n.api,a=n.context,s=n.column,l=n.colDef,u={success:function(r){t.setIsLoading(!1),e(t.processAllKeys(!1,r))},colDef:l,column:s,columnApi:o,api:i,context:a};window.setTimeout((function(){return r(u)}),0);break;default:throw new Error("Unrecognised valuesType")}})),this.allValuesPromise.then((function(e){return t.updateAvailableKeys(e||[],"reload")})).then((function(){return t.initialised=!0})),this.allValuesPromise},t.prototype.processAllKeys=function(t,e){var r=t?this.getValuesFromRows(!1):this.uniqueValues(this.validateProvidedValues(e)),n=this.sortKeys(r);return this.allValues=null!==r&&void 0!==r?r:new Map,n},t.prototype.validateProvidedValues=function(t){if(this.usingComplexObjects&&(null===t||void 0===t?void 0:t.length)){var e=t[0];if(e&&"object"!==typeof e&&"function"!==typeof e){var r=this.createKey(e);null==r?a["Bb"].doOnce((function(){return console.warn("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")}),"setFilterComplexObjectsProvidedNull"):a["Bb"].doOnce((function(){return console.warn("AG Grid: Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?")}),"setFilterComplexObjectsProvidedPrimitive")}}return t},t.prototype.setValuesType=function(t){this.valuesType=t},t.prototype.getValuesType=function(){return this.valuesType},t.prototype.isKeyAvailable=function(t){return this.availableKeys.has(t)},t.prototype.showAvailableOnly=function(){return this.valuesType===gM.TAKEN_FROM_GRID_VALUES},t.prototype.updateAvailableKeys=function(e,r){var n=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):e;this.availableKeys=new Set(n),this.localEventService.dispatchEvent({type:t.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(r,e)},t.prototype.sortKeys=function(t){var e,r=null!==t&&void 0!==t?t:new Map;return this.suppressSorting?Array.from(r.keys()):(e=this.compareByValue?Array.from(r.entries()).sort(this.entryComparator).map((function(t){var e=k_(t,1),r=e[0];return r})):Array.from(r.keys()).sort(this.keyComparator),this.filterParams.excelMode&&r.has(null)&&(e=e.filter((function(t){return null!=t})),e.push(null)),e)},t.prototype.getValuesFromRows=function(t){var e=this;if(void 0===t&&(t=!1),!this.clientSideValuesExtractor)return console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values"),null;var r=function(r){return!t||e.doesRowPassOtherFilters(r)};return this.clientSideValuesExtractor.extractUniqueValues(r,t&&!this.caseSensitive?this.allValues:void 0)},t.prototype.setMiniFilter=function(t){return t=a["Bb"].makeNull(t),this.miniFilterText!==t&&(null===t&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=t,this.updateDisplayedValues("miniFilter"),!0)},t.prototype.getMiniFilter=function(){return this.miniFilterText},t.prototype.updateDisplayedValues=function(t,e){var r=this;if("expansion"!==t)if(null!=this.miniFilterText){var n=this.caseFormat(this.formatter(this.miniFilterText)||""),o=function(t){return null!=t&&r.caseFormat(t).indexOf(n)>=0},i=!!this.filterParams.excelMode&&o(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter((function(t){return r.getValue(t)}),e,this.availableKeys,o,i,t)}else this.displayValueModel.updateDisplayedValuesToAllAvailable((function(t){return r.getValue(t)}),e,this.availableKeys,t);else this.displayValueModel.refresh()},t.prototype.getDisplayedValueCount=function(){return this.displayValueModel.getDisplayedValueCount()},t.prototype.getDisplayedItem=function(t){return this.displayValueModel.getDisplayedItem(t)},t.prototype.getSelectAllItem=function(){return this.displayValueModel.getSelectAllItem()},t.prototype.getAddSelectionToFilterItem=function(){return this.displayValueModel.getAddSelectionToFilterItem()},t.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size},t.prototype.getKeys=function(){return Array.from(this.allValues.keys())},t.prototype.getValues=function(){return Array.from(this.allValues.values())},t.prototype.getValue=function(t){return this.allValues.get(t)},t.prototype.setAddCurrentSelectionToFilter=function(t){this.addCurrentSelectionToFilter=t},t.prototype.isInWindowsExcelMode=function(){return"windows"===this.filterParams.excelMode},t.prototype.isAddCurrentSelectionToFilterChecked=function(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter},t.prototype.showAddCurrentSelectionToFilter=function(){return this.isInWindowsExcelMode()&&a["Bb"].exists(this.miniFilterText)&&this.miniFilterText.length>0},t.prototype.selectAllMatchingMiniFilter=function(t){var e=this;void 0===t&&(t=!1),null==this.miniFilterText?this.selectedKeys=new Set(this.allValues.keys()):(t&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey((function(t){return e.selectedKeys.add(t)})))},t.prototype.deselectAllMatchingMiniFilter=function(){var t=this;null==this.miniFilterText?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey((function(e){return t.selectedKeys.delete(e)}))},t.prototype.selectKey=function(t){this.selectedKeys.add(t)},t.prototype.deselectKey=function(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(t)},t.prototype.isKeySelected=function(t){return this.selectedKeys.has(t)},t.prototype.isEverythingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey((function(e){return!t.isKeySelected(e)}))},t.prototype.isNothingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey((function(e){return t.isKeySelected(e)}))},t.prototype.getModel=function(){if(!this.hasSelections())return null;var t=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(t&&t.size>0){if(this.selectedKeys){var e=new Set(F_(F_([],k_(Array.from(t))),k_(Array.from(this.selectedKeys).filter((function(e){return!t.has(e)})))));return Array.from(e)}return Array.from(t)}return Array.from(this.selectedKeys)},t.prototype.setModel=function(t){var e=this;return this.allValuesPromise.then((function(r){if(null==t)e.resetSelectionState(null!==r&&void 0!==r?r:[]);else{e.selectedKeys.clear();var n=new Map;e.allValues.forEach((function(t,r){n.set(e.caseFormat(r),r)})),t.forEach((function(t){var r=e.caseFormat(a["Bb"].makeNull(t)),o=n.get(r);void 0!==o&&e.selectKey(o)}))}}))},t.prototype.uniqueValues=function(t){var e=this,r=new Map,n=new Set;return(null!==t&&void 0!==t?t:[]).forEach((function(t){var o=a["Bb"].makeNull(t),i=e.convertAndGetKey(o),s=e.caseFormat(i);n.has(s)||(n.add(s),r.set(i,o))})),r},t.prototype.convertAndGetKey=function(t){return this.convertValuesToStrings?t:this.createKey(t)},t.prototype.resetSelectionState=function(t){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(t)},t.prototype.hasGroups=function(){return this.displayValueModel.hasGroups()},t.prototype.createTreeDataOrGroupingComparator=function(){return function(t,e){var r=k_(t,2);r[0];var n=r[1],o=k_(e,2);o[0];var i=o[1];if(null==n)return null==i?0:-1;if(null==i)return 1;for(var s=0;s<n.length;s++){if(s>=i.length)return 1;var l=a["Bb"].defaultComparator(n[s],i[s]);if(0!==l)return l}return 0}},t.prototype.setAppliedModelKeys=function(t){this.filteringKeys.setFilteringKeys(t)},t.prototype.addToAppliedModelKeys=function(t){this.filteringKeys.addFilteringKey(t)},t.prototype.getAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeys()},t.prototype.getCaseFormattedAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeysCaseFormatted()},t.prototype.hasAppliedModelKey=function(t){return this.filteringKeys.hasCaseFormattedFilteringKey(t)},t.prototype.hasAnyAppliedModelKey=function(){return!this.filteringKeys.noAppliedFilteringKeys()},t.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",t}(),N_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),G_=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},j_=function(t){function e(r){var n,o=t.call(this,r.isGroup?e.GROUP_TEMPLATE:e.TEMPLATE)||this;return o.focusWrapper=r.focusWrapper,o.value=r.value,o.params=r.params,o.translate=r.translate,o.valueFormatter=r.valueFormatter,o.item=r.item,o.isSelected=r.isSelected,o.isTree=r.isTree,o.depth=null!==(n=r.depth)&&void 0!==n?n:0,o.isGroup=r.isGroup,o.groupsExist=r.groupsExist,o.isExpanded=r.isExpanded,o.hasIndeterminateExpandState=r.hasIndeterminateExpandState,o}return N_(e,t),e.prototype.init=function(){var t=this;this.addDestroyFunc((function(){var e;return null===(e=t.destroyCellRendererComponent)||void 0===e?void 0:e.call(t)})),this.render(),this.eCheckbox.setLabelEllipsis(!0),this.eCheckbox.setValue(this.isSelected,!0),this.eCheckbox.setDisabled(!!this.params.readOnly),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),a["Bb"].setAriaLevel(this.focusWrapper,this.depth+1)),this.params.readOnly||this.eCheckbox.onValueChange((function(e){return t.onCheckboxChanged(!!e)}))},e.prototype.setupExpansion=function(){this.eGroupClosedIcon.appendChild(a["Bb"].createIcon("setFilterGroupClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(a["Bb"].createIcon("setFilterGroupOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(a["Bb"].createIcon("setFilterGroupIndeterminate",this.gridOptionsService,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()},e.prototype.onExpandOrContractClicked=function(){this.setExpanded(!this.isExpanded)},e.prototype.setExpanded=function(t,r){if(this.isGroup&&t!==this.isExpanded){this.isExpanded=t;var n={type:e.EVENT_EXPANDED_CHANGED,isExpanded:!!t,item:this.item};r||this.dispatchEvent(n),this.setExpandedIcons(),this.refreshAriaExpanded()}},e.prototype.refreshAriaExpanded=function(){a["Bb"].setAriaExpanded(this.focusWrapper,!!this.isExpanded)},e.prototype.setExpandedIcons=function(){a["Bb"].setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?!1===this.isExpanded:!this.isExpanded),a["Bb"].setDisplayed(this.eGroupOpenedIcon,!0===this.isExpanded),this.hasIndeterminateExpandState&&a["Bb"].setDisplayed(this.eGroupIndeterminateIcon,void 0===this.isExpanded)},e.prototype.onCheckboxChanged=function(t){this.isSelected=t;var r={type:e.EVENT_SELECTION_CHANGED,isSelected:t,item:this.item};this.dispatchEvent(r),this.refreshVariableAriaLabels()},e.prototype.toggleSelected=function(){this.params.readOnly||this.setSelected(!this.isSelected)},e.prototype.setSelected=function(t,e){this.isSelected=t,this.eCheckbox.setValue(this.isSelected,e)},e.prototype.refreshVariableAriaLabels=function(){if(this.isTree){var t=this.localeService.getLocaleTextFunc(),e=this.eCheckbox.getValue(),r=void 0===e?t("ariaIndeterminate","indeterminate"):e?t("ariaVisible","visible"):t("ariaHidden","hidden"),n=t("ariaToggleVisibility","Press SPACE to toggle visibility");a["Bb"].setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(n+" ("+r+")")}},e.prototype.setupFixedAriaLabels=function(t){if(this.isTree){var e=this.localeService.getLocaleTextFunc(),r=e("ariaFilterValue","Filter Value");a["Bb"].setAriaLabel(this.focusWrapper,t+" "+r),a["Bb"].setAriaDescribedBy(this.focusWrapper,this.eCheckbox.getInputElement().id)}},e.prototype.refresh=function(t,e,r){var n,o;if(this.item=t,e!==this.isSelected&&this.setSelected(e,!0),this.setExpanded(r,!0),this.valueFunction){var i=this.valueFunction();this.setTooltipAndCellRendererParams(i,i),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent){var a=null===(o=(n=this.cellRendererComponent).refresh)||void 0===o?void 0:o.call(n,this.cellRendererParams);if(!a){var s=this.cellRendererComponent;this.renderCell(),this.destroyBean(s)}}},e.prototype.render=function(){var t=this.params.column,e=this.value,r=null;"function"===typeof e?(this.valueFunction=e,r=this.valueFunction(),e=r):r=this.isTree?a["Bb"].toStringOrNull(e):this.getFormattedValue(t,e),this.setTooltipAndCellRendererParams(e,r),this.renderCell()},e.prototype.setTooltipAndCellRendererParams=function(t,e){if(this.params.showTooltips){var r=null!=e?e:a["Bb"].toStringOrNull(t);this.setTooltip(r)}this.cellRendererParams={value:t,valueFormatted:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,colDef:this.params.colDef,column:this.params.column}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e},e.prototype.getFormattedValue=function(t,e){return this.valueFormatterService.formatValue(t,null,e,this.valueFormatter,!1)},e.prototype.renderCell=function(){var t=this,e=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),r=e?e.newAgStackInstance():void 0;null!=r?r.then((function(e){e&&(t.cellRendererComponent=e,t.eCheckbox.setLabel(e.getGui()),t.destroyCellRendererComponent=function(){return t.destroyBean(e)})})):this.renderCellWithoutCellRenderer()},e.prototype.renderCellWithoutCellRenderer=function(){var t,e=null!==(t=null==this.cellRendererParams.valueFormatted?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)&&void 0!==t?t:this.translate("blanks");"string"!==typeof e&&(a["Bb"].doOnce((function(){return console.warn("AG Grid: Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types")}),"setFilterComplexObjectsValueFormatter"),e=""),this.eCheckbox.setLabel(e),this.setupFixedAriaLabels(e)},e.prototype.getComponentHolder=function(){return this.params.column.getColDef()},e.EVENT_SELECTION_CHANGED="selectionChanged",e.EVENT_EXPANDED_CHANGED="expandedChanged",e.GROUP_TEMPLATE='\n        <div class="ag-set-filter-item" aria-hidden="true">\n            <span class="ag-set-filter-group-icons">\n                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>\n                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>\n            </span>\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',e.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',G_([Object(a["u"])("valueFormatterService")],e.prototype,"valueFormatterService",void 0),G_([Object(a["u"])("userComponentFactory")],e.prototype,"userComponentFactory",void 0),G_([Object(a["kb"])("eCheckbox")],e.prototype,"eCheckbox",void 0),G_([Object(a["kb"])("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),G_([Object(a["kb"])("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),G_([Object(a["kb"])("eGroupIndeterminateIcon")],e.prototype,"eGroupIndeterminateIcon",void 0),G_([a["fb"]],e.prototype,"init",null),e}(a["H"]),B_={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."},V_=function(){function t(){}return t.prototype.getModelAsString=function(t,e){var r=(t||e.getModel()||{}).values,n=e.getValueModel();if(null==r||null==n)return"";var o=r.filter((function(t){return n.isKeyAvailable(t)})),i=o.length,a=o.slice(0,10).map((function(t){return e.getFormattedValue(t)}));return"("+i+") "+a.join(",")+(i>10?",...":"")},t}(),H_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),z_=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},U_=function(t){function e(){var e=t.call(this,"setFilter")||this;return e.valueModel=null,e.setFilterParams=null,e.virtualList=null,e.caseSensitive=!1,e.convertValuesToStrings=!1,e.treeDataTreeList=!1,e.groupingTreeList=!1,e.hardRefreshVirtualList=!1,e.noValueFormatterSupplied=!1,e.filterModelFormatter=new V_,e}return H_(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this)},e.prototype.updateUiVisibility=function(){},e.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'+this.translateForSetFilter("loadingOoo")+'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">'+this.translateForSetFilter("noMatches")+'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>'},e.prototype.handleKeyDown=function(e){if(t.prototype.handleKeyDown.call(this,e),!e.defaultPrevented)switch(e.key){case a["X"].SPACE:this.handleKeySpace(e);break;case a["X"].ENTER:this.handleKeyEnter(e);break;case a["X"].LEFT:this.handleKeyLeft(e);break;case a["X"].RIGHT:this.handleKeyRight(e);break}},e.prototype.handleKeySpace=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.toggleSelected()},e.prototype.handleKeyEnter=function(t){if(this.setFilterParams){var e=this.setFilterParams||{},r=e.excelMode,n=e.readOnly;r&&!n&&(t.preventDefault(),this.onBtApply(!1,!1,t),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}},e.prototype.handleKeyLeft=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.setExpanded(!1)},e.prototype.handleKeyRight=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.setExpanded(!0)},e.prototype.getComponentForKeyEvent=function(t){var e,r=this.gridOptionsService.getDocument();if(this.eSetFilterList.contains(r.activeElement)&&this.virtualList){var n=this.virtualList.getLastFocusedRow();if(null!=n){var o=this.virtualList.getComponentAt(n);if(null!=o){t.preventDefault();var i=(null!==(e=this.setFilterParams)&&void 0!==e?e:{}).readOnly;if(!i)return o}}}},e.prototype.getCssIdentifier=function(){return"set-filter"},e.prototype.setModel=function(e){var r;return null==e&&null==(null===(r=this.valueModel)||void 0===r?void 0:r.getModel())?(this.setMiniFilter(null),a["m"].resolve()):t.prototype.setModel.call(this,e)},e.prototype.setModelAndRefresh=function(t){var e=this;return this.valueModel?this.valueModel.setModel(t).then((function(){return e.refresh()})):a["m"].resolve()},e.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},e.prototype.setModelIntoUi=function(t){this.setMiniFilter(null);var e=null==t?null:t.values;return this.setModelAndRefresh(e)},e.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.valueModel.getModel();return t?{values:t,filterType:this.getFilterType()}:null},e.prototype.getFilterType=function(){return"set"},e.prototype.getValueModel=function(){return this.valueModel},e.prototype.areModelsEqual=function(t,e){return null==t&&null==e||null!=t&&null!=e&&a["Bb"].areEqual(t.values,e.values)},e.prototype.setParams=function(e){var r,n=this;this.applyExcelModeOptions(e),t.prototype.setParams.call(this,e),this.setFilterParams=e,this.convertValuesToStrings=!!e.convertValuesToStrings,this.caseSensitive=!!e.caseSensitive;var o=null!==(r=e.keyCreator)&&void 0!==r?r:e.colDef.keyCreator;this.setValueFormatter(e.valueFormatter,o,this.convertValuesToStrings,!!e.treeList,!!e.colDef.refData);var i=e.column.getId().startsWith(a["U"]);this.treeDataTreeList=this.gridOptionsService.is("treeData")&&!!e.treeList&&i,this.getDataPath=this.gridOptionsService.get("getDataPath"),this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!e.treeList&&i,this.createKey=this.generateCreateKey(o,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList),this.valueModel=new L_({filterParams:e,setIsLoading:function(t){return n.setIsLoading(t)},valueFormatterService:this.valueFormatterService,translate:function(t){return n.translateForSetFilter(t)},caseFormat:function(t){return n.caseFormat(t)},createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!o,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()},e.prototype.onAddCurrentSelectionToFilterChange=function(t){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setAddCurrentSelectionToFilter(t)},e.prototype.setValueFormatter=function(t,e,r,n,o){var i=t;if(!i){if(e&&!r&&!n)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,o||(i=function(t){return a["Bb"].toStringOrNull(t.value)})}this.valueFormatter=i},e.prototype.generateCreateKey=function(t,e,r){var n=this;if(r&&!t)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return t?function(e,r){void 0===r&&(r=null);var o=n.getKeyCreatorParams(e,r);return a["Bb"].makeNull(t(o))}:e?function(t){return Array.isArray(t)?t:a["Bb"].makeNull(a["Bb"].toStringOrNull(t))}:function(t){return a["Bb"].makeNull(a["Bb"].toStringOrNull(t))}},e.prototype.getFormattedValue=function(t){var e,r=this.valueModel.getValue(t);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(r)&&(r=a["Bb"].last(r));var n=this.valueFormatterService.formatValue(this.setFilterParams.column,null,r,this.valueFormatter,!1);return null!==(e=null==n?a["Bb"].toStringOrNull(r):n)&&void 0!==e?e:this.translateForSetFilter("blanks")},e.prototype.applyExcelModeOptions=function(t){"windows"===t.excelMode?(t.buttons||(t.buttons=["apply","cancel"]),null==t.closeOnApply&&(t.closeOnApply=!0)):"mac"===t.excelMode&&(t.buttons||(t.buttons=["reset"]),null==t.applyMiniFilterWhileTyping&&(t.applyMiniFilterWhileTyping=!0),null==t.debounceMs&&(t.debounceMs=500)),t.excelMode&&t.defaultToNothingSelected&&(t.defaultToNothingSelected=!1,a["Bb"].doOnce((function(){return console.warn('AG Grid: The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.')}),"setFilterExcelModeDefaultToNothingSelect"))},e.prototype.addEventListenersForDataChanges=function(){var t=this;this.isValuesTakenFromGrid()&&this.addManagedListener(this.eventService,a["R"].EVENT_CELL_VALUE_CHANGED,(function(e){t.setFilterParams&&e.column===t.setFilterParams.column&&t.syncAfterDataChange()}))},e.prototype.syncAfterDataChange=function(){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.valueModel.refreshValues();return e.then((function(){t.refresh(),t.onBtApply(!1,!0)}))},e.prototype.setIsLoading=function(t){a["Bb"].setDisplayed(this.eFilterLoading,t),t||(this.hardRefreshVirtualList=!0)},e.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},e.prototype.initVirtualList=function(){var t=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.localeService.getLocaleTextFunc(),r=e("ariaFilterList","Filter List"),n=!!this.setFilterParams.treeList,o=this.virtualList=this.createBean(new a["xb"]({cssIdentifier:"filter",ariaRole:n?"tree":"listbox",listName:r})),i=this.getRefElement("eSetFilterList");n&&i.classList.add("ag-set-filter-tree-list"),i&&i.appendChild(o.getGui());var s=this.setFilterParams.cellHeight;null!=s&&o.setRowHeight(s);var l=function(e,r){return t.createSetListItem(e,n,r)};o.setComponentCreator(l);var u,c=function(e,r){return t.updateSetListItem(e,r)};o.setComponentUpdater(c),u=this.setFilterParams.suppressSelectAll?new W_(this.valueModel):new K_(this.valueModel,(function(){return t.isSelectAllSelected()})),n&&(u=new X_(u)),o.setModel(u)},e.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(t)},e.prototype.getAddSelectionToFilterLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.translateForSetFilter("addCurrentSelectionToFilter")},e.prototype.createSetListItem=function(t,e,r){var n=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var o=this.valueModel.hasGroups(),i=this.isSelectedExpanded(t),a=i.isSelected,s=i.isExpanded,l=this.newSetListItemAttributes(t,e),u=l.value,c=l.depth,p=l.isGroup,d=l.hasIndeterminateExpandState,h=l.selectedListener,f=l.expandedListener,v={focusWrapper:r,value:u,params:this.setFilterParams,translate:function(t){return n.translateForSetFilter(t)},valueFormatter:this.valueFormatter,item:t,isSelected:a,isTree:e,depth:c,groupsExist:o,isGroup:p,isExpanded:s,hasIndeterminateExpandState:d},y=this.createBean(new j_(v));return y.addEventListener(j_.EVENT_SELECTION_CHANGED,h),f&&y.addEventListener(j_.EVENT_EXPANDED_CHANGED,f),y},e.prototype.newSetTreeItemAttributes=function(t,e){var r,n,o,i,a,s,l=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var u=this.valueModel.hasGroups();return t.key===E_.SELECT_ALL?{value:function(){return l.getSelectAllLabel()},isGroup:u,depth:t.depth,hasIndeterminateExpandState:!0,selectedListener:function(t){return l.onSelectAll(t.isSelected)},expandedListener:function(t){return l.onExpandAll(t.item,t.isExpanded)}}:t.key===E_.ADD_SELECTION_TO_FILTER?{value:function(){return l.getAddSelectionToFilterLabel()},depth:t.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:function(t){l.onAddCurrentSelectionToFilterChange(t.isSelected)}}:t.children?{value:null!==(o=null===(n=(r=this.setFilterParams).treeListFormatter)||void 0===n?void 0:n.call(r,t.treeKey,t.depth,t.parentTreeKeys))&&void 0!==o?o:t.treeKey,depth:t.depth,isGroup:!0,selectedListener:function(t){return l.onGroupItemSelected(t.item,t.isSelected)},expandedListener:function(t){return l.onExpandedChanged(t.item,t.isExpanded)}}:{value:null!==(s=null===(a=(i=this.setFilterParams).treeListFormatter)||void 0===a?void 0:a.call(i,t.treeKey,t.depth,t.parentTreeKeys))&&void 0!==s?s:t.treeKey,depth:t.depth,selectedListener:function(t){return l.onItemSelected(t.item.key,t.isSelected)}}},e.prototype.newSetListItemAttributes=function(t,e){var r=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.isSetFilterModelTreeItem(t)?this.newSetTreeItemAttributes(t,e):t===E_.SELECT_ALL?{value:function(){return r.getSelectAllLabel()},selectedListener:function(t){return r.onSelectAll(t.isSelected)}}:t===E_.ADD_SELECTION_TO_FILTER?{value:function(){return r.getAddSelectionToFilterLabel()},selectedListener:function(t){r.onAddCurrentSelectionToFilterChange(t.isSelected)}}:{value:this.valueModel.getValue(t),selectedListener:function(t){return r.onItemSelected(t.item,t.isSelected)}}},e.prototype.updateSetListItem=function(t,e){var r=this.isSelectedExpanded(t),n=r.isSelected,o=r.isExpanded;e.refresh(t,n,o)},e.prototype.isSelectedExpanded=function(t){var e,r;return this.isSetFilterModelTreeItem(t)?(r=t.expanded,e=t.key===E_.SELECT_ALL?this.isSelectAllSelected():t.key===E_.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():t.children?this.areAllChildrenSelected(t):this.valueModel.isKeySelected(t.key)):e=t===E_.SELECT_ALL?this.isSelectAllSelected():t===E_.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():this.valueModel.isKeySelected(t),{isSelected:e,isExpanded:r}},e.prototype.isSetFilterModelTreeItem=function(t){return void 0!==(null===t||void 0===t?void 0:t.treeKey)},e.prototype.initMiniFilter=function(){var t=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this,r=e.eMiniFilter,n=e.localeService,o=n.getLocaleTextFunc();r.setDisplayed(!this.setFilterParams.suppressMiniFilter),r.setValue(this.valueModel.getMiniFilter()),r.onValueChange((function(){return t.onMiniFilterInput()})),r.setInputAriaLabel(o("ariaSearchFilterValues","Search filter values")),this.addManagedListener(r.getInputElement(),"keydown",(function(e){return t.onMiniFilterKeyDown(e)}))},e.prototype.afterGuiAttached=function(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");t.prototype.afterGuiAttached.call(this,e),this.resetExpansion(),this.refreshVirtualList();var r=this.eMiniFilter;r.setInputPlaceholder(this.translateForSetFilter("searchOoo")),e&&e.suppressFocus||r.getFocusableElement().focus()},e.prototype.afterGuiDetached=function(){var e,r;t.prototype.afterGuiDetached.call(this),(null===(e=this.setFilterParams)||void 0===e?void 0:e.excelMode)&&this.resetMiniFilter();var n=this.getModel();!(null===(r=this.setFilterParams)||void 0===r?void 0:r.excelMode)&&this.areModelsEqual(n,this.getModelFromUi())||(this.resetUiToActiveModel(n),this.showOrHideResults())},e.prototype.applyModel=function(e){var r=this;if(void 0===e&&(e="api"),!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&"rowDataUpdated"!==e&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var n=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(n&&!this.getModel())return!1;var o=t.prototype.applyModel.call(this,e),i=this.getModel();return i?(n||this.valueModel.setAppliedModelKeys(new Set),i.values.forEach((function(t){r.valueModel.addToAppliedModelKeys(t)}))):n||this.valueModel.setAppliedModelKeys(null),o},e.prototype.isModelValid=function(t){return!this.setFilterParams||!this.setFilterParams.excelMode||(null==t||t.values.length>0)},e.prototype.doesFilterPass=function(t){var e=this;if(!this.setFilterParams||!this.valueModel||!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;var r=t.node,n=t.data;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(r,n);if(this.groupingTreeList)return this.doesFilterPassForGrouping(r,n);var o=this.getValueFromNode(r,n);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(r,o):null!=o&&Array.isArray(o)?0===o.length?this.valueModel.hasAppliedModelKey(null):o.some((function(t){return e.isInAppliedModel(e.createKey(t,r))})):this.isInAppliedModel(this.createKey(o,r))},e.prototype.doesFilterPassForConvertValuesToString=function(t,e){var r=this,n=this.createKey(e,t);return null!=n&&Array.isArray(n)?0===n.length?this.valueModel.hasAppliedModelKey(null):n.some((function(t){return r.isInAppliedModel(t)})):this.isInAppliedModel(n)},e.prototype.doesFilterPassForTreeData=function(t,e){var r;return!(null===(r=t.childrenAfterGroup)||void 0===r?void 0:r.length)&&this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(e))))},e.prototype.doesFilterPassForGrouping=function(t,e){var r=this,n=this.columnModel.getRowGroupColumns().map((function(e){return r.valueService.getKeyForNode(e,t)}));return n.push(this.getValueFromNode(t,e)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(n)))},e.prototype.checkMakeNullDataPath=function(t){return t&&(t=t.map((function(t){return a["Bb"].toStringOrNull(a["Bb"].makeNull(t))}))),(null===t||void 0===t?void 0:t.some((function(t){return null==t})))?null:t},e.prototype.isInAppliedModel=function(t){return this.valueModel.hasAppliedModelKey(t)},e.prototype.getValueFromNode=function(t,e){var r=this.setFilterParams,n=r.valueGetter,o=r.api,i=r.colDef,a=r.column,s=r.columnApi,l=r.context;return n({api:o,colDef:i,column:a,columnApi:s,context:l,data:e,getValue:function(t){return e[t]},node:t})},e.prototype.getKeyCreatorParams=function(t,e){return void 0===e&&(e=null),{value:t,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:e,data:null===e||void 0===e?void 0:e.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}},e.prototype.onNewRowsLoaded=function(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()},e.prototype.isValuesTakenFromGrid=function(){if(!this.valueModel)return!1;var t=this.valueModel.getValuesType();return t===gM.TAKEN_FROM_GRID_VALUES},e.prototype.setFilterValues=function(t){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(t).then((function(){e.refresh(),e.onUiChanged()}))},e.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(gM.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()},e.prototype.refreshFilterValues=function(){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then((function(){t.refresh(),t.onUiChanged()}))},e.prototype.onAnyFilterChanged=function(){var t=this;setTimeout((function(){if(t.isAlive()){if(!t.valueModel)throw new Error("Value model has not been created.");t.valueModel.refreshAfterAnyFilterChanged().then((function(e){e&&(t.refresh(),t.showOrHideResults())}))}}),0)},e.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var t=this.setFilterParams||{},e=t.applyMiniFilterWhileTyping,r=t.readOnly;!r&&e?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},e.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.setFilterParams||{},e=t.excelMode,r=t.readOnly;null==e||r?this.refresh():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged()),this.showOrHideResults()},e.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var t=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;a["Bb"].setDisplayed(this.eNoMatches,t),a["Bb"].setDisplayed(this.eSetFilterList,!t)},e.prototype.resetMiniFilter=function(){var t;this.eMiniFilter.setValue(null,!0),null===(t=this.valueModel)||void 0===t||t.setMiniFilter(null)},e.prototype.resetUiToActiveModel=function(t,e){var r=this;this.setModelAndRefresh(null==t?null:t.values).then((function(){r.onUiChanged(!1,"prevent"),null===e||void 0===e||e()}))},e.prototype.handleCancelEnd=function(e){this.setMiniFilter(null),t.prototype.handleCancelEnd.call(this,e)},e.prototype.onMiniFilterKeyDown=function(t){var e=this.setFilterParams||{},r=e.excelMode,n=e.readOnly;t.key!==a["X"].ENTER||r||n||this.filterOnAllVisibleValues()},e.prototype.filterOnAllVisibleValues=function(t){void 0===t&&(t=!0);var e=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(e)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.refresh(),this.onUiChanged(!1,t?"immediately":"debounce"),this.showOrHideResults()},e.prototype.focusRowIfAlive=function(t){var e=this;null!=t&&window.setTimeout((function(){if(!e.virtualList)throw new Error("Virtual list has not been created.");e.isAlive()&&e.virtualList.focusRow(t)}),0)},e.prototype.onSelectAll=function(t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");t?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()},e.prototype.onGroupItemSelected=function(t,e){var r=this,n=function(t){t.children?t.children.forEach((function(t){return n(t)})):r.selectItem(t.key,e)};n(t),this.refreshAfterSelection()},e.prototype.onItemSelected=function(t,e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(t,e),this.refreshAfterSelection()},e.prototype.selectItem=function(t,e){e?this.valueModel.selectKey(t):this.valueModel.deselectKey(t)},e.prototype.onExpandAll=function(t,e){var r=function(t){t.filterPasses&&t.available&&t.children&&(t.children.forEach((function(t){return r(t)})),t.expanded=e)};r(t),this.refreshAfterExpansion()},e.prototype.onExpandedChanged=function(t,e){t.expanded=e,this.refreshAfterExpansion()},e.prototype.refreshAfterExpansion=function(){var t=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.refresh(),this.focusRowIfAlive(t)},e.prototype.refreshAfterSelection=function(){var t=this.virtualList.getLastFocusedRow();this.refresh(),this.onUiChanged(),this.focusRowIfAlive(t)},e.prototype.setMiniFilter=function(t){this.eMiniFilter.setValue(t),this.onMiniFilterInput()},e.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},e.prototype.refresh=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)},e.prototype.getFilterKeys=function(){return this.valueModel?this.valueModel.getKeys():[]},e.prototype.getFilterValues=function(){return this.valueModel?this.valueModel.getValues():[]},e.prototype.getValues=function(){return this.getFilterKeys()},e.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.refresh()},e.prototype.translateForSetFilter=function(t){var e=this.localeService.getLocaleTextFunc();return e(t,B_[t])},e.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},e.prototype.areAllChildrenSelected=function(t){var e=this,r=function(t){if(t.children){var n=!1,o=!1,i=t.children.some((function(t){if(!t.filterPasses||!t.available)return!1;var e=r(t);return void 0===e||(e?n=!0:o=!0,n&&o)}));return i?void 0:n}return e.valueModel.isKeySelected(t.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&r(t):r(t)},e.prototype.destroy=function(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),t.prototype.destroy.call(this)},e.prototype.caseFormat=function(t){return null==t||"string"!==typeof t||this.caseSensitive?t:t.toUpperCase()},e.prototype.resetExpansion=function(){var t,e;if(null===(t=this.setFilterParams)||void 0===t?void 0:t.treeList){var r=null===(e=this.valueModel)||void 0===e?void 0:e.getSelectAllItem();if(this.isSetFilterModelTreeItem(r)){var n=function(t){t.children&&(t.children.forEach((function(t){return n(t)})),t.expanded=!1)};n(r),this.valueModel.updateDisplayedValues("expansion")}}},e.prototype.getModelAsString=function(t){return this.filterModelFormatter.getModelAsString(t,this)},e.prototype.getPositionableElement=function(){return this.eSetFilterList},z_([Object(a["kb"])("eMiniFilter")],e.prototype,"eMiniFilter",void 0),z_([Object(a["kb"])("eFilterLoading")],e.prototype,"eFilterLoading",void 0),z_([Object(a["kb"])("eSetFilterList")],e.prototype,"eSetFilterList",void 0),z_([Object(a["kb"])("eFilterNoMatches")],e.prototype,"eNoMatches",void 0),z_([Object(a["u"])("valueFormatterService")],e.prototype,"valueFormatterService",void 0),z_([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),z_([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),e}(a["jb"]),W_=function(){function t(t){this.model=t}return t.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},t.prototype.getRow=function(t){return this.model.getDisplayedItem(t)},t.prototype.isRowSelected=function(t){return this.model.isKeySelected(this.getRow(t))},t.prototype.areRowsEqual=function(t,e){return t===e},t}(),K_=function(){function t(t,e){this.model=t,this.isSelectAllSelected=e}return t.prototype.getRowCount=function(){var t=this.model.showAddCurrentSelectionToFilter(),e=t?2:1;return this.model.getDisplayedValueCount()+e},t.prototype.getRow=function(t){if(0===t)return this.model.getSelectAllItem();var e=this.model.showAddCurrentSelectionToFilter(),r=e?2:1;return 1===t&&e?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(t-r)},t.prototype.isRowSelected=function(t){return 0===t?this.isSelectAllSelected():1===t&&this.model.showAddCurrentSelectionToFilter()?this.model.isAddCurrentSelectionToFilterChecked():this.model.isKeySelected(this.getRow(t))},t.prototype.areRowsEqual=function(t,e){return t===e},t}(),X_=function(){function t(t){this.model=t}return t.prototype.getRowCount=function(){return this.model.getRowCount()},t.prototype.getRow=function(t){return this.model.getRow(t)},t.prototype.areRowsEqual=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.treeKey===e.treeKey&&t.depth===e.depth},t}(),Y_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),q_=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Z_=function(t){function e(){var e=t.call(this,'\n            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;return e.availableValuesListenerAdded=!1,e.filterModelFormatter=new V_,e}return Y_(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var e=this;this.params=t,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(function(){return e.params.showParentFilter()})),this.setParams(t)},e.prototype.setParams=function(t){var e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),r=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel(e+" "+r("ariaFilterInput","Filter Input"))},e.prototype.onParamsUpdated=function(t){this.params=t,this.setParams(t)},e.prototype.onParentModelChanged=function(t){this.updateFloatingFilterText(t)},e.prototype.parentSetFilterInstance=function(t){this.params.parentFilterInstance((function(e){if(!(e instanceof U_))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");t(e)}))},e.prototype.addAvailableValuesListener=function(){var t=this;this.parentSetFilterInstance((function(e){var r=e.getValueModel();r&&t.addManagedListener(r,L_.EVENT_AVAILABLE_VALUES_CHANGED,(function(){return t.updateFloatingFilterText()}))})),this.availableValuesListenerAdded=!0},e.prototype.updateFloatingFilterText=function(t){var e=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance((function(r){e.eFloatingFilterText.setValue(e.filterModelFormatter.getModelAsString(t,r))}))},q_([Object(a["kb"])("eFloatingFilterText")],e.prototype,"eFloatingFilterText",void 0),q_([Object(a["u"])("columnModel")],e.prototype,"columnModel",void 0),e}(a["H"]),J_="30.2.1",Q_={version:J_,moduleName:a["Z"].SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:U_},{componentName:"agSetColumnFloatingFilter",componentClass:Z_}],dependantModules:[b]},$_=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tk=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ek=function(t){function e(){var e=t.call(this)||this;return e.allComponents={},e}return $_(e,t),e.prototype.registerStatusPanel=function(t,e){this.allComponents[t]=e},e.prototype.getStatusPanel=function(t){return this.allComponents[t]},e=tk([Object(a["y"])("statusBarService")],e),e}(a["z"]),rk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nk=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ok=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return rk(e,t),e.prototype.postConstruct=function(){var t,e=null===(t=this.gridOptionsService.get("statusBar"))||void 0===t?void 0:t.statusPanels;if(e){var r=e.filter((function(t){return"left"===t.align}));this.createAndRenderComponents(r,this.eStatusBarLeft);var n=e.filter((function(t){return"center"===t.align}));this.createAndRenderComponents(n,this.eStatusBarCenter);var o=e.filter((function(t){return!t.align||"right"===t.align}));this.createAndRenderComponents(o,this.eStatusBarRight)}else this.setDisplayed(!1)},e.prototype.createAndRenderComponents=function(t,e){var r=this,n=[];t.forEach((function(t){var e={},o=r.userComponentFactory.getStatusPanelCompDetails(t,e),i=o.newAgStackInstance();i&&n.push({key:t.key||t.statusPanel,promise:i})})),a["m"].all(n.map((function(t){return t.promise}))).then((function(){n.forEach((function(t){t.promise.then((function(n){var o=function(){r.getContext().destroyBean(n)};r.isAlive()?(r.statusBarService.registerStatusPanel(t.key,n),e.appendChild(n.getGui()),r.addDestroyFunc(o)):o()}))}))}))},e.TEMPLATE='<div class="ag-status-bar">\n            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>',nk([Object(a["u"])("userComponentFactory")],e.prototype,"userComponentFactory",void 0),nk([Object(a["u"])("statusBarService")],e.prototype,"statusBarService",void 0),nk([Object(a["kb"])("eStatusBarLeft")],e.prototype,"eStatusBarLeft",void 0),nk([Object(a["kb"])("eStatusBarCenter")],e.prototype,"eStatusBarCenter",void 0),nk([Object(a["kb"])("eStatusBarRight")],e.prototype,"eStatusBarRight",void 0),nk([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),ik=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ak=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},sk=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return ik(e,t),e.prototype.setLabel=function(t,e){this.setDisplayed(!1);var r=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=r(t,e)},e.prototype.setValue=function(t){this.eValue.innerHTML=t},e.TEMPLATE='<div class="ag-status-name-value">\n            <span ref="eLabel"></span>:&nbsp;\n            <span ref="eValue" class="ag-status-name-value-value"></span>\n        </div>',ak([Object(a["kb"])("eLabel")],e.prototype,"eLabel",void 0),ak([Object(a["kb"])("eValue")],e.prototype,"eValue",void 0),e}(a["H"]),lk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),uk=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},ck=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lk(e,t),e.prototype.postConstruct=function(){"clientSide"===this.gridApi.getModel().getType()?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,a["R"].EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),r=t("decimalSeparator","."),n=a["Bb"].formatNumberCommas(this.getFilteredRowCountValue(),e,r),o=a["Bb"].formatNumberCommas(this.getTotalRowCount(),e,r);if(n===o)this.setValue(n);else{var i=this.localeService.getLocaleTextFunc();this.setValue(n+" "+i("of","of")+" "+o)}},e.prototype.getFilteredRowCountValue=function(){var t=0;return this.gridApi.forEachNodeAfterFilter((function(e){e.group||t++})),t},e.prototype.getTotalRowCount=function(){var t=0;return this.gridApi.forEachNode((function(e){e.group||t++})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},uk([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),uk([a["fb"]],e.prototype,"postConstruct",null),e}(sk),pk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dk=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},hk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pk(e,t),e.prototype.postConstruct=function(){if(this.setLabel("filteredRows","Filtered"),"clientSide"===this.gridApi.getModel().getType()){this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);var t=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,a["R"].EVENT_MODEL_UPDATED,t),t()}else console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.getTotalRowCountValue(),e=this.getFilteredRowCountValue(),r=this.localeService.getLocaleTextFunc(),n=r("thousandSeparator",","),o=r("decimalSeparator",".");this.setValue(a["Bb"].formatNumberCommas(e,n,o)),this.setDisplayed(t!==e)},e.prototype.getTotalRowCountValue=function(){var t=0;return this.gridApi.forEachNode((function(e){return t+=1})),t},e.prototype.getFilteredRowCountValue=function(){var t=0;return this.gridApi.forEachNodeAfterFilter((function(e){e.group||(t+=1)})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},dk([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),dk([a["fb"]],e.prototype,"postConstruct",null),e}(sk),fk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vk=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},yk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fk(e,t),e.prototype.postConstruct=function(){this.setLabel("totalRows","Total Rows"),"clientSide"===this.gridApi.getModel().getType()?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,a["R"].EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),r=t("decimalSeparator",".");this.setValue(a["Bb"].formatNumberCommas(this.getRowCountValue(),e,r))},e.prototype.getRowCountValue=function(){var t=0;return this.gridApi.forEachLeafNode((function(e){return t+=1})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},vk([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),vk([a["fb"]],e.prototype,"postConstruct",null),e}(sk),gk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mk=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},bk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gk(e,t),e.prototype.postConstruct=function(){if(this.isValidRowModel()){this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();var t=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,a["R"].EVENT_MODEL_UPDATED,t),this.addManagedListener(this.eventService,a["R"].EVENT_SELECTION_CHANGED,t)}else console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.")},e.prototype.isValidRowModel=function(){var t=this.gridApi.getModel().getType();return"clientSide"===t||"serverSide"===t},e.prototype.onRowSelectionChanged=function(){var t=this.selectionService.getSelectionCount();if(t<0)return this.setValue("?"),void this.setDisplayed(!0);var e=this.localeService.getLocaleTextFunc(),r=e("thousandSeparator",","),n=e("decimalSeparator",".");this.setValue(a["Bb"].formatNumberCommas(t,r,n)),this.setDisplayed(t>0)},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},mk([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),mk([Object(a["u"])("selectionService")],e.prototype,"selectionService",void 0),mk([a["fb"]],e.prototype,"postConstruct",null),e}(sk),Ck=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sk=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},wk=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return Ck(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.postConstruct=function(){this.isValidRowModel()?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,a["R"].EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,a["R"].EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))):console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.")},e.prototype.isValidRowModel=function(){var t=this.gridApi.getModel().getType();return"clientSide"===t||"serverSide"===t},e.prototype.init=function(){},e.prototype.setAggregationComponentValue=function(t,e,r){var n=this.getAggregationValueComponent(t);if(a["Bb"].exists(n)&&n){var o=this.localeService.getLocaleTextFunc(),i=o("thousandSeparator",","),s=o("decimalSeparator",".");n.setValue(a["Bb"].formatNumberTwoDecimalPlacesAndCommas(e,i,s)),n.setDisplayed(r)}},e.prototype.getAggregationValueComponent=function(t){var e=t+"AggregationComp",r=null,n=this.gridOptionsService.get("statusBar"),o=a["Bb"].exists(n)&&n?n.statusPanels.find((function(t){return"agAggregationComponent"===t.statusPanel})):null;return a["Bb"].exists(o)&&o?(!a["Bb"].exists(o.statusPanelParams)||a["Bb"].exists(o.statusPanelParams)&&a["Bb"].exists(o.statusPanelParams.aggFuncs)&&a["Bb"].exists(o.statusPanelParams.aggFuncs.find((function(e){return e===t}))))&&(r=this[e]):r=this[e],r},e.prototype.onRangeSelectionChanged=function(){var t=this,e=this.rangeService?this.rangeService.getCellRanges():void 0,r=0,n=0,o=0,i=null,s=null,l={};e&&!a["Bb"].missingOrEmpty(e)&&e.forEach((function(e){var u=t.rangeService.getRangeStartRow(e),c=t.rangeService.getRangeEndRow(e);while(1){var p=a["Bb"].missing(u)||!u||t.rowPositionUtils.before(c,u);if(p||!u||!e.columns)break;e.columns.forEach((function(e){if(null!==u){var c=t.cellPositionUtils.createId({rowPinned:u.rowPinned,column:e,rowIndex:u.rowIndex});if(!l[c]){l[c]=!0;var p=t.rowRenderer.getRowNode(u);if(!a["Bb"].missing(p)){var d=t.valueService.getValue(e,p);a["Bb"].missing(d)||""===d||(n++,"object"===typeof d&&"value"in d&&(d=d.value,""===d)||("string"===typeof d&&(d=Number(d)),"number"!==typeof d||isNaN(d)||(r+=d,(null===s||d>s)&&(s=d),(null===i||d<i)&&(i=d),o++)))}}}})),u=t.cellNavigationService.getRowBelow(u)}}));var u=n>1,c=o>1;this.setAggregationComponentValue("count",n,u),this.setAggregationComponentValue("sum",r,c),this.setAggregationComponentValue("min",i,c),this.setAggregationComponentValue("max",s,c),this.setAggregationComponentValue("avg",r/o,c)},e.TEMPLATE='<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value ref="countAggregationComp"></ag-name-value>\n            <ag-name-value ref="minAggregationComp"></ag-name-value>\n            <ag-name-value ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value ref="sumAggregationComp"></ag-name-value>\n        </div>',Sk([Object(a["cb"])("rangeService")],e.prototype,"rangeService",void 0),Sk([Object(a["u"])("valueService")],e.prototype,"valueService",void 0),Sk([Object(a["u"])("cellNavigationService")],e.prototype,"cellNavigationService",void 0),Sk([Object(a["u"])("rowRenderer")],e.prototype,"rowRenderer",void 0),Sk([Object(a["u"])("gridApi")],e.prototype,"gridApi",void 0),Sk([Object(a["u"])("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),Sk([Object(a["u"])("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),Sk([Object(a["kb"])("sumAggregationComp")],e.prototype,"sumAggregationComp",void 0),Sk([Object(a["kb"])("countAggregationComp")],e.prototype,"countAggregationComp",void 0),Sk([Object(a["kb"])("minAggregationComp")],e.prototype,"minAggregationComp",void 0),Sk([Object(a["kb"])("maxAggregationComp")],e.prototype,"maxAggregationComp",void 0),Sk([Object(a["kb"])("avgAggregationComp")],e.prototype,"avgAggregationComp",void 0),Sk([a["fb"]],e.prototype,"postConstruct",null),e}(a["H"]),xk="30.2.1",Ok={version:xk,moduleName:a["Z"].StatusBarModule,beans:[ek],agStackComponents:[{componentName:"AgStatusBar",componentClass:ok},{componentName:"AgNameValue",componentClass:sk}],userComponents:[{componentName:"agAggregationComponent",componentClass:wk},{componentName:"agSelectedRowCountComponent",componentClass:bk},{componentName:"agTotalRowCountComponent",componentClass:yk},{componentName:"agFilteredRowCountComponent",componentClass:hk},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:ck}],dependantModules:[b]},Ek="30.2.1",Tk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pk=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},Dk=5,Ak=5,Mk=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstRow=-1,e.lastRow=-1,e.rowCount=-1,e.rowNodesByIndex={},e}return Tk(e,t),e.prototype.ensureRowHeightsValid=function(t,e,r,n){return!1},e.prototype.init=function(){this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addManagedListener(this.eventService,a["R"].EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this))},e.prototype.start=function(){this.gridOptionsService.get("viewportDatasource")&&this.setViewportDatasource(this.gridOptionsService.get("viewportDatasource"))},e.prototype.isLastRowIndexKnown=function(){return!0},e.prototype.destroyDatasource=function(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)},e.prototype.getViewportRowModelPageSize=function(){return a["Bb"].oneOrGreater(this.gridOptionsService.getNum("viewportRowModelPageSize"),Dk)},e.prototype.getViewportRowModelBufferSize=function(){return a["Bb"].zeroOrGreater(this.gridOptionsService.getNum("viewportRowModelBufferSize"),Ak)},e.prototype.calculateFirstRow=function(t){var e=this.getViewportRowModelBufferSize(),r=this.getViewportRowModelPageSize(),n=t-e;return n<0?0:Math.floor(n/r)*r},e.prototype.calculateLastRow=function(t){if(-1===t)return t;var e=this.getViewportRowModelBufferSize(),r=this.getViewportRowModelPageSize(),n=t+e,o=Math.ceil(n/r)*r,i=this.rowCount-1;return Math.min(o,i)},e.prototype.onViewportChanged=function(t){var e=this.calculateFirstRow(t.firstRow),r=this.calculateLastRow(t.lastRow);this.firstRow===e&&this.lastRow===r||(this.firstRow=e,this.lastRow=r,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))},e.prototype.purgeRowsNotInViewport=function(){var t=this;Object.keys(this.rowNodesByIndex).forEach((function(e){var r=parseInt(e,10);if(r<t.firstRow||r>t.lastRow){if(t.isRowFocused(r))return;delete t.rowNodesByIndex[r]}}))},e.prototype.isRowFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();if(!e)return!1;if(null!=e.rowPinned)return!1;var r=e.rowIndex===t;return r},e.prototype.setViewportDatasource=function(t){this.destroyDatasource(),this.viewportDatasource=t,this.rowCount=-1,t.init?t.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")},e.prototype.getType=function(){return"viewport"},e.prototype.getRow=function(t){return this.rowNodesByIndex[t]||(this.rowNodesByIndex[t]=this.createBlankRowNode(t)),this.rowNodesByIndex[t]},e.prototype.getRowNode=function(t){var e;return this.forEachNode((function(r){r.id===t&&(e=r)})),e},e.prototype.getRowCount=function(){return-1===this.rowCount?0:this.rowCount},e.prototype.getRowIndexAtPixel=function(t){return 0!==this.rowHeight?Math.floor(t/this.rowHeight):0},e.prototype.getRowBounds=function(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}},e.prototype.getTopLevelRowCount=function(){return this.getRowCount()},e.prototype.getTopLevelRowDisplayedIndex=function(t){return t},e.prototype.isEmpty=function(){return this.rowCount>0},e.prototype.isRowsToRender=function(){return this.rowCount>0},e.prototype.getNodesInRangeForSelection=function(t,e){var r=a["Bb"].missing(t)?0:t.rowIndex,n=e.rowIndex,o=r<this.firstRow||r>this.lastRow,i=n<this.firstRow||n>this.lastRow;if(o||i)return[];for(var s=[],l=r<=n?r:n,u=r<=n?n:r,c=l;c<=u;c++)s.push(this.rowNodesByIndex[c]);return s},e.prototype.forEachNode=function(t){var e=this,r=0;Object.keys(this.rowNodesByIndex).forEach((function(n){var o=parseInt(n,10),i=e.rowNodesByIndex[o];t(i,r),r++}))},e.prototype.setRowData=function(t){var e=this;a["Bb"].iterateObject(t,(function(t,r){var n=parseInt(t,10);if(n>=e.firstRow&&n<=e.lastRow){var o=e.rowNodesByIndex[n];a["Bb"].missing(o)&&(o=e.createBlankRowNode(n),e.rowNodesByIndex[n]=o),o.setDataAndId(r,n.toString())}}))},e.prototype.createBlankRowNode=function(t){var e=new a["lb"](this.beans);return e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*t),e.setRowIndex(t),e},e.prototype.setRowCount=function(t,e){if(void 0===e&&(e=!1),t!==this.rowCount){this.rowCount=t;var r={type:a["R"].EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:e,animate:!1};this.eventService.dispatchEvent(r)}},e.prototype.isRowPresent=function(t){var e=this.getRowNode(t.id);return!!e},Pk([Object(a["u"])("rowRenderer")],e.prototype,"rowRenderer",void 0),Pk([Object(a["u"])("focusService")],e.prototype,"focusService",void 0),Pk([Object(a["u"])("beans")],e.prototype,"beans",void 0),Pk([a["fb"]],e.prototype,"init",null),Pk([a["hb"]],e.prototype,"destroyDatasource",null),e=Pk([Object(a["y"])("rowModel")],e),e}(a["z"]),Rk={version:Ek,moduleName:a["Z"].ViewportRowModelModule,rowModel:"viewport",beans:[Mk],dependantModules:[b]},_k="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n",kk=function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fk=uy,Ik=ou,Lk=Ql,Nk=$l,Gk=tu,jk=Vs,Bk=kp,Vk=qy,Hk=Zf,zk=kv;(function(t){t[t["SERIES_FILL_ZINDEX"]=50]="SERIES_FILL_ZINDEX",t[t["AXIS_LINE_ZINDEX"]=500]="AXIS_LINE_ZINDEX",t[t["SERIES_STROKE_ZINDEX"]=1e3]="SERIES_STROKE_ZINDEX",t[t["SERIES_LABEL_ZINDEX"]=1500]="SERIES_LABEL_ZINDEX",t[t["CROSSHAIR_ZINDEX"]=2e3]="CROSSHAIR_ZINDEX",t[t["SERIES_MARKERS_ZINDEX"]=2500]="SERIES_MARKERS_ZINDEX"})(I_||(I_={}));var Uk=function(){function t(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1}return t}(),Wk=function(){function t(){this.id=jk(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new Bk(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new Vk,this.axis=new Uk,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);var e=new yl;this.rootGroup=e;var r=document.createElement("div");r.setAttribute("class","ag-sparkline-wrapper");var n=new Tl({document:document});if(this.scene=n,this.canvasElement=n.canvas.element,n.root=e,n.container=r,n.resize(this.width,this.height),this.seriesRect.width=this.width,this.seriesRect.height=this.height,-1===t.tooltipDocuments.indexOf(document)){var o=document.createElement("style");o.innerHTML=_k,document.head.insertBefore(o,document.head.querySelector("style")),t.tooltipDocuments.push(document)}this.setupDomEventListeners(this.scene.canvas.element)}return Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(t){this._context!==t&&(this._context=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){if(this._container!==t){var e=this.canvasElement.parentNode;null!=e&&e.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())},enumerable:!1,configurable:!0}),t.prototype.update=function(){},t.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},t.prototype.updateYScaleDomain=function(){},t.prototype.updateYScaleRange=function(){var t=this,e=t.yScale,r=t.seriesRect;e.range=[r.height,0]},t.prototype.updateXScale=function(){var t=this.axis.type;this.xScale=this.getXScale(t),this.updateXScaleRange(),this.updateXScaleDomain()},t.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},t.prototype.updateXScaleDomain=function(){var t,e=this,r=e.xData,n=e.xScale;(n instanceof Vk||n instanceof zk)&&(t=Fk(r)),this.xScale.domain=t?t.slice():r},t.prototype.getXScale=function(t){switch(void 0===t&&(t="category"),t){case"number":return new Vk;case"time":return new zk;case"category":default:return new Hk}},t.prototype.updateAxisLine=function(){},t.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},t.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},t.prototype.generateNodeData=function(){return[]},t.prototype.getNodeData=function(){return[]},t.prototype.updateNodes=function(){},t.prototype.updateXCrosshairLine=function(){},t.prototype.updateYCrosshairLine=function(){},t.prototype.highlightDatum=function(t){this.updateNodes()},t.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},t.prototype.onMouseMove=function(t){this.mouseMoveEvent=t,this.updateHitPoint(t)},t.prototype.updateHitPoint=function(t){var e,r,n,o=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(o){var i=this.highlightedDatum;this.highlightedDatum=o,(this.highlightedDatum&&!i||this.highlightedDatum&&i&&this.highlightedDatum!==i)&&(this.highlightDatum(o),this.updateCrosshairs(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)})));var a=null===(n=null===(r=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===r?void 0:r.enabled)||void 0===n||n;a&&this.handleTooltip(t,o)}},t.prototype.onMouseOut=function(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},t.prototype.processData=function(){var t=this,e=this,r=e.data,n=e.yData,o=e.xData;if(r&&!this.invalidData(this.data)){n.length=0,o.length=0;var i=r.length,a=this.getDataType(r);this.dataType=a;var s,l=this.axis.type,u="number"!==l&&"time"!==l?"category":l,c="number"===u||"time"===u,p=function(e,r){void 0==t.smallestInterval&&(t.smallestInterval={x:1/0,y:1/0});var n=t.smallestInterval.x,o=Math.abs(e-r);o>0&&o<n&&(t.smallestInterval.x=o)};if("number"===a)for(var d=0;d<i;d++){var h=d,f=r[d],v=this.getDatum(h,u),y=this.getDatum(f,"number");c&&p(v,s),o.push(v),n.push(y),s=v}else if("array"===a)for(d=0;d<i;d++){var g=r[d];if(Array.isArray(g)){h=g[0],f=g[1],v=this.getDatum(h,u),y=this.getDatum(f,"number");if(void 0==v)continue;c&&p(v,s),o.push(v),n.push(y),s=v}}else if("object"===a){var m=this,b=m.yKey,C=m.xKey;for(d=0;d<i;d++){g=r[d];if("object"===typeof g&&!Array.isArray(g)){h=g[C],f=g[b],v=this.getDatum(h,u),y=this.getDatum(f,"number");if(void 0==v)continue;c&&p(v,s),o.push(v),n.push(y),s=v}}}this.updateAxes(),this.immediateLayout()}},t.prototype.getDataType=function(t){var e,r;try{for(var n=kk(t),o=n.next();!o.done;o=n.next()){var i=o.value;if(void 0!=i){if(Ik(i))return"number";if(Array.isArray(i))return"array";if("object"===typeof i)return"object"}}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.getDatum=function(t,e){if("number"===e&&Ik(t)||"time"===e&&(Ik(t)||Gk(t)))return t;if("category"===e){if(Lk(t)||Gk(t)||Ik(t))return{toString:function(){return String(t)}};if(Nk(t))return t}},Object.defineProperty(t.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!1,configurable:!0}),t.prototype.scheduleLayout=function(){var t=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame((function(){t.immediateLayout(),t.layoutId=0}))},t.prototype.immediateLayout=function(){this.setSparklineDimensions(),this.invalidData(this.data)||(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)})))},t.prototype.setSparklineDimensions=function(){var t=this,e=t.width,r=t.height,n=t.padding,o=t.seriesRect,i=t.rootGroup,a=e-n.left-n.right,s=r-n.top-n.bottom;o.width=a,o.height=s,o.x=n.left,o.y=n.top,i.translationX=o.x,i.translationY=o.y},t.prototype.pickClosestSeriesNodeDatum=function(t,e){for(var r,n=1/0,o=this.rootGroup.transformPoint(t,e),i=this.getNodeData(),a=0;a<i.length;a++){var s=i[a];if(!s.point)return;var l=this.getDistance(o,s.point);l<=n&&(n=l,r=s)}return r},t.prototype.getDistance=function(t,e){return Math.abs(t.x-e.x)},t.prototype.handleTooltip=function(t,e){var r,n,o=e.seriesDatum,i=this.canvasElement,a=t.clientX,s=t.clientY,l=null===(r=this.processedOptions)||void 0===r?void 0:r.tooltip,u={pageX:a,pageY:s,position:{xOffset:null===l||void 0===l?void 0:l.xOffset,yOffset:null===l||void 0===l?void 0:l.yOffset},container:null===l||void 0===l?void 0:l.container};void 0==u.container&&(u.container=i);var c=o.y,p=o.x,d=null===(n=null===l||void 0===l?void 0:l.enabled)||void 0===n||n,h=null===l||void 0===l?void 0:l.renderer;if(h){var f=h({context:this.context,datum:o,yValue:c,xValue:p});d="string"!==typeof f&&void 0!==f.enabled?f.enabled:d}var v=d&&void 0!==o.y&&this.getTooltipHtml(e);v&&this.tooltip.show(u,v)},t.prototype.formatNumericDatum=function(t){return String(Math.round(10*t)/10)},t.prototype.formatDatum=function(t){var e=this.axis.type||"category";return"number"===e&&"number"===typeof t?this.formatNumericDatum(t):"time"===e&&(t instanceof Date||Ik(t))?this.defaultDateFormatter.format(t):String(t)},t.prototype.setupDomEventListeners=function(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)},t.prototype.cleanupDomEventListeners=function(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)},t.prototype.invalidData=function(t){return!t||!Array.isArray(t)||0===t.length},t.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},t.tooltipDocuments=[],t}();function Kk(t,e){var r,n,o;if("string"===typeof t)return t;e=null!==e&&void 0!==e?e:{};var i,a,s=t.content,l=void 0===s?null!==(r=e.content)&&void 0!==r?r:"":s,u=t.title,c=void 0===u?null!==(n=e.title)&&void 0!==n?n:void 0:u,p=t.color,d=void 0===p?e.color:p,h=t.backgroundColor,f=void 0===h?e.backgroundColor:h,v=t.opacity,y=void 0===v?null!==(o=e.opacity)&&void 0!==o?o:1:v;d?(i=c?'<span class="'+Xk.class+'-title"; style="color: '+d+'">'+c+"</span>":"",a='<span class="'+Xk.class+'-content" style="color: '+d+'">'+l+"</span>"):(i=c?'<span class="'+Xk.class+'-title">'+c+"</span>":"",a='<span class="'+Xk.class+'-content">'+l+"</span>");var g="opacity: "+y;return f&&(g+="; background-color: "+f.toLowerCase()),'<div class="'+Xk.class+'" style="'+g+'">\n                '+i+"\n                "+a+"\n            </div>"}var Xk=function(){function t(){this.element=document.createElement("div");var t=document.body;t.appendChild(this.element)}return t.prototype.isVisible=function(){var e=this.element;if(e.classList)return!e.classList.contains(t.class+"-wrapper-hidden");var r=e.getAttribute("class");return!!r&&r.split(" ").indexOf(t.class+"-wrapper-hidden")<0},t.prototype.updateClass=function(e){var r=[t.class+"-wrapper"];!0!==e&&r.push(t.class+"-wrapper-hidden"),this.element.setAttribute("class",r.join(" "))},t.prototype.show=function(t,e){var r,n,o,i;this.toggle(!1);var a=this.element;if(void 0!==e)a.innerHTML=e;else if(!a.innerHTML)return;var s=null!==(n=null===(r=t.position)||void 0===r?void 0:r.xOffset)&&void 0!==n?n:10,l=null!==(i=null===(o=t.position)||void 0===o?void 0:o.yOffset)&&void 0!==i?i:0,u=t.pageX+s,c=t.pageY+l,p=a.getBoundingClientRect(),d=window.innerWidth-p.width;if(t.container){var h=t.container.getBoundingClientRect();d=h.left+(h.width-p.width)}u>d&&(u=t.pageX-a.clientWidth-s),"undefined"!==typeof scrollX&&(u+=scrollX),"undefined"!==typeof scrollY&&(c+=scrollY),a.style.left=Math.round(u)+"px",a.style.top=Math.round(c)+"px",this.toggle(!0)},t.prototype.toggle=function(t){this.updateClass(t)},t.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element)},t.class="ag-sparkline-tooltip",t}();function Yk(t){switch(t){case"circle":return jh;case"square":return Fh;case"diamond":return zh;default:return jh}}function qk(t,e){void 0===e&&(e="solid");var r={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},n={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return"round"===t||"square"===t?void 0==n[e]?(console.warn("'"+e+"' is not a valid 'lineDash' option."),n.solid):n[e]:void 0==r[e]?(console.warn("'"+e+"' is not a valid 'lineDash' option."),r.solid):r[e]}var Zk,Jk,Qk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$k=uy,tF=Zf,eF=function(){function t(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}return t}(),rF=function(){function t(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}return t}(),nF=function(){function t(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}return t}(),oF=function(t){function e(){var e=t.call(this)||this;return e.fill="rgba(124, 181, 236, 0.25)",e.strokePath=new Dh,e.fillPath=new Dh,e.xCrosshairLine=new $f,e.yCrosshairLine=new $f,e.areaSparklineGroup=new yl,e.xAxisLine=new $f,e.markers=new yl,e.markerSelection=hh.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new eF,e.line=new rF,e.crosshairs=new nF,e.rootGroup.append(e.areaSparklineGroup),e.xAxisLine.zIndex=I_.AXIS_LINE_ZINDEX,e.fillPath.zIndex=I_.SERIES_FILL_ZINDEX,e.strokePath.zIndex=I_.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=I_.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=I_.CROSSHAIR_ZINDEX,e.markers.zIndex=I_.SERIES_MARKERS_ZINDEX,e.areaSparklineGroup.append([e.fillPath,e.xAxisLine,e.strokePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return Qk(e,t),e.prototype.markerFactory=function(){var t=this.marker.shape,e=Yk(t);return new e},e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.update=function(){var t=this.generateNodeData();if(t){var e=t.nodeData,r=t.fillData,n=t.strokeData;this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateStroke(n),this.updateFill(r)}},e.prototype.updateYScaleDomain=function(){var t=this,e=t.yData,r=t.yScale,n=$k(e),o=0,i=1;void 0!==n&&(o=this.min=n[0],i=this.max=n[1]),o=o<0?o:0,i=i<0?0:i,r.domain=[o,i]},e.prototype.generateNodeData=function(){var t=this,e=t.data,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale;if(e){for(var a,s,l,u,c=!(o instanceof tF),p=c?0:o.bandwidth/2,d=r.length,h=[],f=[],v=[],y=i.convert(0),g=0;g<d;g++){var m=r[g],b=n[g],C=o.convert(c?o.toDomain(b):b)+p,S=void 0===m?NaN:i.convert(m);g+1<d&&(u=o.convert(c?o.toDomain(n[g+1]):n[g+1])+p),v.push({seriesDatum:{x:b,y:m},point:{x:C,y:S}}),void 0===m&&void 0!==l?(f.push({seriesDatum:void 0,point:{x:l,y:y}}),void 0!==u&&f.push({seriesDatum:void 0,point:{x:u,y:y}})):void 0!==m&&(f.push({seriesDatum:{x:b,y:m},point:{x:C,y:S}}),h.push({seriesDatum:{x:b,y:m},point:{x:C,y:S}}),a=void 0!==a?a:C,s=C),l=C}return f.push({seriesDatum:void 0,point:{x:s,y:y}},{seriesDatum:void 0,point:{x:a,y:y}}),{nodeData:h,fillData:f,strokeData:v}}},e.prototype.updateAxisLine=function(){var t=this,e=t.xScale,r=t.yScale,n=t.axis,o=t.xAxisLine;o.x1=e.range[0],o.x2=e.range[1],o.y1=o.y2=0,o.stroke=n.stroke,o.strokeWidth=n.strokeWidth;var i=r.convert(0);o.translationY=i},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this,r=e.highlightedDatum,n=e.highlightStyle,o=e.marker,i=n.size,a=n.fill,s=n.stroke,l=n.strokeWidth,u=o.formatter;this.markerSelection.each((function(e,n,c){var p=n.point,d=n.seriesDatum;if(p){var h,f=n===r,v=f&&void 0!==a?a:o.fill,y=f&&void 0!==s?s:o.stroke,g=f&&void 0!==l?l:o.strokeWidth,m=f&&void 0!==i?i:o.size;if(u){var b=0===c,C=c===t.markerSelectionData.length-1,S=d.y===t.min,w=d.y===t.max;h=u({datum:n,xValue:d.x,yValue:d.y,min:S,max:w,first:b,last:C,fill:v,stroke:y,strokeWidth:g,size:m,highlighted:f})}e.size=h&&void 0!=h.size?h.size:m,e.fill=h&&void 0!=h.fill?h.fill:v,e.stroke=h&&void 0!=h.stroke?h.stroke:y,e.strokeWidth=h&&void 0!=h.strokeWidth?h.strokeWidth:g,e.translationX=p.x,e.translationY=p.y,e.visible=h&&void 0!=h.enabled?h.enabled:o.enabled&&e.size>0}}))},e.prototype.updateStroke=function(t){var e=this,r=e.strokePath,n=e.yData,o=e.line;if(!(n.length<2)){var i=r.path,a=t.length,s=!0;i.clear();for(var l=0;l<a;l++){var u=t[l],c=u.point,p=u.seriesDatum,d=c.x,h=c.y;void 0==p.y?s=!0:s?(i.moveTo(d,h),s=!1):i.lineTo(d,h)}r.lineJoin=r.lineCap="round",r.fill=void 0,r.stroke=o.stroke,r.strokeWidth=o.strokeWidth}},e.prototype.updateFill=function(t){var e=this,r=e.fillPath,n=e.yData,o=e.fill,i=r.path,a=t.length;if(i.clear(),!(n.length<2)){for(var s=0;s<a;s++){var l=t[s].point,u=l.x,c=l.y;s>0?i.lineTo(u,c):i.moveTo(u,c)}i.closePath(),r.lineJoin="round",r.stroke=void 0,r.fill=o}},e.prototype.updateXCrosshairLine=function(){var t,e=this,r=e.yScale,n=e.xCrosshairLine,o=e.highlightedDatum,i=e.crosshairs.xLine;if(i.enabled&&void 0!=o){n.y1=r.range[0],n.y2=r.range[1],n.x1=n.x2=0,n.stroke=i.stroke,n.strokeWidth=null!==(t=i.strokeWidth)&&void 0!==t?t:1,n.lineCap="round"===i.lineCap||"square"===i.lineCap?i.lineCap:void 0;var a=i.lineDash;n.lineDash=Array.isArray(a)?a:qk(n.lineCap,i.lineDash),n.translationX=o.point.x}else n.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this,r=e.xScale,n=e.yCrosshairLine,o=e.highlightedDatum,i=e.crosshairs.yLine;if(i.enabled&&void 0!=o){n.x1=r.range[0],n.x2=r.range[1],n.y1=n.y2=0,n.stroke=i.stroke,n.strokeWidth=null!==(t=i.strokeWidth)&&void 0!==t?t:1,n.lineCap="round"===i.lineCap||"square"===i.lineCap?i.lineCap:void 0;var a=i.lineDash;n.lineDash=Array.isArray(a)?a:qk(n.lineCap,i.lineDash),n.translationY=o.point.y}else n.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,r,n=this.dataType,o=t.seriesDatum,i=o.y,a=o.x,s=this.formatNumericDatum(i),l="array"===n||"object"===n?this.formatDatum(a):void 0,u={content:s,title:l},c=null===(r=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===r?void 0:r.renderer;return c?Kk(c({context:this.context,datum:o,yValue:i,xValue:a}),u):Kk(u)},e.className="AreaSparkline",e}(Wk),iF=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aF=uy,sF=Zf,lF=function(){function t(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}return t}(),uF=function(){function t(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}return t}(),cF=function(){function t(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}return t}(),pF=function(t){function e(){var e=t.call(this)||this;return e.linePath=new Dh,e.xCrosshairLine=new $f,e.yCrosshairLine=new $f,e.lineSparklineGroup=new yl,e.markers=new yl,e.markerSelection=hh.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new lF,e.line=new uF,e.crosshairs=new cF,e.rootGroup.append(e.lineSparklineGroup),e.linePath.zIndex=I_.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=I_.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=I_.CROSSHAIR_ZINDEX,e.markers.zIndex=I_.SERIES_MARKERS_ZINDEX,e.lineSparklineGroup.append([e.linePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return iF(e,t),e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.markerFactory=function(){var t=this.marker.shape,e=Yk(t);return new e},e.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()},e.prototype.update=function(){var t=this.generateNodeData();t&&(this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateLine())},e.prototype.updateYScaleDomain=function(){var t=this,e=t.yData,r=t.yScale,n=aF(e),o=0,i=1;if(void 0!==n&&(o=this.min=n[0],i=this.max=n[1]),o===i){var a=Math.abs(.01*o);o-=a,i+=a}r.domain=[o,i]},e.prototype.generateNodeData=function(){var t=this,e=t.data,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale;if(e){for(var a=!(o instanceof sF),s=a?0:o.bandwidth/2,l=[],u=0;u<r.length;u++){var c=r[u],p=n[u];if(void 0!=c){var d=o.convert(a?o.toDomain(p):p)+s,h=void 0===c?NaN:i.convert(c);l.push({seriesDatum:{x:p,y:c},point:{x:d,y:h}})}}return l}},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this,r=e.highlightedDatum,n=e.highlightStyle,o=e.marker,i=n.size,a=n.fill,s=n.stroke,l=n.strokeWidth,u=o.formatter;this.markerSelection.each((function(e,n,c){var p,d=n===r,h=d&&void 0!==a?a:o.fill,f=d&&void 0!==s?s:o.stroke,v=d&&void 0!==l?l:o.strokeWidth,y=d&&void 0!==i?i:o.size,g=n.seriesDatum,m=n.point;if(u){var b=0===c,C=c===t.markerSelectionData.length-1,S=g.y===t.min,w=g.y===t.max;p=u({datum:n,xValue:g.x,yValue:g.y,min:S,max:w,first:b,last:C,fill:h,stroke:f,strokeWidth:v,size:y,highlighted:d})}e.size=p&&void 0!=p.size?p.size:y,e.fill=p&&void 0!=p.fill?p.fill:h,e.stroke=p&&void 0!=p.stroke?p.stroke:f,e.strokeWidth=p&&void 0!=p.strokeWidth?p.strokeWidth:v,e.translationX=m.x,e.translationY=m.y,e.visible=p&&void 0!=p.enabled?p.enabled:o.enabled&&e.size>0}))},e.prototype.updateLine=function(){var t=this,e=t.linePath,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale,a=t.line;if(!(r.length<2)){var s=!(o instanceof sF),l=e.path,u=r.length,c=s?0:o.bandwidth/2,p=!0;l.clear();for(var d=0;d<u;d++){var h=n[d],f=r[d],v=o.convert(s?o.toDomain(h):h)+c,y=void 0===f?NaN:i.convert(f);void 0==f?p=!0:p?(l.moveTo(v,y),p=!1):l.lineTo(v,y)}e.fill=void 0,e.stroke=a.stroke,e.strokeWidth=a.strokeWidth}},e.prototype.updateXCrosshairLine=function(){var t,e=this,r=e.yScale,n=e.xCrosshairLine,o=e.highlightedDatum,i=e.crosshairs.xLine;if(i.enabled&&void 0!=o){n.y1=r.range[0],n.y2=r.range[1],n.x1=n.x2=0,n.stroke=i.stroke,n.strokeWidth=null!==(t=i.strokeWidth)&&void 0!==t?t:1,n.lineCap="round"===i.lineCap||"square"===i.lineCap?i.lineCap:void 0;var a=i.lineDash;n.lineDash=Array.isArray(a)?a:qk(n.lineCap,i.lineDash),n.translationX=o.point.x}else n.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this,r=e.xScale,n=e.yCrosshairLine,o=e.highlightedDatum,i=e.crosshairs.yLine;if(i.enabled&&void 0!=o){n.x1=r.range[0],n.x2=r.range[1],n.y1=n.y2=0,n.stroke=i.stroke,n.strokeWidth=null!==(t=i.strokeWidth)&&void 0!==t?t:1,n.lineCap="round"===i.lineCap||"square"===i.lineCap?i.lineCap:void 0;var a=i.lineDash;n.lineDash=Array.isArray(a)?a:qk(n.lineCap,i.lineDash),n.translationY=o.point.y}else n.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,r,n=this.dataType,o=t.seriesDatum,i=o.y,a=o.x,s=this.formatNumericDatum(i),l="array"===n||"object"===n?this.formatDatum(a):void 0,u={content:s,title:l},c=null===(r=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===r?void 0:r.renderer;return c?Kk(c({context:this.context,datum:o,yValue:i,xValue:a}),u):Kk(u)},e.className="LineSparkline",e}(Wk),dF=function(){function t(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}return t}(),hF=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fF=uy;(function(t){t[t["Rect"]=0]="Rect",t[t["Label"]=1]="Label"})(Zk||(Zk={})),function(t){t["InsideBase"]="insideBase",t["InsideEnd"]="insideEnd",t["Center"]="center",t["OutsideEnd"]="outsideEnd"}(Jk||(Jk={}));var vF=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e.placement=Jk.InsideEnd,e}return hF(e,t),e}(dF),yF=function(t){function e(){var e=t.call(this)||this;return e.fill="rgb(124, 181, 236)",e.stroke="silver",e.strokeWidth=0,e.paddingInner=.1,e.paddingOuter=.2,e.valueAxisDomain=void 0,e.formatter=void 0,e.axisLine=new $f,e.bandWidth=0,e.sparklineGroup=new yl,e.rectGroup=new yl,e.labelGroup=new yl,e.rectSelection=hh.select(e.rectGroup,dC),e.labelSelection=hh.select(e.labelGroup,zl),e.nodeSelectionData=[],e.label=new vF,e.rootGroup.append(e.sparklineGroup),e.rectGroup.zIndex=I_.SERIES_FILL_ZINDEX,e.axisLine.zIndex=I_.AXIS_LINE_ZINDEX,e.labelGroup.zIndex=I_.SERIES_LABEL_ZINDEX,e.sparklineGroup.append([e.rectGroup,e.axisLine,e.labelGroup]),e.axisLine.lineCap="round",e.label.enabled=!1,e}return hF(e,t),e.prototype.getNodeData=function(){return this.nodeSelectionData},e.prototype.update=function(){this.updateSelections(),this.updateNodes()},e.prototype.updateSelections=function(){var t=this.generateNodeData();t&&(this.nodeSelectionData=t,this.updateRectSelection(t),this.updateLabelSelection(t))},e.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},e.prototype.calculateStep=function(t){var e,r=this,n=r.xScale,o=r.paddingInner,i=r.paddingOuter,a=r.smallestInterval,s=n.domain[1]-n.domain[0],l=s/(null!==(e=null===a||void 0===a?void 0:a.x)&&void 0!==e?e:1)+1,u=50,c=Math.min(l,u),p=c-1,d=t/Math.max(1,2*i+p*o+c);return d},e.prototype.updateYScaleDomain=function(){var t=this,e=t.yScale,r=t.yData,n=t.valueAxisDomain,o=fF(r),i=0,a=1;void 0!==o&&(i=this.min=o[0],a=this.max=o[1]),i=i<0?i:0,a=a<0?0:a,n&&(n[1]<a&&(n[1]=a),n[0]>i&&(n[0]=i)),e.domain=n||[i,a]},e.prototype.updateRectSelection=function(t){this.rectSelection.update(t)},e.prototype.updateRectNodes=function(){var t=this,e=this,r=e.highlightedDatum,n=e.formatter,o=e.fill,i=e.stroke,a=e.strokeWidth,s=this.highlightStyle,l=s.fill,u=s.stroke,c=s.strokeWidth;this.rectSelection.each((function(e,s,p){var d,h=s===r,f=h&&void 0!==l?l:o,v=h&&void 0!==u?u:i,y=h&&void 0!==c?c:a,g=s.x,m=s.y,b=s.width,C=s.height,S=s.seriesDatum;if(n){var w=0===p,x=p===t.nodeSelectionData.length-1,O=S.y===t.min,E=S.y===t.max;d=n({datum:s,xValue:S.x,yValue:S.y,width:b,height:C,min:O,max:E,first:w,last:x,fill:f,stroke:v,strokeWidth:y,highlighted:h})}e.fill=d&&d.fill||f,e.stroke=d&&d.stroke||v,e.strokeWidth=d&&d.strokeWidth||y,e.x=e.y=0,e.width=b,e.height=C,e.visible=e.height>0,e.translationX=g,e.translationY=m}))},e.prototype.updateLabelSelection=function(t){this.labelSelection.update(t,(function(t){t.tag=Zk.Label,t.pointerEvents=Xs.None}))},e.prototype.updateLabelNodes=function(){var t=this.label,e=t.enabled,r=t.fontStyle,n=t.fontWeight,o=t.fontSize,i=t.fontFamily,a=t.color;this.labelSelection.each((function(t,s){var l=s.label;l&&e?(t.fontStyle=r,t.fontWeight=n,t.fontSize=o,t.fontFamily=i,t.textAlign=l.textAlign,t.textBaseline=l.textBaseline,t.text=l.text,t.x=l.x,t.y=l.y,t.fill=a,t.visible=!0):t.visible=!1}))},e.prototype.getTooltipHtml=function(t){var e,r,n=this.dataType,o=t.seriesDatum,i=o.y,a=o.x,s=this.formatNumericDatum(i),l="array"===n||"object"===n?this.formatDatum(a):void 0,u={content:s,title:l},c=null===(r=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===r?void 0:r.renderer;return c?Kk(c({context:this.context,datum:o,yValue:i,xValue:a}),u):Kk(u)},e.prototype.formatLabelValue=function(t){return t%1!==0?t.toFixed(1):t.toFixed(0)},e}(Wk),gF=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mF=ou,bF=Zf,CF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gF(e,t),e.prototype.updateYScaleRange=function(){var t=this,e=t.seriesRect,r=t.yScale;r.range=[0,e.width]},e.prototype.updateXScaleRange=function(){var t=this,e=t.xScale,r=t.seriesRect,n=t.paddingOuter,o=t.paddingInner;if(e instanceof bF)e.range=[0,r.height],e.paddingInner=o,e.paddingOuter=n;else{var i=this.calculateStep(r.height),a=i*n;this.bandWidth=i*(1-o),e.range=[a,r.height-a-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this,e=t.yScale,r=t.axis,n=t.axisLine,o=t.seriesRect,i=r.strokeWidth;n.x1=0,n.x2=0,n.y1=0,n.y2=o.height,n.stroke=r.stroke,n.strokeWidth=i+(i%2===1?1:0);var a=e.convert(0);n.translationX=a},e.prototype.generateNodeData=function(){var t=this,e=t.data,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale,a=t.fill,s=t.stroke,l=t.strokeWidth,u=t.label;if(e){for(var c=u.fontStyle,p=u.fontWeight,d=u.fontSize,h=u.fontFamily,f=u.color,v=u.formatter,y=u.placement,g=[],m=i.convert(0),b=!(o instanceof bF),C=0,S=r.length;C<S;C++){var w=r[C],x=n[C],O=void 0===w;O&&(w=0);var E=o.convert(b?o.toDomain(x):x),T=Math.min(void 0===w?NaN:i.convert(w),m),P=Math.max(void 0===w?NaN:i.convert(w),m),D=b?this.bandWidth:o.bandwidth,A=P-T,M={x:m,y:E},R=void 0;R=v?v({value:w}):void 0!==w&&mF(w)?this.formatLabelValue(w):"";var _=E+D/2,k=void 0,F="middle",I=void 0,L=void 0!==w&&w>=0,N=4;if(y===Jk.Center)k=T+A/2,I="center";else if(y===Jk.OutsideEnd)k=T+(L?A+N:-N),I=L?"start":"end";else if(y===Jk.InsideEnd){k=T+(L?A-N:N),I=L?"end":"start";var G=ks.getTextSize(R,h),j=G.width||20,B=m+j,V=m-j,H=L&&k<B||!L&&k>V;H&&(k=m+N*(L?1:-1),I=L?"start":"end")}else k=m+N*(L?1:-1),I=L?"start":"end";g.push({x:T,y:E,width:A,height:D,fill:a,stroke:s,strokeWidth:l,seriesDatum:{x:x,y:O?void 0:w},point:M,label:{x:k,y:_,text:R,fontStyle:c,fontWeight:p,fontSize:d,fontFamily:h,textAlign:I,textBaseline:F,fill:f}})}return g}},e.prototype.getDistance=function(t,e){return Math.abs(t.y-e.y)},e.className="BarSparkline",e}(yF),SF=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wF=ou,xF=Zf,OF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return SF(e,t),e.prototype.updateYScaleRange=function(){var t=this,e=t.seriesRect,r=t.yScale;r.range=[e.height,0]},e.prototype.updateXScaleRange=function(){var t=this,e=t.xScale,r=t.seriesRect,n=t.paddingOuter,o=t.paddingInner;if(e instanceof xF)e.range=[0,r.width],e.paddingInner=o,e.paddingOuter=n;else{var i=this.calculateStep(r.width),a=i*n;this.bandWidth=i*(1-o),e.range=[a,r.width-a-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this,e=t.yScale,r=t.axis,n=t.axisLine,o=t.seriesRect,i=r.strokeWidth;n.x1=0,n.x2=o.width,n.y1=0,n.y2=0,n.stroke=r.stroke,n.strokeWidth=i+(i%2===1?1:0);var a=e.convert(0);n.translationY=a},e.prototype.generateNodeData=function(){var t=this,e=t.data,r=t.yData,n=t.xData,o=t.xScale,i=t.yScale,a=t.fill,s=t.stroke,l=t.strokeWidth,u=t.label;if(e){for(var c=u.fontStyle,p=u.fontWeight,d=u.fontSize,h=u.fontFamily,f=u.color,v=u.formatter,y=u.placement,g=[],m=i.convert(0),b=!(o instanceof xF),C=0,S=r.length;C<S;C++){var w=r[C],x=n[C],O=void 0===w;O&&(w=0);var E=Math.min(void 0===w?NaN:i.convert(w),m),T=o.convert(b?o.toDomain(x):x),P=Math.max(void 0===w?NaN:i.convert(w),m),D=b?this.bandWidth:o.bandwidth,A=P-E,M={x:T+D/2,y:m},R=void 0;R=v?v({value:w}):void 0!==w&&wF(w)?this.formatLabelValue(w):"";var _=T+D/2,k=void 0,F="center",I=void 0,L=void 0!==w&&w>=0,N=2;if(y===Jk.Center)k=E+A/2,I="middle";else if(y===Jk.OutsideEnd)k=E+(L?-N:A+N),I=L?"bottom":"top";else if(y===Jk.InsideEnd){k=E+(L?N:A-N),I=L?"top":"bottom";var G=ks.getTextSize(R,h),j=G.height||10,B=m-j,V=m+j,H=L&&k>B||!L&&k<V;H&&(k=m+N*(L?-1:1),I=L?"bottom":"top")}else k=m+N*(L?-1:1),I=L?"bottom":"top";g.push({x:T,y:E,width:D,height:A,fill:a,stroke:s,strokeWidth:l,seriesDatum:{x:x,y:O?void 0:w},point:M,label:{x:_,y:k,text:R,fontStyle:c,fontWeight:p,fontSize:d,fontFamily:h,textAlign:F,textBaseline:I,fill:f}})}return g}},e.className="ColumnSparkline",e}(yF),EF=ou,TF=function(){function t(){}return t.create=function(t,e){t=od([t]);var r=PF(t.type);return e&&(r.tooltip=e),AF(r,t),DF(r,t),t.data&&(r.data=t.data),r.processedOptions=t,r},t}();function PF(t){switch(void 0===t&&(t="line"),t){case"column":return new OF;case"bar":return new CF;case"area":return new oF;case"line":default:return new pF}}function DF(t,e){switch(e.type){case"bar":_F(t,e);break;case"column":_F(t,e);break;case"area":RF(t,e);break;case"line":default:MF(t,e);break}}function AF(t,e){WF(t,"context",e.context,e),WF(t,"width",e.width,e),WF(t,"height",e.height,e),WF(t,"container",e.container,e),WF(t,"xKey",e.xKey,e),WF(t,"yKey",e.yKey,e),e.padding&&kF(t.padding,e.padding),e.axis&&NF(t.axis,e.axis),e.highlightStyle&&GF(t.highlightStyle,e.highlightStyle)}function MF(t,e){e.marker&&FF(t.marker,e.marker),e.line&&LF(t.line,e.line),e.crosshairs&&jF(t.crosshairs,e.crosshairs)}function RF(t,e){WF(t,"fill",e.fill,e),e.marker&&FF(t.marker,e.marker),e.line&&LF(t.line,e.line),e.crosshairs&&jF(t.crosshairs,e.crosshairs)}function _F(t,e){WF(t,"valueAxisDomain",e.valueAxisDomain,e),WF(t,"fill",e.fill,e),WF(t,"stroke",e.stroke,e),WF(t,"strokeWidth",e.strokeWidth,e),WF(t,"paddingInner",e.paddingInner,e),WF(t,"paddingOuter",e.paddingOuter,e),WF(t,"formatter",e.formatter,e),e.label&&IF(t.label,e.label)}function kF(t,e){WF(t,"top",e.top,e),WF(t,"right",e.right,e),WF(t,"bottom",e.bottom,e),WF(t,"left",e.left,e)}function FF(t,e){WF(t,"enabled",e.enabled,e),WF(t,"size",e.size,e),WF(t,"shape",e.shape,e),WF(t,"fill",e.fill,e),WF(t,"stroke",e.stroke,e),WF(t,"strokeWidth",e.strokeWidth,e),WF(t,"formatter",e.formatter,e)}function IF(t,e){WF(t,"enabled",e.enabled,e),WF(t,"fontStyle",e.fontStyle,e),WF(t,"fontWeight",e.fontWeight,e),WF(t,"fontSize",e.fontSize,e),WF(t,"fontFamily",e.fontFamily,e),WF(t,"textAlign",e.textAlign,e),WF(t,"textBaseline",e.textBaseline,e),WF(t,"color",e.color,e),WF(t,"formatter",e.formatter,e),WF(t,"placement",e.placement,e)}function LF(t,e){WF(t,"stroke",e.stroke,e),WF(t,"strokeWidth",e.strokeWidth,e)}function NF(t,e){WF(t,"type",e.type,e),WF(t,"stroke",e.stroke,e),WF(t,"strokeWidth",e.strokeWidth,e)}function GF(t,e){WF(t,"fill",e.fill,e),WF(t,"size",e.size,e),WF(t,"stroke",e.stroke,e),WF(t,"strokeWidth",e.strokeWidth,e)}function jF(t,e){t.xLine&&e.xLine&&BF(t.xLine,e.xLine),t.yLine&&e.yLine&&BF(t.yLine,e.yLine)}function BF(t,e){WF(t,"enabled",e.enabled,e),WF(t,"stroke",e.stroke,e),WF(t,"strokeWidth",e.strokeWidth,e),WF(t,"lineDash",e.lineDash,e),WF(t,"lineCap",e.lineCap,e)}var VF={};function HF(t,e){VF[e]||(t(),VF[e]=!0)}var zF=function(t,e,r){if(EF(e))return!0;var n="AG Charts: "+t+" must be a number, the value you provided is not a valid number. Using the default of "+r+"px.";return HF((function(){return console.warn(n)}),t+" not a number"),!1},UF={xOffset:zF,yOffset:zF};function WF(t,e,r,n){if(e in n)if(e in t){var o=UF[e],i=!o||o(e,r,t[e]);i&&t[e]!==r&&(t[e]=r)}else console.warn("Property "+e+" does not exist on the target object.")}var KF=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),XF=function(){return XF=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},XF.apply(this,arguments)},YF=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},qF=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return KF(e,t),e.prototype.init=function(t){var e=this,r=!0,n=function(){var n=e.getGui(),o=n.clientWidth,i=n.clientHeight;if(0!==o&&0!==i)if(r){var a=XF({data:t.value,width:o,height:i,context:{data:t.data}},t.sparklineOptions);e.sparkline=TF.create(a,e.sparklineTooltipSingleton.getSparklineTooltip()),e.eSparkline.appendChild(e.sparkline.canvasElement),r=!1}else e.sparkline.width=o,e.sparkline.height=i},o=this.resizeObserverService.observeResize(this.getGui(),n);this.addDestroyFunc((function(){return o()}))},e.prototype.refresh=function(t){return!!this.sparkline&&(this.sparkline.data=t.value,!0)},e.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>',YF([Object(a["kb"])("eSparkline")],e.prototype,"eSparkline",void 0),YF([Object(a["u"])("resizeObserverService")],e.prototype,"resizeObserverService",void 0),YF([Object(a["u"])("sparklineTooltipSingleton")],e.prototype,"sparklineTooltipSingleton",void 0),e}(a["H"]),ZF=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),JF=function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},QF=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ZF(e,t),e.prototype.postConstruct=function(){this.tooltip=new Xk},e.prototype.getSparklineTooltip=function(){return this.tooltip},e.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},JF([a["fb"]],e.prototype,"postConstruct",null),JF([a["hb"]],e.prototype,"destroyTooltip",null),e=JF([Object(a["y"])("sparklineTooltipSingleton")],e),e}(a["z"]),$F="30.2.1",tI={version:$F,moduleName:a["Z"].SparklinesModule,beans:[QF],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:qF}],dependantModules:[b]};const eI=[Vt,$t,hn,ba,Na,mM,PM,JM,sR,eM,pR,Mr,x_,Q_,un,Ok,Rk,tI];a["s"].concat(eI);a["ab"].registerModules(eI);var rI=r("401b");f.setLicenseKey("CompanyName=Suzhou ruhlamat Smart Technologies Co., Ltd.,LicensedApplication=Infinity,LicenseType=SingleApplication,LicensedConcurrentDeveloperCount=1,LicensedProductionInstancesCount=30,AssetReference=AG-030422,SupportServicesEnd=30_August_2023_[v2]_MTY5MzM1MDAwMDAwMA==28423dd515d527503fc5a257dc86a8ac");var nI={components:{AgGridVue:rI["AgGridVue"]},data(){return{columnDefs:[{field:"name"},{field:"desc"},{field:"number",cellClass:"stringType"},{field:"text",cellClass:"stringType"}],excelStyles:[{id:"stringType",dataType:"String"}],rowData:[{name:"一般整数",desc:"",number:72e3,text:"带中文数字123456789012334243433"},{name:"测试带小数位",desc:"",number:35000.231231231,text:""},{name:"带.00小数",desc:"",number:32e3,text:"engnumber12345678901234567890"},{name:"测试长整数",desc:"16位",number:0x462d53c8abac0,text:"1234567890123456"},{name:"极限-整数",desc:"16位",number:-9007199254740992,text:"-9007199254740992"},{name:"极限整数",desc:"16位",number:9007199254740992,text:"9007199254740992"},{name:"极限整数+1",desc:"16位",number:9007199254740992,text:"9007199254740993"},{name:"测试长整数",desc:"17位",number:0x2bdc545d6b4b88,text:"12345678901234567"},{name:"测试长整数",desc:"18位",number:0x1b69b4ba630f350,text:"123456789012345678"},{name:"测试长整数",desc:"19位",number:0x112210f47de98100,text:"12345678901234567890"},{name:"测试长整数",desc:"20位",number:0xab54a98ceb1f0800,text:"12345678901234567890"},{name:"测试长整数",desc:"21位",number:0x6b14e9f812f368000,text:"123456789012345678901"},{name:"测试长整数",desc:"30位",number:12345678901234568e13,text:"123456789012345678901234567890"}],gridOptions:{defaultColDef:{sortable:!0,filter:!0,resizable:!0}}}},methods:{onFirstDataRendered(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi},exportToExcel(){this.gridApi.exportDataAsExcel()},exportToCsv(){this.gridApi.exportDataAsCsv()}}},oI=nI,iI=(r("6597"),r("2be6")),aI=Object(iI["a"])(oI,o,i,!1,null,"596a9532",null);e["default"]=aI.exports},cb16:function(t,e,r){}}]);
//# sourceMappingURL=aggridexport.dd05fefc.js.map